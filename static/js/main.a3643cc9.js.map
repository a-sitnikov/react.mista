{"version":3,"file":"static/js/main.a3643cc9.js","mappings":"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","sources":["components/common/search.tsx","utils.ts","api/api-utils.ts","api/cookies.ts","api/login.ts","api/new_message.ts","api/newtopic.ts","api/sections.ts","api/topic_info.ts","api/topic_messages.ts","api/topics_list.ts","api/index.ts","store/slices/login.ts","store/slices/new_topic.ts","store/slices/options.ts","store/slices/sections.ts","store/slices/tooltips.ts","store/slices/topic.ts","store/slices/topics_list.ts","store/slices/new_message.ts","store/root.ts","store/hooks.ts","components/navigation/nav_bar.tsx","components/login/logged_user.tsx","components/login/login_form.tsx","components/common/error.tsx","components/login/index.tsx","pages/topics_list/sections.tsx","pages/topics_list/header.tsx","pages/topics_list/table_header.tsx","pages/topics_list/row/pages.tsx","pages/topics_list/row/topic_name_cell.tsx","pages/topics_list/row/preview_link.tsx","pages/topics_list/row/index.tsx","components/common/pages.tsx","components/common/text_editor.tsx","pages/topics_list/new_topic.tsx","components/preview/preview_buttons.tsx","components/extensions/code_highlight.ts","pages/topic/index.tsx","components/extensions/code1c.tsx","components/extensions/link_to_post.tsx","components/extensions/link_to_user.tsx","components/extensions/youtube_link.tsx","components/extensions/custom_link.tsx","pages/topic/row/vote_item.tsx","pages/topic/row/vote_chart.tsx","pages/topic/row/vote.tsx","pages/topic/row/msg_text.tsx","pages/topic/row/user_info.tsx","components/preview/preview_content.tsx","components/preview/topic_preview.tsx","pages/topics_list/index.tsx","pages/topic/header.tsx","pages/topic/topic_info.tsx","pages/topic/row/index.tsx","pages/topic/footer.tsx","pages/topic/new_message.tsx","pages/options/radio_option.tsx","pages/options/string_option.tsx","pages/options/formscheme.ts","pages/options/tab.tsx","pages/options/index.tsx","pages/approutes.tsx","components/navigation/nav_bar_footer.tsx","components/tooltips/tooltip_header.tsx","components/tooltips/tooltip_body.tsx","components/tooltips/tooltip_window.tsx","components/tooltips/tooltip.tsx","components/tooltips/tooltips_container.tsx","App.tsx","index.tsx","../webpack/bootstrap","../webpack/runtime/chunk loaded","../webpack/runtime/compat get default export","../webpack/runtime/create fake namespace object","../webpack/runtime/define property getters","../webpack/runtime/global","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object","../webpack/runtime/jsonp chunk loading","../webpack/startup"],"sourcesContent":["import { useCallback, useState } from \"react\";\r\nimport InputGroup from \"react-bootstrap/InputGroup\";\r\nimport FormControl from \"react-bootstrap/FormControl\";\r\nimport Dropdown from \"react-bootstrap/Dropdown\";\r\nimport DropdownButton from \"react-bootstrap/DropdownButton\";\r\n\r\nimport \"./search.css\";\r\nimport { useEventCallback } from \"usehooks-ts\";\r\n\r\nconst Search = (): React.ReactElement => {\r\n  const [searchEngine, setSearchEngine] = useState(\"Яндекс\");\r\n  const [text, setText] = useState(\"\");\r\n\r\n  const handleTextChange = useCallback(\r\n    (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      setText(e.target.value);\r\n    },\r\n    []\r\n  );\r\n\r\n  const handleKeyDown = useEventCallback(\r\n    (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n      if (e.key === \"Enter\") {\r\n        doSearch();\r\n      }\r\n    }\r\n  );\r\n\r\n  const doSearch = useEventCallback(() => {\r\n    let url: string;\r\n    switch (searchEngine) {\r\n      case \"Яндекс\":\r\n        url = `https://www.yandex.ru/search/?text=${text}&site=forum.mista.ru`;\r\n        break;\r\n      case \"Google\":\r\n        url = `https://www.google.ru/search?q=${text}+site:forum.mista.ru`;\r\n        break;\r\n    }\r\n\r\n    window.open(url);\r\n    setText(\"\");\r\n  });\r\n\r\n  return (\r\n    <InputGroup size=\"sm\">\r\n      <DropdownButton\r\n        id=\"search-engine\"\r\n        title=\"\"\r\n        size=\"sm\"\r\n        variant=\"light\"\r\n        onSelect={setSearchEngine}\r\n      >\r\n        <Dropdown.Item eventKey=\"Яндекс\">Яндекс</Dropdown.Item>\r\n        <Dropdown.Item eventKey=\"Google\">Google</Dropdown.Item>\r\n      </DropdownButton>\r\n      <FormControl\r\n        type=\"text\"\r\n        placeholder={`${searchEngine}: поиск`}\r\n        className=\"search-input input\"\r\n        onKeyDown={handleKeyDown}\r\n        onChange={handleTextChange}\r\n        value={text}\r\n      />\r\n      <InputGroup.Text className=\"search-button\" onClick={doSearch}>\r\n        <i className=\"fa fa-search input\" style={{ zIndex: 1000 }} />\r\n      </InputGroup.Text>\r\n    </InputGroup>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n","import dayjs from \"dayjs\";\r\n\r\nexport const groupBy = <T, K extends keyof any>(\r\n  list: T[],\r\n  getKey: (item: T) => K\r\n) =>\r\n  list.reduce((previous, currentItem) => {\r\n    const group = getKey(currentItem);\r\n    if (!previous[group]) previous[group] = [];\r\n    previous[group].push(currentItem);\r\n    return previous;\r\n  }, {} as Record<K, T[]>);\r\n\r\nexport const parseJSON = (text: string): {} => {\r\n  try {\r\n    return JSON.parse(text);\r\n  } catch (e) {}\r\n\r\n  try {\r\n    text = text\r\n      .replace(/\\\\</g, \"<\")\r\n      .replace(/\\\\>/g, \">\")\r\n      .replace(/\\\\&/g, \"&\")\r\n      .replace(/\\\\'/g, \"'\")\r\n      .replace(/\\\\\"/g, \"\")\r\n      .replace(/ \"/g, ' \\\\\"')\r\n      .replace(/\"\"/g, '\\\\\"\"')\r\n      .replace(/\\t/g, \"\\\\t\")\r\n      .replace(/\"(\\.| |\\?)/g, '\\\\\"$1');\r\n\r\n    //           console.log(text);\r\n    return JSON.parse(text);\r\n\r\n    //return eval(text);\r\n  } catch (e) {\r\n    console.error(e.message);\r\n    console.log(text);\r\n\r\n    return {};\r\n  }\r\n};\r\n\r\nexport const getMaxPage = (count: number): number => {\r\n  if (count === -1) return -1;\r\n  return Math.min(Math.ceil(count / 100), 10) || 1;\r\n};\r\n\r\nexport const childrenToText = (children: any): string[] => {\r\n  if (!children) return [\"\"];\r\n\r\n  return children.map((value) => {\r\n    if (typeof value === \"string\") {\r\n      return value;\r\n    } else if (value.type === \"br\") {\r\n      return \"<br>\";\r\n    } else if (\r\n      value.type.displayName === \"Connect(LinkToPost)\" ||\r\n      value.type.displayName === \"Connect(t)\"\r\n    ) {\r\n      return value.props.number;\r\n    } else {\r\n      console.log(value);\r\n      return value;\r\n    }\r\n  });\r\n};\r\n\r\nexport const extractTextFromHTML = (htmltext: string): string => {\r\n  const parser = new DOMParser();\r\n  const floatingElement = parser.parseFromString(htmltext, \"text/html\");\r\n  return (floatingElement.firstChild as HTMLElement).innerText;\r\n};\r\n\r\nexport function isToday(td: Date | number): boolean {\r\n  return dayjs(td).isSame(new Date(), \"day\");\r\n}\r\n\r\nexport const formattedTime = (time: number): string => {\r\n  if (time === 2147483648000) return \"\";\r\n\r\n  if (isToday(time)) {\r\n    return dayjs(time).format(\"HH:mm\");\r\n  } else {\r\n    return dayjs(time).format(\"DD.MM.YY\");\r\n  }\r\n};\r\n","import fetchJsonp from \"fetch-jsonp\";\r\nimport * as utils from \"src/utils\";\r\nimport { domain } from \".\";\r\n\r\nexport const paramsToString = (paramsPrefix: string, params?: {}): string => {\r\n  if (!params) return \"\";\r\n\r\n  let searchParams = new URLSearchParams();\r\n  for (let key in params) {\r\n    const value = params[key];\r\n    if (value !== undefined) searchParams.append(key, value);\r\n  }\r\n\r\n  let str = searchParams.toString();\r\n  if (str.length > 0) return paramsPrefix + str;\r\n  else return \"\";\r\n};\r\n\r\nexport const fetchJsonpAndGetJson = async (\r\n  url: string,\r\n  params?: {},\r\n  options?: {}\r\n): Promise<any> => {\r\n  let fullUrl = `${domain}/${url}${paramsToString(\"?\", params)}`;\r\n  const response = await fetchJsonp(fullUrl);\r\n  let responseJson = await response.json();\r\n  let json;\r\n  if (typeof responseJson === \"string\") {\r\n    try {\r\n      json = JSON.parse(responseJson);\r\n    } catch (e) {\r\n      json = utils.parseJSON(responseJson);\r\n    }\r\n  } else {\r\n    json = responseJson;\r\n  }\r\n  return json;\r\n};\r\n\r\nexport const fetchAndGetJson = async (\r\n  url: string,\r\n  params?: {},\r\n  init?: RequestInit\r\n): Promise<any> => {\r\n  let fullUrl = `${domain}/${url}${paramsToString(\"?\", params)}`;\r\n\r\n  if (!init)\r\n    init = {\r\n      mode: \"cors\",\r\n      credentials: \"same-origin\",\r\n    };\r\n\r\n  const response = await fetch(fullUrl, init);\r\n  return await response.json();\r\n};\r\n","import { urlCookies } from \".\";\r\nimport { fetchJsonpAndGetJson } from \"./api-utils\";\r\nimport { ILogin } from \"src/store\";\r\n\r\ntype IAPIResponse = {\r\n  cookie: {\r\n    entr_id: string;\r\n    entr_key: string;\r\n    entr_hash: string;\r\n    musthave: string;\r\n    hotlog: string;\r\n  };\r\n  session: {\r\n    entered: number;\r\n    user_id: string;\r\n    user_name: string;\r\n    user_hash: string;\r\n    is_moderator: number;\r\n    light_moderator: number;\r\n    section: string;\r\n    show_moderator_tools: number;\r\n    kb: string;\r\n    registered_unixtime: string;\r\n    guid: string;\r\n    last_error?: string;\r\n    user: {\r\n      id: string;\r\n      name: string;\r\n      is_moderator: boolean;\r\n      light_moderator: boolean;\r\n      kb: boolean;\r\n      section_owner: boolean;\r\n      section: string;\r\n      registered_unixtime: string;\r\n      balance: number;\r\n    };\r\n  };\r\n};\r\n\r\nfunction convertResponse(response: IAPIResponse): ILogin {\r\n  const { session } = response;\r\n\r\n  return {\r\n    userId: Number(session?.user_id),\r\n    userName: session?.user_name,\r\n    userHash: session?.user_hash,\r\n    lastError: session?.last_error,\r\n  };\r\n}\r\n\r\nasync function fetchCookies(): Promise<ILogin | undefined> {\r\n  const response = await fetchJsonpAndGetJson(urlCookies);\r\n  return convertResponse(response);\r\n}\r\n\r\nexport { fetchCookies };\r\n","import { domain, urlLogin, urlLogout } from \".\";\r\nimport { paramsToString } from \"./api-utils\";\r\n\r\nexport interface ILoginRequest {\r\n  username: string;\r\n  password: string;\r\n}\r\n\r\nexport const fetchLogin = async (params: ILoginRequest): Promise<void> => {\r\n  await fetch(`${domain}/${urlLogin}`, {\r\n    method: \"POST\",\r\n    body: paramsToString(\"\", {\r\n      user_name: params.username,\r\n      user_password: params.password,\r\n    }),\r\n    mode: \"no-cors\",\r\n    credentials: \"include\",\r\n    headers: {\r\n      Accept: \"text/html,application/xhtml+xml,application/xml\",\r\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n    },\r\n    redirect: \"follow\",\r\n  });\r\n};\r\n\r\nexport const fetchLogout = async (): Promise<void> => {\r\n  const fullUrl = `${domain}/${urlLogout}`;\r\n  await fetch(fullUrl, {\r\n    mode: \"no-cors\",\r\n    credentials: \"include\",\r\n  });\r\n};\r\n","import { domain, urlNewMessage } from \".\";\r\nimport { paramsToString } from \"./api-utils\";\r\n\r\n// New message\r\nexport interface INewMessageRequest {\r\n  message_text: string;\r\n  action: \"new\";\r\n  topic_id: string;\r\n  rnd: number;\r\n  voting_select?: number;\r\n  as_admin?: boolean;\r\n}\r\n\r\nexport const fetchNewMessage = async (\r\n  params: INewMessageRequest\r\n): Promise<any> => {\r\n  const url = urlNewMessage.replace(\":id\", params.topic_id);\r\n\r\n  const options: RequestInit = {\r\n    method: \"POST\",\r\n    body: paramsToString(\"\", params),\r\n    mode: \"no-cors\",\r\n    credentials: \"include\",\r\n    headers: {\r\n      Accept: \"text/html,application/xhtml+xml,application/xml\",\r\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n    },\r\n    redirect: \"follow\",\r\n  };\r\n\r\n  const result = await fetch(`${domain}/${url}`, options);\r\n  return result;\r\n};\r\n","import { domain, urlNewTopic } from \".\";\r\nimport { paramsToString } from \"./api-utils\";\r\n\r\nexport interface INewTopicRequest {\r\n  action: \"new\";\r\n  rnd: number;\r\n  topic_text: string;\r\n  message_text: string;\r\n  target_section: string;\r\n  target_forum: string;\r\n  voting: number;\r\n  select1?: string;\r\n  select2?: string;\r\n  select3?: string;\r\n  select4?: string;\r\n  select5?: string;\r\n  select6?: string;\r\n  select7?: string;\r\n  select8?: string;\r\n  select9?: string;\r\n  select10?: string;\r\n}\r\n\r\nexport const fetchNewTopic = async (params: INewTopicRequest): Promise<any> => {\r\n  await fetch(`${domain}/${urlNewTopic}`, {\r\n    method: \"POST\",\r\n    body: paramsToString(\"\", params),\r\n    mode: \"no-cors\",\r\n    credentials: \"include\",\r\n    headers: {\r\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n    },\r\n  });\r\n};\r\n","import { urlSections } from \".\";\r\nimport { fetchJsonpAndGetJson } from \"./api-utils\";\r\nimport type { ISectionItem } from \"src/store\";\r\n\r\ninterface IAPIResponse {\r\n  id: number;\r\n  forum: string;\r\n  shortn: string;\r\n  fulln: string;\r\n}\r\n\r\nfunction convertResponse(response: IAPIResponse): ISectionItem {\r\n  return {\r\n    id: response.id,\r\n    forum: response.forum,\r\n    code: response.shortn,\r\n    name: response.fulln,\r\n  };\r\n}\r\n\r\nexport const fetchSections = async (): Promise<ISectionItem[]> => {\r\n  const list = await fetchJsonpAndGetJson(urlSections);\r\n  return list.map(convertResponse);\r\n};\r\n","import { urlTopicInfo } from \".\";\r\nimport { fetchAndGetJson } from \"./api-utils\";\r\nimport type { ITopicInfo } from \"src/store\";\r\n\r\ninterface IAPIResponse {\r\n  id: string;\r\n  text: string;\r\n  forum: string;\r\n  section: string;\r\n  created: string;\r\n  user_id: string;\r\n  user_name: string;\r\n  updated: string;\r\n  updated_name: string;\r\n  answers_count: string;\r\n  down: number;\r\n  closed: number;\r\n  deleted: number;\r\n  is_voting: number;\r\n  voting: {\r\n    select: string;\r\n    result: number;\r\n  }[];\r\n}\r\n\r\nfunction convertResponse(response: IAPIResponse): ITopicInfo {\r\n  let voting = [];\r\n  if (response.voting)\r\n    voting = response.voting.map((x) => ({\r\n      text: x.select,\r\n      count: x.result,\r\n    }));\r\n\r\n  return {\r\n    id: parseInt(response.id),\r\n    title: response.text,\r\n    forum: response.forum,\r\n    sectionId: response.section,\r\n    created: parseInt(response.created) * 1000,\r\n    authorId: response.user_id,\r\n    author: response.user_name,\r\n    updated: parseInt(response.updated) * 1000,\r\n    lastUser: response.updated_name,\r\n    count: parseInt(response.answers_count),\r\n    down: response.down,\r\n    closed: response.closed,\r\n    deleted: response.deleted,\r\n    isVoting: response.is_voting,\r\n    voting,\r\n  };\r\n}\r\n\r\nasync function fetchTopicInfo(id: number): Promise<ITopicInfo> {\r\n  const info = await fetchAndGetJson(urlTopicInfo, { id });\r\n  return convertResponse(info);\r\n}\r\n\r\nexport { fetchTopicInfo };\r\n","import { urlTopicMessages } from \".\";\r\nimport { fetchAndGetJson } from \"./api-utils\";\r\nimport type { ITopicMessage, ITopicMessagesList } from \"src/store\";\r\n\r\ninterface IAPIRequest {\r\n  id: number;\r\n  from?: number;\r\n  to?: number;\r\n}\r\n\r\nexport interface ITopicMessageRequest extends IAPIRequest {}\r\n\r\ninterface IAPIResponse {\r\n  id: string;\r\n  n: string;\r\n  user: string;\r\n  userId: string;\r\n  text: string;\r\n  utime: string;\r\n  vote: number;\r\n}\r\n\r\nfunction convertResponse(response: IAPIResponse): ITopicMessage {\r\n  return {\r\n    id: parseInt(response.id),\r\n    n: parseInt(response.n),\r\n    user: response.user,\r\n    userId: parseInt(response.userId),\r\n    text: response.text,\r\n    time: parseInt(response.utime) * 1000,\r\n    vote: response.vote,\r\n  };\r\n}\r\n\r\nasync function fetchTopicMessages(\r\n  params?: ITopicMessageRequest\r\n): Promise<ITopicMessagesList> {\r\n  const list = await fetchAndGetJson(urlTopicMessages, params);\r\n  return list.map(convertResponse);\r\n}\r\n\r\nasync function fetchTopicMessage(\r\n  id: number,\r\n  n: number\r\n): Promise<ITopicMessage> {\r\n  const to = n === 0 ? n + 1 : n;\r\n\r\n  const list = await fetchAndGetJson(urlTopicMessages, { id, from: n, to });\r\n  return list.map(convertResponse).find((item: ITopicMessage) => item.n === n);\r\n}\r\n\r\nexport { fetchTopicMessages, fetchTopicMessage };\r\n","import { urlTopicsList } from \".\";\r\nimport { fetchAndGetJson } from \"./api-utils\";\r\n\r\nimport type { ITopicsList, ITopicsListItem } from \"src/store\";\r\n\r\nexport interface ITopicsListRequest {\r\n  itemsPerPage?: number | null;\r\n  page?: number | null;\r\n  beforeTime?: string | null;\r\n  forum?: string | null;\r\n  section?: string | null;\r\n  userId?: string | null;\r\n  myTopics?: string | null;\r\n}\r\n\r\ninterface IAPIRequest {\r\n  topics?: string;\r\n  section_short_name?: string;\r\n  forum?: string;\r\n  user_id?: string;\r\n  mytopics?: string;\r\n}\r\n\r\ninterface IAPIResponse {\r\n  id: number;\r\n  forum: string;\r\n  sect1: string;\r\n  sect2: string;\r\n  v8: string;\r\n  closed: number;\r\n  down: number;\r\n  paid: number;\r\n  text: string;\r\n  message: string;\r\n  created: number;\r\n  utime: number;\r\n  user: string;\r\n  user0: string;\r\n  is_voting: number;\r\n  answ: number;\r\n}\r\n\r\nfunction convertRequest(request: ITopicsListRequest): IAPIRequest {\r\n  const page = request.page || 1;\r\n  const itemsCount = request.itemsPerPage * page;\r\n\r\n  return {\r\n    topics: String(itemsCount),\r\n    section_short_name: request.section,\r\n    forum: request.forum,\r\n    user_id: request.userId,\r\n    mytopics: request.myTopics,\r\n  };\r\n}\r\n\r\nfunction convertResponse(response: IAPIResponse): ITopicsListItem {\r\n  return {\r\n    id: response.id,\r\n    forum: response.forum,\r\n    section: response.sect1,\r\n    sectionCode: response.sect2,\r\n    author: response.user0,\r\n    lastUser: response.user,\r\n    created: response.created * 1000,\r\n    updated: response.utime * 1000,\r\n    count: response.answ,\r\n    text: response.text,\r\n    closed: response.closed === 1,\r\n    down: response.down === 1,\r\n    pinned: response.utime === 2147483648,\r\n    isVoting: response.is_voting === 1,\r\n    showPreview: false,\r\n  };\r\n}\r\n\r\nasync function fetchTopicsList(\r\n  params?: ITopicsListRequest\r\n): Promise<ITopicsList> {\r\n  const request = convertRequest(params);\r\n\r\n  const list = await fetchAndGetJson(urlTopicsList, request);\r\n  return list.map(convertResponse);\r\n}\r\n\r\nexport { fetchTopicsList };\r\n","export const domain: string =\r\n  localStorage.getItem(\"domain\") || \"https://dev.mista.ru\";\r\n//export const domain = 'https://dev.mista.ru';\r\nexport const urlTopicsList: string =\r\n  localStorage.getItem(\"urlTopicsList\") || \"api/topic.php\";\r\nexport const urlTopicInfo: string =\r\n  localStorage.getItem(\"urlTopicInfo\") || \"ajax_gettopic.php\";\r\nexport const urlTopicMessages: string =\r\n  localStorage.getItem(\"urlTopicMessages\") || \"api/message.php\";\r\nexport const urlLogin: string =\r\n  localStorage.getItem(\"urlLogin\") || \"users.php?action=do_enter\";\r\nexport const urlLogout: string =\r\n  localStorage.getItem(\"urlLogout\") || \"users.php?action=exit\";\r\nexport const urlCookies: string =\r\n  localStorage.getItem(\"urlCookies\") || \"ajax_cookie.php\";\r\nexport const urlSections: string =\r\n  localStorage.getItem(\"urlSections\") || \"ajax_getsectionslist.php\";\r\nexport const urlNewMessage: string =\r\n  localStorage.getItem(\"urlNewMessage\") || \"topic.php?id=:id&page=1\";\r\nexport const urlNewTopic: string =\r\n  localStorage.getItem(\"urlNewTopic\") || \"index.php\";\r\nexport const urlAddBookmark: string =\r\n  localStorage.getItem(\"urlAddBookmark\") || \"ajax_addbookmark.php\";\r\nexport const urlSearch: string =\r\n  localStorage.getItem(\"urlSearch\") || \"ajax_find.php\";\r\n\r\nexport * from \"./cookies\";\r\nexport * from \"./login\";\r\nexport * from \"./new_message\";\r\nexport * from \"./newtopic\";\r\nexport * from \"./sections\";\r\nexport * from \"./topic_info\";\r\nexport * from \"./topic_messages\";\r\nexport * from \"./topics_list\";\r\n","import { createSlice, createAsyncThunk, PayloadAction } from \"@reduxjs/toolkit\";\r\n\r\nimport { fetchLogin, fetchLogout, ILoginRequest } from \"src/api\";\r\nimport { fetchCookies } from \"src/api\";\r\n\r\nimport { RootState } from \"../types\";\r\n\r\nexport interface ILogin {\r\n  userId?: number;\r\n  userName?: string;\r\n  userHash?: string;\r\n  lastError?: string;\r\n}\r\n\r\nexport interface LoginState {\r\n  status: \"init\" | \"loading\" | \"success\" | \"error\";\r\n  logged: boolean;\r\n  userId?: number;\r\n  userName?: string;\r\n  userHash?: string;\r\n  lastError?: string;\r\n  error?: string;\r\n  lastUpdated?: number;\r\n  isFetching?: boolean;\r\n}\r\n\r\nconst initialState: LoginState = {\r\n  status: \"init\",\r\n  logged: false,\r\n};\r\n\r\nexport const checkLogin = createAsyncThunk(\"login/check\", async () => {\r\n  return await fetchCookies();\r\n});\r\n\r\nexport const doLogin = createAsyncThunk(\r\n  \"login/login\",\r\n  async (params: ILoginRequest, { dispatch }) => {\r\n    await fetchLogin(params);\r\n    return fetchCookies();\r\n  }\r\n);\r\n\r\nexport const doLogout = createAsyncThunk(\"login/logout\", async () => {\r\n  return await fetchLogout();\r\n});\r\n\r\nconst shouldLogin = ({ login }: RootState): boolean => {\r\n  if (!login) return true;\r\n  if (login.status === \"loading\") return false;\r\n\r\n  return true;\r\n};\r\n\r\nexport const doLoginIfNeeded =\r\n  (username: string, password: string): any =>\r\n  (dispatch: any, getState: any) => {\r\n    if (shouldLogin(getState())) {\r\n      return dispatch(doLogin({ username, password }));\r\n    }\r\n  };\r\n\r\nexport const checkLoginIfNeeded = (): any => (dispatch: any, getState: any) => {\r\n  if (shouldLogin(getState())) {\r\n    return dispatch(checkLogin());\r\n  }\r\n};\r\n\r\nconst slice = createSlice({\r\n  name: \"login\",\r\n  initialState,\r\n  reducers: {},\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(doLogin.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })\r\n      .addCase(\r\n        doLogin.fulfilled,\r\n        (state, { payload }: PayloadAction<ILogin>) => {\r\n          state.status = \"success\";\r\n          state.userId = payload.userId;\r\n          state.userName = payload.userName;\r\n          state.userHash = payload.userHash;\r\n          state.logged = true;\r\n          delete state.error;\r\n        }\r\n      )\r\n      .addCase(doLogin.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      })\r\n      // logout\r\n      .addCase(doLogout.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })\r\n      .addCase(doLogout.fulfilled, (state) => {\r\n        state.status = \"success\";\r\n        state.logged = false;\r\n\r\n        delete state.userId;\r\n        delete state.userName;\r\n        delete state.userHash;\r\n        delete state.error;\r\n      })\r\n      .addCase(doLogout.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      });\r\n  },\r\n});\r\n\r\nexport const { actions: loginActions, reducer: login } = slice;\r\n","import { createSlice, createAsyncThunk, PayloadAction } from \"@reduxjs/toolkit\";\r\n\r\nimport { ISectionItem } from \"./sections\";\r\nimport { fetchNewTopic, INewTopicRequest } from \"src/api\";\r\nimport { RootState } from \"../types\";\r\n\r\nexport type NewTopicState = {\r\n  status: \"init\" | \"loading\" | \"success\" | \"error\";\r\n  section: ISectionItem;\r\n  text: string;\r\n  subject: string;\r\n  forum: string;\r\n  isVoting: boolean;\r\n  error?: string;\r\n};\r\n\r\nconst initialState: NewTopicState = {\r\n  status: \"init\",\r\n  section: null,\r\n  text: \"\",\r\n  subject: \"\",\r\n  forum: \"1C\",\r\n  isVoting: false,\r\n};\r\n\r\nexport type postNewTopicParams = {\r\n  subject: string;\r\n  text: string;\r\n  section: number;\r\n  forum: string;\r\n  isVoting: boolean;\r\n  votingItems?: Array<string>;\r\n  onSuccess?: () => void;\r\n};\r\n\r\nexport const postNewTopic = createAsyncThunk(\r\n  \"newTopic/post\",\r\n  async (params: postNewTopicParams) => {\r\n    let fetchParams: INewTopicRequest = {\r\n      message_text: params.text,\r\n      topic_text: params.subject,\r\n      target_section: String(params.section),\r\n      target_forum: params.forum.toLowerCase(),\r\n      action: \"new\",\r\n      rnd: Math.round(Math.random() * 10000000000),\r\n      voting: params.isVoting ? 1 : 0,\r\n    };\r\n\r\n    if (params.votingItems)\r\n      for (let i = 0; i < params.votingItems.length; i++) {\r\n        fetchParams[`section${i + 1}`] = params.votingItems[i];\r\n      }\r\n\r\n    await fetchNewTopic(fetchParams);\r\n    // if (params.onSuccess)\r\n    // params.onSuccess();\r\n  }\r\n);\r\n\r\nexport const shouldPost = ({ newTopic }: RootState): boolean => {\r\n  if (!newTopic) return false;\r\n  if (newTopic.status === \"loading\") return false;\r\n\r\n  return true;\r\n};\r\n\r\nexport const postNewTopicIfNeeded =\r\n  (params: postNewTopicParams) => (dispatch: any, getState: any) => {\r\n    const state = getState();\r\n    if (shouldPost(state)) {\r\n      return dispatch(postNewTopic(params));\r\n    }\r\n  };\r\n\r\nconst clear = (state: NewTopicState) => {\r\n  state.status = \"init\";\r\n  state.text = \"\";\r\n  state.subject = \"\";\r\n  state.forum = \"\";\r\n  state.isVoting = false;\r\n};\r\n\r\nconst slice = createSlice({\r\n  name: \"newTopic\",\r\n  initialState,\r\n  reducers: {\r\n    clear,\r\n    changeSubject: (state, { payload }: PayloadAction<string>) => {\r\n      state.subject = payload;\r\n    },\r\n    changeText: (state, { payload }: PayloadAction<string>) => {\r\n      state.text = payload;\r\n    },\r\n    changeSection: (state, { payload }: PayloadAction<ISectionItem>) => {\r\n      state.section = payload;\r\n      state.forum = payload?.forum.toLowerCase();\r\n    },\r\n    showVoting: (state, { payload }: PayloadAction<boolean>) => {\r\n      state.isVoting = payload;\r\n    },\r\n    setError: (state, { payload }: PayloadAction<string>) => {\r\n      state.error = payload;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(postNewTopic.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })\r\n      .addCase(postNewTopic.fulfilled, (state) => {\r\n        clear(state);\r\n        delete state.error;\r\n      })\r\n      .addCase(postNewTopic.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      });\r\n  },\r\n});\r\n\r\nexport const { actions: newTopicActions, reducer: newTopic } = slice;\r\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\n\r\nexport interface IOptionsItems {\r\n  theme: \"yellow\" | \"lightgray\" | \"dark\";\r\n  topicsPerPage: string;\r\n  autoRefreshTopicsList: string;\r\n  autoRefreshTopicsListInterval: string;\r\n  autoRefreshTopic: string;\r\n  autoRefreshTopicInterval: string;\r\n  tooltipDelay: string;\r\n  showTooltips: string;\r\n  showTooltipOnPostLink: string;\r\n  showYoutubeVideoTitle: string;\r\n  replaceCatalogMista: string;\r\n  fixBrokenLinks: string;\r\n}\r\n\r\nexport interface OptionsState {\r\n  voteColors: Array<string>;\r\n  items: IOptionsItems;\r\n  show?: boolean;\r\n}\r\n\r\nexport const defaultOptionsState: OptionsState = {\r\n  voteColors: [\r\n    \"#FF1616\", //1\r\n    \"#1A861A\", //2\r\n    \"#0023FF\", //3\r\n    \"#FF6B18\", //4\r\n    \"#9B3A6E\", //5\r\n    \"#567655\", //6\r\n    \"#233345\", //7\r\n    \"#CC0000\", //8\r\n    \"#00CCCC\", //9\r\n    \"#0000CC\", //10\r\n  ],\r\n  items: {\r\n    theme: \"lightgray\",\r\n    topicsPerPage: \"20\",\r\n    autoRefreshTopicsList: \"false\",\r\n    autoRefreshTopicsListInterval: \"60\",\r\n    autoRefreshTopic: \"true\",\r\n    autoRefreshTopicInterval: \"60\",\r\n    //tooltips\r\n    showTooltips: \"true\",\r\n    tooltipDelay: \"500\",\r\n    showTooltipOnPostLink: \"true\",\r\n    //links\r\n    showYoutubeVideoTitle: \"true\",\r\n    replaceCatalogMista: \"true\",\r\n    fixBrokenLinks: \"true\",\r\n  },\r\n};\r\n\r\nconst slice = createSlice({\r\n  name: \"options\",\r\n  initialState: defaultOptionsState,\r\n  reducers: {\r\n    save: (state, { payload }: PayloadAction<IOptionsItems>) => {\r\n      for (let key in payload) {\r\n        const value = String(payload[key]);\r\n        state.items[key] = value;\r\n      }\r\n    },\r\n  },\r\n});\r\n\r\nexport const { actions: optionsActions, reducer: options } = slice;\r\n","import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\n\r\nimport { groupBy } from \"src/utils\";\r\n\r\nimport { fetchSections } from \"src/api\";\r\nimport { RootState } from \"../types\";\r\n\r\nexport interface ISectionItem {\r\n  id: number;\r\n  forum: string;\r\n  code: string;\r\n  name: string;\r\n}\r\n\r\nexport interface ISectionsTree {\r\n  [key: string]: ISectionItem[];\r\n}\r\n\r\nexport interface SectionsState {\r\n  status: \"init\" | \"loading\" | \"success\" | \"error\";\r\n  items: ISectionItem[];\r\n  tree?: ISectionsTree;\r\n  error?: string;\r\n  lastUpdated?: number;\r\n}\r\n\r\nconst initialState: SectionsState = {\r\n  status: \"init\",\r\n  items: [],\r\n  tree: {},\r\n};\r\n\r\nexport const getSections = createAsyncThunk(\"sections/fetch\", async () => {\r\n  return await fetchSections();\r\n});\r\n\r\nconst shouldGetSections = ({ sections }: RootState): boolean => {\r\n  if (!sections) return true;\r\n  if (sections.status === \"loading\") return false;\r\n  if (sections.items.length > 0) return false;\r\n\r\n  return true;\r\n};\r\n\r\nexport const getSectionsIfNeeded =\r\n  (): any => (dispatch: any, getState: any) => {\r\n    if (shouldGetSections(getState())) {\r\n      return dispatch(getSections());\r\n    }\r\n  };\r\n\r\nconst slice = createSlice({\r\n  name: \"sections\",\r\n  initialState,\r\n  reducers: {},\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(getSections.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })\r\n      .addCase(getSections.fulfilled, (state, { payload }) => {\r\n        state.status = \"success\";\r\n        state.items = payload;\r\n        state.tree = groupBy(state.items, (item) => item.forum);\r\n        delete state.error;\r\n      })\r\n      .addCase(getSections.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      });\r\n  },\r\n});\r\n\r\nexport const { actions: sectionsActions, reducer: sections } = slice;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\nimport type { PayloadAction } from \"@reduxjs/toolkit\";\r\n\r\nexport interface ITooltipKeys {\r\n  topicId: number;\r\n  number: number;\r\n}\r\n\r\nexport interface ICoords {\r\n  x: number;\r\n  y: number;\r\n}\r\n\r\nexport interface ITooltipItem {\r\n  hash: string;\r\n  keys: ITooltipKeys;\r\n  coords: ICoords;\r\n  zIndex: number;\r\n}\r\n\r\nexport interface ITooltipsList extends Array<ITooltipItem> {}\r\n\r\nexport interface TooltipsState {\r\n  items: ITooltipsList;\r\n}\r\n\r\nconst initialState: TooltipsState = {\r\n  items: [],\r\n};\r\n\r\nconst show = (\r\n  state: TooltipsState,\r\n  { payload }: PayloadAction<{ keys: ITooltipKeys; coords: ICoords }>\r\n) => {\r\n  const hash = JSON.stringify(payload.keys);\r\n  const index = state.items.findIndex((item) => item.hash === hash);\r\n  let zIndex = 0;\r\n  if (state.items.length)\r\n    zIndex = state.items[state.items.length - 1].zIndex + 1;\r\n  if (index === -1)\r\n    state.items.push({\r\n      keys: payload.keys,\r\n      coords: payload.coords,\r\n      hash,\r\n      zIndex,\r\n    });\r\n  else {\r\n    //state.list = moveToEnd(state.list, index);\r\n    state.items[state.items.length - 1].zIndex = zIndex;\r\n  }\r\n};\r\n\r\nconst slice = createSlice({\r\n  name: \"tooltips\",\r\n  initialState,\r\n  reducers: {\r\n    show,\r\n    close: (state, { payload }: PayloadAction<ITooltipKeys>) => {\r\n      const hash = JSON.stringify(payload);\r\n      state.items = state.items.filter((val) => val.hash !== hash);\r\n    },\r\n    closeAll: (state) => {\r\n      state.items = [];\r\n    },\r\n  },\r\n});\r\n\r\nexport const { actions: tooltipsActions, reducer: tooltips } = slice;\r\n","import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\n\r\nimport { fetchTopicMessage, fetchTopicMessages, fetchTopicInfo } from \"src/api\";\r\nimport { RootState } from \"../types\";\r\n\r\nexport interface IVotingItem {\r\n  text: string;\r\n  count: number;\r\n}\r\n\r\nexport interface ITopicInfo {\r\n  id: number;\r\n  title: string;\r\n  forum?: string;\r\n  sectionId?: string;\r\n  created?: number;\r\n  authorId?: string;\r\n  author?: string;\r\n  updated?: number;\r\n  lastUser?: string;\r\n  count?: number;\r\n  down?: number;\r\n  closed?: number;\r\n  deleted?: number;\r\n  isVoting?: number;\r\n  voting?: IVotingItem[];\r\n}\r\n\r\nexport interface ITopicMessage {\r\n  id: number;\r\n  n: number;\r\n  user: string;\r\n  userId: number;\r\n  text: string;\r\n  time: number;\r\n  vote: number;\r\n}\r\n\r\nexport interface ITopicMessagesList extends Array<ITopicMessage> {}\r\n\r\nexport interface TopicState {\r\n  status?: \"init\" | \"loading\" | \"success\" | \"error\";\r\n  items: ITopicMessagesList;\r\n  item0?: ITopicMessage;\r\n  info?: ITopicInfo;\r\n  error?: string;\r\n  lastUpdated?: number;\r\n}\r\n\r\nexport const defaultInfo: ITopicInfo = {\r\n  id: 0,\r\n  title: \"\",\r\n  count: -1,\r\n};\r\n\r\nconst initialState: TopicState = {\r\n  status: \"init\",\r\n  items: [],\r\n  info: defaultInfo,\r\n};\r\n\r\nexport const getTopic = createAsyncThunk(\r\n  \"topics/fetch\",\r\n  async (\r\n    {\r\n      topicId,\r\n      page,\r\n      item0,\r\n    }: {\r\n      topicId: number;\r\n      page: number | string;\r\n      item0: ITopicMessage;\r\n    },\r\n    { rejectWithValue }\r\n  ) => {\r\n    let info: ITopicInfo;\r\n    try {\r\n      info = await fetchTopicInfo(topicId);\r\n    } catch (e) {\r\n      console.error(e);\r\n      info = {\r\n        id: topicId,\r\n        title: \"\",\r\n        count: -1,\r\n      };\r\n    }\r\n\r\n    try {\r\n      let _item0 = item0;\r\n      let _items;\r\n      if (page === \"last20\") {\r\n        if (info.count > 21) {\r\n          if (!_item0) {\r\n            _item0 = await fetchTopicMessage(topicId, 0);\r\n          }\r\n\r\n          let first = info.count - 20;\r\n          _items = await fetchTopicMessages({\r\n            id: topicId,\r\n            from: first,\r\n            to: 1010,\r\n          });\r\n        } else {\r\n          let items = await fetchTopicMessages({\r\n            id: topicId,\r\n            from: 0,\r\n            to: 1010,\r\n          });\r\n          _item0 = items[0];\r\n          _items = items.slice(1);\r\n        }\r\n      } else {\r\n        page = +page;\r\n        let first = 0;\r\n        let last = page * 100 - 1;\r\n\r\n        if (page > 1) {\r\n          first = (page - 1) * 100;\r\n          if (!_item0) {\r\n            _item0 = await fetchTopicMessage(topicId, 0);\r\n          }\r\n\r\n          _items = await fetchTopicMessages({\r\n            id: topicId,\r\n            from: first,\r\n            to: last,\r\n          });\r\n        } else {\r\n          if (_item0) first = 1;\r\n          else first = 0;\r\n\r\n          let items = await fetchTopicMessages({\r\n            id: topicId,\r\n            from: first,\r\n            to: last,\r\n          });\r\n\r\n          if (_item0) {\r\n            _items = items;\r\n          } else {\r\n            _item0 = items[0];\r\n            _items = items.slice(1);\r\n          }\r\n        }\r\n      }\r\n\r\n      if (info.count === 0 && _items.length > 0)\r\n        info.count = _items[_items.length - 1].n;\r\n\r\n      if (page === \"last20\" && _items.length > 20) {\r\n        _items = _items.slice(-20);\r\n      }\r\n\r\n      return {\r\n        info,\r\n        item0: _item0,\r\n        list: _items,\r\n      };\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch topic:\", error);\r\n      rejectWithValue(error);\r\n    }\r\n  }\r\n);\r\n\r\nexport const getNewMessages = createAsyncThunk(\r\n  \"topic/getNewMessages\",\r\n  async ({ id, count }: { id: number; count: number }) => {\r\n    return await fetchTopicMessages({\r\n      id: id,\r\n      from: count + 1,\r\n      to: 1050,\r\n    });\r\n  }\r\n);\r\n\r\nconst shouldFetch = ({ topic }: RootState) => {\r\n  if (!topic) return true;\r\n  if (topic.status === \"loading\") return false;\r\n\r\n  return true;\r\n};\r\n\r\nexport const getTopicIfNeeded =\r\n  (topicId: number, page: number | string): any =>\r\n  (dispatch: any, getState: any) => {\r\n    const state = getState();\r\n    if (shouldFetch(state)) {\r\n      let item0: ITopicMessage = null;\r\n      if (topicId === state.topic.info.id) item0 = state.topic.item0;\r\n      return dispatch(getTopic({ topicId, page, item0 }));\r\n    }\r\n  };\r\n\r\nexport const getNewMessagesIfNeeded = () => (dispatch: any, getState: any) => {\r\n  const state = getState();\r\n  const { id, count } = state.topic.info;\r\n  if (shouldFetch(state)) {\r\n    return dispatch(getNewMessages({ id, count }));\r\n  }\r\n};\r\n\r\nconst slice = createSlice({\r\n  name: \"topic\",\r\n  initialState,\r\n  reducers: {\r\n    clear: (state) => {\r\n      state.info = initialState.info;\r\n      state.item0 = initialState.item0;\r\n      state.items = initialState.items;\r\n      state.status = initialState.status;\r\n      delete state.error;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(getTopic.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })\r\n      .addCase(getTopic.fulfilled, (state, { payload }) => {\r\n        state.status = \"success\";\r\n        state.items = payload.list;\r\n        state.item0 = payload.item0;\r\n        state.info = payload.info;\r\n\r\n        delete state.error;\r\n      })\r\n      .addCase(getTopic.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      })\r\n      // getNewMessages\r\n      .addCase(getNewMessages.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })\r\n      .addCase(getNewMessages.fulfilled, (state, { payload }) => {\r\n        state.status = \"success\";\r\n        if (payload.length > 0) {\r\n          state.items = state.items.concat(payload);\r\n          state.info.count = state.items[state.items.length - 1].n;\r\n        }\r\n\r\n        delete state.error;\r\n      })\r\n      .addCase(getNewMessages.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      });\r\n  },\r\n});\r\n\r\nexport const { actions: topicActions, reducer: topic } = slice;\r\n","import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\n\r\nimport { ITopicsListRequest, fetchTopicsList } from \"src/api\";\r\nimport { domain, urlTopicsList } from \"src/api\";\r\nimport { RootState } from \"../types\";\r\n\r\nexport interface ITopicsListItem {\r\n  id: number;\r\n  author: string;\r\n  lastUser: string;\r\n  forum: string;\r\n  sectionCode: string;\r\n  section: string;\r\n  count: number;\r\n  text: string;\r\n  created: number;\r\n  updated: number;\r\n  closed: boolean;\r\n  down: boolean;\r\n  pinned: boolean;\r\n  isVoting: boolean;\r\n  showPreview: boolean;\r\n  previewMsgNumber?: number;\r\n}\r\n\r\nexport interface ITopicsList extends Array<ITopicsListItem> {}\r\n\r\nexport interface TopicsListState {\r\n  status: \"init\" | \"loading\" | \"success\" | \"error\";\r\n  items: ITopicsList;\r\n  error?: string;\r\n  lastUpdated?: number;\r\n}\r\n\r\nconst initialState: TopicsListState = {\r\n  status: \"init\",\r\n  items: [],\r\n};\r\n\r\nexport const getTopicsList = createAsyncThunk(\r\n  \"topicsList/fetch\",\r\n  async (params: ITopicsListRequest, { getState }) => {\r\n    const state = getState() as RootState;\r\n\r\n    let itemsPerPage = +state.options.items.topicsPerPage;\r\n    if (itemsPerPage > 99) itemsPerPage = 99;\r\n    params.itemsPerPage = itemsPerPage;\r\n\r\n    const json = await fetchTopicsList(params);\r\n    return json.slice(-itemsPerPage);\r\n  }\r\n);\r\n\r\nconst shouldFetch = ({ topicsList }: RootState) => {\r\n  if (!topicsList) return true;\r\n  if (topicsList.status === \"loading\") return false;\r\n\r\n  return true;\r\n};\r\n\r\nexport const getTopicsListIfNeeded =\r\n  (params: ITopicsListRequest): any =>\r\n  (dispatch: any, getState: any) => {\r\n    if (shouldFetch(getState())) {\r\n      return dispatch(getTopicsList(params));\r\n    }\r\n  };\r\n\r\nconst slice = createSlice({\r\n  name: \"topicsList\",\r\n  initialState,\r\n  reducers: {\r\n    clear: (state) => {\r\n      state.items = [];\r\n      state.status = \"init\";\r\n    },\r\n    togglePreview: (state, { payload }) => {\r\n      const item = state.items.find((item) => item.id === payload.topicId);\r\n      item.showPreview = !item.showPreview;\r\n      item.previewMsgNumber = payload.msgNumber;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(getTopicsList.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })\r\n      .addCase(getTopicsList.fulfilled, (state, { payload }) => {\r\n        state.status = \"success\";\r\n        state.items = payload;\r\n\r\n        delete state.error;\r\n      })\r\n      .addCase(getTopicsList.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = `${error?.message} ${domain}/${urlTopicsList}`;\r\n      });\r\n  },\r\n});\r\n\r\nexport const { actions: topicsListActions, reducer: topicsList } = slice;\r\n","import { createSlice, createAsyncThunk, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { INewMessageRequest, fetchNewMessage } from \"src/api\";\r\n\r\nexport type NewMessageState = {\r\n  status: \"init\" | \"loading\" | \"success\" | \"error\";\r\n  text: string;\r\n  error?: string;\r\n};\r\n\r\nconst initialState: NewMessageState = {\r\n  status: \"init\",\r\n  text: \"\",\r\n};\r\n\r\nexport type PostNewmessageParams = {\r\n  text: string;\r\n  topicId: string;\r\n  voting_select?: number;\r\n  onSuccess?: () => void;\r\n};\r\n\r\nexport const postNewMessage = createAsyncThunk(\r\n  \"newMessage/post\",\r\n  async (params: PostNewmessageParams) => {\r\n    let fetchParams: INewMessageRequest = {\r\n      message_text: params.text,\r\n      action: \"new\",\r\n      topic_id: params.topicId,\r\n      rnd: Math.round(Math.random() * 10000000000),\r\n    };\r\n\r\n    if (params.voting_select) fetchParams.voting_select = params.voting_select;\r\n\r\n    await fetchNewMessage(fetchParams);\r\n\r\n    // if (params.onSuccess)\r\n    //   params.onSuccess();\r\n  }\r\n);\r\n\r\nconst slice = createSlice({\r\n  name: \"newMessage\",\r\n  initialState,\r\n  reducers: {\r\n    changeText: (state, { payload }: PayloadAction<string>) => {\r\n      state.text = payload;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(postNewMessage.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })\r\n      .addCase(postNewMessage.fulfilled, (state) => {\r\n        state.text = \"\";\r\n        delete state.error;\r\n      })\r\n      .addCase(postNewMessage.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      });\r\n  },\r\n});\r\n\r\nexport const { actions: newMessageActions, reducer: newMessage } = slice;\r\n","import { combineReducers, configureStore } from \"@reduxjs/toolkit\";\r\nimport {\r\n  persistStore,\r\n  persistReducer,\r\n  FLUSH,\r\n  REHYDRATE,\r\n  PAUSE,\r\n  PERSIST,\r\n  PURGE,\r\n  REGISTER,\r\n} from \"redux-persist\";\r\nimport storage from \"redux-persist/lib/storage\";\r\n\r\nimport {\r\n  topicsList,\r\n  topic,\r\n  sections,\r\n  options,\r\n  login,\r\n  tooltips,\r\n  newTopic,\r\n  newMessage,\r\n} from \"./slices\";\r\n\r\nconst persistConfig = {\r\n  key: \"options\",\r\n  storage,\r\n};\r\n\r\nexport const reducer = combineReducers({\r\n  topicsList,\r\n  topic,\r\n  sections,\r\n  options: persistReducer(persistConfig, options),\r\n  login,\r\n  tooltips,\r\n  newTopic,\r\n  newMessage,\r\n});\r\n\r\nexport const store = configureStore({\r\n  reducer,\r\n  middleware: (getDefaultMiddleware) =>\r\n    getDefaultMiddleware({\r\n      serializableCheck: {\r\n        ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\r\n      },\r\n    }),\r\n  devTools: process.env.NODE_ENV !== \"production\",\r\n});\r\n\r\nexport const persistor = persistStore(store);\r\n","import { useMemo } from \"react\";\r\nimport { ActionCreatorsMapObject, bindActionCreators } from \"@reduxjs/toolkit\";\r\nimport { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\r\nimport { AppDispatch, RootState } from \"./types\";\r\n\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n\r\nexport const useActionCreators = (actions: ActionCreatorsMapObject) => {\r\n  const dispatch = useAppDispatch();\r\n  return useMemo(\r\n    () => bindActionCreators(actions, dispatch),\r\n    [actions, dispatch]\r\n  );\r\n};\r\n","import { ReactElement } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nimport Navbar from \"react-bootstrap/Navbar\";\r\nimport Nav from \"react-bootstrap/Nav\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\n\r\nimport Search from \"src/components/common/search\";\r\nimport { getTopicsListIfNeeded } from \"src/store\";\r\n\r\nimport \"./nav_bar.css\";\r\n\r\nconst NavBar = (): ReactElement => {\r\n  const location = useLocation();\r\n  const dispatch = useDispatch();\r\n\r\n  const locationParams = new URLSearchParams(location.search);\r\n  const forum = locationParams.get(\"forum\");\r\n\r\n  const onClick = () => {\r\n    dispatch(getTopicsListIfNeeded({}));\r\n  };\r\n\r\n  const internalLinks = [\r\n    { name: \"1C\", link: `/index.php?forum=1C` },\r\n    { name: \"IT\", link: `/index.php?forum=IT` },\r\n    { name: \"JOB\", link: `/index.php?forum=JOB` },\r\n    { name: \"LIFE\", link: `/index.php?forum=LIFE` },\r\n    { name: \"Настройки\", link: \"/options.php\" },\r\n  ];\r\n\r\n  const externalLinks = [\r\n    { name: \"Wiki\", link: \"https://wiki.mista.ru\" },\r\n    { name: \"Книга знаний\", link: \"https://kb.mista.ru\" },\r\n  ];\r\n\r\n  return (\r\n    <Navbar bg=\"dark\" variant=\"dark\" expand=\"md\" fixed=\"top\">\r\n      <Navbar.Brand as={Link} to={`/`} onClick={onClick}>\r\n        React.Mista\r\n      </Navbar.Brand>\r\n      <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n      <Navbar.Collapse>\r\n        <Nav className=\"me-auto\">\r\n          {internalLinks.map((item, i) => (\r\n            <Nav.Item key={\"i\" + i}>\r\n              <Nav.Link to={item.link} active={item.name === forum} as={Link}>\r\n                {item.name}\r\n              </Nav.Link>\r\n            </Nav.Item>\r\n          ))}\r\n          {externalLinks.map((item, i) => (\r\n            <Nav.Item key={\"e\" + i}>\r\n              <Nav.Link href={item.link}>{item.name}</Nav.Link>\r\n            </Nav.Item>\r\n          ))}\r\n        </Nav>\r\n        <Form className=\"d-flex\">\r\n          <Search />\r\n        </Form>\r\n      </Navbar.Collapse>\r\n    </Navbar>\r\n  );\r\n};\r\n\r\nexport default NavBar;\r\n","import React, { FC, ReactElement } from \"react\";\r\nimport { Dropdown } from \"react-bootstrap\";\r\n\r\nimport { loginActions, useActionCreators } from \"src/store\";\r\nimport { domain } from \"src/api\";\r\n\r\ntype IProps = {\r\n  userId: number;\r\n  userName: string;\r\n};\r\n\r\ntype HTMLProps = React.HTMLProps<HTMLSpanElement>;\r\nconst CustomToggle = React.forwardRef<HTMLSpanElement, HTMLProps>(\r\n  ({ children, onClick }, ref) => (\r\n    <span\r\n      ref={ref}\r\n      style={{ cursor: \"pointer\" }}\r\n      className=\"link\"\r\n      onClick={(e) => {\r\n        e.preventDefault();\r\n        onClick(e);\r\n      }}\r\n    >\r\n      {children}\r\n    </span>\r\n  )\r\n);\r\n\r\nconst LoggedUser: FC<IProps> = ({ userId, userName }): ReactElement => {\r\n  const actions = useActionCreators(loginActions);\r\n\r\n  const onLogout = (event: React.SyntheticEvent) => {\r\n    event.preventDefault();\r\n    actions.doLogout();\r\n  };\r\n\r\n  const onMenuSelect = (\r\n    eventKey: string,\r\n    event: React.SyntheticEvent\r\n  ): void => {\r\n    if (eventKey === \"exit\") {\r\n      onLogout(event);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ float: \"left\" }}>\r\n      <Dropdown id=\"dropdown-custom-menu\" onSelect={onMenuSelect}>\r\n        <span>Привет, </span>\r\n        <Dropdown.Toggle as={CustomToggle}>{userName} ▼</Dropdown.Toggle>\r\n        <Dropdown.Menu>\r\n          <Dropdown.Item\r\n            eventKey=\"profile\"\r\n            href={`${domain}/users.php?id=${userId}`}\r\n          >\r\n            Профиль\r\n          </Dropdown.Item>\r\n          <Dropdown.Item\r\n            eventKey=\"myTopics\"\r\n            href={`#/index.php?user_id=${userId}`}\r\n          >\r\n            Мои темы\r\n          </Dropdown.Item>\r\n          <Dropdown.Divider />\r\n          <Dropdown.Item eventKey=\"options\" href={`#/options.php`}>\r\n            Настройки\r\n          </Dropdown.Item>\r\n          <Dropdown.Divider />\r\n          <Dropdown.Item eventKey=\"exit\">Выход</Dropdown.Item>\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoggedUser;\r\n","import { FormEvent, ReactElement, useState } from \"react\";\r\nimport { FormControl, Button } from \"react-bootstrap\";\r\n\r\nimport { useAppDispatch } from \"src/store\";\r\nimport { doLoginIfNeeded } from \"src/store\";\r\n\r\nconst LoginForm = (): ReactElement => {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const onLogin = (event: FormEvent) => {\r\n    event.preventDefault();\r\n    dispatch(doLoginIfNeeded(username, password));\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <form name=\"enterform\" className=\"flex-row\" style={{ flexWrap: \"wrap\" }}>\r\n        <FormControl\r\n          id=\"username\"\r\n          type=\"text\"\r\n          placeholder=\"Имя\"\r\n          value={username}\r\n          onChange={(e) => setUsername(e.target.value)}\r\n          size=\"sm\"\r\n          className=\"input\"\r\n          style={{ marginRight: \"5px\", flex: \"0 1 300px\" }}\r\n        />\r\n        <FormControl\r\n          id=\"password\"\r\n          type=\"password\"\r\n          placeholder=\"Пароль\"\r\n          maxLength={20}\r\n          autoComplete=\"off\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          size=\"sm\"\r\n          className=\"input\"\r\n          style={{ marginRight: \"5px\", flex: \"0 1 300px\" }}\r\n        />\r\n        <Button size=\"sm\" variant=\"light\" className=\"button\" onClick={onLogin}>\r\n          Войти\r\n        </Button>\r\n      </form>\r\n      <p style={{ margin: \"0px\" }}>\r\n        Войти можно на сайте{\" \"}\r\n        <a href=\"https://forum.mista.ru/\">forum.mista.ru</a>\r\n      </p>\r\n      <a rel=\"nofollow\" href=\"https://forum.mista.ru/user_registration.php\">\r\n        Регистрация\r\n      </a>\r\n      <span style={{ margin: \"5px\" }}>|</span>\r\n      <a rel=\"nofollow\" href=\"https://forum.mista.ru/remember_password.php\">\r\n        Забыли пароль?\r\n      </a>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginForm;\r\n","import { FC, ReactElement } from \"react\";\r\n\r\nimport \"./error.css\";\r\n\r\ntype IProps = {\r\n  text: string;\r\n};\r\n\r\nconst ErrorElem: FC<IProps> = ({ text }): ReactElement | null => {\r\n  if (!text) return null;\r\n\r\n  return (\r\n    <div className=\"error\" dangerouslySetInnerHTML={{ __html: text }}></div>\r\n  );\r\n};\r\n\r\nexport default ErrorElem;\r\n","import { ReactElement, useEffect } from \"react\";\r\nimport LoggedUser from \"./logged_user\";\r\nimport LoginForm from \"./login_form\";\r\nimport ErrorElem from \"../common/error\";\r\n\r\nimport { useAppDispatch, useAppSelector } from \"src/store\";\r\nimport { checkLoginIfNeeded } from \"src/store\";\r\n\r\nconst Login = (): ReactElement => {\r\n  const dispatch = useAppDispatch();\r\n  const logged = useAppSelector((state) => state.login.logged);\r\n  const userId = useAppSelector((state) => state.login.userId);\r\n  const userName = useAppSelector((state) => state.login.userName);\r\n  const error = useAppSelector((state) => state.login.error);\r\n\r\n  useEffect(() => {\r\n    dispatch(checkLoginIfNeeded());\r\n  }, [dispatch]);\r\n\r\n  let elem: ReactElement;\r\n  if (logged === true)\r\n    elem = <LoggedUser userId={userId} userName={userName} />;\r\n  else if (logged === false) elem = <LoginForm />;\r\n  else elem = null;\r\n\r\n  return (\r\n    <>\r\n      {elem}\r\n      {error && <ErrorElem text={error} />}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import { FC, ReactElement, useEffect } from \"react\";\r\nimport CSS from \"csstype\";\r\nimport Form from \"react-bootstrap/Form\";\r\n\r\nimport { useAppDispatch, useAppSelector } from \"src/store\";\r\nimport { getSectionsIfNeeded, ISectionItem } from \"src/store\";\r\n\r\nexport type IProps = {\r\n  id: string;\r\n  defaultValue: string;\r\n  selected?: string;\r\n  style?: CSS.Properties;\r\n  size?: \"sm\" | \"lg\";\r\n  onChange?: (e: React.ChangeEvent<HTMLElement>, value: ISectionItem) => void;\r\n};\r\n\r\nconst Sections: FC<IProps> = (props): ReactElement => {\r\n  const dispatch = useAppDispatch();\r\n  const items = useAppSelector((state) => state.sections.items);\r\n  const tree = useAppSelector((state) => state.sections.tree);\r\n\r\n  useEffect(() => {\r\n    dispatch(getSectionsIfNeeded());\r\n  }, [dispatch]);\r\n\r\n  const onSelect = (e: React.ChangeEvent<HTMLSelectElement>): void => {\r\n    const { onChange } = props;\r\n\r\n    if (onChange) {\r\n      const code = e.currentTarget.value;\r\n      const arr = items.filter((item) => item.code === code);\r\n      if (arr.length > 0) onChange(e, arr[0]);\r\n      else onChange(e, null);\r\n    }\r\n  };\r\n\r\n  let sectionsElem = [];\r\n  for (let forum in tree) {\r\n    let group = (\r\n      <optgroup key={forum} label={forum}>\r\n        {tree[forum].map((item) => (\r\n          <option key={item.id} value={item.code}>\r\n            {item.name}\r\n          </option>\r\n        ))}\r\n      </optgroup>\r\n    );\r\n\r\n    sectionsElem.push(group);\r\n  }\r\n\r\n  const { id, defaultValue, selected, style, size } = props;\r\n\r\n  return (\r\n    <Form.Select\r\n      aria-label=\"Секция\"\r\n      onChange={onSelect}\r\n      value={selected}\r\n      style={style}\r\n      className=\"input\"\r\n      size={size}\r\n      id={id}\r\n    >\r\n      <option value=\"\">{defaultValue}</option>\r\n      {sectionsElem}\r\n    </Form.Select>\r\n  );\r\n};\r\n\r\nexport default Sections;\r\n","import { ReactElement, useEffect } from \"react\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport queryString from \"query-string\";\r\n\r\nimport Login from \"../../components/login\";\r\nimport Sections from \"./sections\";\r\nimport { ISectionItem, getSectionsIfNeeded } from \"src/store\";\r\n\r\nconst Header = (): ReactElement => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const params = queryString.parse(location.search);\r\n\r\n  useEffect(() => {\r\n    dispatch(getSectionsIfNeeded());\r\n  }, [dispatch]);\r\n\r\n  const onSectionChange = (e, value: ISectionItem) => {\r\n    if (value) navigate(`/index.php?section=${value.code}`);\r\n    else navigate(`/`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex-row\">\r\n      <div className=\"header-left\">\r\n        <Login />\r\n      </div>\r\n      <div className=\"header-right\">\r\n        <Sections\r\n          id=\"sect\"\r\n          defaultValue=\"--Все секции--\"\r\n          selected={String(params.section) || \"\"}\r\n          onChange={onSectionChange}\r\n          size=\"sm\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import { FC } from \"react\";\r\n\r\ntype IProps = {\r\n  onUpdateClick: (e: React.MouseEvent) => void;\r\n  isLoading: boolean;\r\n};\r\n\r\nconst TableHeader: FC<IProps> = ({\r\n  isLoading,\r\n  onUpdateClick,\r\n}): React.ReactElement => {\r\n  return (\r\n    <div className=\"table-header\" /* style={{ position: \"sticky\", top: \"39px\" }} */>\r\n      <div style={{ letterSpacing: \"-1px\" }}>Раздел</div>\r\n      <div></div>\r\n      <div>Тема</div>\r\n      <div>Re</div>\r\n      <div>Автор</div>\r\n      <div>\r\n        <span\r\n          style={{ cursor: \"pointer\" }}\r\n          title=\"Обновить список\"\r\n          onClick={onUpdateClick}\r\n        >\r\n          {isLoading ? \"Обновляется\" : \"Обновлено\"}\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TableHeader;\r\n","import { FC, ReactElement } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { getMaxPage } from \"src/utils\";\r\n\r\ntype IProps = {\r\n  count: number;\r\n  topicId: number;\r\n};\r\n\r\nconst Pages: FC<IProps> = ({ count, topicId }): ReactElement => {\r\n  let pages = [];\r\n  if (count > 100) {\r\n    let maxPage = getMaxPage(count);\r\n    for (let i = 1; i <= maxPage; i++) {\r\n      let href = `/topic.php?id=${topicId}&page=${i}`;\r\n      let text: string;\r\n      if (i > 3 && i < maxPage) text = \"•\";\r\n      else text = String(i);\r\n      pages.push(\r\n        <Link key={i} className=\"agh\" style={{ margin: \"3px\" }} to={href}>\r\n          {text}\r\n        </Link>\r\n      );\r\n    }\r\n  }\r\n\r\n  if (count > 20) {\r\n    let href = `/topic.php?id=${topicId}&page=last20#F`;\r\n    pages.push(\r\n      <Link key=\"last20\" className=\"agh\" style={{ margin: \"3px\" }} to={href}>\r\n        »\r\n      </Link>\r\n    );\r\n  }\r\n\r\n  return <span className=\"topic-pages\">{pages}</span>;\r\n};\r\n\r\nexport default Pages;\r\n","import { FC, ReactElement } from \"react\";\r\nimport classNames from \"classnames\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport Pages from \"./pages\";\r\nimport { useAppSelector } from \"src/store\";\r\n\r\ntype IProps = {\r\n  id: number;\r\n  count: number;\r\n  author: string;\r\n  pinned: boolean;\r\n  forum: string;\r\n  sectionCode: string;\r\n  section: string;\r\n  text: string;\r\n  isVoting: boolean;\r\n  closed: boolean;\r\n  down: boolean;\r\n};\r\n\r\nconst addPrefix = (\r\n  text: string,\r\n  forum: string,\r\n  sectionCode: string\r\n): string => {\r\n  if (forum === \"life\" && !text.startsWith(\"OFF\")) {\r\n    return \"OFF: \" + text;\r\n  } else if (sectionCode === \"job\" && !text.startsWith(\"JOB\")) {\r\n    return \"JOB: \" + text;\r\n  } else if (sectionCode === \"v7\" && !text.startsWith(\"v7\")) {\r\n    return \"v7: \" + text;\r\n  }\r\n  return text;\r\n};\r\n\r\nconst TopicNameCell: FC<IProps> = (props): ReactElement => {\r\n  const loggedUserName = useAppSelector((state) => state.login.userName);\r\n\r\n  let href = `/topic.php?id=${props.id}`;\r\n  let classes = classNames(\"agb\", \"mr5\", {\r\n    bold: props.count >= 100,\r\n    mytopics: props.author === loggedUserName,\r\n    pinned: props.pinned,\r\n  });\r\n\r\n  let sectionHref = `/index.php?section=${props.sectionCode}`;\r\n  let section: ReactElement;\r\n  if (props.section) {\r\n    section = (\r\n      <span className=\"topic-section\">\r\n        <span className=\"agh\" style={{ margin: \"0px 5px\" }}>\r\n          /\r\n        </span>\r\n        <Link key=\"1\" rel=\"nofollow\" className=\"agh\" to={sectionHref}>\r\n          {props.section}\r\n        </Link>\r\n      </span>\r\n    );\r\n  }\r\n\r\n  let text = addPrefix(props.text, props.forum, props.sectionCode);\r\n\r\n  return (\r\n    <div className=\"cell-title\">\r\n      <div className=\"cell-title--inner\">\r\n        {props.pinned && (\r\n          <i\r\n            className=\"fa fa-thumb-tack agh\"\r\n            aria-hidden=\"true\"\r\n            style={{ marginRight: \"5px\" }}\r\n          ></i>\r\n        )}\r\n        <Link\r\n          to={href}\r\n          className={classes}\r\n          dangerouslySetInnerHTML={{ __html: text }}\r\n          style={{ overflowWrap: \"anywhere\" }}\r\n        ></Link>\r\n        {props.isVoting && <span className=\"agh separator\">[±]</span>}\r\n        <Pages count={props.count} topicId={props.id} />\r\n        {props.closed && <span className=\"agh\">Ø</span>}\r\n        {props.down && <span className=\"agh\">↓</span>}\r\n        {section}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TopicNameCell;\r\n","import { FC, ReactElement } from \"react\";\r\n\r\nimport { useActionCreators } from \"src/store\";\r\nimport { topicsListActions } from \"src/store\";\r\n\r\ntype IProps = {\r\n  topicId: number;\r\n  expanded: boolean;\r\n};\r\n\r\nconst PreviewLink: FC<IProps> = ({ topicId, expanded }): ReactElement => {\r\n  const actions = useActionCreators(topicsListActions);\r\n\r\n  const onClick = () => {\r\n    actions.togglePreview({ topicId, msgNumber: 0 });\r\n  };\r\n\r\n  const text = expanded ? (\r\n    <i className=\"fa fa-minus-square-o agh\" aria-hidden=\"true\"></i>\r\n  ) : (\r\n    <i className=\"fa fa-plus-square-o agh\" aria-hidden=\"true\"></i>\r\n  );\r\n  return (\r\n    <div className=\"cell-preview-link\" onClick={onClick}>\r\n      <span>{text}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PreviewLink;\r\n","import { FC, ReactElement, useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport TopicNameCell from \"./topic_name_cell\";\r\nimport PreviewLink from \"./preview_link\";\r\n\r\nimport { formattedTime } from \"src/utils\";\r\nimport { useActionCreators } from \"src/store\";\r\nimport { ITopicsListItem, topicsListActions } from \"src/store\";\r\nimport { fetchTopicMessage } from \"src/api\";\r\n\r\ninterface IProps extends ITopicsListItem {\r\n  updated: number;\r\n  topicId: number;\r\n}\r\n\r\nconst Row: FC<IProps> = ({ topicId, updated, ...data }): ReactElement => {\r\n  const actions = useActionCreators(topicsListActions);\r\n\r\n  const [time, setTime] = useState(updated);\r\n\r\n  useEffect(() => {\r\n    if (!data.pinned) return;\r\n\r\n    const updateTime = async () => {\r\n      const msg = await fetchTopicMessage(topicId, data.count);\r\n      setTime(msg.time);\r\n    };\r\n\r\n    updateTime();\r\n  }, [data.pinned, topicId, data.count]);\r\n\r\n  useEffect(() => {\r\n    setTime(updated);\r\n  }, [updated]);\r\n\r\n  const countOnClick = () => {\r\n    actions.togglePreview({ topicId, msgNumber: data.count });\r\n  };\r\n\r\n  return (\r\n    <div className=\"topics-list-row\">\r\n      <div className=\"cell-forum\">\r\n        <div className=\"cell-forum--inner\">{data.forum}</div>\r\n      </div>\r\n      <div className=\"cell-section\">{data.section}</div>\r\n      <div className=\"cell-answ\" onClick={countOnClick}>\r\n        <div className=\"cell-answ--inner\">\r\n          <i\r\n            className=\"fa fa-comments-o\"\r\n            aria-hidden=\"true\"\r\n            style={{ marginRight: \"3px\" }}\r\n          ></i>\r\n          <span>{data.count}</span>\r\n        </div>\r\n      </div>\r\n      <PreviewLink topicId={data.id} expanded={data.showPreview} />\r\n      <TopicNameCell {...data} />\r\n      <div className=\"cell-author\">\r\n        <div className=\"cell-author--inner\">\r\n          <i\r\n            aria-hidden=\"true\"\r\n            className=\"fa fa-user-circle\"\r\n            style={{ marginRight: \"3px\" }}\r\n          ></i>\r\n          {data.author}\r\n        </div>\r\n      </div>\r\n      <div className=\"cell-lastuser\">\r\n        <div className=\"cell-author--inner\">\r\n          <span className=\"cell-lastuser-time\">{formattedTime(time)}</span>\r\n          <span className=\"cell-lastuser-user\">{data.lastUser}</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"cell-last20\">\r\n        <Link\r\n          to={`/topic.php?id=${data.id}&page=last20#F`}\r\n          style={{\r\n            color: \"inherit\",\r\n            display: \"block\",\r\n            width: \"100%\",\r\n            textAlign: \"center\",\r\n          }}\r\n        >\r\n          <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Row;\r\n","import { FC, ReactElement } from \"react\";\r\nimport { Pagination } from \"react-bootstrap\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nimport \"./pages.css\";\r\n\r\ntype IProps = {\r\n  maxPage: number;\r\n  last20?: boolean;\r\n};\r\n\r\nconst Pages: FC<IProps> = ({ maxPage, last20 }): ReactElement => {\r\n  const location = useLocation();\r\n  let pathName = location.pathname;\r\n  if (pathName === \"/\") pathName = \"/index.php\";\r\n\r\n  const locationParams = new URLSearchParams(location.search);\r\n\r\n  let currentPage: number | string;\r\n  const page = locationParams.get(\"page\");\r\n  if (!page) currentPage = 1;\r\n  else if (page === \"last20\") currentPage = \"last20\";\r\n  else currentPage = parseInt(page, 10) || 1;\r\n\r\n  let pages = [];\r\n  for (let i = 1; i <= maxPage; i++) {\r\n    locationParams.set(\"page\", String(i));\r\n    let href = \"#\" + pathName + \"?\" + locationParams.toString();\r\n\r\n    pages.push(\r\n      <Pagination.Item active={currentPage === i} key={i} href={href}>\r\n        {i}\r\n      </Pagination.Item>\r\n    );\r\n  }\r\n\r\n  if (last20 === true) {\r\n    locationParams.set(\"page\", \"last20\");\r\n    let href = \"#\" + pathName + \"?\" + locationParams.toString();\r\n    pages.push(\r\n      <Pagination.Item\r\n        active={currentPage === \"last20\"}\r\n        key=\"last20\"\r\n        href={href}\r\n      >\r\n        »\r\n      </Pagination.Item>\r\n    );\r\n  }\r\n\r\n  return <Pagination style={{ margin: \"0px\" }}>{pages}</Pagination>;\r\n};\r\n\r\nexport default Pages;\r\n","import { FC, ReactElement, useRef, RefObject, useCallback } from \"react\";\r\nimport { FormControl, Button, ButtonGroup, Form } from \"react-bootstrap\";\r\n\r\nimport \"./text_editor.css\";\r\n\r\ntype IProps = {\r\n  placeholder: string;\r\n  showVoting?: boolean;\r\n  isVoting?: boolean;\r\n  text: string;\r\n  isFetching: boolean;\r\n  formRef?: RefObject<HTMLFormElement>;\r\n  onChange?: (text: string) => void;\r\n  onShowVotingChange?: (show: boolean) => void;\r\n};\r\n\r\nconst TextEditor: FC<IProps> = ({\r\n  placeholder,\r\n  showVoting,\r\n  isVoting,\r\n  isFetching,\r\n  text,\r\n  formRef,\r\n  onChange,\r\n  onShowVotingChange,\r\n}): ReactElement => {\r\n  const textAreaRef = useRef() as React.MutableRefObject<HTMLTextAreaElement>;\r\n\r\n  const onButtonCode1c = (e: React.MouseEvent<HTMLButtonElement>) => {\r\n    e.preventDefault();\r\n\r\n    const openTag = \"[1C]\\n\";\r\n    const closeTag = \"\\n[/1C]\";\r\n\r\n    const textAreaNode = textAreaRef.current;\r\n\r\n    const start = textAreaNode.selectionStart;\r\n    const end = textAreaNode.selectionEnd;\r\n\r\n    const oldText = textAreaNode.value;\r\n    const len = oldText.length;\r\n    const selectedText = oldText.substring(start, end);\r\n    const replacement = openTag + selectedText + closeTag;\r\n    let newText =\r\n      oldText.substring(0, start) + replacement + oldText.substring(end, len);\r\n\r\n    if (onChange) onChange(newText);\r\n  };\r\n\r\n  const handleShowVotingChange = useCallback(\r\n    (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      if (onShowVotingChange) onShowVotingChange(e.currentTarget.checked);\r\n    },\r\n    [onShowVotingChange]\r\n  );\r\n\r\n  const handleChange = useCallback(\r\n    (e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n      if (onChange) onChange(e.currentTarget.value);\r\n    },\r\n    [onChange]\r\n  );\r\n\r\n  const handleKeyUp = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\r\n    if (!formRef) return;\r\n    if (!formRef.current) return;\r\n\r\n    if (e.key === \"Enter\" && e.ctrlKey) {\r\n      formRef.current.dispatchEvent(\r\n        new Event(\"submit\", { cancelable: true, bubbles: true })\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <FormControl\r\n        as=\"textarea\"\r\n        aria-label=\"Сообщение\"\r\n        placeholder={placeholder}\r\n        cols={70}\r\n        rows={3}\r\n        value={text}\r\n        onChange={handleChange}\r\n        onKeyUp={handleKeyUp}\r\n        ref={textAreaRef}\r\n        className=\"text-editor input\"\r\n        data-lpignore={true}\r\n      />\r\n      <div className=\"flex-row\">\r\n        <ButtonGroup>\r\n          <Button\r\n            size=\"sm\"\r\n            variant=\"light\"\r\n            onClick={onButtonCode1c}\r\n            style={{ marginRight: \"5px\" }}\r\n            className=\"button\"\r\n          >\r\n            Код 1С\r\n          </Button>\r\n          <Button\r\n            size=\"sm\"\r\n            variant=\"light\"\r\n            disabled={isFetching}\r\n            type=\"submit\"\r\n            className=\"button\"\r\n          >\r\n            {isFetching ? \"Отправляется\" : \"Отправить\"}\r\n          </Button>\r\n        </ButtonGroup>\r\n        {showVoting && (\r\n          <Form.Check\r\n            id=\"show_voting\"\r\n            type=\"checkbox\"\r\n            checked={isVoting}\r\n            onChange={handleShowVotingChange}\r\n            label=\"Голосование\"\r\n            style={{ margin: \"auto 0px auto auto\" }}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TextEditor;\r\n","import { FC, ReactElement, useCallback, useState, useRef } from \"react\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport InputGroup from \"react-bootstrap/InputGroup\";\r\nimport { FormGroup } from \"react-bootstrap\";\r\n\r\nimport { useActionCreators, useAppDispatch, useAppSelector } from \"src/store\";\r\n\r\nimport Sections from \"./sections\";\r\nimport TextEditor from \"src/components/common/text_editor\";\r\nimport ErrorElem from \"src/components/common/error\";\r\n\r\nimport \"./new_topic.css\";\r\nimport { ISectionItem, newTopicActions, postNewTopicIfNeeded } from \"src/store\";\r\nimport { useEventCallback } from \"usehooks-ts\";\r\n\r\ntype IProps = {\r\n  onSubmitSuccess?: any;\r\n};\r\n\r\nconst NewTopic: FC<IProps> = ({ onSubmitSuccess }): ReactElement => {\r\n  const sections = useAppSelector((state) => state.sections);\r\n  const newTopic = useAppSelector((state) => state.newTopic);\r\n\r\n  const [currentSection, setSection] = useState(null);\r\n  const [votes, setVotes] = useState(Array(10).fill(\"\"));\r\n\r\n  const formRef = useRef(null);\r\n  const dispatch = useAppDispatch();\r\n  const actions = useActionCreators(newTopicActions);\r\n\r\n  const onSectionChange = useEventCallback(\r\n    (e: React.SyntheticEvent, section: ISectionItem) => {\r\n      setSection(section);\r\n      actions.changeSection(section);\r\n    }\r\n  );\r\n\r\n  const onVoteTextChange =\r\n    (i: number) => (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      let votesCopy = votes.slice();\r\n      votesCopy[i] = e.target.value;\r\n      setVotes(votesCopy);\r\n    };\r\n\r\n  const onSubmit = useEventCallback((e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n\r\n    if (!currentSection) {\r\n      actions.setError(\"Не выбрана секция\");\r\n      return;\r\n    }\r\n\r\n    let subject = newTopic.subject;\r\n    if (!subject) {\r\n      actions.setError(\"Не указана тема\");\r\n      return;\r\n    }\r\n\r\n    if (!newTopic.text) {\r\n      actions.setError(\"Не указано сообщение\");\r\n      return;\r\n    }\r\n\r\n    let params = {\r\n      subject,\r\n      text: newTopic.text,\r\n      section: currentSection.id,\r\n      forum: currentSection.forum,\r\n      isVoting: newTopic.isVoting,\r\n      votingItems: [],\r\n      onSuccess: this_onSubmitSuccess,\r\n    };\r\n\r\n    if (newTopic.isVoting) {\r\n      params.votingItems = [];\r\n      for (let i = 1; i <= 10; i++) {\r\n        let val = votes[i - 1];\r\n        if (val) {\r\n          params.votingItems.push(val);\r\n        }\r\n      }\r\n    }\r\n\r\n    dispatch(postNewTopicIfNeeded(params));\r\n  });\r\n\r\n  const onSubjectChange = useCallback(\r\n    (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      actions.changeSubject(e.target.value);\r\n    },\r\n    [actions]\r\n  );\r\n\r\n  const onTextChange = useCallback(\r\n    (text: string) => {\r\n      actions.changeText(text);\r\n    },\r\n    [actions]\r\n  );\r\n\r\n  const onShowVotingChange = useCallback(\r\n    (show: boolean) => {\r\n      actions.showVoting(show);\r\n    },\r\n    [actions]\r\n  );\r\n\r\n  const this_onSubmitSuccess = () => {\r\n    actions.clear();\r\n\r\n    if (onSubmitSuccess) {\r\n      onSubmitSuccess();\r\n    }\r\n  };\r\n  let groupsElem = [];\r\n  for (let forum in sections.tree) {\r\n    groupsElem.push(\r\n      <option key={forum} value={forum.toLowerCase()}>\r\n        {forum}\r\n      </option>\r\n    );\r\n  }\r\n\r\n  let votingOptions = [];\r\n\r\n  if (newTopic.isVoting) {\r\n    votingOptions.push(<div key=\"p\">Варианты:</div>);\r\n    for (let i = 1; i <= 10; i++) {\r\n      votingOptions.push(\r\n        <InputGroup\r\n          key={i}\r\n          size=\"sm\"\r\n          style={{ marginBottom: \"3px\", width: \"100%\" }}\r\n        >\r\n          <InputGroup.Text style={{ width: \"40px\" }} className=\"input\">\r\n            {`${i}.`}\r\n          </InputGroup.Text>\r\n          <Form.Control\r\n            type=\"text\"\r\n            aria-label={`Вариант ${i}`}\r\n            maxLength={50}\r\n            className=\"input\"\r\n            value={votes[i - 1]}\r\n            onChange={onVoteTextChange(i - 1)}\r\n          />\r\n        </InputGroup>\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form className=\"new-topic-container\" onSubmit={onSubmit} ref={formRef}>\r\n      <div id=\"newtopic_form\" className=\"new-topic-text\">\r\n        <div>\r\n          <b>Новая тема:</b>\r\n        </div>\r\n        {newTopic.error && <ErrorElem text={newTopic.error} />}\r\n        <div className=\"flex-row\" style={{ marginBottom: \"3px\" }}>\r\n          <Form.Select\r\n            disabled\r\n            size=\"sm\"\r\n            value={newTopic.forum}\r\n            style={{ flex: \"0 1 90px\" }}\r\n            className=\"input\"\r\n          >\r\n            {groupsElem}\r\n          </Form.Select>\r\n          <Sections\r\n            id=\"target_section\"\r\n            defaultValue=\"Секция\"\r\n            selected={newTopic.section?.code}\r\n            size=\"sm\"\r\n            style={{ flex: \"1 1 auto\" }}\r\n            onChange={onSectionChange}\r\n          />\r\n        </div>\r\n        <Form.Control\r\n          type=\"text\"\r\n          aria-label=\"Тема\"\r\n          placeholder=\"Тема\"\r\n          size=\"sm\"\r\n          value={newTopic.subject}\r\n          onChange={onSubjectChange}\r\n          style={{ marginBottom: \"3px\" }}\r\n          className=\"input\"\r\n          maxLength={90}\r\n        />\r\n        <TextEditor\r\n          placeholder=\"Сообщение\"\r\n          showVoting={true}\r\n          isVoting={newTopic.isVoting}\r\n          text={newTopic.text}\r\n          isFetching={newTopic.status === \"loading\"}\r\n          onChange={onTextChange}\r\n          onShowVotingChange={onShowVotingChange}\r\n          formRef={formRef}\r\n        />\r\n      </div>\r\n      <FormGroup className=\"new-topic-voting\">{votingOptions}</FormGroup>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default NewTopic;\r\n","import { FC, ReactElement } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useActionCreators } from \"src/store\";\r\nimport { topicsListActions } from \"src/store\";\r\n\r\nimport \"./topic_preview.css\";\r\n\r\ntype IProps = {\r\n  topicId: number;\r\n  onFirst: () => void;\r\n  onLast: () => void;\r\n  onPrev: () => void;\r\n  onNext: () => void;\r\n};\r\n\r\nconst PreviewButtons: FC<IProps> = ({\r\n  topicId,\r\n  onFirst,\r\n  onPrev,\r\n  onNext,\r\n  onLast,\r\n}): ReactElement => {\r\n  const actions = useActionCreators(topicsListActions);\r\n\r\n  const closePreview = () => {\r\n    actions.togglePreview({ topicId, msgNumber: 0 });\r\n  };\r\n\r\n  return (\r\n    <div className=\"topic-preview-rewind\">\r\n      <div\r\n        className=\"topic-preview-button flex-small\"\r\n        onClick={onFirst}\r\n        title=\"К первому\"\r\n      >\r\n        <i className=\"fa fa-angle-double-left\" aria-hidden=\"true\"></i>\r\n      </div>\r\n      <div\r\n        className=\"topic-preview-button flex-large\"\r\n        onClick={onPrev}\r\n        title=\"К предыдущему\"\r\n      >\r\n        <i className=\"fa fa-angle-left\" aria-hidden=\"true\"></i>\r\n      </div>\r\n      <div\r\n        className=\"topic-preview-button flex-large\"\r\n        onClick={onNext}\r\n        title=\"К следующему\"\r\n      >\r\n        <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i>\r\n      </div>\r\n      <div\r\n        className=\"topic-preview-button flex-small\"\r\n        onClick={onLast}\r\n        title=\"К последнему\"\r\n      >\r\n        <i className=\"fa fa-angle-double-right\" aria-hidden=\"true\"></i>\r\n      </div>\r\n      <div\r\n        className=\"topic-preview-button close-preview\"\r\n        onClick={closePreview}\r\n      >\r\n        <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i>\r\n        <i\r\n          className=\"fa fa-angle-left\"\r\n          aria-hidden=\"true\"\r\n          style={{ marginLeft: \"-2px\" }}\r\n        ></i>\r\n      </div>\r\n      <div className=\"topic-preview-button edit-preview\">\r\n        <Link to={`/topic.php?id=${topicId}&page=last20#F`}>\r\n          <i\r\n            className=\"fa fa-pencil\"\r\n            aria-hidden=\"true\"\r\n            style={{ color: \"var(--font-color)\" }}\r\n          ></i>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PreviewButtons;\r\n","function highlight(text: string): string {\r\n  const keywords = new Set(\r\n    (\r\n      \"if|если|then|тогда|elsif|иначеесли|else|иначе|endif|конецесли\" +\r\n      \"|do|цикл|for|для|to|по|each|каждого|in|из|while|пока|enddo|конеццикла\" +\r\n      \"|procedure|процедура|endprocedure|конецпроцедуры|function|функция|endfunction\" +\r\n      \"|конецфункции|var|перем|export|экспорт|goto|перейти|and|и|or|или|not|не\" +\r\n      \"|val|знач|break|прервать|continue|продолжить|return|возврат|try|попытка|except|исключение\" +\r\n      \"|endtry|конецпопытки|raise|вызватьисключение|false|ложь|true|истина\" +\r\n      \"|undefined|неопределено|null|new|новый|execute|выполнить\" +\r\n      \"|асинх|async|ждать|wait\"\r\n    ).split(\"|\")\r\n  );\r\n\r\n  const Спецсиволы = new Set(\"():;.,=+-*<>?[]%/\".split(\"\"));\r\n  const НачалоТега = \"<span class=\";\r\n  const КонецТега = \"</span>\";\r\n\r\n  const мЦветФона = \"bg>\";\r\n  const мЦветЧисла = \"num>\";\r\n  const мЦветСтроки = \"str>\";\r\n  //const мЦветПараметра = \"par>\";\r\n  const мЦветКомментария = \"com>\";\r\n  const мЦветСпецСимвола = \"sp>\";\r\n  const мЦветПрепроцессора = \"pr>\";\r\n  const мЦветКлючевогоСлова1 = \"key>\";\r\n\r\n  let СтрокаРезультат: string;\r\n  let УстановленЦвет: boolean;\r\n  let ПоследнийЦвет: string | undefined;\r\n\r\n  let ВСтроке = false;\r\n  let Токен = \"\";\r\n\r\n  function ПустаяСтрока(Строка: string) {\r\n    return Строка.trim() === \"\";\r\n  }\r\n\r\n  function Сред(Строка: string, Нач: number, Длина: number) {\r\n    return Строка.substring(Нач - 1, Нач - 1 + Длина);\r\n  }\r\n\r\n  function Прав(Строка: string, Длина: number) {\r\n    return Строка.substring(Строка.length - Длина);\r\n  }\r\n\r\n  function isKeyword(token: string) {\r\n    return keywords.has(token.toLowerCase().trim());\r\n  }\r\n\r\n  function ДобавитьЧастьСтроки1С(Часть: string, Цвет: string) {\r\n    if (Часть === \" \" || ПоследнийЦвет === Цвет) {\r\n      СтрокаРезультат = СтрокаРезультат + Часть;\r\n    } else {\r\n      if (УстановленЦвет) {\r\n        СтрокаРезультат = СтрокаРезультат + КонецТега;\r\n        УстановленЦвет = false;\r\n      }\r\n\r\n      СтрокаРезультат = СтрокаРезультат + НачалоТега + Цвет + Часть;\r\n      УстановленЦвет = true;\r\n      ПоследнийЦвет = Цвет;\r\n    }\r\n  }\r\n\r\n  function РазукраситьСтроку(СтрокаКода: string) {\r\n    //  https://infostart.ru/profile/34707/public/\r\n    let ВСтрокеСкобка = false;\r\n    let ВСтрокеТильда = false;\r\n    let НачалоСтроки = 1;\r\n    let ТокенДоТочки = true;\r\n    // Заменяем 8 символьную табуляцию на 4 символьную пробелами\r\n\r\n    // Последовательно перебираются все символы строки кода\r\n    let Поз = 1;\r\n    for (Поз = 1; Поз <= СтрокаКода.length; Поз++) {\r\n      let ТекущийСимвол = СтрокаКода.charAt(Поз - 1);\r\n      if (ВСтроке) {\r\n        // Операции встрече символа \"кавычка\"\r\n        if (ТекущийСимвол === '\"') {\r\n          // Нашли парную кавычку - окрашиваем как строку\r\n          ДобавитьЧастьСтроки1С(\r\n            Сред(СтрокаКода, НачалоСтроки, Поз - НачалоСтроки + 1),\r\n            мЦветСтроки\r\n          );\r\n          ВСтроке = false;\r\n          Токен = \"\";\r\n          ТокенДоТочки = true;\r\n        } else {\r\n          Токен = Токен + ТекущийСимвол;\r\n        }\r\n      } else if (ВСтрокеСкобка) {\r\n        // Операции встрече символа \"кавычка\" литерал\r\n        if (ТекущийСимвол === \"'\") {\r\n          // Нашли парную скобку - окрашиваем как комментарий\r\n          ДобавитьЧастьСтроки1С(\r\n            Сред(СтрокаКода, НачалоСтроки, Поз - НачалоСтроки + 1),\r\n            мЦветСтроки\r\n          );\r\n          ВСтрокеСкобка = false;\r\n          Токен = \"\";\r\n          ТокенДоТочки = true;\r\n        } else {\r\n          Токен = Токен + ТекущийСимвол;\r\n        }\r\n      } else if (ТекущийСимвол === \" \") {\r\n        // Операции при встрече символа табуляции или пробела\r\n        if (!ПустаяСтрока(Токен)) {\r\n          // Пробел после токена, значит\r\n          // токен - ключевое слово...\r\n          if (ВСтрокеТильда) {\r\n            ДобавитьЧастьСтроки1С(Токен + \" \", мЦветСтроки);\r\n            ВСтрокеТильда = false;\r\n          } else if (isKeyword(Токен.trim())) {\r\n            ДобавитьЧастьСтроки1С(Токен + \" \", мЦветКлючевогоСлова1);\r\n          } else if (!isNaN(parseInt(Токен, 10))) {\r\n            ДобавитьЧастьСтроки1С(Токен + \" \", мЦветЧисла);\r\n          } else {\r\n            ДобавитьЧастьСтроки1С(Токен + \" \", мЦветФона);\r\n          }\r\n          Токен = \"\";\r\n        } else {\r\n          СтрокаРезультат = СтрокаРезультат + \" \";\r\n        }\r\n        ТокенДоТочки = true;\r\n      } else if (Спецсиволы.has(ТекущийСимвол)) {\r\n        // Встретился один из специальных символов\r\n        if (!ПустаяСтрока(Токен)) {\r\n          // Чтобы избежать окраски метода объекта с совпадающим именем\r\n          // с одним из ключевых слов, проверяем текущий символ на \".\"\r\n          if (ВСтрокеТильда) {\r\n            ДобавитьЧастьСтроки1С(Токен, мЦветСтроки);\r\n            ВСтрокеТильда = false;\r\n            ТокенДоТочки = ТекущийСимвол !== \".\";\r\n          } else if (ТокенДоТочки && isKeyword(Токен)) {\r\n            ДобавитьЧастьСтроки1С(Токен, мЦветКлючевогоСлова1);\r\n            ТокенДоТочки = ТекущийСимвол !== \".\";\r\n          } else {\r\n            // Не ключевое слово - значит число\r\n            if (!isNaN(parseInt(Токен, 10))) {\r\n              ДобавитьЧастьСтроки1С(Токен, мЦветЧисла);\r\n            } else {\r\n              ДобавитьЧастьСтроки1С(Токен, мЦветФона);\r\n            }\r\n            ТокенДоТочки = ТекущийСимвол !== \".\";\r\n          }\r\n          Токен = \"\";\r\n        }\r\n        // Один из специальных символов\r\n        if (ТекущийСимвол === \".\" && ПоследнийЦвет === мЦветЧисла) {\r\n          // Продолжение числа\r\n          ДобавитьЧастьСтроки1С(ТекущийСимвол, мЦветЧисла);\r\n          continue;\r\n        } else if (\r\n          ТекущийСимвол === \"=\" &&\r\n          Сред(СтрокаКода, Поз - 1, 1) === \"<\"\r\n        ) {\r\n          // Знак \"меньше или равно\" - вторая ошибка движка Инфостарт\r\n          ПоследнийЦвет = undefined;\r\n        } else if (\r\n          ТекущийСимвол === \"/\" &&\r\n          Сред(СтрокаКода, Поз + 1, 1) === \"/\"\r\n        ) {\r\n          // Проверяется на комментарий\r\n          ДобавитьЧастьСтроки1С(\r\n            Прав(СтрокаКода, СтрокаКода.length - Поз + 1),\r\n            мЦветКомментария\r\n          );\r\n          return;\r\n        }\r\n        ДобавитьЧастьСтроки1С(ТекущийСимвол, мЦветСпецСимвола);\r\n      } else if (ТекущийСимвол === '\"' || ТекущийСимвол === \"|\") {\r\n        // Операции встрече символа \"кавычка\"\r\n        // Первая кавычка, запоминаем позицию и взводим флаг нахождения в строке\r\n        if (ПустаяСтрока(Токен)) {\r\n          НачалоСтроки = Поз;\r\n          ВСтроке = true;\r\n        } else {\r\n          // Ошибка синтаксиса\r\n          ДобавитьЧастьСтроки1С(Токен + ТекущийСимвол, мЦветСтроки);\r\n          Токен = \"\";\r\n        }\r\n        ТокенДоТочки = true;\r\n      } else if (ТекущийСимвол === \"'\") {\r\n        // Операции встрече символа \"кавычка\" литерал\r\n        // Первая кавычка, запоминаем позицию и взводим флаг нахождения в строке\r\n        if (ПустаяСтрока(Токен)) {\r\n          НачалоСтроки = Поз;\r\n          ВСтрокеСкобка = true;\r\n        } else {\r\n          // Ошибка синтаксиса\r\n          ДобавитьЧастьСтроки1С(Токен + ТекущийСимвол, мЦветСтроки);\r\n          Токен = \"\";\r\n        }\r\n        ТокенДоТочки = true;\r\n      } else if (\r\n        ТекущийСимвол === \"#\" ||\r\n        (ТекущийСимвол === \"&\" && ПустаяСтрока(СтрокаРезультат))\r\n      ) {\r\n        // Встретился символ препроцессора\r\n        ДобавитьЧастьСтроки1С(\r\n          Прав(СтрокаКода, СтрокаКода.length - Поз + 1),\r\n          мЦветПрепроцессора\r\n        );\r\n        Поз = СтрокаКода.length;\r\n        break;\r\n      } else if (ТекущийСимвол === \"~\") {\r\n        Токен = Токен + ТекущийСимвол;\r\n        ВСтрокеТильда = true;\r\n      } else {\r\n        // Остальные символы\r\n        Токен = Токен + ТекущийСимвол;\r\n      }\r\n    }\r\n\r\n    if (ВСтроке) {\r\n      // Многострочная строка\r\n      ДобавитьЧастьСтроки1С(\r\n        Сред(СтрокаКода, НачалоСтроки, Поз - НачалоСтроки + 1),\r\n        мЦветСтроки\r\n      );\r\n    } else if (ВСтрокеСкобка) {\r\n      // Незавершенный литерал\r\n      ДобавитьЧастьСтроки1С(\r\n        Сред(СтрокаКода, НачалоСтроки, Поз - НачалоСтроки + 1),\r\n        мЦветСтроки\r\n      );\r\n    } else if (!ПустаяСтрока(Токен)) {\r\n      // Анализируем последний токен строки кода\r\n      if (isKeyword(Токен)) {\r\n        ДобавитьЧастьСтроки1С(Токен, мЦветКлючевогоСлова1);\r\n      } else if (!isNaN(parseInt(Токен, 10))) {\r\n        ДобавитьЧастьСтроки1С(Токен, мЦветЧисла);\r\n      } else {\r\n        ДобавитьЧастьСтроки1С(Токен, мЦветФона);\r\n      }\r\n    }\r\n  }\r\n\r\n  ВСтроке = false;\r\n  Токен = \"\";\r\n  УстановленЦвет = false;\r\n  ПоследнийЦвет = undefined;\r\n  СтрокаРезультат = \"\";\r\n\r\n  let result = [];\r\n\r\n  for (let СтрокаКода of text.split(\"\\n\")) {\r\n    if (ПустаяСтрока(СтрокаКода)) {\r\n      result.push(\"\");\r\n      continue;\r\n    }\r\n\r\n    СтрокаРезультат = \"\";\r\n    РазукраситьСтроку(СтрокаКода);\r\n    if (УстановленЦвет && !ВСтроке) {\r\n      СтрокаРезультат += \"</span>\";\r\n      УстановленЦвет = false;\r\n      ПоследнийЦвет = \"\";\r\n      Токен = \"\";\r\n    } else if (!ВСтроке) {\r\n      ПоследнийЦвет = \"\";\r\n      Токен = \"\";\r\n    }\r\n\r\n    result.push(СтрокаРезультат);\r\n  }\r\n\r\n  return result.join(\"\\n\");\r\n}\r\n\r\nexport default highlight;\r\n","import { ReactElement, useCallback, useEffect, useRef } from \"react\";\r\n\r\nimport { useLocation } from \"react-router-dom\";\r\nimport {\r\n  topicActions,\r\n  getTopicIfNeeded,\r\n  getNewMessagesIfNeeded,\r\n  useAppSelector,\r\n} from \"src/store\";\r\nimport { newMessageActions } from \"src/store\";\r\n\r\nimport Error from \"src/components/common/error\";\r\nimport Pages from \"src/components/common/pages\";\r\nimport Header from \"./header\";\r\nimport TopicInfo from \"./topic_info\";\r\nimport Row from \"../../pages/topic/row\";\r\nimport Footer from \"./footer\";\r\nimport NewMessage from \"./new_message\";\r\nimport { getMaxPage, extractTextFromHTML } from \"src/utils\";\r\nimport { useActionCreators, useAppDispatch } from \"src/store\";\r\n\r\nimport \"./topic.css\";\r\n\r\nvar scrolledToHash: boolean;\r\n\r\nconst getPageNumber = (locationPage: string | string[]): number | \"last20\" => {\r\n  if (!locationPage) return 1;\r\n  if (locationPage === \"last20\") return \"last20\";\r\n  if (isNaN(+locationPage)) return 1;\r\n  return +locationPage;\r\n};\r\n\r\nconst Topic = (): ReactElement => {\r\n  const dispatch = useAppDispatch();\r\n  const actions = useActionCreators(topicActions);\r\n  const location = useLocation();\r\n\r\n  const login = useAppSelector((state) => state.login);\r\n  const info = useAppSelector((state) => state.topic.info);\r\n  const item0 = useAppSelector((state) => state.topic.item0);\r\n  const items = useAppSelector((state) => state.topic.items);\r\n  const error = useAppSelector((state) => state.topic.error);\r\n\r\n  let locationParams = new URLSearchParams(location.search);\r\n  const topicId = +locationParams.get(\"id\");\r\n  const page = getPageNumber(locationParams.get(\"page\"));\r\n  const maxPage = getMaxPage(info.count);\r\n\r\n  const isLastPageRef = useRef(false);\r\n  isLastPageRef.current = page === \"last20\" || page === maxPage;\r\n\r\n  const updateNewMessages = useCallback(() => {\r\n    if (isLastPageRef.current) dispatch(getNewMessagesIfNeeded());\r\n  }, [dispatch]);\r\n\r\n  const onPostNewMessageSuccess = () => {\r\n    updateNewMessages();\r\n    dispatch(newMessageActions.changeText(\"\"));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (info.title) document.title = extractTextFromHTML(info.title);\r\n  }, [info.title]);\r\n\r\n  useEffect(() => {\r\n    dispatch(getTopicIfNeeded(topicId, page));\r\n  }, [dispatch, topicId, page]);\r\n\r\n  useEffect(() => {\r\n    const timer = window.setInterval(updateNewMessages, 60 * 1000);\r\n\r\n    const clearStore = () => {\r\n      actions.clear();\r\n      scrolledToHash = undefined;\r\n      if (timer) clearInterval(timer);\r\n    };\r\n    return clearStore;\r\n  }, [actions, updateNewMessages]);\r\n\r\n  useEffect(() => {\r\n    if (!scrolledToHash && location.hash && items.length > 0) {\r\n      const nodeHash = document.getElementById(location.hash.slice(1));\r\n      if (nodeHash) setTimeout(() => window.scrollTo(0, nodeHash.offsetTop), 1);\r\n      scrolledToHash = true;\r\n    }\r\n  });\r\n\r\n  return (\r\n    <div style={{ marginBottom: \"5px\" }}>\r\n      <Header />\r\n      {error && <Error text={error} />}\r\n      <div className=\"topic-table\">\r\n        <TopicInfo />\r\n        <Row key=\"0\" data={item0} topicId={topicId}/>\r\n        {items.map((item, i) => (\r\n          <Row key={item.n} data={item} topicId={topicId}/>\r\n        ))}\r\n        {(maxPage > 1 || page === \"last20\") && (\r\n          <div className=\"tf\">\r\n            <Pages maxPage={maxPage} last20 />\r\n          </div>\r\n        )}\r\n      </div>\r\n      <Footer page={page} />\r\n      {login.logged && <NewMessage onSubmitSuccess={onPostNewMessageSuccess} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Topic;\r\n","import { FC, ReactElement, useState } from \"react\";\r\nimport { childrenToText } from \"src/utils\";\r\nimport highlight from \"./code_highlight\";\r\nimport \"./code1c.css\";\r\n\r\nconst prepareText = (text: string): string => {\r\n  // replace double new-lines\r\n  let newtext = text\r\n    .replace(/\\n<br>/g, \"\\n\")\r\n    .replace(/<br>\\n/g, \"\\n\")\r\n    .replace(/\\r<br>/g, \"\\n\")\r\n    .replace(/<br>\\r/g, \"\\n\")\r\n    .replace(/<br>/g, \"\\n\")\r\n    .replace(/&/g, \"&amp;\")\r\n    .replace(/</g, \"&lt;\")    \r\n    .replace(/>/g, \"&gt\");    \r\n\r\n  // remove all leading|ending new-lines\r\n  while (newtext[0] === \"\\n\") {\r\n    newtext = newtext.substring(1);\r\n  }\r\n\r\n  while (newtext.substring(newtext.length - 1) === \"\\n\") {\r\n    newtext = newtext.substring(0, newtext.length - 1);\r\n  }\r\n\r\n  return highlight(newtext);\r\n};\r\n\r\nconst Code: FC<{ children?: React.ReactNode }> = ({\r\n  children,\r\n}): ReactElement => {\r\n  const [hidden, setHidden] = useState(true);\r\n\r\n  let text: string = \"\";\r\n  if (children) {\r\n    const textArr = childrenToText(children);\r\n    text = textArr.join(\"\");\r\n\r\n    text = prepareText(text);\r\n  }\r\n\r\n  const onShowClick = () => {\r\n    setHidden(!hidden);\r\n  };\r\n\r\n  let buttonText: string;\r\n  let linesCount = 0;\r\n  if (text) linesCount = text.split(\"\\n\").length;\r\n\r\n  if (hidden) buttonText = `Показать: ${linesCount} строк`;\r\n  else buttonText = \"Скрыть\";\r\n\r\n  let buttonShow: ReactElement | null = null;\r\n  if (linesCount > 7)\r\n    buttonShow = (\r\n      <div className=\"expand-button-div\">\r\n        <span className=\"expand-button-span\" onClick={onShowClick}>\r\n          {buttonText}\r\n        </span>\r\n      </div>\r\n    );\r\n\r\n  let preStyle: React.CSSProperties = {};\r\n\r\n  if (hidden && linesCount > 7) {\r\n    preStyle.overflow = \"hidden\";\r\n    preStyle.height = \"135px\";\r\n  } else {\r\n    preStyle.overflow = \"auto\";\r\n    preStyle.height = \"auto\";\r\n  }\r\n\r\n  return (\r\n    <div style={{ marginTop: \"5px\" }}>\r\n      <pre\r\n        className=\"code-pre\"\r\n        style={preStyle}\r\n        dangerouslySetInnerHTML={{ __html: text }}\r\n      ></pre>\r\n      {buttonShow}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Code;\r\n","import { FC, ReactElement, useRef, useState, useEffect } from \"react\";\r\n\r\nimport { getMaxPage, childrenToText } from \"src/utils\";\r\nimport { fetchTopicInfo } from \"src/api\";\r\nimport { useActionCreators, useAppSelector } from \"src/store\";\r\nimport { ITooltipKeys, tooltipsActions } from \"src/store\";\r\n\r\ntype IProps = {\r\n  topicId: number;\r\n  number: number;\r\n  style?: {};\r\n  children?: React.ReactNode;\r\n};\r\n\r\nconst LinkToPost: FC<IProps> = (props): ReactElement => {\r\n  const timerRef = useRef(null);\r\n  const actions = useActionCreators(tooltipsActions);\r\n\r\n  const currentTopicId = useAppSelector((state) => state.topic.info?.id);\r\n  const tooltipDelay = useAppSelector(\r\n    (state) => +state.options.items.tooltipDelay\r\n  );\r\n\r\n  let initialText = \"\";\r\n  if (!props.children) initialText = String(props.number);\r\n  else initialText = childrenToText(props.children).join(\"\");\r\n\r\n  const [text, setText] = useState(initialText);\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n\r\n    if (!initialText.startsWith(\"http\")) {\r\n      setText(initialText);\r\n      return;\r\n    }\r\n\r\n    const run = async () => {\r\n      const { title } = await fetchTopicInfo(props.topicId);\r\n      if (isMounted) setText(title);\r\n    };\r\n\r\n    run();\r\n\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, [initialText, props.topicId]);\r\n\r\n  const onMouseOver = (e: React.MouseEvent<HTMLElement>) => {\r\n    e.persist();\r\n    timerRef.current = window.setTimeout(() => showToolTip(e), tooltipDelay);\r\n  };\r\n\r\n  const onMouseOut = () => {\r\n    if (timerRef.current) clearTimeout(timerRef.current);\r\n  };\r\n\r\n  const onClick = (e: React.MouseEvent<HTMLElement>) => {\r\n    e.stopPropagation();\r\n    if (timerRef.current) clearTimeout(timerRef.current);\r\n    showToolTip(e);\r\n  };\r\n\r\n  const showToolTip = (e: React.MouseEvent<HTMLElement>) => {\r\n    const { topicId, number } = props;\r\n\r\n    const coords = {\r\n      x: e.pageX,\r\n      y: e.pageY - 50, // remove navbar margin-top\r\n    };\r\n\r\n    const keys: ITooltipKeys = {\r\n      topicId: +topicId,\r\n      number: +number,\r\n    };\r\n\r\n    actions.show({ keys, coords });\r\n  };\r\n\r\n  if (props.topicId === currentTopicId || !isNaN(+text))\r\n    return (\r\n      <span\r\n        onMouseOver={onMouseOver}\r\n        onMouseOut={onMouseOut}\r\n        onClick={onClick}\r\n        className=\"link\"\r\n        style={{ ...props.style }}\r\n      >\r\n        {text}\r\n      </span>\r\n    );\r\n  else {\r\n    const page = getMaxPage(props.number);\r\n\r\n    let pageParam = \"\";\r\n    if (page > 1) pageParam = `&page=${page}`;\r\n\r\n    return (\r\n      <span>\r\n        <a\r\n          href={`#/topic.php?id=${props.topicId}${pageParam}#${props.number}`}\r\n          style={{ ...props.style }}\r\n        >\r\n          {text}\r\n        </a>{\" \"}\r\n        (\r\n        <span\r\n          onMouseOver={onMouseOver}\r\n          onMouseOut={onMouseOut}\r\n          onClick={onClick}\r\n          className=\"link\"\r\n        >\r\n          {props.number}\r\n        </span>\r\n        )\r\n      </span>\r\n    );\r\n  }\r\n};\r\n\r\nexport default LinkToPost;\r\n","import { FC, ReactElement } from \"react\";\r\n\r\ntype IProps = {\r\n  href: string;\r\n  children?: React.ReactNode;\r\n};\r\n\r\nconst LinkToUser: FC<IProps> = ({ href, children }): ReactElement => {\r\n  return (\r\n    <a href={href} className=\"registered-user\">\r\n      {children}\r\n    </a>\r\n  );\r\n};\r\n\r\nexport default LinkToUser;\r\n","import { FC, ReactElement, useEffect, useState } from \"react\";\r\n\r\ntype IProps = {\r\n  href: string;\r\n};\r\n\r\nconst getVideoId = (href: string): string | null => {\r\n  let fullHref = href;\r\n  if (href.search(/http/) === -1) fullHref = \"http://\" + fullHref;\r\n\r\n  try {\r\n    var url = new URL(fullHref);\r\n  } catch (e) {\r\n    return null;\r\n  }\r\n\r\n  if (url.hostname.search(/youtube/) !== -1) {\r\n    return url.searchParams.get(\"v\");\r\n  } else if (url.hostname.search(/youtu\\.be/) !== -1) {\r\n    return url.pathname.substring(1);\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\ntype HrefParams = {\r\n  hrefName: string;\r\n  title: string;\r\n  notFound: boolean;\r\n};\r\n\r\nconst getVideoParams = async (videoId: string): Promise<HrefParams> => {\r\n  const apiKey =\r\n    localStorage.getItem(\"youtubeApiKey\") ||\r\n    \"AIzaSyCztN2QW4Fxw_1YuAHBTOZdYLbzigPz25g\";\r\n  let apiUrl = `https://www.googleapis.com/youtube/v3/videos?key=${apiKey}&fields=items(snippet(title))&part=snippet&id=${videoId}`;\r\n  const response = await fetch(apiUrl);\r\n  const json = await response.json();\r\n\r\n  if (json.items.length === 0)\r\n    return {\r\n      hrefName: \"\",\r\n      title: \"\",\r\n      notFound: true,\r\n    };\r\n\r\n  const title = json.items[0].snippet.title;\r\n\r\n  let hrefName = title;\r\n  let maxLength = 50;\r\n  if (title.length > maxLength + 5)\r\n    hrefName = hrefName.substring(0, maxLength) + \"...\";\r\n\r\n  return {\r\n    hrefName,\r\n    title,\r\n    notFound: false,\r\n  };\r\n};\r\n\r\nconst YoutubeLink: FC<IProps> = ({ href }): ReactElement => {\r\n  let [hrefName, setHrefName] = useState(href);\r\n  let [title, setTitle] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    const run = async () => {\r\n      const videoId = getVideoId(href);\r\n      if (!videoId) return;\r\n\r\n      try {\r\n        const params = await getVideoParams(videoId);\r\n\r\n        if (isMounted) {\r\n          if (params.notFound) setHrefName(href + \" (видео не найдено)\");\r\n          else {\r\n            setHrefName(params.hrefName);\r\n            setTitle(params.title);\r\n          }\r\n        }\r\n      } catch (e) {\r\n        console.error(\"youtube\", videoId, e.message);\r\n      }\r\n    };\r\n\r\n    run();\r\n\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, [href]);\r\n\r\n  const prefix = \"youtube\";\r\n  return <a href={href} title={title}>{`${prefix}: ${hrefName}`}</a>;\r\n};\r\n\r\nexport default YoutubeLink;\r\n","import { FC, ReactElement } from \"react\";\r\nimport URL from \"url-parse\";\r\n\r\nimport LinkToPost from \"./link_to_post\";\r\nimport LinkToUser from \"./link_to_user\";\r\nimport YoutubeLink from \"./youtube_link\";\r\n\r\nimport { childrenToText } from \"src/utils\";\r\nimport { useAppSelector } from \"src/store\";\r\n\r\ntype IProps = {\r\n  href: string;\r\n  parentText?: string;\r\n  target?: string;\r\n  class?: string;\r\n  rel?: string;\r\n  children?: React.ReactNode;\r\n};\r\n\r\nconst fixBrokenLink = (href: string, parentText: string): string => {\r\n  let escapedHref = href\r\n    .replace(/\\[/g, \"\\\\[\")\r\n    .replace(/\\]/g, \"\\\\]\")\r\n    .replace(/\\./g, \"\\\\.\")\r\n    .replace(/\\./g, \".\")\r\n    .replace(/\\*/g, \"\\\\*\")\r\n    .replace(/\\+/g, \"\\\\+\")\r\n    .replace(/\\(/g, \"\\\\(\")\r\n    .replace(/\\)/g, \"\\\\)\")\r\n    .replace(/\\?/g, \"\\\\?\")\r\n    .replace(/\\//g, \"\\\\/\");\r\n\r\n  try {\r\n    let regExp = new RegExp(\r\n      escapedHref + \"<\\\\/a>(\\\\)|[а-яёА-ЯЁ0-9#\\\\-\\\\+\\\\_\\\\%\\\\?=]*)\"\r\n    );\r\n    let arr = parentText.match(regExp);\r\n    if (arr && arr.length > 1) {\r\n      if (arr[1] === \")\" && href.search(\"\\\\(\") === -1) {\r\n        return href;\r\n      }\r\n      href = href + arr[1];\r\n      return href;\r\n    }\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n  return href;\r\n};\r\n\r\nconst isYoutube = (hostname: string): boolean => {\r\n  if (hostname.search(/youtube/) !== -1 || hostname.search(/youtu\\.be/) !== -1)\r\n    return true;\r\n  else return false;\r\n};\r\n\r\nconst isMistaCatalog = (hostname: string): boolean => {\r\n  if (hostname.search(/catalog\\.mista/) !== -1) return true;\r\n  else return false;\r\n};\r\n\r\nconst CustomLink: FC<IProps> = ({\r\n  href,\r\n  children,\r\n  parentText,\r\n  ...props\r\n}): ReactElement => {\r\n  const showYoutubeVideoTitle = useAppSelector(\r\n    (state) => state.options.items.showYoutubeVideoTitle === \"true\"\r\n  );\r\n  const replaceCatalogMista = useAppSelector(\r\n    (state) => state.options.items.replaceCatalogMista === \"true\"\r\n  );\r\n  const fixBrokenLinks = useAppSelector(\r\n    (state) => state.options.items.fixBrokenLinks === \"true\"\r\n  );\r\n\r\n  try {\r\n    var url = new URL(href, true);\r\n  } catch (e) {\r\n    console.error((e as Error).message, href);\r\n    return <a href={href}>{href}</a>;\r\n  }\r\n\r\n  let newHref = href;\r\n  if (newHref.startsWith(\"/\")) {\r\n    url.set(\"protocol\", \"https\");\r\n    url.set(\"hostname\", \"forum.mista.ru\");\r\n    newHref = url.href;\r\n  }\r\n\r\n  if (url.hostname.search(/forum\\.mista.ru/) !== -1) {\r\n    if (url.pathname === \"/topic.php\") {\r\n      return (\r\n        <LinkToPost\r\n          topicId={url.query.id}\r\n          number={url.hash.replace(\"#\", \"\") || \"0\"}\r\n        >\r\n          {childrenToText(children)}\r\n        </LinkToPost>\r\n      );\r\n    } else if (url.pathname === \"/users.php\") {\r\n      return <LinkToUser href={url.href}>{children}</LinkToUser>;\r\n    }\r\n  }\r\n\r\n  if (\r\n    url.hostname === \"a-sitnikov.github.io\" &&\r\n    url.pathname === \"/react.mista/\"\r\n  ) {\r\n    if (Object.keys(url.query).length === 0) {\r\n      url = new URL(href.replace(/#\\//, \"\"), true);\r\n      if (url.pathname === \"/react.mista/topic.php\")\r\n        return (\r\n          <LinkToPost\r\n            topicId={url.query.id}\r\n            number={url.hash.replace(\"#\", \"\") || \"0\"}\r\n          >\r\n            {childrenToText(children)}\r\n          </LinkToPost>\r\n        );\r\n    }\r\n  }\r\n\r\n  if (showYoutubeVideoTitle && isYoutube(url.hostname))\r\n    return <YoutubeLink href={href} />;\r\n\r\n  if (replaceCatalogMista && isMistaCatalog(url.hostname)) {\r\n    url.set(\"hostname\", \"infostart.ru\");\r\n\r\n    return (\r\n      <a\r\n        target={props?.target}\r\n        className={props?.class}\r\n        rel={props?.rel}\r\n        href={url.href}\r\n      >\r\n        {url.href}{\" \"}\r\n      </a>\r\n    );\r\n  }\r\n\r\n  if (fixBrokenLinks && parentText) {\r\n    newHref = fixBrokenLink(newHref, parentText);\r\n  }\r\n\r\n  return (\r\n    <a\r\n      target={props?.target}\r\n      className={props?.class}\r\n      rel={props?.rel}\r\n      href={newHref}\r\n    >\r\n      {children}\r\n    </a>\r\n  );\r\n};\r\n\r\nexport default CustomLink;\r\n","import { FC, ReactElement } from \"react\";\r\nimport CSS from \"csstype\";\r\n\r\nimport { domain } from \"src/api\";\r\n\r\nimport { IVotingItem } from \"src/store\";\r\n\r\ntype IProps = {\r\n  topicId: number;\r\n  data: IVotingItem;\r\n  colors: string[];\r\n  total: number;\r\n  n: number;\r\n};\r\n\r\nconst VoteItem: FC<IProps> = ({\r\n  topicId,\r\n  data,\r\n  total,\r\n  n,\r\n  colors,\r\n}): ReactElement => {\r\n  const img = `${domain}/css/voting${n}.png`;\r\n\r\n  let percent = 0;\r\n\r\n  if (total) {\r\n    percent = Math.round((100 * data.count) / total);\r\n  }\r\n\r\n  const imgStyle: CSS.Properties = {\r\n    maxWidth: \"500px\",\r\n    width: \"100%\",\r\n    height: \"15px\",\r\n  };\r\n\r\n  return (\r\n    <li className=\"voting-item\">\r\n      <div className=\"voting-title\">\r\n        <a\r\n          rel=\"nofollow\"\r\n          style={{ textDecoration: \"none\" }}\r\n          href={`#/topic.php?id=${topicId}&sel=${n}`}\r\n        >\r\n          <b>\r\n            <span style={{ color: colors[n - 1] }}>{`${n}. ${data.text}`}</span>\r\n          </b>\r\n        </a>\r\n      </div>\r\n      <div className=\"voting-percentage\">\r\n        <b>\r\n          <span\r\n            style={{ color: colors[n - 1] }}\r\n          >{`${percent}% (${data.count})`}</span>\r\n        </b>\r\n      </div>\r\n      <div className=\"voting-bar\">\r\n        <div style={{ width: `${percent}%` }}>\r\n          <a href={img}>\r\n            <img src={img} style={imgStyle} alt={`вариант ${n}`} />\r\n          </a>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default VoteItem;\r\n","import { FC, ReactElement } from \"react\";\r\nimport VoteItem from \"./vote_item\";\r\nimport { IVotingItem } from \"src/store\";\r\n\r\ntype IProps = {\r\n  items: IVotingItem[];\r\n  topicId: number;\r\n  colors: string[];\r\n};\r\n\r\nconst VoteChart: FC<IProps> = ({ items, topicId, colors }): ReactElement => {\r\n  let total = Math.max(...items.map((item) => item.count));\r\n\r\n  return (\r\n    <ul style={{ paddingLeft: 0 }}>\r\n      {items\r\n        .filter((item) => item.text)\r\n        .map((data, i) => (\r\n          <VoteItem\r\n            key={i}\r\n            data={data}\r\n            total={total}\r\n            n={i + 1}\r\n            topicId={topicId}\r\n            colors={colors}\r\n          />\r\n        ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default VoteChart;\r\n","import { FC, ReactElement, memo } from \"react\";\r\n\r\ntype IProps = {\r\n  colors: string[];\r\n  n: number;\r\n  text: string;\r\n};\r\n\r\nconst Vote: FC<IProps> = memo(({ colors, n, text }): ReactElement => {\r\n  return (\r\n    <div style={{ marginTop: \"5px\" }}>\r\n      <b>\r\n        <span style={{ color: colors[n - 1] }}>{`${n}. ${text}`}</span>\r\n      </b>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default Vote;\r\n","import { FC, ReactElement, useEffect, useState, memo } from \"react\";\r\nimport HtmlToReact from \"html-to-react\";\r\n\r\nimport Code from \"src/components/extensions/code1c\";\r\nimport LinkToPost from \"src/components/extensions/link_to_post\";\r\nimport CustomLink from \"src/components/extensions/custom_link\";\r\n\r\nimport VoteChart from \"./vote_chart\";\r\nimport Vote from \"./vote\";\r\nimport { useAppSelector } from \"src/store\";\r\nimport { fetchTopicInfo } from \"src/api\";\r\nimport dayjs from \"dayjs\";\r\n\r\ntype IProps = {\r\n  topicId: number;\r\n  topicDate: number;\r\n  n: number;\r\n  html: string;\r\n  vote: number;\r\n  style?: {};\r\n};\r\n\r\nconst processLinksToPosts = (text: string, topicId: number): string => {\r\n  const regexp = /(\\()(\\d+)(\\))(?![^<>]*<\\/)/gi; // (12)\r\n  return text.replace(regexp, (res, ...segments) => {\r\n    const number = segments[1];\r\n    return `(<link data-topicid='${topicId}' data-number='${number}'></link>)`;\r\n  });\r\n};\r\n\r\nconst processCode1C = (text: string): string => {\r\n  return text\r\n    .replace(/\\[1[CС]\\]/gi, \"<code>\") //[1C]\r\n    .replace(/<1[CС]>/gi, \"<code>\") //<1C>\r\n    .replace(/\\[\\/1[CС]\\]/gi, \"</code>\") //[/1C]\r\n    .replace(/<\\/1[CС]>/gi, \"</code>\"); //</1C>\r\n};\r\n\r\n\r\nconst processImages = (text: string, topicId: number, topicDate: number, messageNumber: number): string | undefined => {\r\n  const regexp = /\\[IMG_(\\d*)\\]/gi; // ([IMG_1])\r\n  const date = dayjs(topicDate).format('YYYY/MM/DD');\r\n\r\n  return text.replace(regexp, (res, ...segments) => {\r\n    const number = segments[0];\r\n    //topics/files/2024/02/16/892137/2/1_preview.png\r\n    const href = `https://forum.mista.ru/topics/files/${date}/${topicId}/${messageNumber}/${number}_preview.png`; \r\n\r\n    return `<img src='${href}' style='max-width: 100%'/>`;\r\n    });\r\n};\r\n\r\nconst processText = (text: string, topicId: number, topicDate: number, messageNumber: number): string | undefined => {\r\n  if (!text) return text;\r\n\r\n  let newtext = processCode1C(text);\r\n  newtext = processLinksToPosts(newtext, topicId);\r\n  newtext = processImages(newtext, topicId, topicDate, messageNumber);\r\n\r\n  return newtext;\r\n};\r\n\r\nconst htmlToReactParser = HtmlToReact.Parser();\r\nconst processNodeDefinitions = HtmlToReact.ProcessNodeDefinitions();\r\nconst isValidNode = () => true;\r\n\r\nconst linkProcessor = {\r\n  shouldProcessNode: (node: any): boolean => {\r\n    return node?.name === \"link\";\r\n  },\r\n  processNode: (\r\n    node: any,\r\n    children: any,\r\n    index: number\r\n  ): React.ReactElement => {\r\n    const topicId = node.attribs[\"data-topicid\"];\r\n    const number = node.attribs[\"data-number\"];\r\n    return <LinkToPost key={index} topicId={topicId} number={number} />;\r\n  },\r\n};\r\n\r\nconst codeProcessor = {\r\n  shouldProcessNode: (node: any) => {\r\n    return node?.name === \"code\" || node?.name === \"pre\";\r\n  },\r\n  processNode: (node: any, children: any) => {\r\n    return <Code>{children}</Code>;\r\n  },\r\n};\r\n\r\nconst ProcessedText: FC<{ html: string; topicId: number, topicDate: number,  messageNumber: number}> = memo(\r\n  ({ html, topicId, topicDate, messageNumber }): ReactElement => {\r\n    const processedHtml = processText(html, topicId, topicDate, messageNumber);\r\n    const processingInstructions = [\r\n      linkProcessor,\r\n      codeProcessor,\r\n      {\r\n        // <custom link>\r\n        shouldProcessNode: (node: any) => {\r\n          return node?.name === \"a\";\r\n        },\r\n        processNode: function (node: any, children: any, index: number) {\r\n          const href = node.attribs[\"href\"];\r\n          return (\r\n            <CustomLink key={index} href={href} parentText={processedHtml}>\r\n              {children}\r\n            </CustomLink>\r\n          );\r\n        },\r\n      },\r\n      {\r\n        // Anything else\r\n        shouldProcessNode: () => true,\r\n        processNode: processNodeDefinitions.processDefaultNode,\r\n      },\r\n    ];\r\n\r\n    const reactComponent = htmlToReactParser.parseWithInstructions(\r\n      processedHtml,\r\n      isValidNode,\r\n      processingInstructions\r\n    );\r\n\r\n    return <>{reactComponent}</>;\r\n  }\r\n);\r\n\r\nconst MsgText: FC<IProps> = ({\r\n  topicId,\r\n  topicDate,\r\n  n,\r\n  html,\r\n  vote,\r\n  style,\r\n}): ReactElement => {\r\n  const info = useAppSelector((state) => state.topic.info);\r\n  const voteColors = useAppSelector((state) => state.options.voteColors);\r\n\r\n  let initialVoteText: string = null;\r\n  if (vote && info.voting && topicId === info.id)\r\n    initialVoteText = info.voting[vote - 1].text;\r\n\r\n  const [voteText, setVoteText] = useState(initialVoteText);\r\n\r\n  useEffect(() => {\r\n    const getVoteText = async () => {\r\n      try {\r\n        const _info = await fetchTopicInfo(topicId);\r\n        setVoteText(_info.voting[vote - 1].text);\r\n      } catch (e) {\r\n        console.error(e.message);\r\n      }\r\n    };\r\n\r\n    if (vote && !initialVoteText) {\r\n      getVoteText();\r\n    }\r\n  }, [vote, initialVoteText, topicId]);\r\n\r\n  const showVote = vote !== 0 && voteText !== null;\r\n  let voteChart: ReactElement;\r\n  if (n === 0 && info.isVoting && info.voting) {\r\n    voteChart = (\r\n      <VoteChart items={info.voting} topicId={topicId} colors={voteColors} />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"message\" style={style}>\r\n      {voteChart}\r\n      <div>\r\n        <ProcessedText html={html} topicId={topicId} topicDate={topicDate} messageNumber={n}/>\r\n      </div>\r\n      {showVote && <Vote text={voteText} n={vote} colors={voteColors} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MsgText;\r\n","import { FC, ReactElement, useEffect, useState } from \"react\";\r\nimport type { Property } from \"csstype\";\r\nimport dayjs from \"dayjs\";\r\nimport classNames from \"classnames\";\r\nimport { domain } from \"src/api\";\r\n\r\nimport { useActionCreators } from \"src/store\";\r\nimport type { ITopicMessage } from \"src/store\";\r\nimport { newMessageActions } from \"src/store\";\r\n\r\ntype IProps = {\r\n  data: ITopicMessage;\r\n  isAuthor: boolean;\r\n  isYou: boolean;\r\n  isTooltip?: boolean;\r\n};\r\n\r\nconst UserInfo: FC<IProps> = (props): ReactElement => {\r\n  const actions = useActionCreators(newMessageActions);\r\n\r\n  const [imgDisplay, setImgDisplay] = useState<Property.Display>(\"none\");\r\n\r\n  const onClick = () => {\r\n    const { data } = props;\r\n    actions.changeText(`(${data.n})`);\r\n\r\n    let elem = document.getElementById(\"message_text\");\r\n    if (elem) window.scrollTo(0, elem.offsetTop);\r\n  };\r\n\r\n  const onImageLoad = () => {\r\n    setImgDisplay(\"inline\");\r\n  };\r\n\r\n  const onImageError = () => {\r\n    setImgDisplay(\"none\");\r\n  };\r\n\r\n  const { data, isAuthor, isYou, isTooltip } = props;\r\n  useEffect(() => {\r\n    setImgDisplay(\"none\");\r\n  }, [data.n]);\r\n\r\n  const href = `${domain}/users.php?id=${data.userId}`;\r\n  let dataStr: ReactElement | string;\r\n  if (!data) {\r\n    dataStr = \"\";\r\n  } else if (data.n === 0) {\r\n    dataStr = dayjs(data.time).format(\"DD.MM.YY - HH:mm\");\r\n  } else {\r\n    dataStr = (\r\n      <>\r\n        <span className=\"message-number\">{data.n}</span>\r\n        {\" - \" + dayjs(data.time).format(\"DD.MM.YY - HH:mm\")}\r\n      </>\r\n    );\r\n  }\r\n\r\n  const userClassNames = classNames(\"registered-user\", {\r\n    \"is-author\": isAuthor,\r\n    \"is-you\": isYou,\r\n  });\r\n\r\n  let imgElem: ReactElement;\r\n  if (window.innerWidth > 768)\r\n    imgElem = (\r\n      <img\r\n        src={`${domain}/css/user_icons/${data.userId}_16x16.png`}\r\n        alt=\"user ico\"\r\n        onLoad={onImageLoad}\r\n        onError={onImageError}\r\n        style={{ display: imgDisplay, marginBottom: \"4px\", marginRight: \"1px\" }}\r\n      />\r\n    );\r\n\r\n  let timeElem: ReactElement;\r\n  if (isTooltip) {\r\n    timeElem = (\r\n      <div\r\n        className=\"ah\"\r\n        style={{ display: \"inline-block\", marginLeft: \"5px\" }}\r\n      >\r\n        {dataStr}\r\n      </div>\r\n    );\r\n  } else {\r\n    timeElem = (\r\n      <div className=\"message-time\">\r\n        <span className=\"ah\">{dataStr}</span>\r\n        <button className=\"button ah\" onClick={onClick}>\r\n          {dataStr}\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"user-info\">\r\n      {imgElem}\r\n      <a className={userClassNames} href={href}>\r\n        {data.user}\r\n      </a>\r\n      {timeElem}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserInfo;\r\n","import { FC, ReactElement, useState, useEffect } from \"react\";\r\n\r\nimport { fetchTopicMessage } from \"src/api\";\r\n\r\nimport MsgText from \"src/pages/topic/row/msg_text\";\r\nimport UserInfo from \"src/pages/topic/row/user_info\";\r\n\r\nimport { ITopicMessage } from \"src/store\";\r\n\r\nimport \"./topic_preview.css\";\r\n\r\ntype IProps = {\r\n  topicId: number;\r\n  n: number;\r\n  author: string;\r\n  loggedUserId: number;\r\n  onDataLoaded?: () => void;\r\n};\r\n\r\nconst PreviewContent: FC<IProps> = ({\r\n  topicId,\r\n  n,\r\n  author,\r\n  loggedUserId,\r\n  onDataLoaded,\r\n}): ReactElement => {\r\n  const [data, setData] = useState<ITopicMessage | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const getData = async () => {\r\n      try {\r\n        const _data = await fetchTopicMessage(topicId, n);\r\n        if (_data) {\r\n          setData(_data);\r\n          setError(null);\r\n          if (onDataLoaded) onDataLoaded();\r\n        } else {\r\n          setData(null);\r\n          setError(`Не найдено сообщение ${n}`);\r\n        }\r\n      } catch (e) {\r\n        setData(null);\r\n        setError((e as Error).message);\r\n      }\r\n    };\r\n\r\n    getData();\r\n  }, [topicId, n, onDataLoaded]);\r\n\r\n  if (!data && !error) return null;\r\n\r\n  return (\r\n    <>\r\n      {data && (\r\n        <div className=\"preview-content\">\r\n          <div className=\"topic-preview-userinfo\">\r\n            <UserInfo\r\n              data={data}\r\n              isAuthor={data.user === author}\r\n              isYou={data.userId === loggedUserId}\r\n              isTooltip\r\n            />\r\n          </div>\r\n          <MsgText\r\n            topicId={topicId}\r\n            topicDate={data.time}\r\n            n={n}\r\n            html={data.text}\r\n            vote={data.vote}\r\n            style={{ overflowY: \"auto\", overflowWrap: \"break-word\" }}\r\n          />\r\n        </div>\r\n      )}\r\n      {error && <span>{error}</span>}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PreviewContent;\r\n","import { FC, ReactElement, useCallback, useState } from \"react\";\r\nimport { SwipeEventData, useSwipeable } from \"react-swipeable\";\r\nimport { fetchTopicInfo } from \"src/api\";\r\n\r\nimport PreviewButtons from \"./preview_buttons\";\r\nimport PreviewContent from \"./preview_content\";\r\nimport \"./topic_preview.css\";\r\n\r\ntype IProps = {\r\n  topicId: number;\r\n  initialMsgNumber: number;\r\n  author: string;\r\n  loggedUserId: number;\r\n};\r\n\r\nconst TopicPreview: FC<IProps> = ({\r\n  topicId,\r\n  initialMsgNumber,\r\n  author,\r\n  loggedUserId,\r\n}): ReactElement => {\r\n  const [deltaX, setDeltaX] = useState(0);\r\n  const [display, setDispaly] = useState(\"none\");\r\n  const [state, setState] = useState({\r\n    msgNumber: initialMsgNumber,\r\n    key: 0,\r\n  });\r\n\r\n  const onClickFirst = () => {\r\n    setState({\r\n      msgNumber: 0,\r\n      key: state.key,\r\n    });\r\n  };\r\n\r\n  const onClickNext = () => {\r\n    setState({\r\n      msgNumber: state.msgNumber + 1,\r\n      key: state.key,\r\n    });\r\n  };\r\n\r\n  const onClickPrev = () => {\r\n    if (state.msgNumber > 0)\r\n      setState({\r\n        msgNumber: state.msgNumber - 1,\r\n        key: state.key,\r\n      });\r\n  };\r\n\r\n  const onClickLast = async () => {\r\n    const info = await fetchTopicInfo(topicId);\r\n    setState({\r\n      msgNumber: info.count,\r\n      key: state.key,\r\n    });\r\n  };\r\n\r\n  const onSwiping = (eventData: SwipeEventData) => {\r\n    if (Math.abs(eventData.deltaX) < 35) setDeltaX(0);\r\n    else setDeltaX(eventData.deltaX);\r\n  };\r\n\r\n  const onSwiped = (eventData: SwipeEventData) => {\r\n    if (Math.abs(eventData.deltaX) > 150) {\r\n      if (eventData.dir === \"Left\") {\r\n        setState({\r\n          msgNumber: state.msgNumber + 1,\r\n          key: state.key + 1,\r\n        });\r\n      } else if (eventData.dir === \"Right\" && state.msgNumber > 0) {\r\n        setState({\r\n          msgNumber: state.msgNumber - 1,\r\n          key: state.key + 1,\r\n        });\r\n      }\r\n    }\r\n    setDeltaX(0);\r\n  };\r\n\r\n  const swipeable = useSwipeable({\r\n    onSwiping,\r\n    onSwiped,\r\n    delta: 15,\r\n  });\r\n\r\n  const onContentLoaded = useCallback(() => {\r\n    setDispaly(\"block\");\r\n  }, []);\r\n\r\n  let items = [state.msgNumber];\r\n\r\n  if (deltaX < 0) items.push(state.msgNumber + 1);\r\n  else if (deltaX > 0 && state.msgNumber > 0) items.push(state.msgNumber - 1);\r\n\r\n  const style: React.CSSProperties = {\r\n    transform: `translate3d(${deltaX}px, 0px, 0px)`,\r\n    flexDirection: deltaX > 0 ? \"row-reverse\" : \"row\",\r\n  };\r\n\r\n  return (\r\n    <div className=\"preview-container\" style={{ display }}>\r\n      <div className=\"topic-preview\">\r\n        <PreviewButtons\r\n          topicId={topicId}\r\n          onFirst={onClickFirst}\r\n          onLast={onClickLast}\r\n          onNext={onClickNext}\r\n          onPrev={onClickPrev}\r\n        />\r\n        <div className=\"preview-carousel\" {...swipeable} style={style}>\r\n          <div\r\n            className=\"preview-carousel-item\"\r\n            key={state.key}\r\n            style={{ order: 0 }}\r\n          >\r\n            <PreviewContent\r\n              topicId={topicId}\r\n              n={items[0]}\r\n              loggedUserId={loggedUserId}\r\n              author={author}\r\n              onDataLoaded={onContentLoaded}\r\n            />\r\n          </div>\r\n          {items.length > 1 && (\r\n            <div\r\n              className=\"preview-carousel-item\"\r\n              key={state.key + 1}\r\n              style={{ order: 1 }}\r\n            >\r\n              <PreviewContent\r\n                topicId={topicId}\r\n                n={items[1]}\r\n                loggedUserId={loggedUserId}\r\n                author={author}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TopicPreview;\r\n","import { ReactElement, useCallback, useEffect } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport queryString from \"query-string\";\r\n\r\nimport { useAppDispatch, useAppSelector } from \"src/store\";\r\nimport { getTopicsListIfNeeded } from \"src/store\";\r\n\r\nimport Header from \"./header\";\r\nimport TableHeader from \"./table_header\";\r\nimport Row from \"./row\";\r\nimport Pages from \"src/components/common/pages\";\r\nimport NewTopic from \"./new_topic\";\r\nimport Error from \"src/components/common/error\";\r\n\r\nimport TopicPreview from \"src/components/preview/topic_preview\";\r\n\r\nimport \"./topics_list.css\";\r\n\r\nconst TopicsList = (): ReactElement => {\r\n  const dispatch = useAppDispatch();\r\n  const items = useAppSelector((state) => state.topicsList.items);\r\n  const status = useAppSelector((state) => state.topicsList.status);\r\n  const error = useAppSelector((state) => state.topicsList.error);\r\n  const loggedUserId = useAppSelector((state) => state.login.userId);\r\n\r\n  const location = useLocation();\r\n\r\n  const updateTopicsList = useCallback(\r\n    (locationParams) => {\r\n      dispatch(getTopicsListIfNeeded(locationParams));\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  useEffect(() => {\r\n    document.title = \"React.Mista\";\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, [location.pathname, location.search]);\r\n\r\n  useEffect(() => {\r\n    const locationParams = queryString.parse(location.search);\r\n    updateTopicsList(locationParams);\r\n  }, [location.search, updateTopicsList]);\r\n\r\n  let rows = new Array(items.length);\r\n  for (let item of items) {\r\n    rows.push(<Row key={item.id} {...item} topicId={item.id} />);\r\n\r\n    if (item.showPreview)\r\n      rows.push(\r\n        <TopicPreview\r\n          key={`preview${item.id}`}\r\n          topicId={item.id}\r\n          initialMsgNumber={item.previewMsgNumber}\r\n          author={item.author}\r\n          loggedUserId={loggedUserId}\r\n        />\r\n      );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Header />\r\n      {error && <Error text={error} />}\r\n      <div className=\"topic-list-table\">\r\n        <TableHeader\r\n          onUpdateClick={updateTopicsList}\r\n          isLoading={status === \"loading\"}\r\n        />\r\n        {rows}\r\n        <div className=\"tf\">\r\n          <Pages maxPage={10} />\r\n        </div>\r\n      </div>\r\n      <div\r\n        id=\"F\"\r\n        className=\"newtopic\"\r\n        style={{ marginBottom: \"10px\", marginTop: \"5px\", position: \"relative\" }}\r\n      >\r\n        <NewTopic onSubmitSuccess={updateTopicsList} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TopicsList;\r\n","import { ReactElement } from \"react\";\r\n\r\nimport { useAppSelector } from \"src/store\";\r\nimport Login from \"src/components/login\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst forums = {\r\n  \"1c\": \"1С:Предприятие\",\r\n  life: \"О жизни\",\r\n  it: \"Информационные технологии\",\r\n  job: \"Работа\",\r\n};\r\n\r\nconst Header = (): ReactElement => {\r\n  const info = useAppSelector((state) => state.topic.info);\r\n\r\n  return (\r\n    <div className=\"flex-row\">\r\n      <div className=\"header-left\">\r\n        <Login />\r\n      </div>\r\n      <div className=\"header-right\">\r\n        <span id=\"forum_string\" className=\"bold120\">\r\n          <Link\r\n            to={`/index.php?forum=${info.forum}`}\r\n            style={{ textDecoration: \"none\" }}\r\n          >\r\n            {forums[info.forum]}\r\n          </Link>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import { ReactElement } from \"react\";\r\n\r\nimport { useAppSelector } from \"src/store\";\r\nimport { domain, urlTopicInfo, urlTopicMessages } from \"src/api\";\r\n\r\nconst TopicInfo = (): ReactElement => {\r\n  const topicId = useAppSelector((state) => state.topic.info.id);\r\n  const title = useAppSelector((state) => state.topic.info.title);\r\n\r\n  let yandexUrl =\r\n    \"https://www.yandex.ru/search/?text=\" + encodeURIComponent(title);\r\n\r\n  return (\r\n    <div className=\"topic-row\">\r\n      <div className=\"cell-userinfo\">\r\n        <div className=\"topic-tools\">\r\n          <a\r\n            title=\"API.info\"\r\n            href={`${domain}/${urlTopicInfo}?id=${topicId}`}\r\n            className=\"agh\"\r\n            style={{ display: \"block\", lineHeight: \"1em\" }}\r\n          >\r\n            i\r\n          </a>\r\n          <a\r\n            title=\"API.messages\"\r\n            href={`${domain}/${urlTopicMessages}?id=${topicId}&from=0&to=20`}\r\n            className=\"agh\"\r\n            style={{ display: \"block\", lineHeight: \"1em\" }}\r\n          >\r\n            m\r\n          </a>\r\n          {/*<a href=\"add_voting.php?topic_id=815217\" title=\"Добавить голосование\">vote</a> &nbsp;&nbsp;*/}\r\n        </div>\r\n      </div>\r\n      <div className=\"cell-message\">\r\n        <div className=\"flex-row\">\r\n          <div style={{ flex: 1, textAlign: \"center\" }}>\r\n            <a href={`${domain}/topic.php?id=${topicId}`}>\r\n              <h1\r\n                className=\"topic-title\"\r\n                dangerouslySetInnerHTML={{ __html: title }}\r\n              ></h1>\r\n            </a>\r\n            <div className=\"moder-action\"></div>\r\n          </div>\r\n          <div style={{ flex: \"0 0 20px\", position: \"relative\" }}>\r\n            <div className=\"div-va-middle\">\r\n              <a\r\n                rel=\"noopener noreferrer\"\r\n                href={yandexUrl}\r\n                title=\"Искать в Яндексе\"\r\n                target=\"_blank\"\r\n                className=\"yandex\"\r\n              >\r\n                Я\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TopicInfo;\r\n","import { FC, ReactElement } from \"react\";\r\n\r\nimport UserInfo from \"./user_info\";\r\nimport MsgText from \"./msg_text\";\r\nimport { useAppSelector } from \"src/store\";\r\nimport { ITopicMessage } from \"src/store\";\r\n\r\ntype IProps = {\r\n  data: ITopicMessage;\r\n  topicId: number;\r\n};\r\n\r\nconst Row: FC<IProps> = ({ data, topicId }): ReactElement => {\r\n  const login = useAppSelector((state) => state.login);\r\n  const author = useAppSelector((state) => state.topic.item0?.user || \"\");\r\n\r\n  if (!data) return null;\r\n\r\n  return (\r\n    <div className=\"topic-row\" id={String(data.n)}>\r\n      <div className=\"cell-userinfo\">\r\n        <UserInfo\r\n          data={data}\r\n          isAuthor={data.user === author}\r\n          isYou={data.user === login.userName}\r\n        />\r\n      </div>\r\n      <div className=\"cell-message\">\r\n        <MsgText\r\n          html={data.text}\r\n          topicId={topicId}\r\n          topicDate={data.time}\r\n          n={data.n}\r\n          vote={data.vote}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Row;\r\n","import { FC, ReactElement } from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\n\r\nimport { getMaxPage } from \"src/utils\";\r\nimport { useAppDispatch, useAppSelector } from \"src/store\";\r\nimport { defaultInfo, getNewMessagesIfNeeded } from \"src/store\";\r\n\r\ntype IProps = { page?: number | string };\r\n\r\nconst Footer: FC<IProps> = ({ page }): ReactElement => {\r\n  const dispatch = useAppDispatch();\r\n  const info = useAppSelector((state) => state.topic.info || defaultInfo);\r\n  const status = useAppSelector((state) => state.topic.status);\r\n\r\n  const onBookmarkClick = () => {\r\n    //dispatch(addBookmark(info));\r\n  };\r\n\r\n  const onRefreshClick = () => {\r\n    dispatch(getNewMessagesIfNeeded());\r\n  };\r\n\r\n  const maxPage = getMaxPage(info.count);\r\n\r\n  let showUpdateButton = false;\r\n  if (page === \"last20\" || page === maxPage) showUpdateButton = true;\r\n\r\n  return (\r\n    <div className=\"flex-row\" id=\"F\">\r\n      <div className=\"ta-left va-top\" style={{ width: \"50%\" }}>\r\n        <Button\r\n          onClick={onBookmarkClick}\r\n          disabled={false}\r\n          size=\"sm\"\r\n          className=\"button\"\r\n          variant=\"light\"\r\n        >\r\n          {\"Закладка\"}\r\n        </Button>\r\n      </div>\r\n      <div className=\"ta-right va-middle\" style={{ marginLeft: \"auto\" }}>\r\n        {showUpdateButton && (\r\n          <Button\r\n            onClick={onRefreshClick}\r\n            disabled={status === \"loading\"}\r\n            size=\"sm\"\r\n            className=\"button\"\r\n            variant=\"light\"\r\n          >\r\n            {status === \"loading\" ? \"Обновляется\" : \"Обновить ветку\"}\r\n          </Button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","import React, { FC, ReactElement, useState, useCallback } from \"react\";\r\nimport { FormGroup, Form } from \"react-bootstrap\";\r\n\r\nimport TextEditor from \"src/components/common/text_editor\";\r\nimport { useActionCreators, useAppDispatch, useAppSelector } from \"src/store\";\r\nimport { newMessageActions, postNewMessage, newTopicActions } from \"src/store\";\r\n\r\nimport type { PostNewmessageParams } from \"src/store\";\r\n\r\ntype IProps = {\r\n  onSubmitSuccess?: () => void;\r\n};\r\n\r\nconst NewMessage: FC<IProps> = ({ onSubmitSuccess }): ReactElement => {\r\n  const [voting, setVoting] = useState<number | undefined>();\r\n  const dispatch = useAppDispatch();\r\n  const actions = useActionCreators(newMessageActions);\r\n\r\n  const info = useAppSelector((state) => state.topic.info);\r\n  const newMessage = useAppSelector((state) => state.newMessage);\r\n\r\n  const onSubmit = (e: React.SyntheticEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    let params: PostNewmessageParams = {\r\n      text: newMessage.text,\r\n      topicId: String(info?.id),\r\n      onSuccess: afterSubmit,\r\n      voting_select: undefined,\r\n    };\r\n\r\n    if (voting) {\r\n      params.voting_select = voting;\r\n    }\r\n\r\n    dispatch(postNewMessage(params));\r\n  };\r\n\r\n  const afterSubmit = () => {\r\n    actions.changeText(\"\");\r\n    setVoting(undefined);\r\n\r\n    if (onSubmitSuccess) {\r\n      onSubmitSuccess();\r\n    }\r\n  };\r\n\r\n  const clearVoting = (e: React.MouseEvent<HTMLElement>) => {\r\n    e.preventDefault();\r\n    setVoting(undefined);\r\n  };\r\n\r\n  const setVotingOption = (i: number) => {\r\n    setVoting(i);\r\n  };\r\n\r\n  const onTextChange = useCallback(\r\n    (text: string) => {\r\n      dispatch(newTopicActions.changeText(text));\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  let votingElem: ReactElement;\r\n  if (info?.isVoting && info?.voting) {\r\n    let votingOptions = [];\r\n    for (let i = 1; i <= info.voting.length; i++) {\r\n      const item = info.voting[i - 1];\r\n      if (!item.text) continue;\r\n\r\n      votingOptions.push(\r\n        <Form.Check\r\n          type=\"radio\"\r\n          key={i}\r\n          name=\"voting\"\r\n          checked={voting === i}\r\n          onChange={() => setVotingOption(i)}\r\n          label={`${i}. ${item.text}`}\r\n        />\r\n      );\r\n    }\r\n\r\n    votingElem = (\r\n      <FormGroup>\r\n        <legend>\r\n          <small>\r\n            Ваш выбор:\r\n            <span\r\n              id=\"voting_clear\"\r\n              style={{ marginLeft: \"5px\", cursor: \"pointer\" }}\r\n              onClick={clearVoting}\r\n            >\r\n              очистить\r\n            </span>\r\n          </small>\r\n        </legend>\r\n        {votingOptions}\r\n        Обоснуйте свой выбор!\r\n      </FormGroup>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <form style={{ marginTop: \"5px\" }} onSubmit={onSubmit}>\r\n      <div className=\"bold\">Добавить сообщение в тему:</div>\r\n      <div className=\"new-message-container\">\r\n        <div className=\"new-message-text\">\r\n          <TextEditor\r\n            isFetching={newMessage.status === \"loading\"}\r\n            text={newMessage.text}\r\n            placeholder=\"Сообщение\"\r\n            onChange={onTextChange}\r\n          />\r\n        </div>\r\n        <div className=\"new-message-voting\">{votingElem}</div>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default NewMessage;\r\n","import { FC, ReactElement } from \"react\";\r\nimport { Form } from \"react-bootstrap\";\r\n\r\ntype IProps = {\r\n  name: string;\r\n  label: string;\r\n  value: string;\r\n  values: Array<{ name: string; descr: string }>;\r\n  onChange: (\r\n    e: React.ChangeEvent<HTMLInputElement>,\r\n    name: string,\r\n    value: string\r\n  ) => void;\r\n  oneLine: boolean;\r\n};\r\n\r\nconst RadioOption: FC<IProps> = ({\r\n  name,\r\n  label,\r\n  value,\r\n  values,\r\n  oneLine,\r\n  onChange,\r\n}): ReactElement => {\r\n  const onChangeValue = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    onChange(e, name, e.target.value);\r\n  };\r\n\r\n  return (\r\n    <span>\r\n      <span style={{ marginRight: \"5px\" }}> {label} </span>\r\n      {oneLine && <br />}\r\n      {values.map((item, i) => (\r\n        <Form.Check\r\n          key={i}\r\n          type=\"radio\"\r\n          id={item.name}\r\n          label={item.descr}\r\n          name={label}\r\n          checked={item.name === value}\r\n          value={item.name}\r\n          inline={oneLine}\r\n          onChange={onChangeValue}\r\n        ></Form.Check>\r\n      ))}\r\n    </span>\r\n  );\r\n};\r\n\r\nexport default RadioOption;\r\n","import { FC } from \"react\";\r\n\r\ntype IProps = {\r\n  name: string;\r\n  label: string;\r\n  value: string;\r\n  onChange: (\r\n    e: React.ChangeEvent<HTMLInputElement>,\r\n    name: string,\r\n    value: string\r\n  ) => void;\r\n  postfix?: string;\r\n};\r\n\r\nconst StringOption: FC<IProps> = (props): React.ReactElement => {\r\n  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name } = props;\r\n    props.onChange(e, name, e.target.value);\r\n  };\r\n\r\n  const { name, value, label, postfix } = props;\r\n\r\n  return (\r\n    <label htmlFor={name} style={{ marginRight: \"5px\" }}>\r\n      <span style={{ marginRight: \"5px\" }}>{label}</span>\r\n      <input\r\n        type=\"string\"\r\n        name={name}\r\n        value={value}\r\n        onChange={onChange}\r\n        className=\"input\"\r\n      />\r\n      {postfix !== undefined ? (\r\n        <span style={{ marginLeft: \"5px\" }}>{postfix}</span>\r\n      ) : null}\r\n    </label>\r\n  );\r\n};\r\n\r\nexport default StringOption;\r\n","export const formTabs = [\r\n  {\r\n    tabName: \"Общие\",\r\n    rows: [\r\n      [\"theme\"],\r\n      [\"topicsPerPage\"],\r\n      [\"autoRefreshTopicsList\", \"autoRefreshTopicsListInterval\"],\r\n      [\"autoRefreshTopic\", \"autoRefreshTopicInterval\"],\r\n    ],\r\n  },\r\n  {\r\n    tabName: \"Тултипы\",\r\n    rows: [[\"showTooltips\", \"tooltipDelay\"], [\"showTooltipOnPostLink\"]],\r\n  },\r\n  {\r\n    tabName: \"Ссылки\",\r\n    rows: [\r\n      [\"showYoutubeVideoTitle\"],\r\n      [\"replaceCatalogMista\"],\r\n      [\"fixBrokenLinks\"],\r\n    ],\r\n  },\r\n];\r\n\r\nexport const formParams = {\r\n  theme: {\r\n    type: \"radio\",\r\n    label: \"Цветовая палитра:\",\r\n    oneLine: true,\r\n    values: [\r\n      { name: \"yellow\", descr: \"Золотая\" },\r\n      { name: \"lightgray\", descr: \"Серая\" },\r\n      { name: \"dark\", descr: \"Темная\" },\r\n    ],\r\n  },\r\n  topicsPerPage: {\r\n    type: \"number\",\r\n    label: \"Тем на странице (max 99):\",\r\n    min: 1,\r\n    max: 99,\r\n  },\r\n  autoRefreshTopicsList: {\r\n    type: \"checkbox\",\r\n    label: \"Автообновление списка тем\",\r\n  },\r\n  autoRefreshTopicsListInterval: {\r\n    type: \"number\",\r\n    label: \"\",\r\n    min: 60,\r\n    max: 1000000,\r\n    postfix: \"сек\",\r\n  },\r\n  autoRefreshTopic: {\r\n    type: \"checkbox\",\r\n    label: \"Автообновление темы\",\r\n  },\r\n  autoRefreshTopicInterval: {\r\n    type: \"number\",\r\n    label: \"\",\r\n    min: 60,\r\n    max: 1000000,\r\n    postfix: \"сек\",\r\n  },\r\n  //Tooltips\r\n  showTooltips: {\r\n    type: \"checkbox\",\r\n    label: \"Показывать тултипы, задержка\",\r\n    disabled: true,\r\n  },\r\n  tooltipDelay: {\r\n    type: \"number\",\r\n    max: 1000000,\r\n    label: \"\",\r\n    postfix: \"мс\",\r\n    disabled: true,\r\n  },\r\n  showTooltipOnPostLink: {\r\n    type: \"checkbox\",\r\n    label: \"Показывать тултип ссыки на другую ветку\",\r\n    disabled: true,\r\n  },\r\n  //links\r\n  showYoutubeVideoTitle: {\r\n    type: \"checkbox\",\r\n    label: \"Показывать наименования роликов youtube\",\r\n  },\r\n  replaceCatalogMista: {\r\n    type: \"checkbox\",\r\n    label: \"Обратно заменять catalog.mista.ru на infostart.ru\",\r\n  },\r\n  fixBrokenLinks: {\r\n    type: \"checkbox\",\r\n    label: \"Чинить поломанные ссылки (с русскими символами)\",\r\n  },\r\n};\r\n","import { FC, ReactElement } from \"react\";\r\n\r\ntype IProps = {\r\n  name: string;\r\n  children?: React.ReactNode;\r\n};\r\n\r\nconst Tab: FC<IProps> = ({ name, children }): ReactElement => {\r\n  return (\r\n    <div>\r\n      <div className=\"tab-header\">{name}</div>\r\n      <div className=\"tab-content\">{children}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Tab;\r\n","import { ReactElement, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { Form, FormControl, Button } from \"react-bootstrap\";\r\n\r\nimport RadioOption from \"./radio_option\";\r\nimport StringOption from \"./string_option\";\r\n\r\nimport { formTabs, formParams } from \"./formscheme\";\r\nimport Tab from \"./tab\";\r\n\r\nimport { IOptionsItems, useAppDispatch, useAppSelector } from \"src/store\";\r\nimport { defaultOptionsState, optionsActions } from \"src/store\";\r\n\r\nimport \"./options.css\";\r\n\r\nconst Options = (): ReactElement => {\r\n  const dispatch = useAppDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const options = useAppSelector((state) => state.options);\r\n\r\n  const [state, setState] = useState({\r\n    items: options.items,\r\n  });\r\n\r\n  const closeForm = () => {\r\n    navigate(\"/#\");\r\n  };\r\n\r\n  const resetOptions = () => {\r\n    setState({\r\n      ...state,\r\n      items: Object.assign({}, defaultOptionsState.items),\r\n    });\r\n  };\r\n\r\n  const applyOptions = () => {\r\n    dispatch(optionsActions.save(state.items));\r\n    closeForm();\r\n  };\r\n\r\n  const onChange = (\r\n    e: React.FormEvent<HTMLElement>,\r\n    name: string,\r\n    value: IOptionsItems[keyof IOptionsItems]\r\n  ) => {\r\n    let items = Object.assign({}, state.items);\r\n    items[name] = value;\r\n    setState({\r\n      ...state,\r\n      items,\r\n    });\r\n  };\r\n\r\n  let tabs = [];\r\n  for (let tab of formTabs) {\r\n    let rows = [];\r\n    for (let i in tab.rows) {\r\n      const row = tab.rows[i];\r\n      let rowElem = [];\r\n      for (let name of row) {\r\n        const item = formParams[name];\r\n        if (!item) continue;\r\n\r\n        const value = state.items[name];\r\n\r\n        if (item.type === \"radio\") {\r\n          rowElem.push(\r\n            <RadioOption\r\n              key={name}\r\n              name={name}\r\n              label={item.label}\r\n              values={item.values}\r\n              value={value}\r\n              oneLine={item.oneLine}\r\n              onChange={onChange}\r\n            />\r\n          );\r\n        } else if (item.type === \"number\") {\r\n          if (item.label)\r\n            rowElem.push(\r\n              <label\r\n                htmlFor={name}\r\n                key={name + \"_label\"}\r\n                style={{ fontWeight: \"inherit\" }}\r\n              >\r\n                {item.label}\r\n              </label>\r\n            );\r\n\r\n          rowElem.push(\r\n            <div className=\"options-number\" key={name}>\r\n              <FormControl\r\n                type=\"number\"\r\n                min={item.min}\r\n                max={item.max}\r\n                value={value}\r\n                disabled={item.disabled}\r\n                onChange={(e) => onChange(e, name, e.target.value)}\r\n                className=\"input\"\r\n                size=\"sm\"\r\n              ></FormControl>\r\n              {item.postfix && (\r\n                <span\r\n                  key={name + \"_postfix\"}\r\n                  style={{ marginLeft: \"5px\", flex: \"0 0 auto\" }}\r\n                >\r\n                  {item.postfix}\r\n                </span>\r\n              )}\r\n            </div>\r\n          );\r\n        } else if (item.type === \"string\") {\r\n          rowElem.push(\r\n            <StringOption\r\n              key={name}\r\n              name={name}\r\n              label={item.label}\r\n              postfix={item.postfix}\r\n              value={value}\r\n              onChange={onChange}\r\n            />\r\n          );\r\n        } else if (item.type === \"checkbox\") {\r\n          rowElem.push(\r\n            <Form.Check\r\n              id={name}\r\n              type=\"checkbox\"\r\n              label={item.label}\r\n              key={name}\r\n              name={name}\r\n              checked={String(value) === \"true\"}\r\n              disabled={item.disabled}\r\n              onChange={(e) => onChange(e, name, String(e.target.checked))}\r\n              style={{ flex: \"0 0 auto\", margin: \"0px\", maxWidth: \"100%\" }}\r\n            />\r\n          );\r\n        }\r\n      }\r\n\r\n      rows.push(\r\n        <div key={i} className=\"options-row\">\r\n          {rowElem}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    tabs.push(\r\n      <Tab key={tab.tabName} name={tab.tabName}>\r\n        {rows}\r\n      </Tab>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"options-form\">\r\n      <div className=\"options-header\" style={{ cursor: \"default\" }}>\r\n        <b>Настройки</b>\r\n      </div>\r\n      {tabs}\r\n      <div className=\"button-row\">\r\n        <Button\r\n          id=\"applyOptions\"\r\n          size=\"sm\"\r\n          variant=\"light\"\r\n          style={{ margin: \"5px\" }}\r\n          className=\"button\"\r\n          onClick={applyOptions}\r\n        >\r\n          OK\r\n        </Button>\r\n        <Button\r\n          id=\"cancelOptions\"\r\n          size=\"sm\"\r\n          variant=\"light\"\r\n          style={{ margin: \"5px\", float: \"left\" }}\r\n          className=\"button\"\r\n          onClick={closeForm}\r\n        >\r\n          Отмена\r\n        </Button>\r\n        <Button\r\n          id=\"defaultOptions\"\r\n          size=\"sm\"\r\n          variant=\"light\"\r\n          style={{ margin: \"5px\", float: \"right\" }}\r\n          className=\"button\"\r\n          onClick={resetOptions}\r\n        >\r\n          Сбросить настройки\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Options;\r\n","import { ReactElement } from \"react\";\r\nimport { Routes, Route } from \"react-router-dom\";\r\nimport { Container } from \"react-bootstrap\";\r\n\r\nimport TopicsList from \"./topics_list\";\r\nimport Topic from \"./topic\";\r\nimport Options from \"./options\";\r\n\r\nconst AppRoutes = (): ReactElement => {\r\n  return (\r\n    <Container>\r\n      <Routes>\r\n        <Route path=\"/\" element={<TopicsList />} />\r\n        <Route path=\"/index.php\" element={<TopicsList />} />\r\n        <Route path=\"/topic.php\" element={<Topic />} />\r\n        <Route path=\"/options.php\" element={<Options />} />\r\n      </Routes>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default AppRoutes;\r\n","import { ReactElement } from \"react\";\r\nimport { domain } from \"src/api\";\r\n\r\nconst NavBarFooter = (): ReactElement => {\r\n  return (\r\n    <footer className=\"flex-row navbar-footer\">\r\n      <a href={`${domain}/rules.php`}>Правила</a>\r\n      <span className=\"separator\">|</span>\r\n      <a href={`${domain}/about.php`}>Описание</a>\r\n      <span className=\"separator\">|</span>\r\n      <b>\r\n        <a href={`${domain}/ad.php`}>Реклама на сайте</a>{\" \"}\r\n      </b>\r\n      <span className=\"separator\">|</span>\r\n      <a href={`${domain}/find.php`}>Поиск</a>\r\n      <span className=\"separator\">|</span>\r\n      <a rel=\"nofollow\" href={`${domain}/sections_list.php`}>\r\n        Секции\r\n      </a>\r\n      <span className=\"separator\">|</span>\r\n      <a rel=\"nofollow\" href={`${domain}/rating.php`}>\r\n        Рейтинг\r\n      </a>\r\n      <span className=\"separator\">|</span>\r\n      <a href=\"http://kb.mista.ru\">Книга знаний</a>\r\n      <span className=\"separator\">|</span>\r\n      <a href=\"http://wiki.mista.ru\">Вики-миста (КЗ2)</a>\r\n      <span className=\"separator\">|</span>\r\n      <a rel=\"nofollow\" href=\"http://m.mista.ru/\">\r\n        Мобильная\r\n      </a>\r\n      <span className=\"separator\">|</span>\r\n      <a href={`${domain}/archive.php`}>Архив</a>\r\n      <span className=\"separator\">|</span>\r\n      <a href={`${domain}/moders.php`}>Модераторы</a>\r\n      <span className=\"separator\">|</span>\r\n      <a href={`${domain}/users_gallery.php`}>Галерея</a>\r\n      <span className=\"separator\">|</span>\r\n      <a href={`${domain}/ban_list.php`}>Баны</a>\r\n      <span className=\"separator\">|</span>\r\n      <span>18+</span>\r\n    </footer>\r\n  );\r\n};\r\n\r\nexport default NavBarFooter;\r\n","import { FC, ReactElement } from \"react\";\r\n\r\ntype IProps = {\r\n  closeWindow?: (e: React.SyntheticEvent<HTMLDivElement>) => void;\r\n  children?: React.ReactNode;\r\n};\r\n\r\nconst TooltipHeader: FC<IProps> = ({ children, closeWindow }): ReactElement => {\r\n  return (\r\n    <div className=\"tooltip-header\">\r\n      {children}\r\n      <div\r\n        className=\"tooltip-close\"\r\n        onClick={closeWindow}\r\n        onTouchEnd={closeWindow}\r\n      >\r\n        <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i>\r\n        <i\r\n          className=\"fa fa-angle-left\"\r\n          aria-hidden=\"true\"\r\n          style={{ marginLeft: \"-2px\" }}\r\n        ></i>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TooltipHeader;\r\n","import { FC, ReactElement } from \"react\";\r\n\r\ntype IProps = {\r\n  onScroll?: (delta: number) => void;\r\n  children?: React.ReactNode;\r\n};\r\n\r\nconst TooltipBody: FC<IProps> = ({ children, onScroll }): ReactElement => {\r\n  let startX = 0;\r\n\r\n  const onTouchStart = (e: React.TouchEvent<HTMLElement>) => {\r\n    startX = e.nativeEvent.changedTouches[0].clientX;\r\n  };\r\n\r\n  const onTouchEnd = (e: React.TouchEvent<HTMLElement>) => {\r\n    if (!onScroll) return;\r\n\r\n    let endX = e.nativeEvent.changedTouches[0].clientX;\r\n    if (Math.abs(endX - startX) > 100) onScroll(-endX + startX);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"tooltip-text\"\r\n      onTouchStart={onTouchStart}\r\n      onTouchEnd={onTouchEnd}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TooltipBody;\r\n","import React, { FC, ReactElement } from \"react\";\r\n\r\nimport Draggable from \"react-draggable\";\r\n\r\nimport TooltipHeader from \"./tooltip_header\";\r\nimport TooltipBody from \"./tooltip_body\";\r\n\r\nimport \"./tooltip.css\";\r\n\r\nimport { useActionCreators } from \"src/store\";\r\nimport { ITooltipItem, tooltipsActions } from \"src/store\";\r\n\r\ntype IProps = {\r\n  tooltip: ITooltipItem;\r\n  zIndex?: number;\r\n  children?: React.ReactNode;\r\n};\r\n\r\nconst TooltipWindow: FC<IProps> = ({\r\n  tooltip,\r\n  zIndex,\r\n  children,\r\n}): ReactElement => {\r\n  const actions = useActionCreators(tooltipsActions);\r\n\r\n  const onCloseClick = () => {\r\n    actions.close(tooltip.keys);\r\n  };\r\n\r\n  const { coords } = tooltip;\r\n\r\n  let axis: \"both\" | \"x\" | \"y\" | \"none\";\r\n  let position: {\r\n    top: number;\r\n    left: number;\r\n  };\r\n\r\n  if (window.innerWidth <= 768) {\r\n    axis = \"y\";\r\n    position = { top: coords.y, left: 5 };\r\n  } else {\r\n    axis = \"both\";\r\n    position = {\r\n      top: coords.y,\r\n      left: Math.min(coords.x, window.innerWidth - 670),\r\n    };\r\n  }\r\n\r\n  let [header, body] = React.Children.toArray(children);\r\n\r\n  return (\r\n    <Draggable\r\n      axis={axis}\r\n      handle=\".tooltip-header\"\r\n      defaultClassNameDragging=\"dragging\"\r\n      key={zIndex}\r\n    >\r\n      <div className=\"tooltip-window\" style={{ ...position }}>\r\n        <TooltipHeader closeWindow={onCloseClick}>\r\n          {(header as ReactElement).props.children}\r\n        </TooltipHeader>\r\n        <TooltipBody>{(body as ReactElement).props.children}</TooltipBody>\r\n      </div>\r\n    </Draggable>\r\n  );\r\n};\r\n\r\nexport default TooltipWindow;\r\n","import { FC, useEffect, useState } from \"react\";\r\n\r\nimport { fetchTopicMessage } from \"src/api\";\r\n\r\nimport MsgText from \"src/pages/topic/row/msg_text\";\r\nimport UserInfo from \"src/pages/topic/row/user_info\";\r\n\r\nimport TooltipWindow from \"./tooltip_window\";\r\nimport TooltipHeader from \"./tooltip_header\";\r\nimport TooltipBody from \"./tooltip_body\";\r\n\r\nimport \"./tooltip.css\";\r\nimport { useAppSelector } from \"src/store\";\r\nimport { ITopicMessage, ITooltipItem } from \"src/store\";\r\n\r\ntype IProps = {\r\n  tooltip: ITooltipItem;\r\n};\r\n\r\nconst Tooltip: FC<IProps> = (props): React.ReactElement | null => {\r\n  const { info, items, item0 } = useAppSelector((state) => state.topic);\r\n  const { tooltip } = props;\r\n  const { keys } = tooltip;\r\n\r\n  let text = \"\";\r\n  let data: ITopicMessage | undefined;\r\n  if (keys.topicId === info.id) {\r\n    if (keys.number === 0) data = item0;\r\n    else data = items.find((item: ITopicMessage) => item.n === keys.number);\r\n\r\n    if (data) text = data.text;\r\n  }\r\n\r\n  const [state, setState] = useState({\r\n    data,\r\n    text,\r\n  });\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      if (state.data) return;\r\n\r\n      let data: ITopicMessage;\r\n      let text = \"\";\r\n\r\n      try {\r\n        data = await fetchTopicMessage(keys.topicId, keys.number);\r\n        if (data) text = data.text;\r\n        else text = `Сообщение не найдено ${keys.number}`;\r\n      } catch (e) {\r\n        text = (e as Error).message;\r\n      }\r\n\r\n      setState({ data, text });\r\n    };\r\n\r\n    fetchData();\r\n  }, [keys.topicId, keys.number, state.data]);\r\n\r\n  if (!state.text) return null;\r\n\r\n  let header: React.ReactElement;\r\n  if (!state.data) {\r\n    header = <b>Заголовок</b>;\r\n  } else {\r\n    header = (\r\n      <UserInfo\r\n        data={state.data}\r\n        isAuthor={false}\r\n        isYou={false}\r\n        isTooltip={true}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <TooltipWindow tooltip={props.tooltip}>\r\n      <TooltipHeader>{header}</TooltipHeader>\r\n      <TooltipBody>\r\n        <MsgText\r\n          n={state.data?.n}\r\n          vote={state.data?.vote}\r\n          html={state.text}\r\n          topicId={keys.topicId}\r\n          topicDate={state.data?.time}\r\n          style={{ maxHeight: \"min(550px, 80vh)\", overflowY: \"auto\" }}\r\n        />\r\n      </TooltipBody>\r\n    </TooltipWindow>\r\n  );\r\n};\r\n\r\nexport default Tooltip;\r\n","import { ReactElement, useRef } from \"react\";\r\nimport { useOnClickOutside } from \"usehooks-ts\";\r\n\r\nimport { useActionCreators, useAppSelector } from \"src/store\";\r\nimport { tooltipsActions } from \"src/store\";\r\n\r\nimport Tooltip from \"./tooltip\";\r\n\r\nconst TooltipsContainer = (): ReactElement => {\r\n  const items = useAppSelector((state) => state.tooltips.items);\r\n  const actions = useActionCreators(tooltipsActions);\r\n  const ref = useRef(null);\r\n\r\n  const handleClickOutside = () => {\r\n    actions.closeAll();\r\n  };\r\n\r\n  useOnClickOutside(ref, handleClickOutside);\r\n\r\n  return (\r\n    <div ref={ref}>\r\n      {items.map((item) => {\r\n        return <Tooltip key={item.hash} tooltip={item} />;\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TooltipsContainer;\r\n","import { ReactElement, useLayoutEffect } from \"react\";\r\nimport { HashRouter } from \"react-router-dom\";\r\n\r\nimport NavBar from \"./components/navigation/nav_bar\";\r\nimport AppRoutes from \"./pages/approutes\";\r\nimport NavBarFooter from \"./components/navigation/nav_bar_footer\";\r\nimport TooltipsContainer from \"./components/tooltips/tooltips_container\";\r\nimport { useAppSelector } from \"./store\";\r\n\r\nconst App = (): ReactElement => {\r\n  const theme = useAppSelector((state) => state.options.items.theme);\r\n\r\n  useLayoutEffect(() => {\r\n    document.body.setAttribute(\"data-theme\", theme);\r\n  }, [theme]);\r\n\r\n  return (\r\n    <HashRouter>\r\n      <NavBar />\r\n      <AppRoutes />\r\n      <NavBarFooter />\r\n      <TooltipsContainer />\r\n    </HashRouter>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import { createRoot } from \"react-dom/client\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport { store, persistor } from \"src/store\";\r\nimport { PersistGate } from \"redux-persist/integration/react\";\r\n\r\nconst Root = ({ store }): React.ReactElement => (\r\n  <Provider store={store}>\r\n    <PersistGate loading={null} persistor={persistor}>\r\n      <App />\r\n    </PersistGate>\r\n  </Provider>\r\n);\r\n\r\nconst container = document.getElementById(\"root\");\r\nconst root = createRoot(container!);\r\nroot.render(<Root store={store} />);\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkreact_mista\"] = self[\"webpackChunkreact_mista\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [216], function() { return __webpack_require__(4737); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_useState","useState","_useState2","_slicedToArray","searchEngine","setSearchEngine","_useState3","_useState4","text","setText","handleTextChange","useCallback","e","target","value","handleKeyDown","useEventCallback","key","doSearch","url","concat","window","open","_jsxs","InputGroup","size","children","DropdownButton","id","title","variant","onSelect","_jsx","Dropdown","Item","eventKey","FormControl","type","placeholder","className","onKeyDown","onChange","Text","onClick","style","zIndex","parseJSON","JSON","parse","replace","console","error","message","log","getMaxPage","count","Math","min","ceil","childrenToText","map","displayName","props","number","formattedTime","time","td","dayjs","isSame","Date","format","paramsToString","paramsPrefix","params","searchParams","URLSearchParams","undefined","append","str","toString","length","fetchJsonpAndGetJson","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","options","fullUrl","response","responseJson","json","wrap","_context","prev","next","domain","fetchJsonp","sent","utils","abrupt","stop","_x","_x2","_x3","apply","arguments","fetchAndGetJson","_ref2","_callee2","init","_context2","mode","credentials","fetch","_x4","_x5","_x6","convertResponse","session","userId","Number","user_id","userName","user_name","userHash","user_hash","lastError","last_error","fetchCookies","_fetchCookies","urlCookies","fetchLogin","urlLogin","method","body","username","user_password","password","headers","Accept","redirect","fetchLogout","urlLogout","fetchNewMessage","result","urlNewMessage","topic_id","fetchNewTopic","urlNewTopic","forum","code","shortn","name","fulln","fetchSections","list","urlSections","voting","x","select","parseInt","sectionId","section","created","authorId","author","updated","lastUser","updated_name","answers_count","down","closed","deleted","isVoting","is_voting","fetchTopicInfo","_fetchTopicInfo","info","urlTopicInfo","n","user","utime","vote","fetchTopicMessages","_fetchTopicMessages","urlTopicMessages","fetchTopicMessage","_fetchTopicMessage","to","from","find","item","convertRequest","request","page","itemsCount","itemsPerPage","topics","String","section_short_name","mytopics","myTopics","sect1","sectionCode","sect2","user0","answ","pinned","showPreview","fetchTopicsList","_fetchTopicsList","urlTopicsList","localStorage","getItem","checkLogin","createAsyncThunk","doLogin","_ref3","dispatch","doLogout","_callee3","_context3","shouldLogin","_ref5","login","status","slice","createSlice","initialState","logged","reducers","extraReducers","builder","addCase","pending","state","fulfilled","_ref6","payload","rejected","_ref7","_ref8","loginActions","actions","reducer","postNewTopic","fetchParams","i","message_text","topic_text","subject","target_section","target_forum","toLowerCase","action","rnd","round","random","votingItems","clear","changeSubject","changeText","_ref4","changeSection","showVoting","setError","newTopicActions","newTopic","defaultOptionsState","voteColors","items","theme","topicsPerPage","autoRefreshTopicsList","autoRefreshTopicsListInterval","autoRefreshTopic","autoRefreshTopicInterval","showTooltips","tooltipDelay","showTooltipOnPostLink","showYoutubeVideoTitle","replaceCatalogMista","fixBrokenLinks","save","optionsActions","getSections","getSectionsIfNeeded","getState","sections","shouldGetSections","tree","getKey","reduce","previous","currentItem","group","push","show","hash","stringify","keys","index","findIndex","coords","close","filter","val","closeAll","tooltipsActions","tooltips","defaultInfo","getTopic","topicId","item0","rejectWithValue","_item0","_items","first","_first","last","_items2","t0","t1","getNewMessages","shouldFetch","topic","getNewMessagesIfNeeded","_state$topic$info","_ref9","_ref10","topicActions","getTopicsList","getTopicsListIfNeeded","topicsList","togglePreview","previewMsgNumber","msgNumber","topicsListActions","postNewMessage","voting_select","newMessageActions","newMessage","persistConfig","storage","combineReducers","persistReducer","store","configureStore","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","devTools","process","persistor","persistStore","useAppDispatch","useDispatch","useAppSelector","useSelector","useActionCreators","useMemo","bindActionCreators","location","useLocation","search","get","Navbar","bg","expand","fixed","Brand","as","Link","Toggle","Collapse","Nav","link","active","href","Form","Search","CustomToggle","React","ref","cursor","preventDefault","float","event","onLogout","Menu","Divider","setUsername","setPassword","flexWrap","marginRight","flex","maxLength","autoComplete","Button","doLoginIfNeeded","margin","rel","dangerouslySetInnerHTML","__html","elem","useEffect","LoggedUser","LoginForm","_Fragment","ErrorElem","sectionsElem","label","defaultValue","selected","Select","currentTarget","arr","navigate","useNavigate","queryString","Login","Sections","isLoading","onUpdateClick","letterSpacing","pages","maxPage","loggedUserName","classes","classNames","bold","sectionHref","startsWith","addPrefix","overflowWrap","Pages","expanded","data","_objectWithoutProperties","_excluded","setTime","updateTime","msg","PreviewLink","TopicNameCell","_objectSpread","color","display","width","textAlign","last20","pathName","pathname","currentPage","locationParams","set","Pagination","isFetching","formRef","onShowVotingChange","textAreaRef","useRef","handleShowVotingChange","checked","handleChange","cols","rows","onKeyUp","current","ctrlKey","dispatchEvent","Event","cancelable","bubbles","ButtonGroup","textAreaNode","start","selectionStart","end","selectionEnd","oldText","len","replacement","substring","newText","disabled","Check","_newTopic$section","onSubmitSuccess","currentSection","setSection","Array","fill","votes","setVotes","onSectionChange","onVoteTextChange","votesCopy","onSubmit","onSuccess","this_onSubmitSuccess","shouldPost","postNewTopicIfNeeded","onSubjectChange","onTextChange","groupsElem","votingOptions","marginBottom","Control","TextEditor","FormGroup","onFirst","onPrev","onNext","onLast","marginLeft","scrolledToHash","СтрокаРезультат","УстановленЦвет","ПоследнийЦвет","keywords","Set","split","Спецсиволы","НачалоТега","КонецТега","мЦветФона","мЦветЧисла","мЦветСтроки","мЦветКлючевогоСлова1","ВСтроке","Токен","ПустаяСтрока","Строка","trim","Сред","Нач","Длина","Прав","isKeyword","token","has","ДобавитьЧастьСтроки1С","Часть","Цвет","РазукраситьСтроку","СтрокаКода","ВСтрокеСкобка","ВСтрокеТильда","НачалоСтроки","ТокенДоТочки","Поз","ТекущийСимвол","charAt","isNaN","_step","_iterator","_createForOfIteratorHelper","s","done","err","f","join","hidden","setHidden","newtext","highlight","prepareText","buttonText","linesCount","buttonShow","preStyle","overflow","height","marginTop","timerRef","currentTopicId","initialText","isMounted","run","_yield$fetchTopicInfo","onMouseOver","persist","setTimeout","showToolTip","onMouseOut","clearTimeout","stopPropagation","pageX","y","pageY","pageParam","getVideoId","fullHref","URL","hostname","getVideoParams","videoId","apiKey","apiUrl","hrefName","notFound","snippet","setHrefName","setTitle","parentText","newHref","LinkToPost","query","LinkToUser","Object","isMistaCatalog","class","escapedHref","regExp","RegExp","match","fixBrokenLink","YoutubeLink","total","colors","img","percent","textDecoration","src","maxWidth","alt","max","_toConsumableArray","paddingLeft","VoteItem","memo","processText","topicDate","messageNumber","processCode1C","res","processLinksToPosts","date","processImages","htmlToReactParser","HtmlToReact","processNodeDefinitions","isValidNode","linkProcessor","shouldProcessNode","node","processNode","attribs","codeProcessor","Code","ProcessedText","html","processedHtml","processingInstructions","CustomLink","processDefaultNode","reactComponent","parseWithInstructions","initialVoteText","voteText","setVoteText","getVoteText","_info","voteChart","showVote","VoteChart","Vote","imgDisplay","setImgDisplay","isAuthor","isYou","isTooltip","dataStr","imgElem","timeElem","userClassNames","innerWidth","onLoad","onError","document","getElementById","scrollTo","offsetTop","loggedUserId","onDataLoaded","setData","getData","_data","UserInfo","MsgText","overflowY","initialMsgNumber","deltaX","setDeltaX","setDispaly","_useState5","_useState6","setState","onClickLast","swipeable","useSwipeable","onSwiping","eventData","abs","onSwiped","dir","delta","onContentLoaded","transform","flexDirection","PreviewButtons","order","PreviewContent","updateTopicsList","Row","TopicPreview","Header","Error","TableHeader","position","NewTopic","forums","life","it","job","yandexUrl","encodeURIComponent","lineHeight","_state$topic$item","showUpdateButton","votingElem","setVoting","afterSubmit","_loop","setVotingOption","locationPage","isLastPageRef","updateNewMessages","htmltext","DOMParser","parseFromString","firstChild","innerText","getTopicIfNeeded","timer","setInterval","clearInterval","nodeHash","TopicInfo","Footer","NewMessage","values","oneLine","onChangeValue","descr","inline","postfix","htmlFor","formTabs","tabName","formParams","closeForm","assign","tabs","tab","_step2","row","rowElem","_iterator2","RadioOption","fontWeight","StringOption","Tab","Container","Routes","Route","path","element","TopicsList","Topic","Options","closeWindow","onTouchEnd","onScroll","startX","onTouchStart","nativeEvent","changedTouches","clientX","endX","axis","tooltip","top","left","_React$Children$toArr","toArray","_React$Children$toArr2","header","Draggable","handle","defaultClassNameDragging","TooltipHeader","TooltipBody","_state$data","_state$data2","_state$data3","_useAppSelector","fetchData","TooltipWindow","maxHeight","useOnClickOutside","Tooltip","useLayoutEffect","setAttribute","HashRouter","NavBar","AppRoutes","NavBarFooter","TooltipsContainer","Root","Provider","PersistGate","loading","App","container","createRoot","render","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","j","every","splice","r","getter","__esModule","d","a","leafPrototypes","getProto","getPrototypeOf","obj","__proto__","t","this","then","ns","create","def","indexOf","getOwnPropertyNames","forEach","definition","o","defineProperty","enumerable","g","globalThis","Function","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}