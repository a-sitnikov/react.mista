(this["webpackJsonpreact.mista"]=this["webpackJsonpreact.mista"]||[]).push([[0],{108:function(e,t,n){},121:function(e,t,n){},124:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){},139:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},148:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(22),c=n.n(o),i=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function s(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var l=n(17),u=n(10),p=n(36),m=n(78),h=(n(106),n(2)),f=n(8),d=n.n(f),v=n(13),b=n(79),g=n.n(b);var E=function(e,t){return e.reduce((function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e}),{})},O=function(e){try{return e=e.replace(/\\</g,"<").replace(/\\>/g,">").replace(/\\&/g,"&").replace(/\\'/g,"'").replace(/\\"/g,"").replace(/ "/g,' \\"').replace(/""/g,'\\""').replace(/"(\.| |\?)/g,'\\"$1'),JSON.parse(e)}catch(t){return console.error(t.message),console.log(e),{}}},y=function(e){return Math.min(Math.ceil(e/100),10)||1},x=function(e){return e?e.map((function(e){return"string"===typeof e?e:"br"===e.type?"<br>":"Connect(LinkToPost)"===e.type.displayName||"Connect(t)"===e.type.displayName?e.props.number:(console.log(e),e)})):e},j=localStorage.getItem("domain")||"https://forum.mista.ru",w=localStorage.getItem("urlTopicsList")||"api/topic.php",k=localStorage.getItem("urlTopicInfo")||"ajax_gettopic.php",C=localStorage.getItem("urlTopicMessages")||"api/message.php",T=localStorage.getItem("urlLogin")||"ajax_login.php",S=localStorage.getItem("urlLogout")||"users.php",N=localStorage.getItem("urlCookies")||"ajax_cookie.php",I=localStorage.getItem("urlSections")||"ajax_getsectionslist.php",_=localStorage.getItem("urlNewMessage")||"topic.php?id=:id&page=1",P=localStorage.getItem("urlNewTopic")||"index.php",L=localStorage.getItem("urlAddBookmark")||"ajax_addbookmark.php",R=(localStorage.getItem("urlSearch"),function(){var e=Object(v.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(w,t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A={id:"",text:"",answers_count:""},F=function(){var e=Object(v.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(k,t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(v.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(C,t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(v.a)(d.a.mark((function e(t,n){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M({id:t,from:n,to:n+1});case 2:return(a=e.sent)&&a.length>0&&(r=a.find((function(e){return e.n===String(n)}))),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=Object(v.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F({id:String(t)});case 2:return n=e.sent,e.abrupt("return",+n.answers_count);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(v.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(T,t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(v.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={action:"exit"},e.next=3,J(S,t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(v.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(N);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(v.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(I);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(v.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_.replace(":id",t.topic_id),e.next=3,fetch("".concat(j,"/").concat(n),{method:"POST",body:Y("",t),mode:"no-cors",credentials:"include",headers:{Accept:"text/html,application/xhtml+xml,application/xml","Content-Type":"application/x-www-form-urlencoded"},redirect:"follow"});case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(v.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(j,"/").concat(P),{method:"POST",body:Y("",t),mode:"no-cors",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(v.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(j,"/").concat(L),{method:"POST",body:Y("",t),mode:"no-cors",credentials:"include"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(e,t){if(!t)return"";var n=[];for(var a in t)void 0!==t[a]&&n.push(a+"="+t[a]);return n.length>0?e+n.join("&"):""},J=function(){var e=Object(v.a)(d.a.mark((function e(t,n){var a,r,o,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(j,"/").concat(t).concat(Y("?",n)),e.next=3,g()(a);case 3:return r=e.sent,e.next=6,r.json();case 6:if("string"===typeof(o=e.sent))try{c=JSON.parse(o)}catch(i){c=O(o)}else c=o;return e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Q=function(e){return{type:"RECEIVE_TOPICS_LIST",items:e,receivedAt:new Date}},X=function(e){return function(t,n){if(function(e){var t=e.topicsList;return!t||!t.isFetching}(n()))return t(function(e){return function(){var t=Object(v.a)(d.a.mark((function t(n,a){var r,o,c,i,s,l,u;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"REQUEST_TOPICS_LIST"}),r=e.page||1,o={},(c=+a().options.items.topicsPerPage)>99&&(c=99),i=r*c,o.topics=i,e.section&&(o.section_short_name=e.section),e.forum&&(o.forum=e.forum),e.user_id&&(o.user_id=e.user_id),e.mytopics&&(o.mytopics=e.mytopics),t.prev=11,t.next=14,R(o);case 14:s=t.sent,l=s.slice(-c),n(Q(l)),t.next=24;break;case 19:t.prev=19,t.t0=t.catch(11),u={type:"RECEIVE_TOPICS_LIST_FAILED",error:t.t0.message,receivedAt:new Date},n(u),console.error(t.t0);case 24:case"end":return t.stop()}}),t,null,[[11,19]])})));return function(e,n){return t.apply(this,arguments)}}()}(e))}},q={isFetching:!1,items:[]},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_TOPICS_LIST":return Object(h.a)(Object(h.a)({},e),{},{error:null,isFetching:!0});case"RECEIVE_TOPICS_LIST":return Object(h.a)(Object(h.a)({},e),{},{isFetching:!1,items:t.items,lastUpdated:t.receivedAt});case"RECEIVE_TOPICS_LIST_FAILED":return Object(h.a)(Object(h.a)({},e),{},{isFetching:!1,error:t.error,lastUpdated:t.receivedAt});case"TOGGLE_PREVIEW":var n=e.items.slice(),a=n.findIndex((function(e){return e.id===t.topicId})),r=Object.assign({},n[a]);return r.showPreview=!r.showPreview,n[a]=r,Object(h.a)(Object(h.a)({},e),{},{items:n});default:return e}},Z={isFetching:!1,info:A,items:[]},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_TOPIC":return Object(h.a)(Object(h.a)({},e),{},{isFetching:!0,error:null});case"RECEIVE_TOPIC":return Object(h.a)(Object(h.a)({},e),{},{isFetching:!1,info:t.info,item0:t.item0,items:t.items,lastUpdated:t.receivedAt,error:null});case"RECEIVE_TOPIC_FAILED":return Object(h.a)(Object(h.a)({},e),{},{isFetching:!1,lastUpdated:t.receivedAt,error:t.error});case"REQUEST_NEW_MESSAGES":return Object(h.a)(Object(h.a)({},e),{},{isFetching:!0});case"RECEIVE_NEW_MESSAGES":var n=e.info;return t.items.length>0&&(n.answers_count=t.items[t.items.length-1].n),Object(h.a)(Object(h.a)({},e),{},{isFetching:!1,items:e.items.concat(t.items),info:n,lastUpdated:t.receivedAt});case"CLOSE_TOPIC":return Object(h.a)(Object(h.a)({},e),{},{items:[],info:A,item0:null,lastUpdated:null,error:null});default:return e}},te={isFetching:!1,logged:void 0},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_START":return Object(h.a)(Object(h.a)({},e),{},{isFetching:!0});case"LOGIN_COMPLETE":return Object(h.a)(Object(h.a)({},e),{},{isFetching:!1,logged:!0,error:null},t.data);case"LOGIN_FAILED":return{isFetching:!1,logged:!1,error:t.error};case"LOGOUT_COMPLETE":return Object(h.a)(Object(h.a)({},e),{},{userid:void 0,username:void 0,hashkey:void 0,logged:!1});default:return e}},ae={isFetching:!1,items:[],tree:{},map:{}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_SECTIONS":return Object(h.a)(Object(h.a)({},e),{},{isFetching:!0});case"RECEIVE_SECTIONS":var n={};return t.items.forEach((function(e){n[e.shortn]=e.fulln})),Object(h.a)(Object(h.a)({},e),{},{isFetching:!1,items:t.items,tree:E(t.items,"forum"),map:n,lastUpdated:t.receivedAt});default:return e}},oe={isFetching:!1},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_BOOKMARK_START":return Object(h.a)(Object(h.a)({},e),{},{isFetching:!0});case"ADD_BOOKMARK_COMPLETE":case"ADD_BOOKMARK_FAIL":return Object(h.a)(Object(h.a)({},e),{},{isFetching:!1});default:return e}},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,banner:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_BANNER":return Object(h.a)(Object(h.a)({},e),{},{isFetching:!0});case"RECEIVE_BANNER":return Object(h.a)(Object(h.a)({},e),{},{isFetching:!1,banner:t.banner,lastUpdated:t.receivedAt});default:return e}},se={isFetching:!1,section:null,text:"",subject:"",forum:"1C",isVoting:!1},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"POST_NEW_TOPIC_START":return Object(h.a)(Object(h.a)({},e),{},{isFetching:!0,error:null});case"POST_NEW_TOPIC_COMPLETE":return Object(h.a)(Object(h.a)({},e),{},{isFetching:!1});case"POST_NEW_TOPIC_ERROR":return Object(h.a)(Object(h.a)({},e),{},{isFetching:!1,error:t.error});case"NEW_TOPIC_SECTION":return Object(h.a)(Object(h.a)({},e),{},{section:t.section,forum:t.section.forum.toLowerCase()});case"NEW_TOPIC_TEXT":return Object(h.a)(Object(h.a)({},e),{},{text:t.text});case"NEW_TOPIC_SUBJECT":return Object(h.a)(Object(h.a)({},e),{},{subject:t.text});case"NEW_TOPIC_CLEAR":return Object(h.a)(Object(h.a)({},e),{},{text:"",subject:"",isVoting:!1});case"SHOW_VOTING":return Object(h.a)(Object(h.a)({},e),{},{isVoting:t.data});default:return e}},ue={isFetching:!1,text:""},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"POST_NEW_MESSAGE_START":return Object(h.a)(Object(h.a)({},e),{},{isFetching:!0});case"POST_NEW_MESSAGE_COMPLETE":return Object(h.a)(Object(h.a)({},e),{},{isFetching:!1});case"NEW_MESSAGE_TEXT":return Object(h.a)(Object(h.a)({},e),{},{text:t.text});case"ADD_MESSAGE_TEXT":return Object(h.a)(Object(h.a)({},e),{},{text:e.text+t.text});default:return e}},me={items:[]},he=function(){var e,t,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"CREATE_TOOLTIP":t=a.items.slice(),e=JSON.stringify(r.keys);var o=t.findIndex((function(t){return t.hash===e}));return-1===o?t.push({i:0,keys:r.keys,hash:e,coords:r.coords}):((n=Object.assign({},t[o])).coords=r.coords,n.i+=1,t[o]=n),Object(h.a)(Object(h.a)({},a),{},{items:t});case"CLOSE_TOOLTIP":return e=JSON.stringify(r.keys),Object(h.a)(Object(h.a)({},a),{},{items:a.items.filter((function(t){return t.hash!==e}))});case"CLEAR_TOOLTIPS":return 0===a.items.length?a:Object(h.a)(Object(h.a)({},a),{},{items:[]});default:return a}},fe={isFetching:!1,items:[]},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_SEARCH":return Object(h.a)(Object(h.a)({},e),{},{isFetching:!0});case"RECEIVE_SEARCH_RESULTS":return Object(h.a)(Object(h.a)({},e),{},{isFetching:!1,items:t.items,lastUpdated:t.receivedAt});default:return e}},ve={items:{}},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_PREVIEW":return void 0===e[t.topicId]&&(e.items[t.topicId]={n:"0",id:t.topicId,text:"",user:"",userId:"",utime:"0",vote:0}),Object(h.a)({},e);case"CLOSE_PREVIEW":return delete e.items[t.topicId],Object(h.a)({},e);case"RECEIVE_PREVIEW_TEXT":return void 0===e.items[t.topicId]?e:(e.items[t.topicId]=t.message,Object(h.a)({},e));default:return e}};function ge(e,t){return window.localStorage.getItem(e)||t}var Ee={voteColors:["#FF1616","#1A861A","#0023FF","#FF6B18","#9B3A6E","#567655","#233345","#CC0000","#00CCCC","#0000CC"],items:{theme:"theme-lightgray",topicsPerPage:"20",autoRefreshTopicsList:"false",autoRefreshTopicsListInterval:"60",autoRefreshTopic:"true",autoRefreshTopicInterval:"60",showTooltips:"true",tooltipDelay:"500",showTooltipOnTopicsList:"true",showTooltipOnPostLink:"true",showYoutubeVideoTitle:"true",replaceCatalogMista:"true",fixBrokenLinks:"true"}},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"READ_OPTIONS":var n=Object.assign({},Ee.items);for(var a in n)n[a]=ge(a,Ee.items[a]);return Object(h.a)(Object(h.a)({},e),{},{items:n});case"SAVE_OPTIONS":for(var r in t.options)window.localStorage.setItem(r,String(t.options[r]));return Object(h.a)(Object(h.a)({},e),{},{items:t.options});default:return e}},ye=Object(p.c)({topicsList:$,sections:re,topic:ee,login:ne,banner:ie,bookmark:ce,newTopic:le,newMessage:pe,tooltips:he,search:de,topicPreview:be,options:Oe}),xe=(n(108),n(4)),je=n(5),we=n(7),ke=n(6),Ce=n(46),Te=n(61),Se=n(31),Ne=n(25),Ie=n.n(Ne),_e=n(15),Pe=n(14),Le=n(32),Re=n(57),Ae=n(45),Fe=n(80),Me=(n(121),function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(e){var a;return Object(xe.a)(this,n),(a=t.call(this,e)).doSearch=a.doSearch.bind(Object(Pe.a)(a)),a.onKeyPress=a.onKeyPress.bind(Object(Pe.a)(a)),a.onSearchEngineChange=a.onSearchEngineChange.bind(Object(Pe.a)(a)),a.onSearchTextChange=a.onSearchTextChange.bind(Object(Pe.a)(a)),a.state={searchEngine:"\u042f\u043d\u0434\u0435\u043a\u0441",text:""},a}return Object(je.a)(n,[{key:"doSearch",value:function(){var e,t=this.state.text;"\u042f\u043d\u0434\u0435\u043a\u0441"===this.state.searchEngine?e="https://www.yandex.ru/search/?text=".concat(t,"&site=mista.ru"):"Google"===this.state.searchEngine&&(e="https://www.google.ru/search?q=".concat(t,"+site:mista.ru")),window.open(e),this.setState(Object(h.a)(Object(h.a)({},this.state),{},{text:""}))}},{key:"onSearchEngineChange",value:function(e){this.setState(Object(h.a)(Object(h.a)({},this.state),{},{searchEngine:e}))}},{key:"onSearchTextChange",value:function(e){this.setState(Object(h.a)(Object(h.a)({},this.state),{},{text:e.target.value}))}},{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.doSearch()}},{key:"render",value:function(){return r.a.createElement(Le.a,{size:"sm"},r.a.createElement(Le.a.Prepend,null,r.a.createElement(Fe.a,{id:"search-engine",title:"",size:"sm",style:{marginRight:"2px"},variant:"light"},r.a.createElement(Ae.a.Item,{eventKey:"\u042f\u043d\u0434\u0435\u043a\u0441",onSelect:this.onSearchEngineChange},"\u042f\u043d\u0434\u0435\u043a\u0441"),r.a.createElement(Ae.a.Item,{eventKey:"Google",onSelect:this.onSearchEngineChange},"Google"))),r.a.createElement(Re.a,{type:"text",placeholder:"".concat(this.state.searchEngine,": \u043f\u043e\u0438\u0441\u043a"),style:{marginRight:"4px",paddingRight:"27px"},onKeyPress:this.onKeyPress,onChange:this.onSearchTextChange,value:this.state.text}),r.a.createElement(Le.a.Append,{style:{marginLeft:"-25px",marginTop:"auto",marginBottom:"auto",cursor:"pointer"},onClick:this.doSearch},r.a.createElement("i",{className:"fa fa-search",style:{zIndex:1e3}})))}}]),n}(a.Component)),De=(n(124),function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(){var e;Object(xe.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onClick=function(t){var n=e.props,a=n.dispatch,r=n.location,o=Ie.a.parse(r.search);a(X(o))},e}return Object(je.a)(n,[{key:"render",value:function(){var e=[{name:"1\u0421",link:"".concat(window.hash,"/index.php?forum=1C")},{name:"IT",link:"".concat(window.hash,"/index.php?forum=IT")},{name:"JOB",link:"".concat(window.hash,"/index.php?forum=JOB")},{name:"LIFE",link:"".concat(window.hash,"/index.php?forum=LIFE")},{name:"Wiki",link:"https://wiki.mista.ru"},{name:"\u041a\u043d\u0438\u0433\u0430 \u0437\u043d\u0430\u043d\u0438\u0439",link:"https://kb.mista.ru"}].map((function(e,t){return r.a.createElement(Te.a.Item,{key:t},r.a.createElement(Te.a.Link,{href:e.link},e.name))}));return r.a.createElement(Ce.a,{bg:"dark",variant:"dark",expand:"md",fixed:"top"},r.a.createElement(Ce.a.Brand,{href:"".concat(window.hash),onClick:this.onClick},"React.Mista"),r.a.createElement(Ce.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(Ce.a.Collapse,null,r.a.createElement(Te.a,{className:"mr-auto"},e),r.a.createElement(Se.a,{inline:!0},r.a.createElement(Me,null))))}}]),n}(a.Component)),We=Object(u.b)()(Object(_e.f)(De)),Ve=n(37),Ue=function(e){return{type:"LOGIN_COMPLETE",data:e}},Be=function(e){return{type:"LOGIN_FAILED",error:e}},Ge=function(e){var t=e.login;return!t||!t.isFetching},Ke=function(e){return function(){var e=Object(v.a)(d.a.mark((function e(t){var n,a,r,o,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"CHECK_LOGIN_START"}),e.prev=1,e.next=4,B();case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),t(Be(e.t0.message)),e.abrupt("return");case 11:r=(a=n).cookie,(o=a.session)&&o.user_id?("\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435."===(c=(o.last_error||"").trim())&&(c=""),t(Ue({error:c,userid:o.user_id,username:o.user_name,hashkey:r.entr_hash}))):t(Be(""));case 13:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},He=function(e){return function(t,n){if(Ge(n()))return t(function(e){return function(){var t=Object(v.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"LOGIN_START"}),t.prev=1,t.next=4,V({username:encodeURIComponent(e.username),password:encodeURIComponent(e.password)});case 4:(a=t.sent).error?n(Be("\u041e\u0428\u0418\u0411\u041a\u0410: \u0412\u0445\u043e\u0434 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d! \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u043d \u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c.")):n(Ue(a)),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.error("Login error :",t.t0),n(Be(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}(e))}},ze=r.a.forwardRef((function(e,t){var n=e.children,a=e.onClick;return r.a.createElement("span",{ref:t,style:{cursor:"pointer",color:"#00C"},onClick:function(e){e.preventDefault(),a(e)}},n)})),Ye=function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(e){var a;return Object(xe.a)(this,n),(a=t.call(this,e)).onMenuSelect=function(e,t){"exit"===e&&a.onLogout(t)},a.onLogout=a.onLogout.bind(Object(Pe.a)(a)),a}return Object(je.a)(n,[{key:"onLogout",value:function(e){e.preventDefault(),(0,this.props.dispatch)(function(){var e=Object(v.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOGOUT_START"});try{U()}catch(n){t({type:"LOGOUT_COMPLETE"}),Ke()}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"render",value:function(){var e=this.props,t=e.userId,n=e.userName;return r.a.createElement("div",{style:{float:"left"}},r.a.createElement(Ae.a,{id:"dropdown-custom-menu",onSelect:this.onMenuSelect},r.a.createElement("span",null,"\u041f\u0440\u0438\u0432\u0435\u0442, "),r.a.createElement(Ae.a.Toggle,{as:ze,bsRole:"toggle"},n," \u25bc"),r.a.createElement(Ae.a.Menu,null,r.a.createElement(Ae.a.Item,{eventKey:"profile",href:"".concat(j,"/users.php?id=").concat(t)},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"),r.a.createElement(Ae.a.Item,{eventKey:"myTopics",href:"".concat(window.hash,"/index.php?user_id=").concat(t)},"\u041c\u043e\u0438 \u0442\u0435\u043c\u044b"),r.a.createElement(Ae.a.Divider,null),r.a.createElement(Ae.a.Item,{eventKey:"options",href:"".concat(window.hash,"/options.php")},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),r.a.createElement(Ae.a.Divider,null),r.a.createElement(Ae.a.Item,{eventKey:"exit"},"\u0412\u044b\u0445\u043e\u0434"))))}}]),n}(a.Component),Je=Object(u.b)()(Object(_e.f)(Ye)),Qe=n(87),Xe=function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(e){var a;return Object(xe.a)(this,n),(a=t.call(this,e)).onLogin=function(e){e.preventDefault();var t=a.props.dispatch,n={username:a.username.current.value,password:a.password.current.value};t(He(n))},a.username=r.a.createRef(),a.password=r.a.createRef(),a}return Object(je.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{name:"enterform",className:"flex-row",style:{flexWrap:"wrap"}},r.a.createElement(Re.a,{type:"text",placeholder:"\u0418\u043c\u044f",ref:this.username,size:"sm",style:{marginRight:"5px",flex:"0 1 300px"}}),r.a.createElement(Re.a,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",maxLength:"20",autoComplete:"off",ref:this.password,size:"sm",style:{marginRight:"5px",flex:"0 1 300px"}}),r.a.createElement(Qe.a,{size:"sm",variant:"light",onClick:this.onLogin},"\u0412\u043e\u0439\u0442\u0438")),r.a.createElement("p",{style:{margin:"0px"}},"\u0412\u043e\u0439\u0442\u0438 \u043c\u043e\u0436\u043d\u043e \u043d\u0430 \u0441\u0430\u0439\u0442\u0435 ",r.a.createElement("a",{href:"https://www.forum.mista.ru/"},"forum.mista.ru")),r.a.createElement("a",{rel:"nofollow",href:"https://www.forum.mista.ru/user_registration.php"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("span",{style:{margin:"5px"}},"|"),r.a.createElement("a",{rel:"nofollow",href:"https://www.forum.mista.ru/remember_password.php"},"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"))}}]),n}(a.Component),qe=Object(u.b)((function(e){return e.login}))(Xe),$e=(n(128),function(e){return e.text?r.a.createElement("div",{className:"error",dangerouslySetInnerHTML:{__html:e.text}}):null}),Ze=function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(){return Object(xe.a)(this,n),t.apply(this,arguments)}return Object(je.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)((function(e,t){if(Ge(t()))return e(Ke())}))}},{key:"render",value:function(){var e,t=this.props,n=t.logged,o=t.userid,c=t.username,i=t.error,s=t.dispatch;return e=!0===n?r.a.createElement(Je,{dispatch:s,userId:o,userName:c}):!1===n?r.a.createElement(qe,null):null,r.a.createElement(a.Fragment,null,e,i&&r.a.createElement($e,{text:i}))}}]),n}(a.Component),et=Object(u.b)((function(e){return e.login}))(Ze),tt=function(e){return{type:"RECEIVE_SECTIONS",items:e,receivedAt:new Date}},nt=function(){return function(e,t){if(function(e){var t=e.sections;return!t||!t.isFetching&&!(t.items.length>0)}(t()))return e(function(){var e=Object(v.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"REQUEST_SECTIONS"}),e.next=4,G();case 4:n=e.sent,a=tt(n),t(a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},at=function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(e){var a;return Object(xe.a)(this,n),(a=t.call(this,e)).onChange=a.onChange.bind(Object(Pe.a)(a)),a}return Object(je.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(nt())}},{key:"onChange",value:function(e){var t=this.props,n=t.items,a=t.onChange;if(a){var r=e.target.value,o=n.filter((function(e){return e.shortn===r}));o.length>0?a(e,o[0]):a(e,null)}}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.tree,a=e.defaultValue,o=e.selected,c=e.style,i=e.size,s=[];for(var l in n){var u=r.a.createElement("optgroup",{key:l,label:l},n[l].map((function(e,t){return r.a.createElement("option",{key:e.id,value:e.shortn},e.fulln)})));s.push(u)}return r.a.createElement(Se.a.Control,{as:"select",onChange:this.onChange,value:o,style:Object(h.a)({color:"black"},c),size:i,id:t},r.a.createElement("option",{value:""},a),s)}}]),n}(a.Component),rt=Object(u.b)((function(e){var t=e.sections;return{items:t.items,tree:t.tree}}))(at),ot=function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(e){var a;return Object(xe.a)(this,n),(a=t.call(this,e)).onSectionSelect=a.onSectionSelect.bind(Object(Pe.a)(a)),a}return Object(je.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(nt())}},{key:"onSectionSelect",value:function(e,t){t?this.props.history.push("/index.php?section=".concat(t.shortn)):this.props.history.push("/")}},{key:"render",value:function(){var e=this.props.location,t=Ie.a.parse(e.search);return r.a.createElement("div",{className:"flex-row"},r.a.createElement("div",{className:"user-td"},r.a.createElement(et,null)),r.a.createElement("div",{className:"section-td",style:{marginLeft:"auto"}},r.a.createElement(rt,{defaultValue:"--\u0412\u0441\u0435 \u0441\u0435\u043a\u0446\u0438\u0438--",selected:t.section,onChange:this.onSectionSelect,size:"sm"})))}}]),n}(a.Component),ct=Object(u.b)()(Object(_e.f)(ot)),it=n(30),st=n.n(it),lt=n(9),ut=n.n(lt),pt=function(e){var t=e.answ,n=e.topicId,a=[];if(t>100)for(var o=y(t),c=1;c<=o;c++){var i="/topic.php?id=".concat(n,"&page=").concat(c),s=void 0;s=c>3&&c<o?"\u2022":c,a.push(r.a.createElement(l.c,{key:c,className:"agh",style:{margin:"3px"},to:i},s))}if(t>20){var u="/topic.php?id=".concat(n,"&page=last20#F");a.push(r.a.createElement(l.c,{key:"last20",className:"agh",style:{margin:"3px"},to:u},"\xbb"))}return r.a.createElement("span",{className:"topic-pages"},a)},mt=function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(){return Object(xe.a)(this,n),t.apply(this,arguments)}return Object(je.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e,t=this.props,n=t.data,a=t.login,o="/topic.php?id=".concat(n.id),c=ut()("agb","mr5",{bold:n.answ>=100,mytopics:n.user0===a.username});1===n.is_voting&&(e=r.a.createElement("span",{className:"agh separator"},"[\xb1]"));var i,s,u,p="/index.php?section=".concat(n.sect2);n.sect1&&(i=r.a.createElement("span",{className:"topic-section"},r.a.createElement("span",{className:"agh",style:{margin:"0px 5px"}},"/"),r.a.createElement(l.c,{key:"1",rel:"nofollow",className:"agh",to:p},n.sect1)));var m=n.text;return n.closed&&(s=r.a.createElement("span",{className:"agh"},"\xd8")),1===n.down&&(u=r.a.createElement("span",{className:"agh"},"\u2193")),"job"===n.sect2&&"JOB"!==m.substr(0,3)?m="JOB: "+m:"life"===n.forum&&"OFF"!==m.substr(0,3)?m="OFF: "+m:"v7"===n.sect2&&"v7"!==m.substr(0,2)&&(m="v7: "+m),r.a.createElement("div",{className:"cell-title"},r.a.createElement(l.c,{to:o,className:c,dangerouslySetInnerHTML:{__html:m}}),e,r.a.createElement(pt,{answ:n.answ,topicId:n.id}),s,u,i)}}]),n}(a.Component),ht=Object(u.b)((function(e){return{login:e.login,topicPreview:e.topicPreview}}))(mt),ft=function(e){return function(t){t({type:"CLOSE_TOOLTIP",keys:e})}},dt=function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(e){var a;Object(xe.a)(this,n),(a=t.call(this,e)).onMouseOver=function(e){e.persist();var t=a.props.tooltipDelay;a.timer=setTimeout((function(){return a.showToolTip(e)}),+t)},a.onClick=function(e){e.stopPropagation(),clearTimeout(a.timer),a.showToolTip(e)},a.onMouseOut=function(e){clearTimeout(a.timer)},a.showToolTip=function(e){var t=a.props,n=t.topicId,r=t.number;(0,t.dispatch)(function(e,t){return function(){var n=Object(v.a)(d.a.mark((function n(a){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:"TOPIC"!==e.type&&"TOPIC_PREVIEW"!==e.type||a({type:"CREATE_TOOLTIP",keys:e,coords:t});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}({type:t.isPreview?"TOPIC_PREVIEW":"TOPIC",topicId:n,number:r},{x:e.pageX,y:e.pageY-50}))};var r=a.props,o=r.children,c=r.number;return a.state=o?{text:x(o).join("")}:{text:String(c)},a}return Object(je.a)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.children||this.setState({text:String(e.number)})}},{key:"componentDidMount",value:function(){var e=this;if(this.state.text.startsWith("http")){var t=this.props.topicId;F({id:t}).then((function(t){e.setState({text:t.text})}))}}},{key:"render",value:function(){var e=this.props,t=e.topicId,n=e.number,a=e.style,o=e.info,c=y(n),i="";return c>1&&(i="&page=".concat(c)),t!==o.id&&isNaN(this.state.text)?r.a.createElement("span",null,r.a.createElement("a",{href:"".concat(window.hash,"/topic.php?id=").concat(t).concat(i,"#").concat(n),style:Object(h.a)({},a)},this.state.text)," ","(",r.a.createElement("span",{onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onClick:this.onClick,style:{cursor:"pointer",color:"#00C"}},n),")"):r.a.createElement("span",{onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onClick:this.onClick,style:Object(h.a)({cursor:"pointer",color:"#00C"},a)},this.state.text)}}]),n}(a.Component),vt=Object(u.b)((function(e){var t=e.topic;return{items:t.items,info:t.info,tooltipDelay:e.options.items.tooltipDelay}}))(dt),bt=function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(){var e;Object(xe.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onClick=function(){var t=e.props,n=t.topicId;(0,t.dispatch)({type:"TOGGLE_PREVIEW",topicId:n})},e}return Object(je.a)(n,[{key:"render",value:function(){var e;return e=this.props.expanded?"-":"+",r.a.createElement("div",{className:"cell-preview-link",onClick:this.onClick},r.a.createElement("span",null,e))}}]),n}(a.Component),gt=Object(u.b)()(bt),Et=Object(u.b)((function(e){return{login:e.login,showTooltipOnTopicsList:e.options.items.showTooltipOnTopicsList}}))((function(e){var t=e.data,n=e.showTooltipOnTopicsList,a=new Date(1e3*+t.utime);return a=function(e){var t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}(a)?st()(a,"HH:MM"):st()(a,"dd.mm.yy"),r.a.createElement("div",{className:"topics-list-row"},r.a.createElement("div",{className:"cell-forum"},t.forum),r.a.createElement("div",{className:"cell-section"},t.sect1),r.a.createElement("div",{className:"cell-answ"},"true"===n?r.a.createElement(vt,{topicId:t.id,number:t.answ,style:{color:"black"},isPreview:!0}):t.answ),r.a.createElement(gt,{topicId:t.id,expanded:t.showPreview}),r.a.createElement(ht,{data:t}),r.a.createElement("div",{className:"cell-author"},t.user0),r.a.createElement("div",{className:"cell-lastuser"},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("span",{className:"cell-lastuser-time"},a),r.a.createElement("span",{className:"cell-lastuser-user"},t.user))),r.a.createElement("div",{className:"cell-last20"},r.a.createElement(l.c,{to:"/topic.php?id=".concat(String(t.id),"&page=last20"),style:{color:"inherit",display:"block",width:"100%",textAlign:"center"}},">")))})),Ot=n(154),yt=function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(){return Object(xe.a)(this,n),t.apply(this,arguments)}return Object(je.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.locationParams,a=t.baseUrl,o=t.maxPage,c=t.last20;e=n.page?"last20"===n.page?"last20":parseInt(n.page,10)||1:1;for(var i=[],s=1;s<=o;s++){var l=Object(h.a)(Object(h.a)({},n),{},{page:s}),u="".concat(window.hash,"/").concat(a)+Y("?",l);i.push(r.a.createElement(Ot.a.Item,{active:e===s,key:s,href:u},s))}if(!0===c){var p=Object(h.a)(Object(h.a)({},n),{},{page:"last20"}),m="".concat(window.hash,"/").concat(a)+Y("?",p);i.push(r.a.createElement(Ot.a.Item,{active:"last20"===e,key:"last20",href:m},"\xbb"))}return r.a.createElement(Ot.a,{style:{margin:"0px"}},i)}}]),n}(a.Component),xt=n(88),jt=function(e){return function(t,n){if(function(e){var t=e.newTopic;return!!t&&!t.isFetching}(n()))return t(wt(e))}},wt=function(e){return function(){var t=Object(v.a)(d.a.mark((function t(n){var a,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n({type:"POST_NEW_TOPIC_START"}),a={message_text:encodeURIComponent(e.text),topic_text:encodeURIComponent(e.subject),target_section:String(e.section),target_forum:e.forum.toLowerCase(),action:"new",rnd:Math.round(1e10*Math.random()),voting:e.isVoting?1:0},e.votingItems)for(r=0;r<e.votingItems.length;r++)a["section".concat(r+1)]=e.votingItems[r];return t.next=5,H(a);case 5:n({type:"POST_NEW_TOPIC_COMPLETE"}),e.onSuccess&&e.onSuccess();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},kt=n(153),Ct=(n(129),function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(e){var a;return Object(xe.a)(this,n),(a=t.call(this,e)).onButtonCode1c=function(e){e.preventDefault();var t=a.textArea.current,n=t.selectionStart,r=t.selectionEnd,o=t.value,c=o.length,i="[1C]\n"+o.substring(n,r)+"\n[/1C]",s=o.substring(0,n)+i+o.substring(r,c),l=a.props;(0,l.dispatch)({type:l.formName+"_TEXT",text:s})},a.onVotingChange=function(e){(0,a.props.dispatch)({type:"SHOW_VOTING",data:e.target.checked})},a.onChange=function(e){var t=a.props;(0,t.dispatch)({type:t.formName+"_TEXT",text:e.target.value})},a.onKeyPress=function(e){if("Enter"===e.key&&e.ctrlKey){for(var t=a.textArea.current.parentNode;"FORM"!==t.tagName.toUpperCase();)t=t.parentNode;t.dispatchEvent(new Event("submit"))}},a.textArea=r.a.createRef(),a}return Object(je.a)(n,[{key:"render",value:function(){var e=this.props,t=e.placeholder,n=e.showVoting,a=e.isVoting,o=e.isFetching,c=e.text;return r.a.createElement("div",null,r.a.createElement(Re.a,{as:"textarea",placeholder:t,cols:"70",rows:"3",value:c,onChange:this.onChange,onKeyPress:this.onKeyPress,ref:this.textArea,className:"text-editor"}),r.a.createElement("div",{className:"flex-row"},r.a.createElement(kt.a,null,r.a.createElement(Qe.a,{size:"sm",variant:"light",onClick:this.onButtonCode1c,style:{marginRight:"5px"}},"\u041a\u043e\u0434 1\u0421"),r.a.createElement(Qe.a,{size:"sm",variant:"light",disabled:o,type:"submit"},o?"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")),n&&r.a.createElement(Se.a.Check,{type:"checkbox",checked:a,onChange:this.onVotingChange,label:"\u0413\u043e\u043b\u043e\u0441\u043e\u0432\u0430\u043d\u0438\u0435",style:{margin:"auto 0px auto auto"}})))}}]),n}(a.Component)),Tt=Object(u.b)()(Ct),St=(n(130),function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(){var e;Object(xe.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onSectionChange=function(t,n){var a=e.props.dispatch;e.currentSection=n,a({type:"NEW_TOPIC_SECTION",section:n})},e.onSubmit=function(t){t.preventDefault();var n=e.props,a=n.dispatch,r=n.newTopic;if(e.currentSection){var o=r.subject;if(o)if(r.text){var c={subject:o,text:r.text,section:e.currentSection.id,forum:e.currentSection.forum,isVoting:r.isVoting,votingItems:[],onSuccess:e.onSubmitSuccess};if(r.isVoting){c.votingItems=[];for(var i=1;i<=10;i++){var s=e.refs["vote".concat(i)].value;s&&c.votingItems.push(s)}}a(jt(c))}else a({type:"POST_NEW_TOPIC_ERROR",error:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"});else a({type:"POST_NEW_TOPIC_ERROR",error:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430 \u0442\u0435\u043c\u0430"})}else a({type:"POST_NEW_TOPIC_ERROR",error:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u0430 \u0441\u0435\u043a\u0446\u0438\u044f"})},e.onSubjectChange=function(t){(0,e.props.dispatch)({type:"NEW_TOPIC_SUBJECT",text:t.target.value})},e.onSubmitSuccess=function(){(0,e.props.dispatch)({type:"NEW_TOPIC_CLEAR",text:""}),e.props.onSubmitSuccess&&e.props.onSubmitSuccess()},e}return Object(je.a)(n,[{key:"render",value:function(){var e=this.props,t=e.sections,n=e.newTopic,a=[];for(var o in t.tree)a.push(r.a.createElement("option",{key:o,value:o.toLowerCase()},o));var c=[];if(n.isVoting){c.push(r.a.createElement("p",{key:"p"},"\u0412\u0430\u0440\u0438\u0430\u043d\u0442\u044b:"));for(var i=1;i<=10;i++)c.push(r.a.createElement("div",{key:i},r.a.createElement(Le.a,{size:"sm",style:{marginBottom:"3px",width:"100%"}},r.a.createElement(Le.a.Prepend,null,r.a.createElement(Le.a.Text,{style:{width:"40px"}},"".concat(i,"."))),r.a.createElement(Se.a.Control,{type:"text",maxLength:"50",ref:"vote".concat(i),style:{color:"black"}}))))}return r.a.createElement("form",{className:"new-topic-container",onSubmit:this.onSubmit},r.a.createElement("div",{id:"newtopic_form",className:"new-topic-text"},r.a.createElement("div",null,r.a.createElement("b",null,"\u041d\u043e\u0432\u0430\u044f \u0442\u0435\u043c\u0430:")),n.error&&r.a.createElement($e,{text:n.error}),r.a.createElement("div",{className:"flex-row",style:{marginBottom:"3px"}},r.a.createElement(Se.a.Control,{as:"select",size:"sm",readOnly:!0,value:n.forum,style:{flex:"0 1 90px",color:"black"}},a),r.a.createElement(rt,{defaultValue:"\u0421\u0435\u043a\u0446\u0438\u044f",id:"target_section",size:"sm",style:{flex:"1 1 auto"},onChange:this.onSectionChange})),r.a.createElement(Se.a.Control,{type:"text",size:"sm",value:n.subject,onChange:this.onSubjectChange,style:{marginBottom:"3px",color:"black"},placeholder:"\u0422\u0435\u043c\u0430",maxLength:"90"}),r.a.createElement(Tt,{placeholder:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",showVoting:!0,isVoting:n.isVoting,onSend:this.onSend,text:n.text,isFetching:n.isFetching,formName:"NEW_TOPIC"})),r.a.createElement(xt.a,{className:"new-topic-voting"},c))}}]),n}(a.Component)),Nt=Object(u.b)((function(e){return{sections:e.sections,newTopic:e.newTopic}}))(St),It=n(89),_t=n.n(It);var Pt=function(e){var t,n,a,r=new Set("|if|\u0435\u0441\u043b\u0438|then|\u0442\u043e\u0433\u0434\u0430|elsif|\u0438\u043d\u0430\u0447\u0435\u0435\u0441\u043b\u0438|else|\u0438\u043d\u0430\u0447\u0435|endif|\u043a\u043e\u043d\u0435\u0446\u0435\u0441\u043b\u0438|do|\u0446\u0438\u043a\u043b|for|\u0434\u043b\u044f|to|\u043f\u043e|each|\u043a\u0430\u0436\u0434\u043e\u0433\u043e|in|\u0438\u0437|while|\u043f\u043e\u043a\u0430|enddo|\u043a\u043e\u043d\u0435\u0446\u0446\u0438\u043a\u043b\u0430|procedure|\u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u0430|endprocedure|\u043a\u043e\u043d\u0435\u0446\u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u044b|function|\u0444\u0443\u043d\u043a\u0446\u0438\u044f|endfunction|\u043a\u043e\u043d\u0435\u0446\u0444\u0443\u043d\u043a\u0446\u0438\u0438|var|\u043f\u0435\u0440\u0435\u043c|export|\u044d\u043a\u0441\u043f\u043e\u0440\u0442|goto|\u043f\u0435\u0440\u0435\u0439\u0442\u0438|and|\u0438|or|\u0438\u043b\u0438|not|\u043d\u0435|val|\u0437\u043d\u0430\u0447|break|\u043f\u0440\u0435\u0440\u0432\u0430\u0442\u044c|continue|\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c|return|\u0432\u043e\u0437\u0432\u0440\u0430\u0442|try|\u043f\u043e\u043f\u044b\u0442\u043a\u0430|except|\u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435|endtry|\u043a\u043e\u043d\u0435\u0446\u043f\u043e\u043f\u044b\u0442\u043a\u0438|raise|\u0432\u044b\u0437\u0432\u0430\u0442\u044c\u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435|false|\u043b\u043e\u0436\u044c|true|\u0438\u0441\u0442\u0438\u043d\u0430|undefined|\u043d\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043e|null|new|\u043d\u043e\u0432\u044b\u0439|execute|\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c|".split("|")),o=new Set("():;.,=+-*<>?[]%/".split("")),c=!1,i="";function s(e){return""===e.trim()}function l(e,t,n){return e.substr(t-1,n)}function u(e,t){return e.substr(-t)}function p(e){return r.has(e.toLowerCase().trim())}function m(e,r){" "===e||a===r?t+=e:(n&&(t+="</span>",n=!1),t=t+"<span class="+r+e,n=!0,a=r)}function h(e){var n=!1,r=!1,h=1,f=!0,d=1;for(d=1;d<=e.length;d++){var v=e.charAt(d-1);if(c)'"'===v?(m(l(e,h,d-h+1),"str>"),c=!1,i="",f=!0):i+=v;else if(n)"'"===v?(m(l(e,h,d-h+1),"str>"),n=!1,i="",f=!0):i+=v;else if(" "===v)s(i)?t+=" ":(r?(m(i+" ","str>"),r=!1):p(i.trim())?m(i+" ","key>"):isNaN(parseInt(i,10))?m(i+" ","bg>"):m(i+" ","num>"),i=""),f=!0;else if(o.has(v)){if(s(i)||(r?(m(i,"str>"),r=!1,f="."!==v):f&&p(i)?(m(i,"key>"),f="."!==v):(isNaN(parseInt(i,10))?m(i,"bg>"):m(i,"num>"),f="."!==v),i=""),"."===v&&"num>"===a){m(v,"num>");continue}if("="===v&&"<"===l(e,d-1,1))a=void 0;else if("/"===v&&"/"===l(e,d+1,1))return void m(u(e,e.length-d+1),"com>");m(v,"sp>")}else if('"'===v||"|"===v)s(i)?(h=d,c=!0):(m(i+v,"str>"),i=""),f=!0;else if("'"===v)s(i)?(h=d,n=!0):(m(i+v,"str>"),i=""),f=!0;else{if("#"===v||"&"===v&&s(t)){m(u(e,e.length-d+1),"pr>"),d=e.lenth;break}"~"===v?(i+=v,r=!0):i+=v}}c||n?m(l(e,h,d-h+1),"str>"):s(i)||(p(i)?m(i,"key>"):isNaN(parseInt(i,10))?m(i,"bg>"):m(i,"num>"))}c=!1,i="",n=!1,a=void 0,t="";var f,d=[],v=Object(Ve.a)(e.split("\n"));try{for(v.s();!(f=v.n()).done;){var b=f.value;s(b)?d.push(""):(t="",h(b),n&&!c?(t+="</span>",n=!1,a="",i=""):c||(a="",i=""),d.push(t))}}catch(g){v.e(g)}finally{v.f()}return d.join("\n")},Lt=(n(139),function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(e){var a;Object(xe.a)(this,n),(a=t.call(this,e)).onShowClick=a.onShowClick.bind(Object(Pe.a)(a)),a.state={hidden:!0};var r=e.children;if(r){var o=x(r);for(a.text=o.join(""),a.text=a.text.replace(/\n<br>/g,"\n").replace(/<br>\n/g,"\n").replace(/\r<br>/g,"\n").replace(/<br>\r/g,"\n").replace(/<br>/g,"\n");"\n"===a.text[0];)a.text=a.text.substr(1);for(;"\n"===a.text.substr(-1);)a.text=a.text.substr(0,a.text.length-1);a.text=Pt(a.text)}return a}return Object(je.a)(n,[{key:"onShowClick",value:function(){this.setState({hidden:!this.state.hidden})}},{key:"render",value:function(){var e,t,n=0;this.text&&(n=this.text.split("\n").length),e=this.state.hidden?"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c: ".concat(n," \u0441\u0442\u0440\u043e\u043a"):"\u0421\u043a\u0440\u044b\u0442\u044c",n>7&&(t=r.a.createElement("div",{className:"expand-button-div"},r.a.createElement("span",{className:"expand-button-span",onClick:this.onShowClick},e)));var a={};return this.state.hidden&&n>7?(a.overflow="hidden",a.height="135px"):(a.overflow="auto",a.height="auto"),r.a.createElement("div",{style:{marginTop:"5px"}},r.a.createElement("pre",{className:"code-pre",style:a,dangerouslySetInnerHTML:{__html:this.text}}),t)}}]),n}(a.Component)),Rt=n(69),At=n.n(Rt),Ft=function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(){return Object(xe.a)(this,n),t.apply(this,arguments)}return Object(je.a)(n,[{key:"render",value:function(){var e=this.props,t=e.href,n=e.children;return r.a.createElement("a",{href:t,className:"registered-user"},n)}}]),n}(a.Component),Mt=function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(e){var a;return Object(xe.a)(this,n),(a=t.call(this,e)).state={hrefName:e.href,title:""},a}return Object(je.a)(n,[{key:"getVideoId",value:function(e){if(-1!==e.search(/youtube/)){var t=e.split("?");return Ie.a.parse(t[1]).v}if(-1!==e.search(/youtu\.be/)){var n=e.match(/e\/(.+?)(&|\?|$)/);if(n&&n.length>1)return n[1]}return null}},{key:"getVideoParams",value:function(){var e=Object(v.a)(d.a.mark((function e(t){var n,a,r,o,c,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("youtubeApiKey")||"AIzaSyCztN2QW4Fxw_1YuAHBTOZdYLbzigPz25g",a="https://www.googleapis.com/youtube/v3/videos?key=".concat(n,"&fields=items(snippet(title))&part=snippet&id=").concat(t),e.next=4,fetch(a);case 4:return r=e.sent,e.next=7,r.json();case 7:return o=e.sent,c=o.items[0].snippet.title,i=c,50,c.length>55&&(i=i.substring(0,50)+"..."),e.abrupt("return",{hrefName:i,title:c});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(v.a)(d.a.mark((function e(){var t,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.href,n=this.getVideoId(t)){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,this.getVideoParams(n);case 7:a=e.sent,this.setState(Object(h.a)({},a)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.error("youtube",e.t0.message);case 14:case"end":return e.stop()}}),e,this,[[4,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("a",{href:this.props.href,title:this.state.title},"".concat("youtube",": ").concat(this.state.hrefName))}}]),n}(a.Component),Dt=function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(){return Object(xe.a)(this,n),t.apply(this,arguments)}return Object(je.a)(n,[{key:"fixBrokenLink",value:function(e,t){var n=e.replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\./g,"\\.").replace(/\./g,".").replace(/\*/g,"\\*").replace(/\+/g,"\\+").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\?/g,"\\?").replace(/\//g,"\\/");try{var a=new RegExp(n+"<\\/a>(\\)|[\u0430-\u044f\u0451\u0410-\u042f\u04010-9#\\-\\+\\_\\%\\?=]*)"),r=t.match(a);if(r&&r.length>1)return")"===r[1]&&-1===e.search("\\(")?e:e+=r[1]}catch(o){console.error(o)}return e}},{key:"render",value:function(){var e=this.props,t=e.href,n=e.children,a=e.parentText,o=e.showTooltipOnPostLink,c=e.showYoutubeVideoTitle,i=e.replaceCatalogMista,s=e.fixBrokenLinks;try{var l=new At.a(t,!0)}catch(p){return console.error(p.message,t),r.a.createElement("a",{href:t},t)}var u=t;if(u.startsWith("/")&&(l.set("protocol","https"),l.set("hostname","www.forum.mista.ru"),u=l.href),"true"===o){if(-1!==l.hostname.search(/forum\.mista.ru/)){if("/topic.php"===l.pathname)return r.a.createElement(vt,{topicId:l.query.id,number:l.hash.replace("#","")||"0"},x(n));if("/users.php"===l.pathname)return r.a.createElement(Ft,{href:l.href},n)}if("a-sitnikov.github.io"===l.hostname&&"/react.mista/"===l.pathname&&0===Object.keys(l.query).length&&"/react.mista/topic.php"===(l=new At.a(t.replace(/#\//,""),!0)).pathname)return r.a.createElement(vt,{topicId:l.query.id,number:l.hash.replace("#","")||"0"},x(n))}return"true"!==c||-1===l.hostname.search(/youtube/)&&-1===l.hostname.search(/youtu\.be/)?"true"===i&&-1!==l.hostname.search(/catalog\.mista/)?(l.set("hostname","infostart.ru"),r.a.createElement("a",{target:this.props.target,className:this.props.class,rel:this.props.rel,href:l.href},l.href," ")):("true"===s&&a&&(u=this.fixBrokenLink(u,a)),r.a.createElement("a",{target:this.props.target,className:this.props.class,rel:this.props.rel,href:u},n)):r.a.createElement(Mt,{href:t})}}]),n}(a.Component),Wt=Object(u.b)((function(e){var t=e.options.items;return{showTooltipOnPostLink:t.showTooltipOnPostLink,showYoutubeVideoTitle:t.showYoutubeVideoTitle,replaceCatalogMista:t.replaceCatalogMista,fixBrokenLinks:t.fixBrokenLinks}}))(Dt),Vt=function(e){var t=e.topicId,n=e.data,a=e.total,o=e.n,c=e.colors,i="".concat(j,"/css/voting").concat(o,".png"),s=0;a&&(s=Math.round(100*n.result/a));return r.a.createElement("div",{className:"voting-item"},r.a.createElement("div",{className:"voting-title"},r.a.createElement("a",{rel:"nofollow",style:{textDecoration:"none"},href:"".concat(window.hash,"/topic.php?id=").concat(t,"&sel=").concat(o)},r.a.createElement("b",null,r.a.createElement("span",{style:{color:c[o-1]}},"".concat(o,". ").concat(n.select))))),r.a.createElement("div",{className:"voting-percentage"},r.a.createElement("b",null,r.a.createElement("span",{style:{color:c[o-1]}},"".concat(s,"% (").concat(n.result,")")))),r.a.createElement("div",{className:"voting-bar"},r.a.createElement("div",{style:{width:"".concat(s,"%")}},r.a.createElement("a",{href:i},r.a.createElement("img",{src:i,style:{maxWwidth:"500px",width:"100%",height:"15px"},alt:"\u043f".concat(o)})))))},Ut=function(e){var t=e.items,n=e.topicId,a=e.colors,o=t.reduce((function(e,t){return e+t.result}),0);return r.a.createElement("div",{style:{marginBottom:"10px"}},t.filter((function(e){return e.select})).map((function(e,t){return r.a.createElement(Vt,{key:t,data:e,total:o,n:t+1,topicId:n,colors:a})})))},Bt=function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(){return Object(xe.a)(this,n),t.apply(this,arguments)}return Object(je.a)(n,[{key:"render",value:function(){var e=this.props,t=e.colors,n=e.info,a=e.vote,o=n[a-1];return r.a.createElement("div",{style:{marginTop:"5px"}},r.a.createElement("b",null,r.a.createElement("span",{style:{color:t[a-1]}},"".concat(a,". ").concat(o.select))))}}]),n}(a.Component),Gt=function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(){return Object(xe.a)(this,n),t.apply(this,arguments)}return Object(je.a)(n,[{key:"processLinksToPosts",value:function(e){var t=this.props.topicId;return e.replace(/(\()(\d+)(\))/gi,(function(e){var n=arguments.length<=2?void 0:arguments[2];return"(<link data-topicid='".concat(t,"' data-number='").concat(n,"' ></link>)")}))}},{key:"processCode1C",value:function(e){return e.replace(/(\[1[C\u0421]\])((.|\n|\r)*?)(\[\/1[C\u0421]\])/gi,(function(e){var t=arguments.length<=2?void 0:arguments[2];return"<br>"===t.substr(0,4)&&(t=t.substr(4)),"<code>".concat(t,"</code>")}))}},{key:"processText",value:function(e){if(!e)return e;var t=this.props.showTooltips;return e=this.processCode1C(e),"true"===t&&(e=this.processLinksToPosts(e)),e}},{key:"render",value:function(){var e,t,n=this.props,a=n.topicId,o=n.n,c=n.html,i=n.vote,s=n.info,l=n.style,u=n.voteColors;i&&s.voting&&a===s.id&&(s.voting[i-1]&&(e=r.a.createElement(Bt,{info:s.voting,vote:i,colors:u})));"0"===o&&1===s.is_voting&&s.voting&&(t=r.a.createElement(Ut,{items:s.voting,topicId:a,colors:u}));var p=this.processText(c),m={link:function(e){return r.a.createElement(vt,{topicId:e["data-topicid"],number:e["data-number"],key:e.key})},code:function(e){return r.a.createElement(Lt,e)},a:function(e){return r.a.createElement(Wt,Object.assign({},e,{parentText:p}))}},f=_t()(p,m);return r.a.createElement("div",{className:"message",style:Object(h.a)({},l)},t,r.a.createElement("div",null,f),e)}}]),n}(a.Component),Kt=Object(u.b)((function(e){return{info:e.topic.info,voteColors:e.options.voteColors,showTooltips:e.options.items.showTooltips}}))(Gt),Ht=(n(72),function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(){return Object(xe.a)(this,n),t.apply(this,arguments)}return Object(je.a)(n,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.utime,a=e.topicId,o=e.n;if(n)var c=new Date(1e3*n);return r.a.createElement("div",null,r.a.createElement("span",{className:"plus-nav",onClick:this.props.onFirst},"[\u2190 "),r.a.createElement("span",{className:"plus-nav",onClick:this.props.onPrev}," \xab "),r.a.createElement(l.c,{className:"plus-nav",title:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044e ".concat(o),to:"/topic.php?id=".concat(a,"#").concat(o)},o),r.a.createElement("span",{className:"plus-nav",onClick:this.props.onNext}," \xbb "),r.a.createElement("span",{className:"plus-nav",onClick:this.props.onLast}," \u2192]"),r.a.createElement("b",{style:{margin:"auto 5px"}},t),r.a.createElement("span",{className:"agh"},st()(c,"dd.mm.yy - HH:MM")))}}]),n}(a.Component)),zt=function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(e){var a;return Object(xe.a)(this,n),(a=t.call(this,e)).fetchData=function(){var e=Object(v.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D(a.props.topicId,t);case 3:(n=e.sent)||(r="\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e ".concat(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r=e.t0.message;case 10:a.setState({n:t,data:n,error:r});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),a.onClickFirst=function(){a.fetchData(0)},a.onClickNext=function(){a.fetchData(a.state.n+1)},a.onClickPrev=function(){a.state.n>0&&a.fetchData(a.state.n-1)},a.onClickLast=Object(v.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(a.props.topicId);case 2:t=e.sent,a.fetchData(t);case 4:case"end":return e.stop()}}),e)}))),a.state={n:e.n,data:null,error:null},a}return Object(je.a)(n,[{key:"componentDidMount",value:function(){var e=Object(v.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchData(this.state.n);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.topicId,t=this.state,n=t.data,a=t.error,o=t.n;if(!n&&!a)return null;if(n)var c=n.user,i=n.utime;return r.a.createElement("div",{className:"topic-preview"},r.a.createElement(Ht,{user:c,utime:+i,topicId:e,n:o,onFirst:this.onClickFirst,onLast:this.onClickLast,onNext:this.onClickNext,onPrev:this.onClickPrev}),n&&r.a.createElement(Kt,{data:n,html:n.text,topicId:e,style:{maxHeight:"500px",overflowY:"auto",overflowWrap:"break-word"}}),a&&r.a.createElement("p",null,a))}}]),n}(a.Component),Yt=(n(142),function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(e){var a;return Object(xe.a)(this,n),(a=t.call(this,e)).updateTopicsList=function(){var e=a.props.fetchTopicsListIfNeeded,t=a.props,n=t.autoRefreshTopicsList,r=t.autoRefreshTopicsListInterval;a.locationParams=Ie.a.parse(a.location.search),e(a.locationParams),"true"===n&&((r=+r)<60&&(r=60),clearTimeout(a.timer),a.timer=setTimeout(a.updateTopicsList,1e3*r))},a.onPostNewTopicSuccess=function(){a.updateTopicsList()},a.locationParams={page:"1"},a}return Object(je.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.location;this.location=e,this.updateTopicsList()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.location,n=e.topicsPerPage;this.location.search===t.search&&this.props.topicsPerPage===n||(this.location=t,this.updateTopicsList(),window.scrollTo(0,0)),document.title="React.Mista"}},{key:"render",value:function(){var e,t=this.props,n=t.topicsList,a=t.sections,o=[],c=Object(Ve.a)(n.items);try{for(c.s();!(e=c.n()).done;){var i=e.value;o.push(r.a.createElement(Et,{key:i.id,data:i})),i.showPreview&&o.push(r.a.createElement("div",{key:"preview".concat(String(i.id)),className:"preview-container"},r.a.createElement(zt,{topicId:String(i.id),n:0})))}}catch(s){c.e(s)}finally{c.f()}return r.a.createElement("div",null,r.a.createElement(ct,{history:this.props.history}),n.error&&r.a.createElement($e,{text:n.error}),r.a.createElement("div",{className:"table"},r.a.createElement("div",{className:"th",style:{position:"sticky",top:"39px"}},r.a.createElement("div",null,"\u0420\u0430\u0437\u0434\u0435\u043b"),r.a.createElement("div",null,"Re"),r.a.createElement("div",null),r.a.createElement("div",null,"\u0422\u0435\u043c\u0430"),r.a.createElement("div",null,"\u0410\u0432\u0442\u043e\u0440"),r.a.createElement("div",null,r.a.createElement("span",{style:{cursor:"pointer"},title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a",onClick:this.updateTopicsList},n.isFetching?"\u041e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u0442\u0441\u044f":"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043e"))),o,r.a.createElement("div",{className:"tf"},r.a.createElement(yt,{baseUrl:"index.php",locationParams:this.locationParams,maxPage:10}))),r.a.createElement("div",{id:"F",className:"newtopic",style:{marginBottom:"10px",marginTop:"5px",position:"relative"}},r.a.createElement(Nt,{sections:a.items,onSubmitSuccess:this.onPostNewTopicSuccess,locationParams:this.locationParams})))}}]),n}(a.Component)),Jt=Object(u.b)((function(e){return{topicsList:e.topicsList,sections:e.sections,login:e.login,topicsPerPage:e.options.items.topicsPerPage,autoRefreshTopicsList:e.options.items.autoRefreshTopicsList,autoRefreshTopicsListInterval:e.options.items.autoRefreshTopicsListInterval}}),(function(e){return{fetchTopicsListIfNeeded:function(){return e(X.apply(void 0,arguments))}}}))(Yt),Qt=function(e,t,n){return{type:"RECEIVE_TOPIC",info:e,item0:t,items:n,receivedAt:Date.now()}},Xt=function(){return{type:"CLOSE_TOPIC"}},qt=function(e){var t=e.topic;return!t||!t.isFetching},$t=function(e,t){return function(n,a){if(qt(a()))return n(function(e,t){return function(){var n=Object(v.a)(d.a.mark((function n(a){var r,o,c,i,s,l,u,p,m,h,f;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:"REQUEST_TOPIC"}),n.prev=1,n.next=4,F({id:e.id});case 4:r=n.sent,n.next=11;break;case 7:n.prev=7,n.t0=n.catch(1),console.error(n.t0),r={id:e.id,text:"",answers_count:"0"};case 11:if(n.prev=11,o=e.page||1,c=t,"last20"!==o){n.next=34;break}if(!(+r.answers_count>21)){n.next=27;break}if(c){n.next=21;break}return n.next=19,M({id:e.id,from:0,to:1});case 19:s=n.sent,c=s[0];case 21:return l=+r.answers_count-20,n.next=24,M({id:e.id,from:l,to:1010});case 24:i=n.sent,n.next=32;break;case 27:return n.next=29,M({id:e.id,from:0,to:1010});case 29:u=n.sent,c=u[0],i=u.slice(1);case 32:n.next=54;break;case 34:if(p=0,m=100*(o=+o)-1,!(o>1)){n.next=49;break}if(p=100*(o-1),c){n.next=44;break}return n.next=42,M({id:e.id,from:0,to:1});case 42:h=n.sent,c=h[0];case 44:return n.next=46,M({id:e.id,from:p,to:m});case 46:i=n.sent,n.next=54;break;case 49:return p=c?1:0,n.next=52,M({id:e.id,from:p,to:m});case 52:f=n.sent,c?i=f:(c=f[0],i=f.slice(1));case 54:"0"===r.answers_count&&i.length>0&&(r.answers_count=i[i.length-1].n),"last20"===o&&i.length>20&&(i=i.slice(-20)),a(Qt(r,c,i)),n.next=63;break;case 59:n.prev=59,n.t1=n.catch(11),console.error("Failed to fetch topic:",n.t1),a({type:"RECEIVE_TOPIC_FAILED",error:n.t1,receivedAt:Date.now()});case 63:case"end":return n.stop()}}),n,null,[[1,7],[11,59]])})));return function(e){return n.apply(this,arguments)}}()}(e,t))}},Zt=function(e){return function(t,n){if(qt(n()))return t(function(e){return function(){var t=Object(v.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"REQUEST_NEW_MESSAGES"}),t.prev=1,t.next=4,M({id:e.id,from:e.last+1,to:1002});case 4:a=t.sent,n({type:"RECEIVE_NEW_MESSAGES",items:a,receivedAt:Date.now()}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.error("Failed to fetch new messages:",t.t0),n({type:"RECEIVE_NEW_MESSAGES_FAILED",error:t.t0,receivedAt:Date.now()});case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}(e))}},en=function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(){return Object(xe.a)(this,n),t.apply(this,arguments)}return Object(je.a)(n,[{key:"render",value:function(){var e=this.props.info;return a.createElement("div",{className:"flex-row"},a.createElement("div",{className:"user-td"},a.createElement(et,null)),a.createElement("div",{className:"section-td"},a.createElement("span",{id:"forum_string",className:"bold120"},a.createElement("a",{rel:"nofollow",href:"".concat(window.hash,"/index.php?forum=").concat(e.forum),style:{textDecoration:"none"}},{"1c":"1\u0421:\u041f\u0440\u0435\u0434\u043f\u0440\u0438\u044f\u0442\u0438\u0435",life:"\u041e \u0436\u0438\u0437\u043d\u0438",it:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438",job:"\u0420\u0430\u0431\u043e\u0442\u0430"}[e.forum]))))}}]),n}(a.Component),tn=Object(u.b)((function(e){return{info:(e.topic||{info:{forum:""}}).info}}))(en),nn=function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(){return Object(xe.a)(this,n),t.apply(this,arguments)}return Object(je.a)(n,[{key:"render",value:function(){var e=this.props.info,t="https://www.yandex.ru/yandsearch?rpt=rad&text="+encodeURIComponent(e.text);return r.a.createElement("div",{className:"topic-row"},r.a.createElement("div",{className:"cell-userinfo"},r.a.createElement("div",{className:"topic-tools"},r.a.createElement("a",{title:"API.info",href:"".concat(j,"/").concat(k,"?id=").concat(e.id),className:"agh",style:{display:"block",lineHeight:"1em"}},"i"),r.a.createElement("a",{title:"API.messages",href:"".concat(j,"/").concat(C,"?id=").concat(e.id,"&from=0&to=20"),className:"agh",style:{display:"block",lineHeight:"1em"}},"m"))),r.a.createElement("div",{className:"cell-message"},r.a.createElement("div",{className:"flex-row"},r.a.createElement("div",{style:{flex:1,textAlign:"center"}},r.a.createElement("a",{href:"https://www.forum.mista.ru/topic.php?id=".concat(e.id)},r.a.createElement("h1",{className:"topic-title ",dangerouslySetInnerHTML:{__html:e.text}})),r.a.createElement("div",{className:"moder-action"})),r.a.createElement("div",{style:{flex:"0 0 20px",position:"relative"}},r.a.createElement("div",{className:"div-va-middle"},r.a.createElement("a",{rel:"noopener noreferrer",href:t,title:"\u0418\u0441\u043a\u0430\u0442\u044c \u0432 \u042f\u043d\u0434\u0435\u043a\u0441\u0435",target:"_blank",className:"yandex"},"\u042f"))))))}}]),n}(a.Component),an=Object(u.b)((function(e){return{info:(e.topic||Z).info}}))(nn),rn=function(e){return function(){var t=Object(v.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"POST_NEW_MESSAGE_START"}),a={message_text:encodeURIComponent(e.text),action:"new",topic_id:e.topicId,rnd:Math.round(1e10*Math.random())},e.voting_select&&(a.voting_select=e.voting_select),t.prev=3,t.next=6,K(a);case 6:return t.next=8,n({type:"POST_NEW_MESSAGE_COMPLETE"});case 8:e.onSuccess&&e.onSuccess(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),console.error("Failed to post new message: "+t.t0);case 14:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}()},on=function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(){var e;return Object(xe.a)(this,n),(e=t.call(this)).onClick=e.onClick.bind(Object(Pe.a)(e)),e}return Object(je.a)(n,[{key:"onClick",value:function(){var e,t=this.props,n=t.dispatch,a=t.data;n((e="(".concat(a.n,")"),function(t){t({type:"ADD_MESSAGE_TEXT",text:e})}));var r=document.getElementById("message_text");r&&window.scrollTo(0,r.offsetTop)}},{key:"render",value:function(){var e,t=this.props,n=t.data,o=t.isAuthor,c=t.isYou,i="".concat(j,"/users.php?id=").concat(n.userId);e=n?"0"===n.n?st()(new Date(1e3*+n.utime),"dd.mm.yy - HH:MM"):r.a.createElement(a.Fragment,null,r.a.createElement("span",{className:"message-number"},n.n)," - "+st()(new Date(1e3*+n.utime),"dd.mm.yy - HH:MM")):"";var s=ut()("registered-user",{"is-author":o,"is-you":c});return r.a.createElement("div",{className:"user-info"},r.a.createElement("a",{className:s,href:i},n.user),r.a.createElement("div",{className:"message-time"},r.a.createElement("span",{className:"ah"},e),r.a.createElement("button",{className:"button ah",onClick:this.onClick},e)))}}]),n}(a.Component),cn=Object(u.b)()(on),sn=function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(){return Object(xe.a)(this,n),t.apply(this,arguments)}return Object(je.a)(n,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.author,a=e.topicId,o=e.login;return t?r.a.createElement("div",{className:"topic-row",id:t.n},r.a.createElement("div",{className:"cell-userinfo"},r.a.createElement(cn,{data:t,isAuthor:t.user===n,isYou:t.user===o.username})),r.a.createElement("div",{className:"cell-message"},r.a.createElement(Kt,{data:t,html:t.text,topicId:a,n:t.n,vote:+t.vote}))):null}}]),n}(a.Component),ln=Object(u.b)((function(e){var t=e.topic||{info:{},item0:{}},n=t.info,a=t.item0;return{topicId:n.id,author:a?a.user:"",login:e.login}}))(sn),un=function(e){return function(){var t=Object(v.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"ADD_BOOKMARK_START"}),t.prev=1,t.next=4,z(e);case 4:n({type:"ADD_BOOKMARK_COMPLETE"}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),console.error("Error adding bookmark:",t.t0),n({type:"ADD_BOOKMARK_FAIL"});case 11:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},pn=function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(){var e;Object(xe.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onBookmarkClick=function(){var t=e.props,n=t.info;(0,t.dispatch)(un(n))},e.onRefreshClick=function(){var t=e.props,n=t.info;(0,t.dispatch)(Zt({id:n.id,last:parseInt(n.answers_count,10)}))},e}return Object(je.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.info,r=t.bookmark,o=t.isFetching,c=t.params,i=y(n.answers_count),s=c.page||1;return"last20"!==s&&s!==i||(e=a.createElement(Qe.a,{onClick:this.onRefreshClick,disabled:r.isFetching,size:"sm",variant:"light"},o?"\u041e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u0442\u0441\u044f":"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0432\u0435\u0442\u043a\u0443")),a.createElement("div",{className:"flex-row",id:"F"},a.createElement("div",{className:"ta-left va-top",style:{width:"50%"}},a.createElement(Qe.a,{onClick:this.onBookmarkClick,disabled:r.isFetching,size:"sm",variant:"light"},r.isFetching?"\u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435...":"\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0430")),a.createElement("div",{className:"ta-right va-middle",style:{marginLeft:"auto"}},e))}}]),n}(a.Component),mn=Object(u.b)((function(e){var t=e.topic||{isFetching:!0,info:{}},n=t.isFetching,a=t.lastUpdated;return{info:t.info,isFetching:n,lastUpdated:a,bookmark:e.bookmark||{}}}))(pn),hn=function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(e){var a;return Object(xe.a)(this,n),(a=t.call(this,e)).onSubmit=function(e){e.preventDefault(),console.log("submitted");var t=a.props,n=t.dispatch,r=t.info,o={text:t.newMessage.text,topicId:r.id,onSuccess:a.onSubmitSuccess,voting_select:void 0};a.state.voting&&(o.voting_select=a.state.voting),n(function(e){return function(t,n){if(function(e){var t=e.newMessage;return!!t&&!t.isFetching}(n()))return t(rn(e))}}(o))},a.onSubmitSuccess=function(){(0,a.props.dispatch)({type:"NEW_MESSAGE_TEXT",text:""}),a.setState(Object(h.a)(Object(h.a)({},a.state),{},{voting:void 0})),a.props.onSubmitSuccess&&a.props.onSubmitSuccess()},a.clearVoting=function(e){e.preventDefault(),a.setState(Object(h.a)(Object(h.a)({},a.state),{},{voting:void 0}))},a.setVotingOption=function(e){a.setState(Object(h.a)(Object(h.a)({},a.state),{},{voting:e}))},a.state={voting:void 0},a}return Object(je.a)(n,[{key:"render",value:function(){var e,t=this,n=this.props,a=n.info,o=n.newMessage;if(a.is_voting&&a.voting){for(var c=[],i=function(e){var n=a.voting[e-1];if(!n.select)return"continue";c.push(r.a.createElement(Se.a.Check,{type:"radio",key:e,name:"voting",checked:t.state.voting===e,onChange:function(){return t.setVotingOption(e)},label:"".concat(e,". ").concat(n.select)}))},s=1;s<=a.voting.length;s++)i(s);e=r.a.createElement(xt.a,null,r.a.createElement("legend",null,r.a.createElement("small",null,"\u0412\u0430\u0448 \u0432\u044b\u0431\u043e\u0440:",r.a.createElement("span",{href:"",id:"voting_clear",style:{marginLeft:"5px",cursor:"pointer"},onClick:this.clearVoting},"\u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"))),c,"\u041e\u0431\u043e\u0441\u043d\u0443\u0439\u0442\u0435 \u0441\u0432\u043e\u0439 \u0432\u044b\u0431\u043e\u0440!")}return r.a.createElement("form",{style:{marginTop:"5px"},onSubmit:this.onSubmit},r.a.createElement("div",{className:"bold"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0432 \u0442\u0435\u043c\u0443:"),r.a.createElement("div",{className:"new-message-container"},r.a.createElement("div",{className:"new-message-text"},r.a.createElement(Tt,{isFetching:o.isFetching,text:o.text,placeholder:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",formName:"NEW_MESSAGE"})),r.a.createElement("div",{className:"new-message-voting"},e)))}}]),n}(a.Component),fn=Object(u.b)((function(e){return{info:e.topic.info,newMessage:e.newMessage}}))(hn),dn=(n(143),function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(){var e;return Object(xe.a)(this,n),(e=t.call(this)).autoUpdate=function(){var t=e.props,n=t.info,a=t.fetchNewMessagesIfNeeded;("last20"===e.locationParams.page||e.locationParams.page===y(+n.answers_count))&&a({id:n.id,last:parseInt(n.answers_count,10)})},e.updateTopic=function(){var t=e.props,n=t.fetchTopicIfNeeded,a=t.item0,r=Ie.a.parse(e.location.search);r.page?"last20"!==r.page&&(r.page=+r.page,isNaN(r.page)&&(r.page=1)):r.page=1,r.id!==e.locationParams.id&&(a=null),e.locationParams=r,n(e.locationParams,a)},e.onPostNewMessageSuccess=function(){var t=e.props,n=t.fetchNewMessagesIfNeeded,a=t.info;("last20"===e.locationParams.page||e.locationParams.page===y(+a.answers_count))&&n({id:a.id,last:parseInt(a.answers_count,10)})},e.locationParams={id:""},e.scrolledToHash=!1,e}return Object(je.a)(n,[{key:"componentDidMount",value:function(){if(this.location=this.props.location,this.updateTopic(),"true"===this.props.options.autoRefreshTopic){var e=+this.props.options.autoRefreshTopicInterval;e<60&&(e=60),this.timer=setInterval(this.autoUpdate,1e3*e)}}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.location.hash,n=e.items;if(!this.scrolledToHash&&t&&n.length>0){this.scrolledToHash=!0;var a=document.getElementById(t.slice(1));a&&setTimeout((function(){return window.scrollTo(0,a.offsetTop)}),1)}}},{key:"componentWillUnmount",value:function(){var e=this.props.closeTopic;clearInterval(this.timer),e()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(e.info.text&&document.title!==e.info.text){var t=e.info.text;t=t.replace(/&quot;/g,'"'),document.title=t}this.location.search!==e.location.search&&(this.location=e.location,this.updateTopic(),window.scrollTo(0,0))}},{key:"render",value:function(){var e,t=this.props,n=t.login,a=t.items,o=t.item0,c=t.info,i=t.error;i&&(e=r.a.createElement("div",null,r.a.createElement("p",{className:"error"},"\u041e\u0428\u0418\u0411\u041a\u0410"),r.a.createElement("p",{className:"error"},i.message)));var s=y(+c.answers_count);return r.a.createElement("div",{style:{marginBottom:"5px"}},e,r.a.createElement(tn,{currentPage:this.locationParams.page}),r.a.createElement("div",{className:"topic-table"},r.a.createElement(an,null),r.a.createElement(ln,{key:"0",data:o}),a.map((function(e,t){return r.a.createElement(ln,{key:e.n,data:e})})),(s>1||"last20"===this.locationParams.page)&&r.a.createElement("div",{className:"tf"},r.a.createElement(yt,{baseUrl:"topic.php",locationParams:this.locationParams,maxPage:s,last20:!0}))),r.a.createElement(mn,{params:this.locationParams}),n.logged&&r.a.createElement(fn,{onSubmitSuccess:this.onPostNewMessageSuccess}))}}]),n}(a.Component)),vn=Object(u.b)((function(e){var t=e.topic,n=t.isFetching,a=t.lastUpdated,r=t.info,o=t.item0,c=t.items,i=t.error;return{login:e.login,info:r,item0:o,items:c,isFetching:n,lastUpdated:a,error:i,options:e.options.items}}),(function(e){return{fetchTopicIfNeeded:function(){return e($t.apply(void 0,arguments))},fetchNewMessagesIfNeeded:function(){return e(Zt.apply(void 0,arguments))},closeTopic:function(){return e(Xt.apply(void 0,arguments))}}}))(dn),bn=function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(e){var a;return Object(xe.a)(this,n),(a=t.call(this,e)).onChange=a.onChange.bind(Object(Pe.a)(a)),a}return Object(je.a)(n,[{key:"onChange",value:function(e){var t=this.props.name;this.props.onChange(e,t,e.target.value)}},{key:"render",value:function(){for(var e=this.props,t=e.name,n=e.label,a=e.values,o=e.oneLine,c=[],i=0;i<a.length;i++){var s=a[i];c.push(r.a.createElement("label",{key:i,htmlFor:s.name,style:{marginRight:"5px"}},r.a.createElement("input",{type:"radio",name:t,value:s.name,checked:s.name===this.props.value,onChange:this.onChange}),s.descr))}return r.a.createElement("span",null,r.a.createElement("span",{style:{marginRight:"5px"}},n),o?null:r.a.createElement("br",null),c)}}]),n}(a.Component),gn=function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(e){var a;return Object(xe.a)(this,n),(a=t.call(this,e)).onChange=a.onChange.bind(Object(Pe.a)(a)),a}return Object(je.a)(n,[{key:"onChange",value:function(e){var t=this.props.name;this.props.onChange(e,t,e.target.value)}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.value,a=e.label,o=e.postfix;return r.a.createElement("label",{htmlFor:t,style:{marginRight:"5px"}},r.a.createElement("span",{style:{marginRight:"5px"}},a),r.a.createElement("input",{type:"string",name:t,value:n,onChange:this.onChange}),void 0!==o?r.a.createElement("span",{style:{marginLeft:"5px"}},o):null)}}]),n}(a.Component),En=(n(144),function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(e){var a;return Object(xe.a)(this,n),(a=t.call(this,e)).closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.applyOptions=a.applyOptions.bind(Object(Pe.a)(a)),a.resetOptions=a.resetOptiopns.bind(Object(Pe.a)(a)),a.onChange=a.onChange.bind(Object(Pe.a)(a)),a.onTabClick=a.onTabClick.bind(Object(Pe.a)(a)),a.state={items:e.options.items},a.optionsParams={theme:{type:"radio",label:"\u0426\u0432\u0435\u0442\u043e\u0432\u0430\u044f \u043f\u0430\u043b\u0438\u0442\u0440\u0430:",oneLine:!0,values:[{name:"theme-yellow",descr:"\u0417\u043e\u043b\u043e\u0442\u0430\u044f"},{name:"theme-lightgray",descr:"\u0421\u0435\u0440\u0430\u044f"}]},topicsPerPage:{type:"number",label:"\u0422\u0435\u043c \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 (max 99):",min:1,max:99},autoRefreshTopicsList:{type:"checkbox",label:"\u0410\u0432\u0442\u043e\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430 \u0442\u0435\u043c"},autoRefreshTopicsListInterval:{type:"number",label:"",min:60,max:1e6,postfix:"\u0441\u0435\u043a"},autoRefreshTopic:{type:"checkbox",label:"\u0410\u0432\u0442\u043e\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u0435\u043c\u044b"},autoRefreshTopicInterval:{type:"number",label:"",min:60,max:1e6,postfix:"\u0441\u0435\u043a"},showTooltips:{type:"checkbox",label:"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0442\u0443\u043b\u0442\u0438\u043f\u044b, \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430"},tooltipDelay:{type:"number",max:1e6,label:"",postfix:"\u043c\u0441"},showTooltipOnTopicsList:{type:"checkbox",label:"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0442\u0443\u043b\u0442\u0438\u043f\u044b \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435, \u043f\u0440\u0438 \u043d\u0430\u0432\u0435\u0434\u0435\u043d\u0438\u0438 \u043d\u0430 \u043a\u043e\u043b-\u0432\u043e \u043e\u0442\u0432\u0435\u0442\u043e\u0432"},showTooltipOnPostLink:{type:"checkbox",label:"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0442\u0443\u043b\u0442\u0438\u043f \u0441\u0441\u044b\u043a\u0438 \u043d\u0430 \u0434\u0440\u0443\u0433\u0443\u044e \u0432\u0435\u0442\u043a\u0443"},showYoutubeVideoTitle:{type:"checkbox",label:"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u044f \u0440\u043e\u043b\u0438\u043a\u043e\u0432 youtube"},replaceCatalogMista:{type:"checkbox",label:"\u041e\u0431\u0440\u0430\u0442\u043d\u043e \u0437\u0430\u043c\u0435\u043d\u044f\u0442\u044c catalog.mista.ru \u043d\u0430 infostart.ru"},fixBrokenLinks:{type:"checkbox",label:"\u0427\u0438\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u043e\u043c\u0430\u043d\u043d\u044b\u0435 \u0441\u0441\u044b\u043b\u043a\u0438 (\u0441 \u0440\u0443\u0441\u0441\u043a\u0438\u043c\u0438 \u0441\u0438\u043c\u0432\u043e\u043b\u0430\u043c\u0438)"}},a.form=[{tabName:"\u041e\u0431\u0449\u0438\u0435",rows:[["theme"],["topicsPerPage"],["autoRefreshTopicsList","autoRefreshTopicsListInterval"],["autoRefreshTopic","autoRefreshTopicInterval"]]},{tabName:"\u0422\u0443\u043b\u0442\u0438\u043f\u044b",rows:[["showTooltips","tooltipDelay"],["showTooltipOnTopicsList"],["showTooltipOnPostLink"]]},{tabName:"\u0421\u0441\u044b\u043b\u043a\u0438",rows:[["showYoutubeVideoTitle"],["replaceCatalogMista"],["fixBrokenLinks"]]}],a}return Object(je.a)(n,[{key:"closeForm",value:function(){this.props.history.push("/"+window.hash)}},{key:"resetOptiopns",value:function(){this.setState({items:Object.assign({},Ee.items)})}},{key:"applyOptions",value:function(){var e;(0,this.props.dispatch)((e=this.state.items,function(t){t({type:"SAVE_OPTIONS",options:e})})),this.closeForm()}},{key:"onTabClick",value:function(e){this.setState({activeTab:e.target.textContent})}},{key:"onChange",value:function(e,t,n){var a=Object.assign({},this.state.items);a[t]=n,this.setState(Object(h.a)(Object(h.a)({},this.state),{},{items:a}))}},{key:"render",value:function(){var e,t=this,n=[],a=Object(Ve.a)(this.form);try{for(a.s();!(e=a.n()).done;){var o=e.value,c=[];for(var i in o.rows){var s,l=o.rows[i],u=[],p=Object(Ve.a)(l);try{var m=function(){var e=s.value,n=t.optionsParams[e];if(!n)return"continue";var a=t.state.items[e];"radio"===n.type?u.push(r.a.createElement(bn,{key:e,name:e,label:n.label,values:n.values,value:a,oneLine:n.oneLine,onChange:t.onChange})):"number"===n.type?(n.label&&u.push(r.a.createElement("label",{htmlFor:e,key:e+"_label",style:{fontWeight:"inherit"}},n.label)),u.push(r.a.createElement(Re.a,{key:e,type:"number",min:n.min,max:n.max,value:a,onChange:function(n){return t.onChange(n,e,n.target.value)},style:{flex:"0 0 100px",marginLeft:"5px"},bsSize:"sm"})),n.postfix&&u.push(r.a.createElement("span",{key:e+"_postfix",style:{marginLeft:"5px",flex:"0 0 auto"}},n.postfix))):"string"===n.type?u.push(r.a.createElement(gn,{key:e,name:e,label:n.label,postfix:n.postfix,value:a,onChange:t.onChange})):"checkbox"===n.type&&u.push(r.a.createElement(Se.a.Check,{type:"checkbox",label:n.label,key:e,name:e,checked:"true"===String(a),onChange:function(n){return t.onChange(n,e,n.target.checked)},style:{flex:"0 0 auto",margin:"0px"}}))};for(p.s();!(s=p.n()).done;)m()}catch(h){p.e(h)}finally{p.f()}c.push(r.a.createElement("div",{key:i,className:"options-row"},u))}n.push(r.a.createElement("div",{key:o.tabName},r.a.createElement("div",{className:"tab-header"},o.tabName),r.a.createElement("div",{className:"tab-content"},c)))}}catch(h){a.e(h)}finally{a.f()}return r.a.createElement("div",{className:"options-form"},r.a.createElement("div",{className:"options-header",style:{cursor:"default"}},r.a.createElement("b",null,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")),n,r.a.createElement("div",{className:"button-row"},r.a.createElement(Qe.a,{id:"applyOptions",size:"sm",variant:"light",style:{margin:"5px"},onClick:this.applyOptions},"OK"),r.a.createElement(Qe.a,{id:"cancelOptions",size:"sm",variant:"light",style:{margin:"5px",float:"left"},onClick:this.closeForm},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(Qe.a,{id:"defaultOptions",size:"sm",variant:"light",style:{margin:"5px",float:"right"},onClick:this.resetOptions},"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")))}}]),n}(a.Component)),On=Object(u.b)((function(e){return{options:e.options}}))(Object(_e.f)(En)),yn=function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(e){var a;return Object(xe.a)(this,n),(a=t.call(this,e)).onClick=a.onClick.bind(Object(Pe.a)(a)),a}return Object(je.a)(n,[{key:"onClick",value:function(){(0,this.props.dispatch)((function(e,t){t().tooltips.items.length>0&&e({type:"CLEAR_TOOLTIPS"})}))}},{key:"render",value:function(){var e=r.a.createElement(_e.c,null,r.a.createElement(_e.a,{exact:!0,path:"/",component:Jt}),r.a.createElement(_e.a,{path:"/index.php",component:Jt}),r.a.createElement(_e.a,{path:"/topic.php",component:vn}),r.a.createElement(_e.a,{path:"/options.php",component:On}));return window.hash?r.a.createElement("div",{onClick:this.onClick,style:{flex:"auto"}},r.a.createElement("div",{className:"container"},r.a.createElement(l.b,null,e))):r.a.createElement("div",{onClick:this.onClick,style:{flex:"auto"}},r.a.createElement("div",{className:"container"},e))}}]),n}(a.Component),xn=Object(u.b)()(yn),jn=function(e){return r.a.createElement("footer",{className:"flex-row navbar-footer"},r.a.createElement("a",{href:"".concat(j,"/rules.php")},"\u041f\u0440\u0430\u0432\u0438\u043b\u0430"),r.a.createElement("span",{className:"separator"},"|"),r.a.createElement("a",{href:"".concat(j,"/about.php")},"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),r.a.createElement("span",{className:"separator"},"|"),r.a.createElement("b",null,r.a.createElement("a",{href:"".concat(j,"/ad.php")},"\u0420\u0435\u043a\u043b\u0430\u043c\u0430 \u043d\u0430 \u0441\u0430\u0439\u0442\u0435"),"  "),r.a.createElement("span",{className:"separator"},"|"),r.a.createElement("a",{href:"".concat(j,"/find.php")},"\u041f\u043e\u0438\u0441\u043a"),r.a.createElement("span",{className:"separator"},"|"),r.a.createElement("a",{rel:"nofollow",href:"".concat(j,"/sections_list.php")},"\u0421\u0435\u043a\u0446\u0438\u0438"),r.a.createElement("span",{className:"separator"},"|"),r.a.createElement("a",{rel:"nofollow",href:"".concat(j,"/rating.php")},"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"),r.a.createElement("span",{className:"separator"},"|"),r.a.createElement("a",{href:"http://kb.mista.ru"},"\u041a\u043d\u0438\u0433\u0430 \u0437\u043d\u0430\u043d\u0438\u0439"),r.a.createElement("span",{className:"separator"},"|"),r.a.createElement("a",{href:"http://wiki.mista.ru"},"\u0412\u0438\u043a\u0438-\u043c\u0438\u0441\u0442\u0430 (\u041a\u04172)"),r.a.createElement("span",{className:"separator"},"|"),r.a.createElement("a",{rel:"nofollow",href:"http://m.mista.ru/"},"\u041c\u043e\u0431\u0438\u043b\u044c\u043d\u0430\u044f"),r.a.createElement("span",{className:"separator"},"|"),r.a.createElement("a",{href:"".concat(j,"/archive.php")},"\u0410\u0440\u0445\u0438\u0432"),r.a.createElement("span",{className:"separator"},"|"),r.a.createElement("a",{href:"".concat(j,"/moders.php")},"\u041c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440\u044b"),r.a.createElement("span",{className:"separator"},"|"),r.a.createElement("a",{href:"".concat(j,"/users_gallery.php")},"\u0413\u0430\u043b\u0435\u0440\u0435\u044f"),r.a.createElement("span",{className:"separator"},"|"),r.a.createElement("span",null,"18+"))},wn=n(92),kn=n(90),Cn=n.n(kn),Tn=function(e){var t=e.children,n=e.onClose;return r.a.createElement("div",{className:"tooltip-header"},t,r.a.createElement("div",{className:"tooltip-close",onClick:n},r.a.createElement("span",{className:"tooltip-close-x"},"x")))},Sn=function(e){var t=e.children;return r.a.createElement("div",{className:"tooltip-text"},t)},Nn=(n(75),function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(){var e;Object(xe.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onCloseClick=function(){var t=e.props,n=t.dispatch,a=t.tooltip;n(ft(a.keys))},e}return Object(je.a)(n,[{key:"render",value:function(){var e,t,n=this.props.tooltip,a=n.coords,o=n.i;window.innerWidth<=768?(e="y",t={top:a.y,left:5}):(e="both",t={top:a.y,left:Math.min(a.x,window.innerWidth-670)});var c=r.a.Children.toArray(this.props.children),i=Object(wn.a)(c,2),s=i[0],l=i[1];return r.a.createElement(Cn.a,{axis:e,handle:".tooltip-header",defaultClassNameDragging:"dragging",key:o},r.a.createElement("div",{className:"tooltip-window",style:Object(h.a)({},t),onWheel:this.props.onWheel},r.a.createElement(Tn,{onClose:this.onCloseClick},s.props.children),r.a.createElement(Sn,null,l.props.children)))}}]),n}(a.Component)),In=Object(u.b)()(Nn),_n=function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(e){var a;Object(xe.a)(this,n),(a=t.call(this)).fetchData=function(){var e=Object(v.a)(d.a.mark((function e(t){var n,r,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t<0)){e.next=2;break}return e.abrupt("return");case 2:return r="",o=a.props.keys.topicId,e.prev=4,e.next=7,D(o,t);case 7:n=e.sent,r=n?n.text:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e ".concat(t),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),r=e.t0.message;case 14:a.setState({data:n,text:r,number:t});case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),a.onWheel=function(e){"TOPIC_PREVIEW"===a.props.tooltip.keys.type&&(e.preventDefault(),e.nativeEvent.deltaY>0?a.fetchData(a.state.number+1):a.fetchData(a.state.number-1))};var r,o=e.keys,c=e.info,i=e.items,s=e.item0,l="";return o.topicId===c.id&&(r=0===o.number?s:i.find((function(e){return e.n===String(o.number)})))&&(l=r.text),a.state={data:r,text:l,number:o.number},a}return Object(je.a)(n,[{key:"componentDidMount",value:function(){this.state.data||this.fetchData(this.state.number)}},{key:"render",value:function(){var e,t=this.props.tooltip.keys;return this.state.text?(e=this.state.data?r.a.createElement(cn,{data:this.state.data,isAuthor:!1}):r.a.createElement("b",null,"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"),"TOPIC"===t.type||"TOPIC_PREVIEW"===t.type?r.a.createElement(In,{tooltip:this.props.tooltip,onWheel:this.onWheel},r.a.createElement(Tn,null,e),r.a.createElement(Sn,null,r.a.createElement(Kt,{data:this.state.data,html:this.state.text,topicId:t.topicId,style:{maxHeight:"min(550px, 80vh)",overflowY:"auto"}}))):void 0):null}}]),n}(a.Component),Pn=Object(u.b)((function(e){var t=e.topic;return{info:t.info,items:t.items,item0:t.item0}}))(_n),Ln=function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(){return Object(xe.a)(this,n),t.apply(this,arguments)}return Object(je.a)(n,[{key:"render",value:function(){var e=this.props.items;return r.a.createElement("div",null,e.map((function(e,t){return r.a.createElement(Pn,{key:e.hash,tooltip:e,keys:e.keys})})))}}]),n}(a.Component),Rn=Object(u.b)((function(e){return{items:e.tooltips.items}}))(Ln),An=function(e){Object(we.a)(n,e);var t=Object(ke.a)(n);function n(e){var a;return Object(xe.a)(this,n),a=t.call(this,e),window.hash="#",e.dispatch((function(e){e({type:"READ_OPTIONS"})})),a}return Object(je.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props.theme;document.body&&(document.body.className=e)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.theme;document.body&&(document.body.className=t)}},{key:"render",value:function(){return r.a.createElement(a.Fragment,null,r.a.createElement(We,null),r.a.createElement(xn,null),r.a.createElement(jn,null),r.a.createElement(Rn,null))}}]),n}(a.Component),Fn=Object(u.b)((function(e){return{theme:e.options.items.theme}}))(An),Mn=[m.a];var Dn=Object(p.d)(ye,p.a.apply(void 0,Mn)),Wn=function(e){var t=e.store;return r.a.createElement(u.a,{store:t},r.a.createElement(l.a,null,r.a.createElement(Fn,null)))};c.a.render(r.a.createElement(Wn,{store:Dn}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/react.mista",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/react.mista","/service-worker.js");i?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):s(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):s(e)}))}}()},72:function(e,t,n){},75:function(e,t,n){},95:function(e,t,n){e.exports=n(148)}},[[95,1,2]]]);
//# sourceMappingURL=main.a2f11983.chunk.js.map