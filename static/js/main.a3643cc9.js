!function(){"use strict";var e={4737:function(e,t,n){var r=n(1250),a=n(6030),s=n(2791),i=n(1087),o=n(84),c=n(6955),l=n(2940),u=n(7689),d=n(9439),p=n(9410),f=n(4292),h=n(731),m=n(9546),x=n(4792),v=n(184),g=function(){var e=(0,s.useState)("\u042f\u043d\u0434\u0435\u043a\u0441"),t=(0,d.Z)(e,2),n=t[0],r=t[1],a=(0,s.useState)(""),i=(0,d.Z)(a,2),o=i[0],c=i[1],l=(0,s.useCallback)((function(e){c(e.target.value)}),[]),u=(0,x.$0)((function(e){"Enter"===e.key&&g()})),g=(0,x.$0)((function(){var e;switch(n){case"\u042f\u043d\u0434\u0435\u043a\u0441":e="https://www.yandex.ru/search/?text=".concat(o,"&site=forum.mista.ru");break;case"Google":e="https://www.google.ru/search?q=".concat(o,"+site:forum.mista.ru")}window.open(e),c("")}));return(0,v.jsxs)(p.Z,{size:"sm",children:[(0,v.jsxs)(m.Z,{id:"search-engine",title:"",size:"sm",variant:"light",onSelect:r,children:[(0,v.jsx)(h.Z.Item,{eventKey:"\u042f\u043d\u0434\u0435\u043a\u0441",children:"\u042f\u043d\u0434\u0435\u043a\u0441"}),(0,v.jsx)(h.Z.Item,{eventKey:"Google",children:"Google"})]}),(0,v.jsx)(f.Z,{type:"text",placeholder:"".concat(n,": \u043f\u043e\u0438\u0441\u043a"),className:"search-input input",onKeyDown:u,onChange:l,value:o}),(0,v.jsx)(p.Z.Text,{className:"search-button",onClick:g,children:(0,v.jsx)("i",{className:"fa fa-search input",style:{zIndex:1e3}})})]})},j=n(7781),b=n(6382),y=n(2540),w=n(5752),N=n(4165),k=n(5861),Z=n(6490),I=n.n(Z),C=n(7892),S=n.n(C),T=function(e){try{return JSON.parse(e)}catch(t){}try{return e=e.replace(/\\</g,"<").replace(/\\>/g,">").replace(/\\&/g,"&").replace(/\\'/g,"'").replace(/\\"/g,"").replace(/ "/g,' \\"').replace(/""/g,'\\""').replace(/\t/g,"\\t").replace(/"(\.| |\?)/g,'\\"$1'),JSON.parse(e)}catch(t){return console.error(t.message),console.log(e),{}}},_=function(e){return-1===e?-1:Math.min(Math.ceil(e/100),10)||1},L=function(e){return e?e.map((function(e){return"string"===typeof e?e:"br"===e.type?"<br>":"Connect(LinkToPost)"===e.type.displayName||"Connect(t)"===e.type.displayName?e.props.number:(console.log(e),e)})):[""]};var M=function(e){return 2147483648e3===e?"":(t=e,S()(t).isSame(new Date,"day")?S()(e).format("HH:mm"):S()(e).format("DD.MM.YY"));var t},P=function(e,t){if(!t)return"";var n=new URLSearchParams;for(var r in t){var a=t[r];void 0!==a&&n.append(r,a)}var s=n.toString();return s.length>0?e+s:""},O=function(){var e=(0,k.Z)((0,N.Z)().mark((function e(t,n,r){var a,s,i,o;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(re,"/").concat(t).concat(P("?",n)),e.next=3,I()(a);case 3:return s=e.sent,e.next=6,s.json();case 6:if("string"===typeof(i=e.sent))try{o=JSON.parse(i)}catch(r){o=T(i)}else o=i;return e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),R=function(){var e=(0,k.Z)((0,N.Z)().mark((function e(t,n,r){var a,s;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(re,"/").concat(t).concat(P("?",n)),r||(r={mode:"cors",credentials:"same-origin"}),e.next=4,fetch(a,r);case 4:return s=e.sent,e.next=7,s.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function E(e){var t=e.session;return{userId:Number(null===t||void 0===t?void 0:t.user_id),userName:null===t||void 0===t?void 0:t.user_name,userHash:null===t||void 0===t?void 0:t.user_hash,lastError:null===t||void 0===t?void 0:t.last_error}}function D(){return F.apply(this,arguments)}function F(){return(F=(0,k.Z)((0,N.Z)().mark((function e(){var t;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(le);case 2:return t=e.sent,e.abrupt("return",E(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z=function(){var e=(0,k.Z)((0,N.Z)().mark((function e(t){return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(re,"/").concat(oe),{method:"POST",body:P("",{user_name:t.username,user_password:t.password}),mode:"no-cors",credentials:"include",headers:{Accept:"text/html,application/xhtml+xml,application/xml","Content-Type":"application/x-www-form-urlencoded"},redirect:"follow"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=(0,k.Z)((0,N.Z)().mark((function e(){var t;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(re,"/").concat(ce),e.next=3,fetch(t,{mode:"no-cors",credentials:"include"});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,k.Z)((0,N.Z)().mark((function e(t){var n,r,a;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=de.replace(":id",t.topic_id),r={method:"POST",body:P("",t),mode:"no-cors",credentials:"include",headers:{Accept:"text/html,application/xhtml+xml,application/xml","Content-Type":"application/x-www-form-urlencoded"},redirect:"follow"},e.next=4,fetch("".concat(re,"/").concat(n),r);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=(0,k.Z)((0,N.Z)().mark((function e(t){return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(re,"/").concat(pe),{method:"POST",body:P("",t),mode:"no-cors",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function W(e){return{id:e.id,forum:e.forum,code:e.shortn,name:e.fulln}}var Y=function(){var e=(0,k.Z)((0,N.Z)().mark((function e(){var t;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(ue);case 2:return t=e.sent,e.abrupt("return",t.map(W));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function H(e){var t=[];return e.voting&&(t=e.voting.map((function(e){return{text:e.select,count:e.result}}))),{id:parseInt(e.id),title:e.text,forum:e.forum,sectionId:e.section,created:1e3*parseInt(e.created),authorId:e.user_id,author:e.user_name,updated:1e3*parseInt(e.updated),lastUser:e.updated_name,count:parseInt(e.answers_count),down:e.down,closed:e.closed,deleted:e.deleted,isVoting:e.is_voting,voting:t}}function B(e){return K.apply(this,arguments)}function K(){return(K=(0,k.Z)((0,N.Z)().mark((function e(t){var n;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(se,{id:t});case 2:return n=e.sent,e.abrupt("return",H(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return{id:parseInt(e.id),n:parseInt(e.n),user:e.user,userId:parseInt(e.userId),text:e.text,time:1e3*parseInt(e.utime),vote:e.vote}}function q(e){return X.apply(this,arguments)}function X(){return(X=(0,k.Z)((0,N.Z)().mark((function e(t){var n;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(ie,t);case 2:return n=e.sent,e.abrupt("return",n.map(J));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t){return G.apply(this,arguments)}function G(){return(G=(0,k.Z)((0,N.Z)().mark((function e(t,n){var r,a;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=0===n?n+1:n,e.next=3,R(ie,{id:t,from:n,to:r});case 3:return a=e.sent,e.abrupt("return",a.map(J).find((function(e){return e.n===n})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){var t=e.page||1,n=e.itemsPerPage*t;return{topics:String(n),section_short_name:e.section,forum:e.forum,user_id:e.userId,mytopics:e.myTopics}}function ee(e){return{id:e.id,forum:e.forum,section:e.sect1,sectionCode:e.sect2,author:e.user0,lastUser:e.user,created:1e3*e.created,updated:1e3*e.utime,count:e.answ,text:e.text,closed:1===e.closed,down:1===e.down,pinned:2147483648===e.utime,isVoting:1===e.is_voting,showPreview:!1}}function te(e){return ne.apply(this,arguments)}function ne(){return(ne=(0,k.Z)((0,N.Z)().mark((function e(t){var n,r;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Q(t),e.next=3,R(ae,n);case 3:return r=e.sent,e.abrupt("return",r.map(ee));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var re=localStorage.getItem("domain")||"https://dev.mista.ru",ae=localStorage.getItem("urlTopicsList")||"api/topic.php",se=localStorage.getItem("urlTopicInfo")||"ajax_gettopic.php",ie=localStorage.getItem("urlTopicMessages")||"api/message.php",oe=localStorage.getItem("urlLogin")||"users.php?action=do_enter",ce=localStorage.getItem("urlLogout")||"users.php?action=exit",le=localStorage.getItem("urlCookies")||"ajax_cookie.php",ue=localStorage.getItem("urlSections")||"ajax_getsectionslist.php",de=localStorage.getItem("urlNewMessage")||"topic.php?id=:id&page=1",pe=localStorage.getItem("urlNewTopic")||"index.php",fe=(localStorage.getItem("urlAddBookmark"),localStorage.getItem("urlSearch"),(0,b.hg)("login/check",(0,k.Z)((0,N.Z)().mark((function e(){return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))))),he=(0,b.hg)("login/login",function(){var e=(0,k.Z)((0,N.Z)().mark((function e(t,n){return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch,e.next=3,z(t);case 3:return e.abrupt("return",D());case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),me=(0,b.hg)("login/logout",(0,k.Z)((0,N.Z)().mark((function e(){return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),xe=function(e){var t=e.login;return!t||"loading"!==t.status},ve=(0,b.oM)({name:"login",initialState:{status:"init",logged:!1},reducers:{},extraReducers:function(e){e.addCase(he.pending,(function(e){e.status="loading",delete e.error})).addCase(he.fulfilled,(function(e,t){var n=t.payload;e.status="success",e.userId=n.userId,e.userName=n.userName,e.userHash=n.userHash,e.logged=!0,delete e.error})).addCase(he.rejected,(function(e,t){var n=t.error;e.status="error",e.error=null===n||void 0===n?void 0:n.message})).addCase(me.pending,(function(e){e.status="loading",delete e.error})).addCase(me.fulfilled,(function(e){e.status="success",e.logged=!1,delete e.userId,delete e.userName,delete e.userHash,delete e.error})).addCase(me.rejected,(function(e,t){var n=t.error;e.status="error",e.error=null===n||void 0===n?void 0:n.message}))}}),ge=ve.actions,je=ve.reducer,be=(0,b.hg)("newTopic/post",function(){var e=(0,k.Z)((0,N.Z)().mark((function e(t){var n,r;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={message_text:t.text,topic_text:t.subject,target_section:String(t.section),target_forum:t.forum.toLowerCase(),action:"new",rnd:Math.round(1e10*Math.random()),voting:t.isVoting?1:0},t.votingItems)for(r=0;r<t.votingItems.length;r++)n["section".concat(r+1)]=t.votingItems[r];return e.next=4,U(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ye=function(e){e.status="init",e.text="",e.subject="",e.forum="",e.isVoting=!1},we=(0,b.oM)({name:"newTopic",initialState:{status:"init",section:null,text:"",subject:"",forum:"1C",isVoting:!1},reducers:{clear:ye,changeSubject:function(e,t){var n=t.payload;e.subject=n},changeText:function(e,t){var n=t.payload;e.text=n},changeSection:function(e,t){var n=t.payload;e.section=n,e.forum=null===n||void 0===n?void 0:n.forum.toLowerCase()},showVoting:function(e,t){var n=t.payload;e.isVoting=n},setError:function(e,t){var n=t.payload;e.error=n}},extraReducers:function(e){e.addCase(be.pending,(function(e){e.status="loading",delete e.error})).addCase(be.fulfilled,(function(e){ye(e),delete e.error})).addCase(be.rejected,(function(e,t){var n=t.error;e.status="error",e.error=null===n||void 0===n?void 0:n.message}))}}),Ne=we.actions,ke=we.reducer,Ze={voteColors:["#FF1616","#1A861A","#0023FF","#FF6B18","#9B3A6E","#567655","#233345","#CC0000","#00CCCC","#0000CC"],items:{theme:"lightgray",topicsPerPage:"20",autoRefreshTopicsList:"false",autoRefreshTopicsListInterval:"60",autoRefreshTopic:"true",autoRefreshTopicInterval:"60",showTooltips:"true",tooltipDelay:"500",showTooltipOnPostLink:"true",showYoutubeVideoTitle:"true",replaceCatalogMista:"true",fixBrokenLinks:"true"}},Ie=(0,b.oM)({name:"options",initialState:Ze,reducers:{save:function(e,t){var n=t.payload;for(var r in n){var a=String(n[r]);e.items[r]=a}}}}),Ce=Ie.actions,Se=Ie.reducer,Te=(0,b.hg)("sections/fetch",(0,k.Z)((0,N.Z)().mark((function e(){return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),_e=function(){return function(e,t){if(function(e){var t=e.sections;return!t||"loading"!==t.status&&!(t.items.length>0)}(t()))return e(Te())}},Le=(0,b.oM)({name:"sections",initialState:{status:"init",items:[],tree:{}},reducers:{},extraReducers:function(e){e.addCase(Te.pending,(function(e){e.status="loading",delete e.error})).addCase(Te.fulfilled,(function(e,t){var n,r,a=t.payload;e.status="success",e.items=a,e.tree=(n=e.items,r=function(e){return e.forum},n.reduce((function(e,t){var n=r(t);return e[n]||(e[n]=[]),e[n].push(t),e}),{})),delete e.error})).addCase(Te.rejected,(function(e,t){var n=t.error;e.status="error",e.error=null===n||void 0===n?void 0:n.message}))}}),Me=(Le.actions,Le.reducer),Pe=(0,b.oM)({name:"tooltips",initialState:{items:[]},reducers:{show:function(e,t){var n=t.payload,r=JSON.stringify(n.keys),a=e.items.findIndex((function(e){return e.hash===r})),s=0;e.items.length&&(s=e.items[e.items.length-1].zIndex+1),-1===a?e.items.push({keys:n.keys,coords:n.coords,hash:r,zIndex:s}):e.items[e.items.length-1].zIndex=s},close:function(e,t){var n=t.payload,r=JSON.stringify(n);e.items=e.items.filter((function(e){return e.hash!==r}))},closeAll:function(e){e.items=[]}}}),Oe=Pe.actions,Re=Pe.reducer,Ee={id:0,title:"",count:-1},De={status:"init",items:[],info:Ee},Fe=(0,b.hg)("topics/fetch",function(){var e=(0,k.Z)((0,N.Z)().mark((function e(t,n){var r,a,s,i,o,c,l,u,d,p,f,h;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.topicId,a=t.page,s=t.item0,i=n.rejectWithValue,e.prev=2,e.next=5,B(r);case 5:o=e.sent,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0),o={id:r,title:"",count:-1};case 12:if(e.prev=12,c=s,"last20"!==a){e.next=33;break}if(!(o.count>21)){e.next=26;break}if(c){e.next=20;break}return e.next=19,$(r,0);case 19:c=e.sent;case 20:return u=o.count-20,e.next=23,q({id:r,from:u,to:1010});case 23:l=e.sent,e.next=31;break;case 26:return e.next=28,q({id:r,from:0,to:1010});case 28:d=e.sent,c=d[0],l=d.slice(1);case 31:e.next=52;break;case 33:if(p=0,f=100*(a=+a)-1,!(a>1)){e.next=47;break}if(p=100*(a-1),c){e.next=42;break}return e.next=41,$(r,0);case 41:c=e.sent;case 42:return e.next=44,q({id:r,from:p,to:f});case 44:l=e.sent,e.next=52;break;case 47:return p=c?1:0,e.next=50,q({id:r,from:p,to:f});case 50:h=e.sent,c?l=h:(c=h[0],l=h.slice(1));case 52:return 0===o.count&&l.length>0&&(o.count=l[l.length-1].n),"last20"===a&&l.length>20&&(l=l.slice(-20)),e.abrupt("return",{info:o,item0:c,list:l});case 57:e.prev=57,e.t1=e.catch(12),console.error("Failed to fetch topic:",e.t1),i(e.t1);case 61:case"end":return e.stop()}}),e,null,[[2,8],[12,57]])})));return function(t,n){return e.apply(this,arguments)}}()),ze=(0,b.hg)("topic/getNewMessages",function(){var e=(0,k.Z)((0,N.Z)().mark((function e(t){var n,r;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.count,e.next=3,q({id:n,from:r+1,to:1050});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ve=function(e){var t=e.topic;return!t||"loading"!==t.status},Ae=function(){return function(e,t){var n=t(),r=n.topic.info,a=r.id,s=r.count;if(Ve(n))return e(ze({id:a,count:s}))}},Ue=(0,b.oM)({name:"topic",initialState:De,reducers:{clear:function(e){e.info=De.info,e.item0=De.item0,e.items=De.items,e.status=De.status,delete e.error}},extraReducers:function(e){e.addCase(Fe.pending,(function(e){e.status="loading",delete e.error})).addCase(Fe.fulfilled,(function(e,t){var n=t.payload;e.status="success",e.items=n.list,e.item0=n.item0,e.info=n.info,delete e.error})).addCase(Fe.rejected,(function(e,t){var n=t.error;e.status="error",e.error=null===n||void 0===n?void 0:n.message})).addCase(ze.pending,(function(e){e.status="loading",delete e.error})).addCase(ze.fulfilled,(function(e,t){var n=t.payload;e.status="success",n.length>0&&(e.items=e.items.concat(n),e.info.count=e.items[e.items.length-1].n),delete e.error})).addCase(ze.rejected,(function(e,t){var n=t.error;e.status="error",e.error=null===n||void 0===n?void 0:n.message}))}}),We=Ue.actions,Ye=Ue.reducer,He=(0,b.hg)("topicsList/fetch",function(){var e=(0,k.Z)((0,N.Z)().mark((function e(t,n){var r,a,s,i;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getState,a=r(),(s=+a.options.items.topicsPerPage)>99&&(s=99),t.itemsPerPage=s,e.next=7,te(t);case 7:return i=e.sent,e.abrupt("return",i.slice(-s));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Be=function(e){return function(t,n){if(function(e){var t=e.topicsList;return!t||"loading"!==t.status}(n()))return t(He(e))}},Ke=(0,b.oM)({name:"topicsList",initialState:{status:"init",items:[]},reducers:{clear:function(e){e.items=[],e.status="init"},togglePreview:function(e,t){var n=t.payload,r=e.items.find((function(e){return e.id===n.topicId}));r.showPreview=!r.showPreview,r.previewMsgNumber=n.msgNumber}},extraReducers:function(e){e.addCase(He.pending,(function(e){e.status="loading",delete e.error})).addCase(He.fulfilled,(function(e,t){var n=t.payload;e.status="success",e.items=n,delete e.error})).addCase(He.rejected,(function(e,t){var n=t.error;e.status="error",e.error="".concat(null===n||void 0===n?void 0:n.message," ").concat(re,"/").concat(ae)}))}}),Je=Ke.actions,qe=Ke.reducer,Xe=(0,b.hg)("newMessage/post",function(){var e=(0,k.Z)((0,N.Z)().mark((function e(t){var n;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={message_text:t.text,action:"new",topic_id:t.topicId,rnd:Math.round(1e10*Math.random())},t.voting_select&&(n.voting_select=t.voting_select),e.next=4,A(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),$e=(0,b.oM)({name:"newMessage",initialState:{status:"init",text:""},reducers:{changeText:function(e,t){var n=t.payload;e.text=n}},extraReducers:function(e){e.addCase(Xe.pending,(function(e){e.status="loading",delete e.error})).addCase(Xe.fulfilled,(function(e){e.text="",delete e.error})).addCase(Xe.rejected,(function(e,t){var n=t.error;e.status="error",e.error=null===n||void 0===n?void 0:n.message}))}}),Ge=$e.actions,Qe=$e.reducer,et={key:"options",storage:w.Z},tt=(0,j.UY)({topicsList:qe,topic:Ye,sections:Me,options:(0,y.OJ)(et,Se),login:je,tooltips:Re,newTopic:ke,newMessage:Qe}),nt=(0,b.xC)({reducer:tt,middleware:function(e){return e({serializableCheck:{ignoredActions:[y._P,y.I2,y.E7,y.ex,y.e,y.Nz]}})},devTools:!1}),rt=(0,y.p5)(nt),at=function(){return(0,a.I0)()},st=a.v9,it=function(e){var t=at();return(0,s.useMemo)((function(){return(0,j.DE)(e,t)}),[e,t])},ot=function(){var e=(0,u.TH)(),t=(0,a.I0)(),n=new URLSearchParams(e.search).get("forum");return(0,v.jsxs)(o.Z,{bg:"dark",variant:"dark",expand:"md",fixed:"top",children:[(0,v.jsx)(o.Z.Brand,{as:i.rU,to:"/",onClick:function(){t(Be({}))},children:"React.Mista"}),(0,v.jsx)(o.Z.Toggle,{"aria-controls":"basic-navbar-nav"}),(0,v.jsxs)(o.Z.Collapse,{children:[(0,v.jsxs)(c.Z,{className:"me-auto",children:[[{name:"1C",link:"/index.php?forum=1C"},{name:"IT",link:"/index.php?forum=IT"},{name:"JOB",link:"/index.php?forum=JOB"},{name:"LIFE",link:"/index.php?forum=LIFE"},{name:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",link:"/options.php"}].map((function(e,t){return(0,v.jsx)(c.Z.Item,{children:(0,v.jsx)(c.Z.Link,{to:e.link,active:e.name===n,as:i.rU,children:e.name})},"i"+t)})),[{name:"Wiki",link:"https://wiki.mista.ru"},{name:"\u041a\u043d\u0438\u0433\u0430 \u0437\u043d\u0430\u043d\u0438\u0439",link:"https://kb.mista.ru"}].map((function(e,t){return(0,v.jsx)(c.Z.Item,{children:(0,v.jsx)(c.Z.Link,{href:e.link,children:e.name})},"e"+t)}))]}),(0,v.jsx)(l.Z,{className:"d-flex",children:(0,v.jsx)(g,{})})]})]})},ct=n(7022),lt=n(1413),ut=n(7762),dt=n(4245),pt=s.forwardRef((function(e,t){var n=e.children,r=e.onClick;return(0,v.jsx)("span",{ref:t,style:{cursor:"pointer"},className:"link",onClick:function(e){e.preventDefault(),r(e)},children:n})})),ft=function(e){var t=e.userId,n=e.userName,r=it(ge);return(0,v.jsx)("div",{style:{float:"left"},children:(0,v.jsxs)(h.Z,{id:"dropdown-custom-menu",onSelect:function(e,t){"exit"===e&&function(e){e.preventDefault(),r.doLogout()}(t)},children:[(0,v.jsx)("span",{children:"\u041f\u0440\u0438\u0432\u0435\u0442, "}),(0,v.jsxs)(h.Z.Toggle,{as:pt,children:[n," \u25bc"]}),(0,v.jsxs)(h.Z.Menu,{children:[(0,v.jsx)(h.Z.Item,{eventKey:"profile",href:"".concat(re,"/users.php?id=").concat(t),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),(0,v.jsx)(h.Z.Item,{eventKey:"myTopics",href:"#/index.php?user_id=".concat(t),children:"\u041c\u043e\u0438 \u0442\u0435\u043c\u044b"}),(0,v.jsx)(h.Z.Divider,{}),(0,v.jsx)(h.Z.Item,{eventKey:"options",href:"#/options.php",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),(0,v.jsx)(h.Z.Divider,{}),(0,v.jsx)(h.Z.Item,{eventKey:"exit",children:"\u0412\u044b\u0445\u043e\u0434"})]})]})})},ht=n(3360),mt=function(){var e=at(),t=(0,s.useState)(""),n=(0,d.Z)(t,2),r=n[0],a=n[1],i=(0,s.useState)(""),o=(0,d.Z)(i,2),c=o[0],l=o[1];return(0,v.jsxs)("div",{children:[(0,v.jsxs)("form",{name:"enterform",className:"flex-row",style:{flexWrap:"wrap"},children:[(0,v.jsx)(f.Z,{id:"username",type:"text",placeholder:"\u0418\u043c\u044f",value:r,onChange:function(e){return a(e.target.value)},size:"sm",className:"input",style:{marginRight:"5px",flex:"0 1 300px"}}),(0,v.jsx)(f.Z,{id:"password",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",maxLength:20,autoComplete:"off",value:c,onChange:function(e){return l(e.target.value)},size:"sm",className:"input",style:{marginRight:"5px",flex:"0 1 300px"}}),(0,v.jsx)(ht.Z,{size:"sm",variant:"light",className:"button",onClick:function(t){t.preventDefault(),e(function(e,t){return function(n,r){if(xe(r()))return n(he({username:e,password:t}))}}(r,c))},children:"\u0412\u043e\u0439\u0442\u0438"})]}),(0,v.jsxs)("p",{style:{margin:"0px"},children:["\u0412\u043e\u0439\u0442\u0438 \u043c\u043e\u0436\u043d\u043e \u043d\u0430 \u0441\u0430\u0439\u0442\u0435"," ",(0,v.jsx)("a",{href:"https://forum.mista.ru/",children:"forum.mista.ru"})]}),(0,v.jsx)("a",{rel:"nofollow",href:"https://forum.mista.ru/user_registration.php",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),(0,v.jsx)("span",{style:{margin:"5px"},children:"|"}),(0,v.jsx)("a",{rel:"nofollow",href:"https://forum.mista.ru/remember_password.php",children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"})]})},xt=function(e){var t=e.text;return t?(0,v.jsx)("div",{className:"error",dangerouslySetInnerHTML:{__html:t}}):null},vt=function(){var e,t=at(),n=st((function(e){return e.login.logged})),r=st((function(e){return e.login.userId})),a=st((function(e){return e.login.userName})),i=st((function(e){return e.login.error}));return(0,s.useEffect)((function(){t((function(e,t){if(xe(t()))return e(fe())}))}),[t]),e=!0===n?(0,v.jsx)(ft,{userId:r,userName:a}):!1===n?(0,v.jsx)(mt,{}):null,(0,v.jsxs)(v.Fragment,{children:[e,i&&(0,v.jsx)(xt,{text:i})]})},gt=function(e){var t=at(),n=st((function(e){return e.sections.items})),r=st((function(e){return e.sections.tree}));(0,s.useEffect)((function(){t(_e())}),[t]);var a=[];for(var i in r){var o=(0,v.jsx)("optgroup",{label:i,children:r[i].map((function(e){return(0,v.jsx)("option",{value:e.code,children:e.name},e.id)}))},i);a.push(o)}var c=e.id,u=e.defaultValue,d=e.selected,p=e.style,f=e.size;return(0,v.jsxs)(l.Z.Select,{"aria-label":"\u0421\u0435\u043a\u0446\u0438\u044f",onChange:function(t){var r=e.onChange;if(r){var a=t.currentTarget.value,s=n.filter((function(e){return e.code===a}));s.length>0?r(t,s[0]):r(t,null)}},value:d,style:p,className:"input",size:f,id:c,children:[(0,v.jsx)("option",{value:"",children:u}),a]})},jt=function(){var e=(0,a.I0)(),t=(0,u.s0)(),n=(0,u.TH)(),r=dt.parse(n.search);(0,s.useEffect)((function(){e(_e())}),[e]);return(0,v.jsxs)("div",{className:"flex-row",children:[(0,v.jsx)("div",{className:"header-left",children:(0,v.jsx)(vt,{})}),(0,v.jsx)("div",{className:"header-right",children:(0,v.jsx)(gt,{id:"sect",defaultValue:"--\u0412\u0441\u0435 \u0441\u0435\u043a\u0446\u0438\u0438--",selected:String(r.section)||"",onChange:function(e,n){t(n?"/index.php?section=".concat(n.code):"/")},size:"sm"})})]})},bt=function(e){var t=e.isLoading,n=e.onUpdateClick;return(0,v.jsxs)("div",{className:"table-header",children:[(0,v.jsx)("div",{style:{letterSpacing:"-1px"},children:"\u0420\u0430\u0437\u0434\u0435\u043b"}),(0,v.jsx)("div",{}),(0,v.jsx)("div",{children:"\u0422\u0435\u043c\u0430"}),(0,v.jsx)("div",{children:"Re"}),(0,v.jsx)("div",{children:"\u0410\u0432\u0442\u043e\u0440"}),(0,v.jsx)("div",{children:(0,v.jsx)("span",{style:{cursor:"pointer"},title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a",onClick:n,children:t?"\u041e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u0442\u0441\u044f":"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043e"})})]})},yt=n(5987),wt=n(1694),Nt=n.n(wt),kt=function(e){var t=e.count,n=e.topicId,r=[];if(t>100)for(var a=_(t),s=1;s<=a;s++){var o="/topic.php?id=".concat(n,"&page=").concat(s),c=void 0;c=s>3&&s<a?"\u2022":String(s),r.push((0,v.jsx)(i.rU,{className:"agh",style:{margin:"3px"},to:o,children:c},s))}if(t>20){var l="/topic.php?id=".concat(n,"&page=last20#F");r.push((0,v.jsx)(i.rU,{className:"agh",style:{margin:"3px"},to:l,children:"\xbb"},"last20"))}return(0,v.jsx)("span",{className:"topic-pages",children:r})},Zt=function(e){var t,n=st((function(e){return e.login.userName})),r="/topic.php?id=".concat(e.id),a=Nt()("agb","mr5",{bold:e.count>=100,mytopics:e.author===n,pinned:e.pinned}),s="/index.php?section=".concat(e.sectionCode);e.section&&(t=(0,v.jsxs)("span",{className:"topic-section",children:[(0,v.jsx)("span",{className:"agh",style:{margin:"0px 5px"},children:"/"}),(0,v.jsx)(i.rU,{rel:"nofollow",className:"agh",to:s,children:e.section},"1")]}));var o=function(e,t,n){return"life"!==t||e.startsWith("OFF")?"job"!==n||e.startsWith("JOB")?"v7"!==n||e.startsWith("v7")?e:"v7: "+e:"JOB: "+e:"OFF: "+e}(e.text,e.forum,e.sectionCode);return(0,v.jsx)("div",{className:"cell-title",children:(0,v.jsxs)("div",{className:"cell-title--inner",children:[e.pinned&&(0,v.jsx)("i",{className:"fa fa-thumb-tack agh","aria-hidden":"true",style:{marginRight:"5px"}}),(0,v.jsx)(i.rU,{to:r,className:a,dangerouslySetInnerHTML:{__html:o},style:{overflowWrap:"anywhere"}}),e.isVoting&&(0,v.jsx)("span",{className:"agh separator",children:"[\xb1]"}),(0,v.jsx)(kt,{count:e.count,topicId:e.id}),e.closed&&(0,v.jsx)("span",{className:"agh",children:"\xd8"}),e.down&&(0,v.jsx)("span",{className:"agh",children:"\u2193"}),t]})})},It=function(e){var t=e.topicId,n=e.expanded,r=it(Je),a=n?(0,v.jsx)("i",{className:"fa fa-minus-square-o agh","aria-hidden":"true"}):(0,v.jsx)("i",{className:"fa fa-plus-square-o agh","aria-hidden":"true"});return(0,v.jsx)("div",{className:"cell-preview-link",onClick:function(){r.togglePreview({topicId:t,msgNumber:0})},children:(0,v.jsx)("span",{children:a})})},Ct=["topicId","updated"],St=function(e){var t=e.topicId,n=e.updated,r=(0,yt.Z)(e,Ct),a=it(Je),o=(0,s.useState)(n),c=(0,d.Z)(o,2),l=c[0],u=c[1];(0,s.useEffect)((function(){if(r.pinned){var e=function(){var e=(0,k.Z)((0,N.Z)().mark((function e(){var n;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(t,r.count);case 2:n=e.sent,u(n.time);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[r.pinned,t,r.count]),(0,s.useEffect)((function(){u(n)}),[n]);return(0,v.jsxs)("div",{className:"topics-list-row",children:[(0,v.jsx)("div",{className:"cell-forum",children:(0,v.jsx)("div",{className:"cell-forum--inner",children:r.forum})}),(0,v.jsx)("div",{className:"cell-section",children:r.section}),(0,v.jsx)("div",{className:"cell-answ",onClick:function(){a.togglePreview({topicId:t,msgNumber:r.count})},children:(0,v.jsxs)("div",{className:"cell-answ--inner",children:[(0,v.jsx)("i",{className:"fa fa-comments-o","aria-hidden":"true",style:{marginRight:"3px"}}),(0,v.jsx)("span",{children:r.count})]})}),(0,v.jsx)(It,{topicId:r.id,expanded:r.showPreview}),(0,v.jsx)(Zt,(0,lt.Z)({},r)),(0,v.jsx)("div",{className:"cell-author",children:(0,v.jsxs)("div",{className:"cell-author--inner",children:[(0,v.jsx)("i",{"aria-hidden":"true",className:"fa fa-user-circle",style:{marginRight:"3px"}}),r.author]})}),(0,v.jsx)("div",{className:"cell-lastuser",children:(0,v.jsxs)("div",{className:"cell-author--inner",children:[(0,v.jsx)("span",{className:"cell-lastuser-time",children:M(l)}),(0,v.jsx)("span",{className:"cell-lastuser-user",children:r.lastUser})]})}),(0,v.jsx)("div",{className:"cell-last20",children:(0,v.jsx)(i.rU,{to:"/topic.php?id=".concat(r.id,"&page=last20#F"),style:{color:"inherit",display:"block",width:"100%",textAlign:"center"},children:(0,v.jsx)("i",{className:"fa fa-angle-right","aria-hidden":"true"})})})]})},Tt=n(8116),_t=function(e){var t=e.maxPage,n=e.last20,r=(0,u.TH)(),a=r.pathname;"/"===a&&(a="/index.php");var s,i=new URLSearchParams(r.search),o=i.get("page");s=o?"last20"===o?"last20":parseInt(o,10)||1:1;for(var c=[],l=1;l<=t;l++){i.set("page",String(l));var d="#"+a+"?"+i.toString();c.push((0,v.jsx)(Tt.Z.Item,{active:s===l,href:d,children:l},l))}if(!0===n){i.set("page","last20");var p="#"+a+"?"+i.toString();c.push((0,v.jsx)(Tt.Z.Item,{active:"last20"===s,href:p,children:"\xbb"},"last20"))}return(0,v.jsx)(Tt.Z,{style:{margin:"0px"},children:c})},Lt=n(323),Mt=n(6144),Pt=function(e){var t=e.placeholder,n=e.showVoting,r=e.isVoting,a=e.isFetching,i=e.text,o=e.formRef,c=e.onChange,u=e.onShowVotingChange,d=(0,s.useRef)(),p=(0,s.useCallback)((function(e){u&&u(e.currentTarget.checked)}),[u]),h=(0,s.useCallback)((function(e){c&&c(e.currentTarget.value)}),[c]);return(0,v.jsxs)("div",{children:[(0,v.jsx)(f.Z,{as:"textarea","aria-label":"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",placeholder:t,cols:70,rows:3,value:i,onChange:h,onKeyUp:function(e){o&&o.current&&"Enter"===e.key&&e.ctrlKey&&o.current.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},ref:d,className:"text-editor input","data-lpignore":!0}),(0,v.jsxs)("div",{className:"flex-row",children:[(0,v.jsxs)(Mt.Z,{children:[(0,v.jsx)(ht.Z,{size:"sm",variant:"light",onClick:function(e){e.preventDefault();var t=d.current,n=t.selectionStart,r=t.selectionEnd,a=t.value,s=a.length,i="[1C]\n"+a.substring(n,r)+"\n[/1C]",o=a.substring(0,n)+i+a.substring(r,s);c&&c(o)},style:{marginRight:"5px"},className:"button",children:"\u041a\u043e\u0434 1\u0421"}),(0,v.jsx)(ht.Z,{size:"sm",variant:"light",disabled:a,type:"submit",className:"button",children:a?"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]}),n&&(0,v.jsx)(l.Z.Check,{id:"show_voting",type:"checkbox",checked:r,onChange:p,label:"\u0413\u043e\u043b\u043e\u0441\u043e\u0432\u0430\u043d\u0438\u0435",style:{margin:"auto 0px auto auto"}})]})]})},Ot=function(e){var t,n=e.onSubmitSuccess,r=st((function(e){return e.sections})),a=st((function(e){return e.newTopic})),i=(0,s.useState)(null),o=(0,d.Z)(i,2),c=o[0],u=o[1],f=(0,s.useState)(Array(10).fill("")),h=(0,d.Z)(f,2),m=h[0],g=h[1],j=(0,s.useRef)(null),b=at(),y=it(Ne),w=(0,x.$0)((function(e,t){u(t),y.changeSection(t)})),N=function(e){return function(t){var n=m.slice();n[e]=t.target.value,g(n)}},k=(0,x.$0)((function(e){if(e.preventDefault(),c){var t=a.subject;if(t)if(a.text){var n={subject:t,text:a.text,section:c.id,forum:c.forum,isVoting:a.isVoting,votingItems:[],onSuccess:S};if(a.isVoting){n.votingItems=[];for(var r=1;r<=10;r++){var s=m[r-1];s&&n.votingItems.push(s)}}b(function(e){return function(t,n){if(function(e){var t=e.newTopic;return!!t&&"loading"!==t.status}(n()))return t(be(e))}}(n))}else y.setError("\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435");else y.setError("\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430 \u0442\u0435\u043c\u0430")}else y.setError("\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u0430 \u0441\u0435\u043a\u0446\u0438\u044f")})),Z=(0,s.useCallback)((function(e){y.changeSubject(e.target.value)}),[y]),I=(0,s.useCallback)((function(e){y.changeText(e)}),[y]),C=(0,s.useCallback)((function(e){y.showVoting(e)}),[y]),S=function(){y.clear(),n&&n()},T=[];for(var _ in r.tree)T.push((0,v.jsx)("option",{value:_.toLowerCase(),children:_},_));var L=[];if(a.isVoting){L.push((0,v.jsx)("div",{children:"\u0412\u0430\u0440\u0438\u0430\u043d\u0442\u044b:"},"p"));for(var M=1;M<=10;M++)L.push((0,v.jsxs)(p.Z,{size:"sm",style:{marginBottom:"3px",width:"100%"},children:[(0,v.jsx)(p.Z.Text,{style:{width:"40px"},className:"input",children:"".concat(M,".")}),(0,v.jsx)(l.Z.Control,{type:"text","aria-label":"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 ".concat(M),maxLength:50,className:"input",value:m[M-1],onChange:N(M-1)})]},M))}return(0,v.jsxs)("form",{className:"new-topic-container",onSubmit:k,ref:j,children:[(0,v.jsxs)("div",{id:"newtopic_form",className:"new-topic-text",children:[(0,v.jsx)("div",{children:(0,v.jsx)("b",{children:"\u041d\u043e\u0432\u0430\u044f \u0442\u0435\u043c\u0430:"})}),a.error&&(0,v.jsx)(xt,{text:a.error}),(0,v.jsxs)("div",{className:"flex-row",style:{marginBottom:"3px"},children:[(0,v.jsx)(l.Z.Select,{disabled:!0,size:"sm",value:a.forum,style:{flex:"0 1 90px"},className:"input",children:T}),(0,v.jsx)(gt,{id:"target_section",defaultValue:"\u0421\u0435\u043a\u0446\u0438\u044f",selected:null===(t=a.section)||void 0===t?void 0:t.code,size:"sm",style:{flex:"1 1 auto"},onChange:w})]}),(0,v.jsx)(l.Z.Control,{type:"text","aria-label":"\u0422\u0435\u043c\u0430",placeholder:"\u0422\u0435\u043c\u0430",size:"sm",value:a.subject,onChange:Z,style:{marginBottom:"3px"},className:"input",maxLength:90}),(0,v.jsx)(Pt,{placeholder:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",showVoting:!0,isVoting:a.isVoting,text:a.text,isFetching:"loading"===a.status,onChange:I,onShowVotingChange:C,formRef:j})]}),(0,v.jsx)(Lt.Z,{className:"new-topic-voting",children:L})]})},Rt=n(1956),Et=function(e){var t=e.topicId,n=e.onFirst,r=e.onPrev,a=e.onNext,s=e.onLast,o=it(Je);return(0,v.jsxs)("div",{className:"topic-preview-rewind",children:[(0,v.jsx)("div",{className:"topic-preview-button flex-small",onClick:n,title:"\u041a \u043f\u0435\u0440\u0432\u043e\u043c\u0443",children:(0,v.jsx)("i",{className:"fa fa-angle-double-left","aria-hidden":"true"})}),(0,v.jsx)("div",{className:"topic-preview-button flex-large",onClick:r,title:"\u041a \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u043c\u0443",children:(0,v.jsx)("i",{className:"fa fa-angle-left","aria-hidden":"true"})}),(0,v.jsx)("div",{className:"topic-preview-button flex-large",onClick:a,title:"\u041a \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u043c\u0443",children:(0,v.jsx)("i",{className:"fa fa-angle-right","aria-hidden":"true"})}),(0,v.jsx)("div",{className:"topic-preview-button flex-small",onClick:s,title:"\u041a \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u043c\u0443",children:(0,v.jsx)("i",{className:"fa fa-angle-double-right","aria-hidden":"true"})}),(0,v.jsxs)("div",{className:"topic-preview-button close-preview",onClick:function(){o.togglePreview({topicId:t,msgNumber:0})},children:[(0,v.jsx)("i",{className:"fa fa-angle-right","aria-hidden":"true"}),(0,v.jsx)("i",{className:"fa fa-angle-left","aria-hidden":"true",style:{marginLeft:"-2px"}})]}),(0,v.jsx)("div",{className:"topic-preview-button edit-preview",children:(0,v.jsx)(i.rU,{to:"/topic.php?id=".concat(t,"&page=last20#F"),children:(0,v.jsx)("i",{className:"fa fa-pencil","aria-hidden":"true",style:{color:"var(--font-color)"}})})})]})},Dt=n(1947),Ft=n.n(Dt);var zt,Vt=function(e){var t,n,r,a=new Set("if|\u0435\u0441\u043b\u0438|then|\u0442\u043e\u0433\u0434\u0430|elsif|\u0438\u043d\u0430\u0447\u0435\u0435\u0441\u043b\u0438|else|\u0438\u043d\u0430\u0447\u0435|endif|\u043a\u043e\u043d\u0435\u0446\u0435\u0441\u043b\u0438|do|\u0446\u0438\u043a\u043b|for|\u0434\u043b\u044f|to|\u043f\u043e|each|\u043a\u0430\u0436\u0434\u043e\u0433\u043e|in|\u0438\u0437|while|\u043f\u043e\u043a\u0430|enddo|\u043a\u043e\u043d\u0435\u0446\u0446\u0438\u043a\u043b\u0430|procedure|\u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u0430|endprocedure|\u043a\u043e\u043d\u0435\u0446\u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u044b|function|\u0444\u0443\u043d\u043a\u0446\u0438\u044f|endfunction|\u043a\u043e\u043d\u0435\u0446\u0444\u0443\u043d\u043a\u0446\u0438\u0438|var|\u043f\u0435\u0440\u0435\u043c|export|\u044d\u043a\u0441\u043f\u043e\u0440\u0442|goto|\u043f\u0435\u0440\u0435\u0439\u0442\u0438|and|\u0438|or|\u0438\u043b\u0438|not|\u043d\u0435|val|\u0437\u043d\u0430\u0447|break|\u043f\u0440\u0435\u0440\u0432\u0430\u0442\u044c|continue|\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c|return|\u0432\u043e\u0437\u0432\u0440\u0430\u0442|try|\u043f\u043e\u043f\u044b\u0442\u043a\u0430|except|\u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435|endtry|\u043a\u043e\u043d\u0435\u0446\u043f\u043e\u043f\u044b\u0442\u043a\u0438|raise|\u0432\u044b\u0437\u0432\u0430\u0442\u044c\u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435|false|\u043b\u043e\u0436\u044c|true|\u0438\u0441\u0442\u0438\u043d\u0430|undefined|\u043d\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043e|null|new|\u043d\u043e\u0432\u044b\u0439|execute|\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c|\u0430\u0441\u0438\u043d\u0445|async|\u0436\u0434\u0430\u0442\u044c|wait".split("|")),s=new Set("():;.,=+-*<>?[]%/".split("")),i="<span class=",o="</span>",c="bg>",l="num>",u="str>",d="key>",p=!1,f="";function h(e){return""===e.trim()}function m(e,t,n){return e.substring(t-1,t-1+n)}function x(e,t){return e.substring(e.length-t)}function v(e){return a.has(e.toLowerCase().trim())}function g(e,a){" "===e||r===a?t+=e:(n&&(t+=o,n=!1),t=t+i+a+e,n=!0,r=a)}function j(e){var n=!1,a=!1,i=1,o=!0,j=1;for(j=1;j<=e.length;j++){var b=e.charAt(j-1);if(p)'"'===b?(g(m(e,i,j-i+1),u),p=!1,f="",o=!0):f+=b;else if(n)"'"===b?(g(m(e,i,j-i+1),u),n=!1,f="",o=!0):f+=b;else if(" "===b)h(f)?t+=" ":(a?(g(f+" ",u),a=!1):v(f.trim())?g(f+" ",d):isNaN(parseInt(f,10))?g(f+" ",c):g(f+" ",l),f=""),o=!0;else if(s.has(b)){if(h(f)||(a?(g(f,u),a=!1,o="."!==b):o&&v(f)?(g(f,d),o="."!==b):(isNaN(parseInt(f,10))?g(f,c):g(f,l),o="."!==b),f=""),"."===b&&r===l){g(b,l);continue}if("="===b&&"<"===m(e,j-1,1))r=void 0;else if("/"===b&&"/"===m(e,j+1,1))return void g(x(e,e.length-j+1),"com>");g(b,"sp>")}else if('"'===b||"|"===b)h(f)?(i=j,p=!0):(g(f+b,u),f=""),o=!0;else if("'"===b)h(f)?(i=j,n=!0):(g(f+b,u),f=""),o=!0;else{if("#"===b||"&"===b&&h(t)){g(x(e,e.length-j+1),"pr>"),j=e.length;break}"~"===b?(f+=b,a=!0):f+=b}}p||n?g(m(e,i,j-i+1),u):h(f)||(v(f)?g(f,d):isNaN(parseInt(f,10))?g(f,c):g(f,l))}p=!1,f="",n=!1,r=void 0,t="";var b,y=[],w=(0,ut.Z)(e.split("\n"));try{for(w.s();!(b=w.n()).done;){var N=b.value;h(N)?y.push(""):(t="",j(N),n&&!p?(t+="</span>",n=!1,r="",f=""):p||(r="",f=""),y.push(t))}}catch(k){w.e(k)}finally{w.f()}return y.join("\n")},At=function(e){var t=e.children,n=(0,s.useState)(!0),r=(0,d.Z)(n,2),a=r[0],i=r[1],o="";t&&(o=function(e){for(var t=e.replace(/\n<br>/g,"\n").replace(/<br>\n/g,"\n").replace(/\r<br>/g,"\n").replace(/<br>\r/g,"\n").replace(/<br>/g,"\n").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt");"\n"===t[0];)t=t.substring(1);for(;"\n"===t.substring(t.length-1);)t=t.substring(0,t.length-1);return Vt(t)}(o=L(t).join("")));var c,l=0;o&&(l=o.split("\n").length),c=a?"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c: ".concat(l," \u0441\u0442\u0440\u043e\u043a"):"\u0421\u043a\u0440\u044b\u0442\u044c";var u=null;l>7&&(u=(0,v.jsx)("div",{className:"expand-button-div",children:(0,v.jsx)("span",{className:"expand-button-span",onClick:function(){i(!a)},children:c})}));var p={};return a&&l>7?(p.overflow="hidden",p.height="135px"):(p.overflow="auto",p.height="auto"),(0,v.jsxs)("div",{style:{marginTop:"5px"},children:[(0,v.jsx)("pre",{className:"code-pre",style:p,dangerouslySetInnerHTML:{__html:o}}),u]})},Ut=function(e){var t=(0,s.useRef)(null),n=it(Oe),r=st((function(e){var t;return null===(t=e.topic.info)||void 0===t?void 0:t.id})),a=st((function(e){return+e.options.items.tooltipDelay})),i="";i=e.children?L(e.children).join(""):String(e.number);var o=(0,s.useState)(i),c=(0,d.Z)(o,2),l=c[0],u=c[1];(0,s.useEffect)((function(){var t=!0;if(i.startsWith("http")){var n=function(){var n=(0,k.Z)((0,N.Z)().mark((function n(){var r,a;return(0,N.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,B(e.topicId);case 2:r=n.sent,a=r.title,t&&u(a);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return n(),function(){t=!1}}u(i)}),[i,e.topicId]);var p=function(e){e.persist(),t.current=window.setTimeout((function(){return m(e)}),a)},f=function(){t.current&&clearTimeout(t.current)},h=function(e){e.stopPropagation(),t.current&&clearTimeout(t.current),m(e)},m=function(t){var r=e.topicId,a=e.number,s={x:t.pageX,y:t.pageY-50},i={topicId:+r,number:+a};n.show({keys:i,coords:s})};if(e.topicId!==r&&isNaN(+l)){var x=_(e.number),g="";return x>1&&(g="&page=".concat(x)),(0,v.jsxs)("span",{children:[(0,v.jsx)("a",{href:"#/topic.php?id=".concat(e.topicId).concat(g,"#").concat(e.number),style:(0,lt.Z)({},e.style),children:l})," ","(",(0,v.jsx)("span",{onMouseOver:p,onMouseOut:f,onClick:h,className:"link",children:e.number}),")"]})}return(0,v.jsx)("span",{onMouseOver:p,onMouseOut:f,onClick:h,className:"link",style:(0,lt.Z)({},e.style),children:l})},Wt=n(5915),Yt=n.n(Wt),Ht=function(e){var t=e.href,n=e.children;return(0,v.jsx)("a",{href:t,className:"registered-user",children:n})},Bt=function(e){var t=e;-1===e.search(/http/)&&(t="http://"+t);try{var n=new URL(t)}catch(r){return null}return-1!==n.hostname.search(/youtube/)?n.searchParams.get("v"):-1!==n.hostname.search(/youtu\.be/)?n.pathname.substring(1):null},Kt=function(){var e=(0,k.Z)((0,N.Z)().mark((function e(t){var n,r,a,s,i,o;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("youtubeApiKey")||"AIzaSyCztN2QW4Fxw_1YuAHBTOZdYLbzigPz25g",r="https://www.googleapis.com/youtube/v3/videos?key=".concat(n,"&fields=items(snippet(title))&part=snippet&id=").concat(t),e.next=4,fetch(r);case 4:return a=e.sent,e.next=7,a.json();case 7:if(0!==(s=e.sent).items.length){e.next=10;break}return e.abrupt("return",{hrefName:"",title:"",notFound:!0});case 10:return i=s.items[0].snippet.title,o=i,50,i.length>55&&(o=o.substring(0,50)+"..."),e.abrupt("return",{hrefName:o,title:i,notFound:!1});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Jt=function(e){var t=e.href,n=(0,s.useState)(t),r=(0,d.Z)(n,2),a=r[0],i=r[1],o=(0,s.useState)(""),c=(0,d.Z)(o,2),l=c[0],u=c[1];(0,s.useEffect)((function(){var e=!0,n=function(){var n=(0,k.Z)((0,N.Z)().mark((function n(){var r,a;return(0,N.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=Bt(t)){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,n.next=6,Kt(r);case 6:a=n.sent,e&&(a.notFound?i(t+" (\u0432\u0438\u0434\u0435\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e)"):(i(a.hrefName),u(a.title))),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),console.error("youtube",r,n.t0.message);case 13:case"end":return n.stop()}}),n,null,[[3,10]])})));return function(){return n.apply(this,arguments)}}();return n(),function(){e=!1}}),[t]);return(0,v.jsx)("a",{href:t,title:l,children:"".concat("youtube",": ").concat(a)})},qt=["href","children","parentText"],Xt=function(e){var t=e.href,n=e.children,r=e.parentText,a=(0,yt.Z)(e,qt),s=st((function(e){return"true"===e.options.items.showYoutubeVideoTitle})),i=st((function(e){return"true"===e.options.items.replaceCatalogMista})),o=st((function(e){return"true"===e.options.items.fixBrokenLinks}));try{var c=new(Yt())(t,!0)}catch(d){return console.error(d.message,t),(0,v.jsx)("a",{href:t,children:t})}var l,u=t;if(u.startsWith("/")&&(c.set("protocol","https"),c.set("hostname","forum.mista.ru"),u=c.href),-1!==c.hostname.search(/forum\.mista.ru/)){if("/topic.php"===c.pathname)return(0,v.jsx)(Ut,{topicId:c.query.id,number:c.hash.replace("#","")||"0",children:L(n)});if("/users.php"===c.pathname)return(0,v.jsx)(Ht,{href:c.href,children:n})}return"a-sitnikov.github.io"===c.hostname&&"/react.mista/"===c.pathname&&0===Object.keys(c.query).length&&"/react.mista/topic.php"===(c=new(Yt())(t.replace(/#\//,""),!0)).pathname?(0,v.jsx)(Ut,{topicId:c.query.id,number:c.hash.replace("#","")||"0",children:L(n)}):!s||-1===(l=c.hostname).search(/youtube/)&&-1===l.search(/youtu\.be/)?i&&function(e){return-1!==e.search(/catalog\.mista/)}(c.hostname)?(c.set("hostname","infostart.ru"),(0,v.jsxs)("a",{target:null===a||void 0===a?void 0:a.target,className:null===a||void 0===a?void 0:a.class,rel:null===a||void 0===a?void 0:a.rel,href:c.href,children:[c.href," "]})):(o&&r&&(u=function(e,t){var n=e.replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\./g,"\\.").replace(/\./g,".").replace(/\*/g,"\\*").replace(/\+/g,"\\+").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\?/g,"\\?").replace(/\//g,"\\/");try{var r=new RegExp(n+"<\\/a>(\\)|[\u0430-\u044f\u0451\u0410-\u042f\u04010-9#\\-\\+\\_\\%\\?=]*)"),a=t.match(r);if(a&&a.length>1)return")"===a[1]&&-1===e.search("\\(")?e:e+=a[1]}catch(d){console.error(d)}return e}(u,r)),(0,v.jsx)("a",{target:null===a||void 0===a?void 0:a.target,className:null===a||void 0===a?void 0:a.class,rel:null===a||void 0===a?void 0:a.rel,href:u,children:n})):(0,v.jsx)(Jt,{href:t})},$t=n(3433),Gt=function(e){var t=e.topicId,n=e.data,r=e.total,a=e.n,s=e.colors,i="".concat(re,"/css/voting").concat(a,".png"),o=0;r&&(o=Math.round(100*n.count/r));return(0,v.jsxs)("li",{className:"voting-item",children:[(0,v.jsx)("div",{className:"voting-title",children:(0,v.jsx)("a",{rel:"nofollow",style:{textDecoration:"none"},href:"#/topic.php?id=".concat(t,"&sel=").concat(a),children:(0,v.jsx)("b",{children:(0,v.jsx)("span",{style:{color:s[a-1]},children:"".concat(a,". ").concat(n.text)})})})}),(0,v.jsx)("div",{className:"voting-percentage",children:(0,v.jsx)("b",{children:(0,v.jsx)("span",{style:{color:s[a-1]},children:"".concat(o,"% (").concat(n.count,")")})})}),(0,v.jsx)("div",{className:"voting-bar",children:(0,v.jsx)("div",{style:{width:"".concat(o,"%")},children:(0,v.jsx)("a",{href:i,children:(0,v.jsx)("img",{src:i,style:{maxWidth:"500px",width:"100%",height:"15px"},alt:"\u0432\u0430\u0440\u0438\u0430\u043d\u0442 ".concat(a)})})})})]})},Qt=function(e){var t=e.items,n=e.topicId,r=e.colors,a=Math.max.apply(Math,(0,$t.Z)(t.map((function(e){return e.count}))));return(0,v.jsx)("ul",{style:{paddingLeft:0},children:t.filter((function(e){return e.text})).map((function(e,t){return(0,v.jsx)(Gt,{data:e,total:a,n:t+1,topicId:n,colors:r},t)}))})},en=(0,s.memo)((function(e){var t=e.colors,n=e.n,r=e.text;return(0,v.jsx)("div",{style:{marginTop:"5px"},children:(0,v.jsx)("b",{children:(0,v.jsx)("span",{style:{color:t[n-1]},children:"".concat(n,". ").concat(r)})})})})),tn=function(e,t,n,r){if(!e)return e;var a=function(e){return e.replace(/\[1[C\u0421]\]/gi,"<code>").replace(/<1[C\u0421]>/gi,"<code>").replace(/\[\/1[C\u0421]\]/gi,"</code>").replace(/<\/1[C\u0421]>/gi,"</code>")}(e);return a=function(e,t){return e.replace(/(\()(\d+)(\))(?![^<>]*<\/)/gi,(function(e){var n=arguments.length<=2?void 0:arguments[2];return"(<link data-topicid='".concat(t,"' data-number='").concat(n,"'></link>)")}))}(a,t),a=function(e,t,n,r){var a=S()(n).format("YYYY/MM/DD");return e.replace(/\[IMG_(\d*)\]/gi,(function(e){var n=arguments.length<=1?void 0:arguments[1],s="https://forum.mista.ru/topics/files/".concat(a,"/").concat(t,"/").concat(r,"/").concat(n,"_preview.png");return"<img src='".concat(s,"' style='max-width: 100%'/>")}))}(a,t,n,r),a},nn=Ft().Parser(),rn=Ft().ProcessNodeDefinitions(),an=function(){return!0},sn={shouldProcessNode:function(e){return"link"===(null===e||void 0===e?void 0:e.name)},processNode:function(e,t,n){var r=e.attribs["data-topicid"],a=e.attribs["data-number"];return(0,v.jsx)(Ut,{topicId:r,number:a},n)}},on={shouldProcessNode:function(e){return"code"===(null===e||void 0===e?void 0:e.name)||"pre"===(null===e||void 0===e?void 0:e.name)},processNode:function(e,t){return(0,v.jsx)(At,{children:t})}},cn=(0,s.memo)((function(e){var t=e.html,n=e.topicId,r=e.topicDate,a=e.messageNumber,s=tn(t,n,r,a),i=[sn,on,{shouldProcessNode:function(e){return"a"===(null===e||void 0===e?void 0:e.name)},processNode:function(e,t,n){var r=e.attribs.href;return(0,v.jsx)(Xt,{href:r,parentText:s,children:t},n)}},{shouldProcessNode:function(){return!0},processNode:rn.processDefaultNode}],o=nn.parseWithInstructions(s,an,i);return(0,v.jsx)(v.Fragment,{children:o})})),ln=function(e){var t=e.topicId,n=e.topicDate,r=e.n,a=e.html,i=e.vote,o=e.style,c=st((function(e){return e.topic.info})),l=st((function(e){return e.options.voteColors})),u=null;i&&c.voting&&t===c.id&&(u=c.voting[i-1].text);var p=(0,s.useState)(u),f=(0,d.Z)(p,2),h=f[0],m=f[1];(0,s.useEffect)((function(){var e=function(){var e=(0,k.Z)((0,N.Z)().mark((function e(){var n;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B(t);case 3:n=e.sent,m(n.voting[i-1].text),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();i&&!u&&e()}),[i,u,t]);var x,g=0!==i&&null!==h;return 0===r&&c.isVoting&&c.voting&&(x=(0,v.jsx)(Qt,{items:c.voting,topicId:t,colors:l})),(0,v.jsxs)("div",{className:"message",style:o,children:[x,(0,v.jsx)("div",{children:(0,v.jsx)(cn,{html:a,topicId:t,topicDate:n,messageNumber:r})}),g&&(0,v.jsx)(en,{text:h,n:i,colors:l})]})},un=function(e){var t=it(Ge),n=(0,s.useState)("none"),r=(0,d.Z)(n,2),a=r[0],i=r[1],o=e.data,c=e.isAuthor,l=e.isYou,u=e.isTooltip;(0,s.useEffect)((function(){i("none")}),[o.n]);var p,f="".concat(re,"/users.php?id=").concat(o.userId);p=o?0===o.n?S()(o.time).format("DD.MM.YY - HH:mm"):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("span",{className:"message-number",children:o.n})," - "+S()(o.time).format("DD.MM.YY - HH:mm")]}):"";var h,m,x=Nt()("registered-user",{"is-author":c,"is-you":l});return window.innerWidth>768&&(h=(0,v.jsx)("img",{src:"".concat(re,"/css/user_icons/").concat(o.userId,"_16x16.png"),alt:"user ico",onLoad:function(){i("inline")},onError:function(){i("none")},style:{display:a,marginBottom:"4px",marginRight:"1px"}})),m=u?(0,v.jsx)("div",{className:"ah",style:{display:"inline-block",marginLeft:"5px"},children:p}):(0,v.jsxs)("div",{className:"message-time",children:[(0,v.jsx)("span",{className:"ah",children:p}),(0,v.jsx)("button",{className:"button ah",onClick:function(){var n=e.data;t.changeText("(".concat(n.n,")"));var r=document.getElementById("message_text");r&&window.scrollTo(0,r.offsetTop)},children:p})]}),(0,v.jsxs)("div",{className:"user-info",children:[h,(0,v.jsx)("a",{className:x,href:f,children:o.user}),m]})},dn=function(e){var t=e.topicId,n=e.n,r=e.author,a=e.loggedUserId,i=e.onDataLoaded,o=(0,s.useState)(null),c=(0,d.Z)(o,2),l=c[0],u=c[1],p=(0,s.useState)(null),f=(0,d.Z)(p,2),h=f[0],m=f[1];return(0,s.useEffect)((function(){var e=function(){var e=(0,k.Z)((0,N.Z)().mark((function e(){var r;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$(t,n);case 3:(r=e.sent)?(u(r),m(null),i&&i()):(u(null),m("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 ".concat(n))),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),u(null),m(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[t,n,i]),l||h?(0,v.jsxs)(v.Fragment,{children:[l&&(0,v.jsxs)("div",{className:"preview-content",children:[(0,v.jsx)("div",{className:"topic-preview-userinfo",children:(0,v.jsx)(un,{data:l,isAuthor:l.user===r,isYou:l.userId===a,isTooltip:!0})}),(0,v.jsx)(ln,{topicId:t,topicDate:l.time,n:n,html:l.text,vote:l.vote,style:{overflowY:"auto",overflowWrap:"break-word"}})]}),h&&(0,v.jsx)("span",{children:h})]}):null},pn=function(e){var t=e.topicId,n=e.initialMsgNumber,r=e.author,a=e.loggedUserId,i=(0,s.useState)(0),o=(0,d.Z)(i,2),c=o[0],l=o[1],u=(0,s.useState)("none"),p=(0,d.Z)(u,2),f=p[0],h=p[1],m=(0,s.useState)({msgNumber:n,key:0}),x=(0,d.Z)(m,2),g=x[0],j=x[1],b=function(){var e=(0,k.Z)((0,N.Z)().mark((function e(){var n;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:n=e.sent,j({msgNumber:n.count,key:g.key});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=(0,Rt.useSwipeable)({onSwiping:function(e){Math.abs(e.deltaX)<35?l(0):l(e.deltaX)},onSwiped:function(e){Math.abs(e.deltaX)>150&&("Left"===e.dir?j({msgNumber:g.msgNumber+1,key:g.key+1}):"Right"===e.dir&&g.msgNumber>0&&j({msgNumber:g.msgNumber-1,key:g.key+1})),l(0)},delta:15}),w=(0,s.useCallback)((function(){h("block")}),[]),Z=[g.msgNumber];c<0?Z.push(g.msgNumber+1):c>0&&g.msgNumber>0&&Z.push(g.msgNumber-1);var I={transform:"translate3d(".concat(c,"px, 0px, 0px)"),flexDirection:c>0?"row-reverse":"row"};return(0,v.jsx)("div",{className:"preview-container",style:{display:f},children:(0,v.jsxs)("div",{className:"topic-preview",children:[(0,v.jsx)(Et,{topicId:t,onFirst:function(){j({msgNumber:0,key:g.key})},onLast:b,onNext:function(){j({msgNumber:g.msgNumber+1,key:g.key})},onPrev:function(){g.msgNumber>0&&j({msgNumber:g.msgNumber-1,key:g.key})}}),(0,v.jsxs)("div",(0,lt.Z)((0,lt.Z)({className:"preview-carousel"},y),{},{style:I,children:[(0,v.jsx)("div",{className:"preview-carousel-item",style:{order:0},children:(0,v.jsx)(dn,{topicId:t,n:Z[0],loggedUserId:a,author:r,onDataLoaded:w})},g.key),Z.length>1&&(0,v.jsx)("div",{className:"preview-carousel-item",style:{order:1},children:(0,v.jsx)(dn,{topicId:t,n:Z[1],loggedUserId:a,author:r})},g.key+1)]}))]})})},fn=function(){var e=at(),t=st((function(e){return e.topicsList.items})),n=st((function(e){return e.topicsList.status})),r=st((function(e){return e.topicsList.error})),a=st((function(e){return e.login.userId})),i=(0,u.TH)(),o=(0,s.useCallback)((function(t){e(Be(t))}),[e]);(0,s.useEffect)((function(){document.title="React.Mista"}),[]),(0,s.useEffect)((function(){window.scrollTo(0,0)}),[i.pathname,i.search]),(0,s.useEffect)((function(){var e=dt.parse(i.search);o(e)}),[i.search,o]);var c,l=new Array(t.length),d=(0,ut.Z)(t);try{for(d.s();!(c=d.n()).done;){var p=c.value;l.push((0,v.jsx)(St,(0,lt.Z)((0,lt.Z)({},p),{},{topicId:p.id}),p.id)),p.showPreview&&l.push((0,v.jsx)(pn,{topicId:p.id,initialMsgNumber:p.previewMsgNumber,author:p.author,loggedUserId:a},"preview".concat(p.id)))}}catch(f){d.e(f)}finally{d.f()}return(0,v.jsxs)("div",{children:[(0,v.jsx)(jt,{}),r&&(0,v.jsx)(xt,{text:r}),(0,v.jsxs)("div",{className:"topic-list-table",children:[(0,v.jsx)(bt,{onUpdateClick:o,isLoading:"loading"===n}),l,(0,v.jsx)("div",{className:"tf",children:(0,v.jsx)(_t,{maxPage:10})})]}),(0,v.jsx)("div",{id:"F",className:"newtopic",style:{marginBottom:"10px",marginTop:"5px",position:"relative"},children:(0,v.jsx)(Ot,{onSubmitSuccess:o})})]})},hn={"1c":"1\u0421:\u041f\u0440\u0435\u0434\u043f\u0440\u0438\u044f\u0442\u0438\u0435",life:"\u041e \u0436\u0438\u0437\u043d\u0438",it:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438",job:"\u0420\u0430\u0431\u043e\u0442\u0430"},mn=function(){var e=st((function(e){return e.topic.info}));return(0,v.jsxs)("div",{className:"flex-row",children:[(0,v.jsx)("div",{className:"header-left",children:(0,v.jsx)(vt,{})}),(0,v.jsx)("div",{className:"header-right",children:(0,v.jsx)("span",{id:"forum_string",className:"bold120",children:(0,v.jsx)(i.rU,{to:"/index.php?forum=".concat(e.forum),style:{textDecoration:"none"},children:hn[e.forum]})})})]})},xn=function(){var e=st((function(e){return e.topic.info.id})),t=st((function(e){return e.topic.info.title})),n="https://www.yandex.ru/search/?text="+encodeURIComponent(t);return(0,v.jsxs)("div",{className:"topic-row",children:[(0,v.jsx)("div",{className:"cell-userinfo",children:(0,v.jsxs)("div",{className:"topic-tools",children:[(0,v.jsx)("a",{title:"API.info",href:"".concat(re,"/").concat(se,"?id=").concat(e),className:"agh",style:{display:"block",lineHeight:"1em"},children:"i"}),(0,v.jsx)("a",{title:"API.messages",href:"".concat(re,"/").concat(ie,"?id=").concat(e,"&from=0&to=20"),className:"agh",style:{display:"block",lineHeight:"1em"},children:"m"})]})}),(0,v.jsx)("div",{className:"cell-message",children:(0,v.jsxs)("div",{className:"flex-row",children:[(0,v.jsxs)("div",{style:{flex:1,textAlign:"center"},children:[(0,v.jsx)("a",{href:"".concat(re,"/topic.php?id=").concat(e),children:(0,v.jsx)("h1",{className:"topic-title",dangerouslySetInnerHTML:{__html:t}})}),(0,v.jsx)("div",{className:"moder-action"})]}),(0,v.jsx)("div",{style:{flex:"0 0 20px",position:"relative"},children:(0,v.jsx)("div",{className:"div-va-middle",children:(0,v.jsx)("a",{rel:"noopener noreferrer",href:n,title:"\u0418\u0441\u043a\u0430\u0442\u044c \u0432 \u042f\u043d\u0434\u0435\u043a\u0441\u0435",target:"_blank",className:"yandex",children:"\u042f"})})})]})})]})},vn=function(e){var t=e.data,n=e.topicId,r=st((function(e){return e.login})),a=st((function(e){var t;return(null===(t=e.topic.item0)||void 0===t?void 0:t.user)||""}));return t?(0,v.jsxs)("div",{className:"topic-row",id:String(t.n),children:[(0,v.jsx)("div",{className:"cell-userinfo",children:(0,v.jsx)(un,{data:t,isAuthor:t.user===a,isYou:t.user===r.userName})}),(0,v.jsx)("div",{className:"cell-message",children:(0,v.jsx)(ln,{html:t.text,topicId:n,topicDate:t.time,n:t.n,vote:t.vote})})]}):null},gn=function(e){var t=e.page,n=at(),r=st((function(e){return e.topic.info||Ee})),a=st((function(e){return e.topic.status})),s=_(r.count),i=!1;return"last20"!==t&&t!==s||(i=!0),(0,v.jsxs)("div",{className:"flex-row",id:"F",children:[(0,v.jsx)("div",{className:"ta-left va-top",style:{width:"50%"},children:(0,v.jsx)(ht.Z,{onClick:function(){},disabled:!1,size:"sm",className:"button",variant:"light",children:"\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0430"})}),(0,v.jsx)("div",{className:"ta-right va-middle",style:{marginLeft:"auto"},children:i&&(0,v.jsx)(ht.Z,{onClick:function(){n(Ae())},disabled:"loading"===a,size:"sm",className:"button",variant:"light",children:"loading"===a?"\u041e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u0442\u0441\u044f":"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0432\u0435\u0442\u043a\u0443"})})]})},jn=function(e){var t,n=e.onSubmitSuccess,r=(0,s.useState)(),a=(0,d.Z)(r,2),i=a[0],o=a[1],c=at(),u=it(Ge),p=st((function(e){return e.topic.info})),f=st((function(e){return e.newMessage})),h=function(){u.changeText(""),o(void 0),n&&n()},m=(0,s.useCallback)((function(e){c(Ne.changeText(e))}),[c]);if(null!==p&&void 0!==p&&p.isVoting&&null!==p&&void 0!==p&&p.voting){for(var x=[],g=function(e){var t=p.voting[e-1];if(!t.text)return"continue";x.push((0,v.jsx)(l.Z.Check,{type:"radio",name:"voting",checked:i===e,onChange:function(){return function(e){o(e)}(e)},label:"".concat(e,". ").concat(t.text)},e))},j=1;j<=p.voting.length;j++)g(j);t=(0,v.jsxs)(Lt.Z,{children:[(0,v.jsx)("legend",{children:(0,v.jsxs)("small",{children:["\u0412\u0430\u0448 \u0432\u044b\u0431\u043e\u0440:",(0,v.jsx)("span",{id:"voting_clear",style:{marginLeft:"5px",cursor:"pointer"},onClick:function(e){e.preventDefault(),o(void 0)},children:"\u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"})]})}),x,"\u041e\u0431\u043e\u0441\u043d\u0443\u0439\u0442\u0435 \u0441\u0432\u043e\u0439 \u0432\u044b\u0431\u043e\u0440!"]})}return(0,v.jsxs)("form",{style:{marginTop:"5px"},onSubmit:function(e){e.preventDefault(),e.stopPropagation();var t={text:f.text,topicId:String(null===p||void 0===p?void 0:p.id),onSuccess:h,voting_select:void 0};i&&(t.voting_select=i),c(Xe(t))},children:[(0,v.jsx)("div",{className:"bold",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0432 \u0442\u0435\u043c\u0443:"}),(0,v.jsxs)("div",{className:"new-message-container",children:[(0,v.jsx)("div",{className:"new-message-text",children:(0,v.jsx)(Pt,{isFetching:"loading"===f.status,text:f.text,placeholder:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",onChange:m})}),(0,v.jsx)("div",{className:"new-message-voting",children:t})]})]})},bn=function(){var e,t=at(),n=it(We),r=(0,u.TH)(),a=st((function(e){return e.login})),i=st((function(e){return e.topic.info})),o=st((function(e){return e.topic.item0})),c=st((function(e){return e.topic.items})),l=st((function(e){return e.topic.error})),d=new URLSearchParams(r.search),p=+d.get("id"),f=(e=d.get("page"))?"last20"===e?"last20":isNaN(+e)?1:+e:1,h=_(i.count),m=(0,s.useRef)(!1);m.current="last20"===f||f===h;var x=(0,s.useCallback)((function(){m.current&&t(Ae())}),[t]);return(0,s.useEffect)((function(){var e;i.title&&(document.title=(e=i.title,(new DOMParser).parseFromString(e,"text/html").firstChild.innerText))}),[i.title]),(0,s.useEffect)((function(){t(function(e,t){return function(n,r){var a=r();if(Ve(a)){var s=null;return e===a.topic.info.id&&(s=a.topic.item0),n(Fe({topicId:e,page:t,item0:s}))}}}(p,f))}),[t,p,f]),(0,s.useEffect)((function(){var e=window.setInterval(x,6e4);return function(){n.clear(),zt=void 0,e&&clearInterval(e)}}),[n,x]),(0,s.useEffect)((function(){if(!zt&&r.hash&&c.length>0){var e=document.getElementById(r.hash.slice(1));e&&setTimeout((function(){return window.scrollTo(0,e.offsetTop)}),1),zt=!0}})),(0,v.jsxs)("div",{style:{marginBottom:"5px"},children:[(0,v.jsx)(mn,{}),l&&(0,v.jsx)(xt,{text:l}),(0,v.jsxs)("div",{className:"topic-table",children:[(0,v.jsx)(xn,{}),(0,v.jsx)(vn,{data:o,topicId:p},"0"),c.map((function(e,t){return(0,v.jsx)(vn,{data:e,topicId:p},e.n)})),(h>1||"last20"===f)&&(0,v.jsx)("div",{className:"tf",children:(0,v.jsx)(_t,{maxPage:h,last20:!0})})]}),(0,v.jsx)(gn,{page:f}),a.logged&&(0,v.jsx)(jn,{onSubmitSuccess:function(){x(),t(Ge.changeText(""))}})]})},yn=function(e){var t=e.name,n=e.label,r=e.value,a=e.values,s=e.oneLine,i=e.onChange,o=function(e){i(e,t,e.target.value)};return(0,v.jsxs)("span",{children:[(0,v.jsxs)("span",{style:{marginRight:"5px"},children:[" ",n," "]}),s&&(0,v.jsx)("br",{}),a.map((function(e,t){return(0,v.jsx)(l.Z.Check,{type:"radio",id:e.name,label:e.descr,name:n,checked:e.name===r,value:e.name,inline:s,onChange:o},t)}))]})},wn=function(e){var t=e.name,n=e.value,r=e.label,a=e.postfix;return(0,v.jsxs)("label",{htmlFor:t,style:{marginRight:"5px"},children:[(0,v.jsx)("span",{style:{marginRight:"5px"},children:r}),(0,v.jsx)("input",{type:"string",name:t,value:n,onChange:function(t){var n=e.name;e.onChange(t,n,t.target.value)},className:"input"}),void 0!==a?(0,v.jsx)("span",{style:{marginLeft:"5px"},children:a}):null]})},Nn=[{tabName:"\u041e\u0431\u0449\u0438\u0435",rows:[["theme"],["topicsPerPage"],["autoRefreshTopicsList","autoRefreshTopicsListInterval"],["autoRefreshTopic","autoRefreshTopicInterval"]]},{tabName:"\u0422\u0443\u043b\u0442\u0438\u043f\u044b",rows:[["showTooltips","tooltipDelay"],["showTooltipOnPostLink"]]},{tabName:"\u0421\u0441\u044b\u043b\u043a\u0438",rows:[["showYoutubeVideoTitle"],["replaceCatalogMista"],["fixBrokenLinks"]]}],kn={theme:{type:"radio",label:"\u0426\u0432\u0435\u0442\u043e\u0432\u0430\u044f \u043f\u0430\u043b\u0438\u0442\u0440\u0430:",oneLine:!0,values:[{name:"yellow",descr:"\u0417\u043e\u043b\u043e\u0442\u0430\u044f"},{name:"lightgray",descr:"\u0421\u0435\u0440\u0430\u044f"},{name:"dark",descr:"\u0422\u0435\u043c\u043d\u0430\u044f"}]},topicsPerPage:{type:"number",label:"\u0422\u0435\u043c \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 (max 99):",min:1,max:99},autoRefreshTopicsList:{type:"checkbox",label:"\u0410\u0432\u0442\u043e\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430 \u0442\u0435\u043c"},autoRefreshTopicsListInterval:{type:"number",label:"",min:60,max:1e6,postfix:"\u0441\u0435\u043a"},autoRefreshTopic:{type:"checkbox",label:"\u0410\u0432\u0442\u043e\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u0435\u043c\u044b"},autoRefreshTopicInterval:{type:"number",label:"",min:60,max:1e6,postfix:"\u0441\u0435\u043a"},showTooltips:{type:"checkbox",label:"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0442\u0443\u043b\u0442\u0438\u043f\u044b, \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430",disabled:!0},tooltipDelay:{type:"number",max:1e6,label:"",postfix:"\u043c\u0441",disabled:!0},showTooltipOnPostLink:{type:"checkbox",label:"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0442\u0443\u043b\u0442\u0438\u043f \u0441\u0441\u044b\u043a\u0438 \u043d\u0430 \u0434\u0440\u0443\u0433\u0443\u044e \u0432\u0435\u0442\u043a\u0443",disabled:!0},showYoutubeVideoTitle:{type:"checkbox",label:"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u044f \u0440\u043e\u043b\u0438\u043a\u043e\u0432 youtube"},replaceCatalogMista:{type:"checkbox",label:"\u041e\u0431\u0440\u0430\u0442\u043d\u043e \u0437\u0430\u043c\u0435\u043d\u044f\u0442\u044c catalog.mista.ru \u043d\u0430 infostart.ru"},fixBrokenLinks:{type:"checkbox",label:"\u0427\u0438\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u043e\u043c\u0430\u043d\u043d\u044b\u0435 \u0441\u0441\u044b\u043b\u043a\u0438 (\u0441 \u0440\u0443\u0441\u0441\u043a\u0438\u043c\u0438 \u0441\u0438\u043c\u0432\u043e\u043b\u0430\u043c\u0438)"}},Zn=function(e){var t=e.name,n=e.children;return(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"tab-header",children:t}),(0,v.jsx)("div",{className:"tab-content",children:n})]})},In=function(){var e,t=at(),n=(0,u.s0)(),r=st((function(e){return e.options})),a=(0,s.useState)({items:r.items}),i=(0,d.Z)(a,2),o=i[0],c=i[1],p=function(){n("/#")},h=function(e,t,n){var r=Object.assign({},o.items);r[t]=n,c((0,lt.Z)((0,lt.Z)({},o),{},{items:r}))},m=[],x=(0,ut.Z)(Nn);try{for(x.s();!(e=x.n()).done;){var g=e.value,j=[];for(var b in g.rows){var y,w=g.rows[b],N=[],k=(0,ut.Z)(w);try{var Z=function(){var e=y.value,t=kn[e];if(!t)return"continue";var n=o.items[e];"radio"===t.type?N.push((0,v.jsx)(yn,{name:e,label:t.label,values:t.values,value:n,oneLine:t.oneLine,onChange:h},e)):"number"===t.type?(t.label&&N.push((0,v.jsx)("label",{htmlFor:e,style:{fontWeight:"inherit"},children:t.label},e+"_label")),N.push((0,v.jsxs)("div",{className:"options-number",children:[(0,v.jsx)(f.Z,{type:"number",min:t.min,max:t.max,value:n,disabled:t.disabled,onChange:function(t){return h(0,e,t.target.value)},className:"input",size:"sm"}),t.postfix&&(0,v.jsx)("span",{style:{marginLeft:"5px",flex:"0 0 auto"},children:t.postfix},e+"_postfix")]},e))):"string"===t.type?N.push((0,v.jsx)(wn,{name:e,label:t.label,postfix:t.postfix,value:n,onChange:h},e)):"checkbox"===t.type&&N.push((0,v.jsx)(l.Z.Check,{id:e,type:"checkbox",label:t.label,name:e,checked:"true"===String(n),disabled:t.disabled,onChange:function(t){return h(0,e,String(t.target.checked))},style:{flex:"0 0 auto",margin:"0px",maxWidth:"100%"}},e))};for(k.s();!(y=k.n()).done;)Z()}catch(I){k.e(I)}finally{k.f()}j.push((0,v.jsx)("div",{className:"options-row",children:N},b))}m.push((0,v.jsx)(Zn,{name:g.tabName,children:j},g.tabName))}}catch(I){x.e(I)}finally{x.f()}return(0,v.jsxs)("div",{className:"options-form",children:[(0,v.jsx)("div",{className:"options-header",style:{cursor:"default"},children:(0,v.jsx)("b",{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})}),m,(0,v.jsxs)("div",{className:"button-row",children:[(0,v.jsx)(ht.Z,{id:"applyOptions",size:"sm",variant:"light",style:{margin:"5px"},className:"button",onClick:function(){t(Ce.save(o.items)),p()},children:"OK"}),(0,v.jsx)(ht.Z,{id:"cancelOptions",size:"sm",variant:"light",style:{margin:"5px",float:"left"},className:"button",onClick:p,children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),(0,v.jsx)(ht.Z,{id:"defaultOptions",size:"sm",variant:"light",style:{margin:"5px",float:"right"},className:"button",onClick:function(){c((0,lt.Z)((0,lt.Z)({},o),{},{items:Object.assign({},Ze.items)}))},children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})]})]})},Cn=function(){return(0,v.jsx)(ct.Z,{children:(0,v.jsxs)(u.Z5,{children:[(0,v.jsx)(u.AW,{path:"/",element:(0,v.jsx)(fn,{})}),(0,v.jsx)(u.AW,{path:"/index.php",element:(0,v.jsx)(fn,{})}),(0,v.jsx)(u.AW,{path:"/topic.php",element:(0,v.jsx)(bn,{})}),(0,v.jsx)(u.AW,{path:"/options.php",element:(0,v.jsx)(In,{})})]})})},Sn=function(){return(0,v.jsxs)("footer",{className:"flex-row navbar-footer",children:[(0,v.jsx)("a",{href:"".concat(re,"/rules.php"),children:"\u041f\u0440\u0430\u0432\u0438\u043b\u0430"}),(0,v.jsx)("span",{className:"separator",children:"|"}),(0,v.jsx)("a",{href:"".concat(re,"/about.php"),children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),(0,v.jsx)("span",{className:"separator",children:"|"}),(0,v.jsxs)("b",{children:[(0,v.jsx)("a",{href:"".concat(re,"/ad.php"),children:"\u0420\u0435\u043a\u043b\u0430\u043c\u0430 \u043d\u0430 \u0441\u0430\u0439\u0442\u0435"})," "]}),(0,v.jsx)("span",{className:"separator",children:"|"}),(0,v.jsx)("a",{href:"".concat(re,"/find.php"),children:"\u041f\u043e\u0438\u0441\u043a"}),(0,v.jsx)("span",{className:"separator",children:"|"}),(0,v.jsx)("a",{rel:"nofollow",href:"".concat(re,"/sections_list.php"),children:"\u0421\u0435\u043a\u0446\u0438\u0438"}),(0,v.jsx)("span",{className:"separator",children:"|"}),(0,v.jsx)("a",{rel:"nofollow",href:"".concat(re,"/rating.php"),children:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"}),(0,v.jsx)("span",{className:"separator",children:"|"}),(0,v.jsx)("a",{href:"http://kb.mista.ru",children:"\u041a\u043d\u0438\u0433\u0430 \u0437\u043d\u0430\u043d\u0438\u0439"}),(0,v.jsx)("span",{className:"separator",children:"|"}),(0,v.jsx)("a",{href:"http://wiki.mista.ru",children:"\u0412\u0438\u043a\u0438-\u043c\u0438\u0441\u0442\u0430 (\u041a\u04172)"}),(0,v.jsx)("span",{className:"separator",children:"|"}),(0,v.jsx)("a",{rel:"nofollow",href:"http://m.mista.ru/",children:"\u041c\u043e\u0431\u0438\u043b\u044c\u043d\u0430\u044f"}),(0,v.jsx)("span",{className:"separator",children:"|"}),(0,v.jsx)("a",{href:"".concat(re,"/archive.php"),children:"\u0410\u0440\u0445\u0438\u0432"}),(0,v.jsx)("span",{className:"separator",children:"|"}),(0,v.jsx)("a",{href:"".concat(re,"/moders.php"),children:"\u041c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440\u044b"}),(0,v.jsx)("span",{className:"separator",children:"|"}),(0,v.jsx)("a",{href:"".concat(re,"/users_gallery.php"),children:"\u0413\u0430\u043b\u0435\u0440\u0435\u044f"}),(0,v.jsx)("span",{className:"separator",children:"|"}),(0,v.jsx)("a",{href:"".concat(re,"/ban_list.php"),children:"\u0411\u0430\u043d\u044b"}),(0,v.jsx)("span",{className:"separator",children:"|"}),(0,v.jsx)("span",{children:"18+"})]})},Tn=n(9962),_n=n.n(Tn),Ln=function(e){var t=e.children,n=e.closeWindow;return(0,v.jsxs)("div",{className:"tooltip-header",children:[t,(0,v.jsxs)("div",{className:"tooltip-close",onClick:n,onTouchEnd:n,children:[(0,v.jsx)("i",{className:"fa fa-angle-right","aria-hidden":"true"}),(0,v.jsx)("i",{className:"fa fa-angle-left","aria-hidden":"true",style:{marginLeft:"-2px"}})]})]})},Mn=function(e){var t=e.children,n=e.onScroll,r=0;return(0,v.jsx)("div",{className:"tooltip-text",onTouchStart:function(e){r=e.nativeEvent.changedTouches[0].clientX},onTouchEnd:function(e){if(n){var t=e.nativeEvent.changedTouches[0].clientX;Math.abs(t-r)>100&&n(-t+r)}},children:t})},Pn=function(e){var t,n,r=e.tooltip,a=e.zIndex,i=e.children,o=it(Oe),c=r.coords;window.innerWidth<=768?(t="y",n={top:c.y,left:5}):(t="both",n={top:c.y,left:Math.min(c.x,window.innerWidth-670)});var l=s.Children.toArray(i),u=(0,d.Z)(l,2),p=u[0],f=u[1];return(0,v.jsx)(_n(),{axis:t,handle:".tooltip-header",defaultClassNameDragging:"dragging",children:(0,v.jsxs)("div",{className:"tooltip-window",style:(0,lt.Z)({},n),children:[(0,v.jsx)(Ln,{closeWindow:function(){o.close(r.keys)},children:p.props.children}),(0,v.jsx)(Mn,{children:f.props.children})]})},a)},On=function(e){var t,n,r,a,i=st((function(e){return e.topic})),o=i.info,c=i.items,l=i.item0,u=e.tooltip.keys,p="";u.topicId===o.id&&(a=0===u.number?l:c.find((function(e){return e.n===u.number})))&&(p=a.text);var f,h=(0,s.useState)({data:a,text:p}),m=(0,d.Z)(h,2),x=m[0],g=m[1];return(0,s.useEffect)((function(){var e=function(){var e=(0,k.Z)((0,N.Z)().mark((function e(){var t,n;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x.data){e.next=2;break}return e.abrupt("return");case 2:return n="",e.prev=3,e.next=6,$(u.topicId,u.number);case 6:t=e.sent,n=t?t.text:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e ".concat(u.number),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),n=e.t0.message;case 13:g({data:t,text:n});case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[u.topicId,u.number,x.data]),x.text?(f=x.data?(0,v.jsx)(un,{data:x.data,isAuthor:!1,isYou:!1,isTooltip:!0}):(0,v.jsx)("b",{children:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"}),(0,v.jsxs)(Pn,{tooltip:e.tooltip,children:[(0,v.jsx)(Ln,{children:f}),(0,v.jsx)(Mn,{children:(0,v.jsx)(ln,{n:null===(t=x.data)||void 0===t?void 0:t.n,vote:null===(n=x.data)||void 0===n?void 0:n.vote,html:x.text,topicId:u.topicId,topicDate:null===(r=x.data)||void 0===r?void 0:r.time,style:{maxHeight:"min(550px, 80vh)",overflowY:"auto"}})})]})):null},Rn=function(){var e=st((function(e){return e.tooltips.items})),t=it(Oe),n=(0,s.useRef)(null);return(0,x.t$)(n,(function(){t.closeAll()})),(0,v.jsx)("div",{ref:n,children:e.map((function(e){return(0,v.jsx)(On,{tooltip:e},e.hash)}))})},En=function(){var e=st((function(e){return e.options.items.theme}));return(0,s.useLayoutEffect)((function(){document.body.setAttribute("data-theme",e)}),[e]),(0,v.jsxs)(i.UT,{children:[(0,v.jsx)(ot,{}),(0,v.jsx)(Cn,{}),(0,v.jsx)(Sn,{}),(0,v.jsx)(Rn,{})]})},Dn=n(6994),Fn=function(e){var t=e.store;return(0,v.jsx)(a.zt,{store:t,children:(0,v.jsx)(Dn.r,{loading:null,persistor:rt,children:(0,v.jsx)(En,{})})})},zn=document.getElementById("root");(0,r.s)(zn).render((0,v.jsx)(Fn,{store:nt}))}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,r,a,s){if(!r){var i=1/0;for(u=0;u<e.length;u++){r=e[u][0],a=e[u][1],s=e[u][2];for(var o=!0,c=0;c<r.length;c++)(!1&s||i>=s)&&Object.keys(n.O).every((function(e){return n.O[e](r[c])}))?r.splice(c--,1):(o=!1,s<i&&(i=s));if(o){e.splice(u--,1);var l=a();void 0!==l&&(t=l)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[r,a,s]}}(),n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&a&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((function(e){i[e]=function(){return r[e]}}));return i.default=function(){return r},n.d(s,i),s}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={179:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,s,i=r[0],o=r[1],c=r[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(c)var u=c(n)}for(t&&t(r);l<i.length;l++)s=i[l],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(u)},r=self.webpackChunkreact_mista=self.webpackChunkreact_mista||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[216],(function(){return n(4737)}));r=n.O(r)}();
//# sourceMappingURL=main.a3643cc9.js.map