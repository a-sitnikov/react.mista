{"version":3,"file":"static/js/main.d85f0bc8.js","mappings":"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","sources":["components/common/search.tsx","utils.ts","api/api-utils.ts","api/cookies.ts","api/login.ts","api/new_message.ts","api/newtopic.ts","api/sections.ts","api/topic_info.ts","api/topic_messages.ts","api/topics_list.ts","api/index.ts","store/slices/login.ts","store/slices/new_topic.ts","store/slices/options.ts","store/slices/sections.ts","store/slices/tooltips.ts","store/slices/topic.ts","store/slices/topics_list.ts","store/slices/new_message.ts","store/root.ts","store/hooks.ts","components/navigation/nav_bar.tsx","components/login/logged_user.tsx","components/login/login_form.tsx","components/common/error.tsx","components/login/index.tsx","pages/topics_list/sections.tsx","pages/topics_list/header.tsx","pages/topics_list/table_header.tsx","pages/topics_list/row/pages.tsx","pages/topics_list/row/topic_name_cell.tsx","pages/topics_list/row/preview_link.tsx","pages/topics_list/row/index.tsx","components/common/pages.tsx","components/common/text_editor.tsx","pages/topics_list/new_topic.tsx","components/preview/preview_buttons.tsx","components/extensions/code_highlight.ts","pages/topic/index.tsx","components/extensions/code1c.tsx","components/extensions/link_to_post.tsx","components/extensions/link_to_user.tsx","components/extensions/youtube_link.tsx","components/extensions/custom_link.tsx","pages/topic/row/vote_item.tsx","pages/topic/row/vote_chart.tsx","pages/topic/row/vote.tsx","pages/topic/row/msg_text.tsx","pages/topic/row/user_info.tsx","components/preview/preview_content.tsx","components/preview/topic_preview.tsx","pages/topics_list/index.tsx","pages/topic/header.tsx","pages/topic/topic_info.tsx","pages/topic/row/index.tsx","pages/topic/footer.tsx","pages/topic/new_message.tsx","pages/options/radio_option.tsx","pages/options/string_option.tsx","pages/options/formscheme.ts","pages/options/tab.tsx","pages/options/index.tsx","pages/approutes.tsx","components/navigation/nav_bar_footer.tsx","components/tooltips/tooltip_header.tsx","components/tooltips/tooltip_body.tsx","components/tooltips/tooltip_window.tsx","components/tooltips/tooltip.tsx","components/tooltips/tooltips_container.tsx","App.tsx","index.tsx","../webpack/bootstrap","../webpack/runtime/chunk loaded","../webpack/runtime/compat get default export","../webpack/runtime/create fake namespace object","../webpack/runtime/define property getters","../webpack/runtime/global","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object","../webpack/runtime/jsonp chunk loading","../webpack/startup"],"sourcesContent":["import { useCallback, useState } from 'react'\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\nimport FormControl from 'react-bootstrap/FormControl'\r\nimport Dropdown from 'react-bootstrap/Dropdown'\r\nimport DropdownButton from 'react-bootstrap/DropdownButton'\r\n\r\nimport './search.css'\r\nimport { useEventCallback } from 'usehooks-ts'\r\n\r\nconst Search = (): React.ReactElement => {\r\n\r\n  const [searchEngine, setSearchEngine] = useState('');\r\n  const [text, setText] = useState('');\r\n\r\n  const handleTextChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setText(e.target.value)\r\n  }, []);\r\n\r\n  const handleKeyDown = useEventCallback((e: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (e.key === 'Enter') {\r\n      doSearch();\r\n    }\r\n  });\r\n\r\n  const doSearch = useEventCallback(() => {\r\n\r\n    let url: string;\r\n    switch (searchEngine) {\r\n      case '': \r\n        url = `https://www.yandex.ru/search/?text=${text}&site=forum.mista.ru`;\r\n        break;\r\n      case 'Google': \r\n        url = `https://www.google.ru/search?q=${text}+site:forum.mista.ru`;\r\n        break;\r\n    }\r\n\r\n    window.open(url);\r\n    setText('');\r\n  });\r\n\r\n  return (\r\n    <InputGroup size=\"sm\">\r\n      <DropdownButton \r\n        id=\"search-engine\" \r\n        title=\"\" \r\n        size=\"sm\" \r\n        variant=\"light\"\r\n        onSelect={setSearchEngine}\r\n        >\r\n        <Dropdown.Item eventKey=\"\"></Dropdown.Item>\r\n        <Dropdown.Item eventKey=\"Google\">Google</Dropdown.Item>\r\n      </DropdownButton>\r\n      <FormControl\r\n        type=\"text\"\r\n        placeholder={`${searchEngine}: `}\r\n        className='search-input input'\r\n        onKeyDown={handleKeyDown}\r\n        onChange={handleTextChange}\r\n        value={text}\r\n      />\r\n      <InputGroup.Text className=\"search-button\" onClick={doSearch}>\r\n        <i className=\"fa fa-search input\" style={{ zIndex: 1000 }} />\r\n      </InputGroup.Text>\r\n    </InputGroup>\r\n  )\r\n\r\n}\r\n\r\nexport default Search;","import dayjs from \"dayjs\";\r\n\r\nexport const groupBy = <T, K extends keyof any>(list: T[], getKey: (item: T) => K) =>\r\n  list.reduce((previous, currentItem) => {\r\n    const group = getKey(currentItem);\r\n    if (!previous[group]) previous[group] = [];\r\n    previous[group].push(currentItem);\r\n    return previous;\r\n  }, {} as Record<K, T[]>)\r\n\r\nexport const parseJSON = (text: string): {} => {\r\n\r\n  try {\r\n    return JSON.parse(text);\r\n  } catch (e) {\r\n\r\n  }\r\n\r\n  try {\r\n    text = text\r\n      .replace(/\\\\</g, '<')\r\n      .replace(/\\\\>/g, '>')\r\n      .replace(/\\\\&/g, '&')\r\n      .replace(/\\\\'/g, \"'\")\r\n      .replace(/\\\\\"/g, \"\")\r\n      .replace(/ \"/g, ' \\\\\"')\r\n      .replace(/\"\"/g, '\\\\\"\"')\r\n      .replace(/\\t/g, '\\\\t')\r\n      .replace(/\"(\\.| |\\?)/g, '\\\\\"$1')\r\n\r\n    //           console.log(text);\r\n    return JSON.parse(text);\r\n\r\n    //return eval(text);\r\n  } catch (e) {\r\n    console.error(e.message);\r\n    console.log(text);\r\n\r\n    return {};\r\n  }\r\n}\r\n\r\nexport const getMaxPage = (count: number): number => {\r\n  if (count === -1) return -1;\r\n  return Math.min(Math.ceil(count / 100), 10) || 1;\r\n}\r\n\r\nexport const childrenToText = (children: any): string[] => {\r\n\r\n  if (!children) return [''];\r\n\r\n  return children.map(value => {\r\n    if (typeof (value) === 'string') {\r\n      return value;\r\n    } else if (value.type === 'br') {\r\n      return '<br>'\r\n    } else if (value.type.displayName === 'Connect(LinkToPost)' || value.type.displayName === 'Connect(t)') {\r\n      return value.props.number;\r\n    } else {\r\n      console.log(value);\r\n      return value;\r\n    }\r\n  })\r\n}\r\n\r\nexport const extractTextFromHTML = (htmltext: string): string => {\r\n  const parser = new DOMParser();\r\n  const floatingElement = parser.parseFromString(htmltext, 'text/html');\r\n  return (floatingElement.firstChild as HTMLElement).innerText;\r\n}\r\n\r\nexport function isToday(td: Date | number): boolean {\r\n  return dayjs(td).isSame(new Date(), 'day');\r\n}\r\n\r\nexport const formattedTime = (time: number): string => {\r\n  \r\n  if (time === 2147483648000) return '';\r\n  \r\n  if (isToday(time)) {\r\n    return dayjs(time).format('HH:mm')\r\n  } else {\r\n    return dayjs(time).format('DD.MM.YY')\r\n  }  \r\n}\r\n","import fetchJsonp from 'fetch-jsonp';\r\nimport * as utils from 'src/utils';\r\nimport { domain } from '.';\r\n\r\n\r\nexport const paramsToString = (paramsPrefix: string, params?: {}): string => {\r\n  if (!params)\r\n    return '';\r\n\r\n  let searchParams = new URLSearchParams();\r\n  for (let key in params) {\r\n    const value = params[key];\r\n    if (value !== undefined)\r\n      searchParams.append(key, value);\r\n  }\r\n\r\n  let str = searchParams.toString();\r\n  if (str.length > 0)\r\n    return paramsPrefix + str;\r\n\r\n  else\r\n    return '';\r\n};\r\n\r\nexport const fetchJsonpAndGetJson = async (url: string, params?: {}, options?: {}): Promise<any> => {\r\n\r\n  let fullUrl = `${domain}/${url}${paramsToString('?', params)}`;\r\n  const response = await fetchJsonp(fullUrl);\r\n  let responseJson = await response.json();\r\n  let json;\r\n  if (typeof (responseJson) === 'string') {\r\n\r\n    try {\r\n      json = JSON.parse(responseJson);\r\n    } catch (e) {\r\n      json = utils.parseJSON(responseJson);\r\n    }\r\n  } else {\r\n    json = responseJson;\r\n  }\r\n  return json;\r\n};\r\n\r\nexport const fetchAndGetJson = async (url: string, params?: {}, init?: RequestInit): Promise<any> => {\r\n\r\n  let fullUrl = `${domain}/${url}${paramsToString('?', params)}`;\r\n\r\n  if (!init)\r\n    init = {\r\n      mode: 'cors',\r\n      credentials: 'same-origin'\r\n    };\r\n\r\n  const response = await fetch(fullUrl, init);\r\n  return await response.json();\r\n\r\n};\r\n","import { urlCookies } from '.'\r\nimport { fetchJsonpAndGetJson } from './api-utils';\r\nimport { ILogin } from 'src/store';\r\n\r\ntype IAPIResponse = {\r\n  cookie: {\r\n    entr_id: string,\r\n    entr_key: string,\r\n    entr_hash: string,\r\n    musthave: string,\r\n    hotlog: string\r\n  },\r\n  session: {\r\n    entered: number,\r\n    user_id: string,\r\n    user_name: string,\r\n    user_hash: string,\r\n    is_moderator: number,\r\n    light_moderator: number,\r\n    section: string,\r\n    show_moderator_tools: number,\r\n    kb: string,\r\n    registered_unixtime: string,\r\n    guid: string,\r\n    last_error?: string,\r\n    user: {\r\n      id: string,\r\n      name: string,\r\n      is_moderator: boolean,\r\n      light_moderator: boolean,\r\n      kb: boolean,\r\n      section_owner: boolean,\r\n      section: string,\r\n      registered_unixtime: string,\r\n      balance: number\r\n    }\r\n  }\r\n}\r\n\r\nfunction convertResponse(response: IAPIResponse): ILogin {\r\n\r\n  const { session } = response;\r\n\r\n  return ({\r\n    userId: Number(session?.user_id),\r\n    userName: session?.user_name,\r\n    userHash: session?.user_hash,\r\n    lastError: session?.last_error\r\n  })\r\n\r\n}\r\n\r\nasync function fetchCookies(): Promise<ILogin| undefined>  {\r\n\r\n  const response = await fetchJsonpAndGetJson(urlCookies);\r\n  return convertResponse(response);\r\n\r\n}\r\n\r\nexport { fetchCookies }","import { domain, urlLogin, urlLogout } from '.'\r\nimport { paramsToString } from './api-utils';\r\n\r\nexport interface ILoginRequest {\r\n  username: string,\r\n  password: string,\r\n}\r\n\r\nexport const fetchLogin = async (params: ILoginRequest): Promise<void> => {\r\n  await fetch(`${domain}/${urlLogin}`, {\r\n    method: 'POST',\r\n    body: paramsToString('', {user_name: params.username, user_password: params.password}),\r\n    mode: 'no-cors',\r\n    credentials: 'include',\r\n    headers: {\r\n      'Accept': 'text/html,application/xhtml+xml,application/xml',\r\n      'Content-Type': 'application/x-www-form-urlencoded',\r\n    },\r\n    redirect: 'follow'\r\n  });\r\n}\r\n\r\nexport const fetchLogout = async (): Promise<void> => {\r\n  const fullUrl = `${domain}/${urlLogout}`;\r\n  await fetch(fullUrl, {\r\n    mode: 'no-cors',\r\n    credentials: 'include'\r\n  });\r\n}","import { domain, urlNewMessage } from \".\";\r\nimport { paramsToString } from './api-utils';\r\n\r\n// New message\r\nexport interface INewMessageRequest {\r\n  message_text: string,\r\n  action: \"new\",\r\n  topic_id: string,\r\n  rnd: number,\r\n  voting_select?: number,\r\n  as_admin?: boolean\r\n}\r\n\r\nexport const fetchNewMessage = async (params: INewMessageRequest): Promise<any> => {\r\n  \r\n  const url = urlNewMessage.replace(':id', params.topic_id);\r\n\r\n  const options: RequestInit = {\r\n    method: 'POST',\r\n    body: paramsToString('', params),\r\n    mode: 'no-cors',\r\n    credentials: 'include',\r\n    headers: {\r\n      'Accept': 'text/html,application/xhtml+xml,application/xml',\r\n      'Content-Type': 'application/x-www-form-urlencoded'  \r\n    },\r\n    redirect: 'follow'\r\n  }\r\n\r\n  const result = await fetch(`${domain}/${url}`, options);\r\n  return result;\r\n}","import { domain, urlNewTopic } from \".\";\r\nimport { paramsToString } from './api-utils';\r\n\r\nexport interface INewTopicRequest {\r\n  action: \"new\",\r\n  rnd: number,\r\n  topic_text: string,\r\n  message_text: string,\r\n  target_section: string,\r\n  target_forum: string,\r\n  voting: number,\r\n  select1?: string,\r\n  select2?: string,\r\n  select3?: string,\r\n  select4?: string,\r\n  select5?: string,\r\n  select6?: string,\r\n  select7?: string,\r\n  select8?: string,\r\n  select9?: string,\r\n  select10?: string\r\n}\r\n\r\nexport const fetchNewTopic = async (params: INewTopicRequest): Promise<any> => {\r\n\r\n  await fetch(`${domain}/${urlNewTopic}`, {\r\n    method: 'POST',\r\n    body: paramsToString('', params),\r\n    mode: 'no-cors',\r\n    credentials: 'include',\r\n    headers: {\r\n      'Content-Type': 'application/x-www-form-urlencoded'\r\n    }\r\n  });\r\n}","import { urlSections } from '.'\r\nimport { fetchJsonpAndGetJson } from './api-utils'\r\nimport type { ISectionItem } from 'src/store'\r\n\r\ninterface IAPIResponse {\r\n  id: number,\r\n  forum: string,\r\n  shortn: string,\r\n  fulln: string\r\n}\r\n\r\nfunction convertResponse(response: IAPIResponse): ISectionItem {\r\n\r\n  return ({\r\n    id: response.id,\r\n    forum: response.forum,\r\n    code: response.shortn,\r\n    name: response.fulln,\r\n  })\r\n\r\n}\r\n\r\nexport const fetchSections = async (): Promise<ISectionItem[]> => {\r\n  const list = await fetchJsonpAndGetJson(urlSections);\r\n  return list.map(convertResponse);\r\n}\r\n","import { urlTopicInfo } from '.'\r\nimport { fetchAndGetJson } from './api-utils';\r\nimport type { ITopicInfo } from 'src/store'\r\n\r\ninterface IAPIResponse {\r\n  id: string,\r\n  text: string,\r\n  forum: string,\r\n  section: string,\r\n  created: string,\r\n  user_id: string,\r\n  user_name: string,\r\n  updated: string,\r\n  updated_name: string,\r\n  answers_count: string,\r\n  down: number,\r\n  closed: number,\r\n  deleted: number,\r\n  is_voting: number,\r\n  voting: {\r\n    select: string,\r\n    result: number\r\n  }[]\r\n}\r\n\r\nfunction convertResponse(response: IAPIResponse): ITopicInfo {\r\n\r\n  let voting = [];\r\n  if (response.voting)\r\n    voting = response.voting.map(x => ({\r\n      text: x.select,\r\n      count: x.result\r\n    }));\r\n    \r\n  return ({\r\n    id: parseInt(response.id),\r\n    title: response.text,\r\n    forum: response.forum,\r\n    sectionId: response.section,\r\n    created: parseInt(response.created) * 1000,\r\n    authorId: response.user_id,\r\n    author: response.user_name,\r\n    updated: parseInt(response.updated) * 1000,\r\n    lastUser: response.updated_name,\r\n    count: parseInt(response.answers_count),\r\n    down: response.down,\r\n    closed: response.closed,\r\n    deleted: response.deleted,\r\n    isVoting: response.is_voting,\r\n    voting\r\n  })\r\n\r\n}\r\n\r\nasync function fetchTopicInfo(id: number): Promise<ITopicInfo> {\r\n\r\n  const info = await fetchAndGetJson(urlTopicInfo, { id });\r\n  return convertResponse(info);\r\n\r\n}\r\n\r\nexport { fetchTopicInfo }","\r\nimport { urlTopicMessages } from '.'\r\nimport { fetchAndGetJson } from './api-utils'\r\nimport type { ITopicMessage, ITopicMessagesList } from 'src/store'\r\n\r\ninterface IAPIRequest {\r\n  id: number,\r\n  from?: number,\r\n  to?: number\r\n}\r\n\r\nexport interface ITopicMessageRequest extends IAPIRequest {}\r\n\r\ninterface IAPIResponse {\r\n  id: string,\r\n  n: string,\r\n  user: string,\r\n  userId: string,\r\n  text: string,\r\n  utime: string,\r\n  vote: number\r\n}  \r\n\r\nfunction convertResponse(response: IAPIResponse): ITopicMessage {\r\n\r\n  return ({\r\n    id: parseInt(response.id),\r\n    n: parseInt(response.n),\r\n    user: response.user,\r\n    userId: parseInt(response.userId),\r\n    text: response.text,\r\n    time: parseInt(response.utime) * 1000,\r\n    vote: response.vote\r\n  })\r\n\r\n}\r\n\r\nasync function fetchTopicMessages(params?: ITopicMessageRequest): Promise<ITopicMessagesList> {\r\n\r\n  const list = await fetchAndGetJson(urlTopicMessages, params);\r\n  return list.map(convertResponse);\r\n\r\n}\r\n\r\nasync function fetchTopicMessage(id: number, n: number): Promise<ITopicMessage> {\r\n\r\n  const to = (n === 0) ? n+1 : n;\r\n\r\n  const list = await fetchAndGetJson(urlTopicMessages, {id, from: n, to});\r\n  return list.map(convertResponse).find((item: ITopicMessage) => item.n === n);\r\n\r\n}\r\n\r\nexport { fetchTopicMessages, fetchTopicMessage }","import { urlTopicsList } from '.'\r\nimport { fetchAndGetJson } from './api-utils'\r\n\r\nimport type { ITopicsList, ITopicsListItem } from 'src/store'\r\n\r\nexport interface ITopicsListRequest {\r\n  itemsPerPage?: number | null,\r\n  page?: number | null,\r\n  beforeTime?: string | null,\r\n  forum?: string | null,\r\n  section?: string | null,\r\n  userId?: string | null,\r\n  myTopics?: string | null\r\n}\r\n\r\ninterface IAPIRequest {\r\n  topics?: string,\r\n  section_short_name?: string,\r\n  forum?: string,\r\n  user_id?: string,\r\n  mytopics?: string\r\n}\r\n\r\ninterface IAPIResponse {\r\n  id: number,\r\n  forum: string,\r\n  sect1: string,\r\n  sect2: string,\r\n  v8: string,\r\n  closed: number,\r\n  down: number,\r\n  paid: number,\r\n  text: string,\r\n  message: string,\r\n  created: number,\r\n  utime: number,\r\n  user: string,\r\n  user0: string,\r\n  is_voting: number,\r\n  answ: number\r\n}\r\n\r\nfunction convertRequest(request: ITopicsListRequest): IAPIRequest {\r\n\r\n  const page = request.page || 1;\r\n  const itemsCount = request.itemsPerPage * page;\r\n\r\n  return {\r\n    topics: String(itemsCount),\r\n    section_short_name: request.section,\r\n    forum: request.forum,\r\n    user_id: request.userId,\r\n    mytopics: request.myTopics,\r\n  }\r\n}\r\n\r\nfunction convertResponse(response: IAPIResponse): ITopicsListItem {\r\n\r\n  return ({\r\n    id: response.id,\r\n    forum: response.forum,\r\n    section: response.sect1,\r\n    sectionCode: response.sect2,\r\n    author: response.user0,\r\n    lastUser: response.user,\r\n    created: response.created * 1000,\r\n    updated: response.utime * 1000,\r\n    count: response.answ,\r\n    text: response.text,\r\n    closed: response.closed === 1,\r\n    down: response.down === 1,\r\n    pinned: response.utime === 2147483648,\r\n    isVoting: response.is_voting === 1,\r\n    showPreview: false\r\n  })\r\n\r\n}\r\n\r\nasync function fetchTopicsList(params?: ITopicsListRequest): Promise<ITopicsList> {\r\n\r\n  const request = convertRequest(params);\r\n\r\n  const list = await fetchAndGetJson(urlTopicsList, request);\r\n  return list.map(convertResponse);\r\n\r\n}\r\n\r\nexport { fetchTopicsList }","export const domain: string = localStorage.getItem('domain') || 'https://dev.mista.ru';\r\n//export const domain = 'https://dev.mista.ru';\r\nexport const urlTopicsList: string = localStorage.getItem('urlTopicsList') || 'api/topic.php';\r\nexport const urlTopicInfo: string = localStorage.getItem('urlTopicInfo') || 'ajax_gettopic.php';\r\nexport const urlTopicMessages: string = localStorage.getItem('urlTopicMessages') || 'api/message.php';\r\nexport const urlLogin: string = localStorage.getItem('urlLogin') || 'users.php?action=do_enter';\r\nexport const urlLogout: string = localStorage.getItem('urlLogout') || 'users.php?action=exit';\r\nexport const urlCookies: string = localStorage.getItem('urlCookies') || 'ajax_cookie.php';\r\nexport const urlSections: string = localStorage.getItem('urlSections') || 'ajax_getsectionslist.php';\r\nexport const urlNewMessage: string = localStorage.getItem('urlNewMessage') || 'topic.php?id=:id&page=1';\r\nexport const urlNewTopic: string = localStorage.getItem('urlNewTopic') || 'index.php';\r\nexport const urlAddBookmark: string = localStorage.getItem('urlAddBookmark') || 'ajax_addbookmark.php';\r\nexport const urlSearch: string = localStorage.getItem('urlSearch') || 'ajax_find.php';\r\n\r\nexport * from './cookies'\r\nexport * from './login'\r\nexport * from './new_message'\r\nexport * from './newtopic'\r\nexport * from './sections'\r\nexport * from './topic_info'\r\nexport * from './topic_messages'\r\nexport * from './topics_list'\r\n","import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit'\r\n\r\nimport { fetchLogin, fetchLogout, ILoginRequest } from 'src/api'\r\nimport { fetchCookies } from 'src/api'\r\n\r\nimport { RootState } from '../types';\r\n\r\nexport interface ILogin {\r\n  userId?: number;\r\n  userName?: string,\r\n  userHash?: string,\r\n  lastError?: string,\r\n}\r\n\r\nexport interface LoginState {\r\n  status: \"init\" | \"loading\" | \"success\" | \"error\",\r\n  logged: boolean,\r\n  userId?: number,\r\n  userName?: string,\r\n  userHash?: string,\r\n  lastError?: string,\r\n  error?: string,\r\n  lastUpdated?: number,\r\n  isFetching?: boolean,\r\n}\r\n\r\nconst initialState: LoginState = {\r\n  status: \"init\",\r\n  logged: false\r\n}\r\n\r\nexport const checkLogin = createAsyncThunk(\r\n  'login/check',\r\n  async () => {\r\n\r\n    return await fetchCookies();\r\n\r\n  }\r\n)\r\n\r\nexport const doLogin = createAsyncThunk(\r\n  'login/login',\r\n  async (params: ILoginRequest, { dispatch }) => {\r\n\r\n    await fetchLogin(params);\r\n    return fetchCookies();\r\n\r\n  }\r\n)\r\n\r\nexport const doLogout = createAsyncThunk(\r\n  'login/logout',\r\n  async () => {\r\n\r\n    return await fetchLogout();\r\n\r\n  }\r\n)\r\n\r\nconst shouldLogin = ({ login }: RootState): boolean => {\r\n \r\n  if (!login) return true;\r\n  if (login.status === \"loading\") return false;\r\n  \r\n  return true;\r\n}\r\n\r\nexport const doLoginIfNeeded = (username: string, password: string): any => (dispatch: any, getState: any) => {\r\n  if (shouldLogin(getState())) {\r\n    return dispatch(doLogin({ username, password }))\r\n  }\r\n}\r\n\r\nexport const checkLoginIfNeeded = (): any => (dispatch: any, getState: any) => {\r\n  if (shouldLogin(getState())) {\r\n    return dispatch(checkLogin())\r\n  }\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'login',\r\n  initialState,\r\n  reducers: {\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(doLogin.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })    \r\n      .addCase(doLogin.fulfilled, (state, { payload }: PayloadAction<ILogin>) => {\r\n        state.status = \"success\";\r\n        state.userId = payload.userId;\r\n        state.userName = payload.userName;\r\n        state.userHash = payload.userHash;\r\n        state.logged = true;\r\n        delete state.error;\r\n      })   \r\n      .addCase(doLogin.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      })   \r\n      // logout\r\n      .addCase(doLogout.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })    \r\n      .addCase(doLogout.fulfilled, (state) => {\r\n        state.status = \"success\";\r\n        state.logged = false;\r\n\r\n        delete state.userId;\r\n        delete state.userName;\r\n        delete state.userHash;\r\n        delete state.error;\r\n      })   \r\n      .addCase(doLogout.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      }) \r\n  }\r\n})  \r\n\r\nexport const { actions: loginActions, reducer: login } = slice;","import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit'\r\n\r\nimport { ISectionItem } from \"./sections\";\r\nimport { fetchNewTopic, INewTopicRequest } from 'src/api';\r\nimport { RootState } from '../types';\r\n\r\nexport type NewTopicState = {\r\n  status: \"init\" | \"loading\" | \"success\" | \"error\",\r\n  section: ISectionItem,\r\n  text: string,\r\n  subject: string,\r\n  forum: string,\r\n  isVoting: boolean,\r\n  error?: string\r\n};\r\n\r\nconst initialState: NewTopicState = {\r\n  status: \"init\",\r\n  section: null,\r\n  text: '',\r\n  subject: '',\r\n  forum: '1C',\r\n  isVoting: false\r\n}\r\n\r\nexport type postNewTopicParams = {\r\n  subject: string,\r\n  text: string,\r\n  section: number,\r\n  forum: string,\r\n  isVoting: boolean,\r\n  votingItems?: Array<string>,\r\n  onSuccess?: () => void\r\n};\r\n\r\nexport const postNewTopic = createAsyncThunk(\r\n  'newTopic/post',\r\n  async (params: postNewTopicParams) => {\r\n\r\n    let fetchParams: INewTopicRequest = {\r\n      message_text: params.text,\r\n      topic_text: params.subject,\r\n      target_section: String(params.section),\r\n      target_forum: params.forum.toLowerCase(),\r\n      action: 'new',\r\n      rnd: Math.round(Math.random() * 10000000000),\r\n      voting: params.isVoting ? 1 : 0\r\n    };\r\n\r\n    if (params.votingItems)\r\n      for (let i = 0; i < params.votingItems.length; i++) {\r\n        fetchParams[`section${i + 1}`] = params.votingItems[i];\r\n      }\r\n\r\n    await fetchNewTopic(fetchParams);\r\n    // if (params.onSuccess)\r\n    // params.onSuccess();\r\n  })\r\n\r\nexport const shouldPost = ({ newTopic }: RootState): boolean => {\r\n\r\n  if (!newTopic) return false\r\n  if (newTopic.status === \"loading\") return false\r\n\r\n  return true\r\n}\r\n\r\nexport const postNewTopicIfNeeded = (params: postNewTopicParams) => (dispatch: any, getState: any) => {\r\n  const state = getState();\r\n  if (shouldPost(state)) {\r\n    return dispatch(postNewTopic(params));\r\n  }\r\n}\r\n\r\nconst clear = (state: NewTopicState) => {\r\n  state.status = \"init\";\r\n  state.text = '';\r\n  state.subject = '';\r\n  state.forum = '';\r\n  state.isVoting = false;\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'newTopic',\r\n  initialState,\r\n  reducers: {\r\n    clear,\r\n    changeSubject: (state, { payload }: PayloadAction<string>) => {\r\n      state.subject = payload;\r\n    },\r\n    changeText: (state, { payload }: PayloadAction<string>) => {\r\n      state.text = payload;\r\n    },\r\n    changeSection: (state, { payload }: PayloadAction<ISectionItem>) => {\r\n      state.section = payload;\r\n      state.forum = payload?.forum.toLowerCase();\r\n    },\r\n    showVoting: (state, { payload }: PayloadAction<boolean>) => {\r\n      state.isVoting = payload;\r\n    },\r\n    setError: (state, { payload }: PayloadAction<string>) => {\r\n      state.error = payload;\r\n    }\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(postNewTopic.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })\r\n      .addCase(postNewTopic.fulfilled, (state) => {\r\n        clear(state);\r\n        delete state.error;\r\n      })\r\n      .addCase(postNewTopic.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      })\r\n  }\r\n});\r\n\r\nexport const { actions: newTopicActions, reducer: newTopic } = slice;","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\r\n\r\nexport interface IOptionsItems {\r\n  theme: 'yellow' | 'lightgray' | 'dark',\r\n  topicsPerPage: string,\r\n  autoRefreshTopicsList: string,\r\n  autoRefreshTopicsListInterval: string,\r\n  autoRefreshTopic: string,\r\n  autoRefreshTopicInterval: string,\r\n  tooltipDelay: string,\r\n  showTooltips: string,\r\n  showTooltipOnPostLink: string,\r\n  showYoutubeVideoTitle: string,\r\n  replaceCatalogMista: string,\r\n  fixBrokenLinks: string\r\n}\r\n\r\nexport interface OptionsState {\r\n  voteColors: Array<string>,\r\n  items: IOptionsItems,\r\n  show?: boolean\r\n};\r\n\r\nexport const defaultOptionsState: OptionsState = {\r\n  voteColors: [\r\n    \"#FF1616\", //1\r\n    \"#1A861A\", //2\r\n    \"#0023FF\", //3\r\n    \"#FF6B18\", //4\r\n    \"#9B3A6E\", //5\r\n    \"#567655\", //6\r\n    \"#233345\", //7\r\n    \"#CC0000\", //8\r\n    \"#00CCCC\", //9\r\n    \"#0000CC\", //10\r\n  ],\r\n  items: {\r\n    theme: 'lightgray',\r\n    topicsPerPage: '20',\r\n    autoRefreshTopicsList: 'false',\r\n    autoRefreshTopicsListInterval: '60',\r\n    autoRefreshTopic: 'true',\r\n    autoRefreshTopicInterval: '60',\r\n    //tooltips\r\n    showTooltips: 'true',\r\n    tooltipDelay: '500',\r\n    showTooltipOnPostLink: 'true',\r\n    //links\r\n    showYoutubeVideoTitle: 'true',\r\n    replaceCatalogMista: 'true',\r\n    fixBrokenLinks: 'true',\r\n  }\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'options',\r\n  initialState: defaultOptionsState,\r\n  reducers: {\r\n    save: (state, { payload }: PayloadAction<IOptionsItems>) => {\r\n      for (let key in payload) {\r\n        const value = String(payload[key]); \r\n        state.items[key] = value;\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nexport const { actions: optionsActions, reducer: options } = slice;","import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\r\n\r\nimport { groupBy } from 'src/utils'\r\n\r\nimport { fetchSections } from 'src/api'\r\nimport { RootState } from '../types';\r\n\r\nexport interface ISectionItem {\r\n  id: number;\r\n  forum: string,\r\n  code: string,\r\n  name: string,\r\n}\r\n\r\nexport interface ISectionsTree{\r\n  [key: string]: ISectionItem[]\r\n}\r\n\r\nexport interface SectionsState {\r\n  status: \"init\" | \"loading\" | \"success\" | \"error\";\r\n  items: ISectionItem[],\r\n  tree?: ISectionsTree,\r\n  error?: string,\r\n  lastUpdated?: number\r\n}\r\n\r\nconst initialState: SectionsState = {\r\n  status: \"init\",\r\n  items: [],\r\n  tree: {}\r\n}\r\n\r\nexport const getSections = createAsyncThunk(\r\n  'sections/fetch',\r\n  async () => {\r\n    return await fetchSections();\r\n  }\r\n)\r\n\r\nconst shouldGetSections = ({ sections }: RootState): boolean => {\r\n\r\n  if (!sections) return true\r\n  if (sections.status === \"loading\") return false\r\n  if (sections.items.length > 0) return false;\r\n\r\n  return true;\r\n}\r\n\r\nexport const getSectionsIfNeeded = (): any => (dispatch: any, getState: any) => {\r\n  if (shouldGetSections(getState())) {\r\n    return dispatch(getSections());\r\n  }\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'sections',\r\n  initialState,\r\n  reducers: {\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(getSections.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;        \r\n      })\r\n      .addCase(getSections.fulfilled, (state, { payload }) => {\r\n        state.status = \"success\";\r\n        state.items = payload;\r\n        state.tree = groupBy(state.items, item => item.forum);\r\n        delete state.error;        \r\n      })\r\n      .addCase(getSections.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error  = error?.message;\r\n      })      \r\n  }\r\n});\r\n\r\nexport const { actions: sectionsActions, reducer: sections } = slice;","import { createSlice } from '@reduxjs/toolkit'\r\nimport type { PayloadAction } from '@reduxjs/toolkit'\r\n\r\nexport interface ITooltipKeys {\r\n  topicId: number,\r\n  number: number\r\n}\r\n\r\nexport interface ICoords {\r\n  x: number,\r\n  y: number\r\n}\r\n\r\nexport interface ITooltipItem {\r\n  hash: string,\r\n  keys: ITooltipKeys,\r\n  coords: ICoords,\r\n  zIndex: number\r\n}\r\n\r\nexport interface ITooltipsList extends Array<ITooltipItem> {}\r\n\r\nexport interface TooltipsState {\r\n  items: ITooltipsList,\r\n}\r\n\r\nconst initialState: TooltipsState = {\r\n  items: []\r\n}\r\n\r\nconst show = (state: TooltipsState, { payload }: PayloadAction<{ keys: ITooltipKeys; coords: ICoords}>) => {\r\n  const hash = JSON.stringify(payload.keys);\r\n  const index = state.items.findIndex(item => item.hash === hash);\r\n  let zIndex = 0;\r\n  if (state.items.length)\r\n    zIndex = state.items[state.items.length - 1].zIndex + 1;\r\n  if (index === - 1)\r\n    state.items.push({\r\n      keys: payload.keys,\r\n      coords: payload.coords,\r\n      hash,\r\n      zIndex \r\n    })\r\n  else {\r\n    //state.list = moveToEnd(state.list, index);\r\n    state.items[state.items.length - 1].zIndex = zIndex;\r\n  }\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'tooltips',\r\n  initialState,\r\n  reducers: {\r\n    show,\r\n    close: (state, { payload }: PayloadAction<ITooltipKeys>) => {\r\n      const hash = JSON.stringify(payload);\r\n      state.items = state.items.filter(val => val.hash !== hash); \r\n    },\r\n    closeAll: (state) => {\r\n      state.items = [];\r\n    } \r\n  }\r\n});\r\n\r\nexport const { actions: tooltipsActions, reducer: tooltips } = slice;\r\n","import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\r\n\r\nimport { fetchTopicMessage, fetchTopicMessages, fetchTopicInfo } from 'src/api'\r\nimport { RootState } from '../types';\r\n\r\nexport interface IVotingItem {\r\n  text: string,\r\n  count: number\r\n}\r\n\r\nexport interface ITopicInfo {\r\n    id: number,\r\n    title: string,\r\n    forum?: string,\r\n    sectionId?: string,\r\n    created?: number,\r\n    authorId?: string,\r\n    author?: string,\r\n    updated?: number,\r\n    lastUser?: string,\r\n    count?: number,\r\n    down?: number,\r\n    closed?: number,\r\n    deleted?: number,\r\n    isVoting?: number,\r\n    voting?: IVotingItem[]\r\n  }\r\n\r\nexport interface ITopicMessage {\r\n  id: number,\r\n  n: number,\r\n  user: string,\r\n  userId: number,\r\n  text: string,\r\n  time: number,\r\n  vote: number\r\n}\r\n\r\nexport interface ITopicMessagesList extends Array<ITopicMessage> {}\r\n\r\nexport interface TopicState {\r\n  status?: \"init\" | \"loading\" | \"success\" | \"error\",\r\n  items: ITopicMessagesList,\r\n  item0?: ITopicMessage,\r\n  info?: ITopicInfo,\r\n  error?: string,\r\n  lastUpdated?: number\r\n}\r\n\r\nexport const defaultInfo: ITopicInfo = {\r\n  id: 0,\r\n  title: \"\",\r\n  count: -1\r\n}\r\n\r\nconst initialState: TopicState = {\r\n  status: \"init\",\r\n  items: [],\r\n  info: defaultInfo\r\n}\r\n\r\nexport const getTopic = createAsyncThunk(\r\n  'topics/fetch',\r\n  async ({ topicId, page, item0 }: { \r\n      topicId: number, \r\n      page: number | string, \r\n      item0: ITopicMessage \r\n    }, { rejectWithValue }) => {\r\n\r\n    let info: ITopicInfo;\r\n    try {\r\n      info = await fetchTopicInfo(topicId);\r\n    } catch (e) {\r\n      console.error(e);\r\n      info = {\r\n        id: topicId,\r\n        title: '',\r\n        count: -1\r\n      };\r\n    }\r\n\r\n    try {\r\n      let _item0 = item0;\r\n      let _items;\r\n      if (page === 'last20') {\r\n\r\n        if (info.count > 21) {\r\n\r\n          if (!_item0) {\r\n            _item0 = await fetchTopicMessage(topicId, 0);\r\n          }\r\n\r\n          let first = info.count - 20;\r\n          _items = await fetchTopicMessages({\r\n            id: topicId,\r\n            from: first,\r\n            to: 1010\r\n          });\r\n\r\n        } else {\r\n          let items = await fetchTopicMessages({\r\n            id: topicId,\r\n            from: 0,\r\n            to: 1010\r\n          });\r\n          _item0 = items[0];\r\n          _items = items.slice(1);\r\n        }\r\n\r\n      } else {\r\n\r\n        page = +page;\r\n        let first = 0;\r\n        let last = page * 100 - 1;\r\n\r\n        if (page > 1) {\r\n\r\n          first = (page - 1) * 100;\r\n          if (!_item0) {\r\n            _item0 = await fetchTopicMessage(topicId, 0);\r\n          }\r\n\r\n          _items = await fetchTopicMessages({\r\n            id: topicId,\r\n            from: first,\r\n            to: last\r\n          });\r\n\r\n        } else {\r\n          if (_item0)\r\n            first = 1;\r\n          else\r\n            first = 0;\r\n\r\n          let items = await fetchTopicMessages({\r\n            id: topicId,\r\n            from: first,\r\n            to: last\r\n          });\r\n\r\n          if (_item0) {\r\n            _items = items;\r\n          } else {\r\n            _item0 = items[0];\r\n            _items = items.slice(1);\r\n          }\r\n        }\r\n\r\n      }\r\n\r\n      if (info.count === 0 && _items.length > 0)\r\n        info.count = _items[_items.length - 1].n;\r\n\r\n      if (page === 'last20' && _items.length > 20) {\r\n        _items = _items.slice(-20);\r\n      }\r\n\r\n      return {\r\n        info,\r\n        item0: _item0,\r\n        list: _items\r\n      }\r\n\r\n    } catch (error) {\r\n\r\n      console.error('Failed to fetch topic:', error);\r\n      rejectWithValue(error);\r\n\r\n    }\r\n  }\r\n)\r\n\r\nexport const getNewMessages = createAsyncThunk(\r\n  'topic/getNewMessages',\r\n  async ({ id, count }:  {\r\n      id: number, \r\n      count: number\r\n    }) => {\r\n\r\n    return await fetchTopicMessages({\r\n      id: id,\r\n      from: count + 1,\r\n      to: 1050\r\n    });\r\n\r\n  }\r\n)\r\n\r\nconst shouldFetch = ({ topic } : RootState) => {\r\n  \r\n  if (!topic) return true;\r\n  if (topic.status === \"loading\") return false;\r\n  \r\n  return true\r\n}\r\n\r\nexport const getTopicIfNeeded = (topicId: number, page: number |string): any => (dispatch: any, getState: any) => {\r\n \r\n  const state = getState();\r\n  if (shouldFetch(state)) {\r\n    let item0: ITopicMessage = null;\r\n    if (topicId === state.topic.info.id)\r\n      item0 = state.topic.item0;  \r\n    return dispatch(getTopic({ topicId, page, item0 }));\r\n  }\r\n}\r\n\r\nexport const getNewMessagesIfNeeded = () => (dispatch: any, getState: any) => {\r\n  const state = getState();\r\n  const { id, count } = state.topic.info;\r\n  if (shouldFetch(state)) {\r\n    return dispatch(getNewMessages({ id, count }));\r\n  }\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'topic',\r\n  initialState,\r\n  reducers: {\r\n    clear: (state) => {\r\n      state.info = initialState.info;\r\n      state.item0 = initialState.item0;\r\n      state.items = initialState.items;\r\n      state.status = initialState.status;\r\n      delete state.error;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(getTopic.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })\r\n      .addCase(getTopic.fulfilled, (state, { payload }) => {\r\n        state.status = \"success\";\r\n        state.items = payload.list;\r\n        state.item0 = payload.item0;\r\n        state.info = payload.info;\r\n\r\n        delete state.error;\r\n      })\r\n      .addCase(getTopic.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      })\r\n      // getNewMessages\r\n      .addCase(getNewMessages.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })\r\n      .addCase(getNewMessages.fulfilled, (state, { payload }) => {\r\n        state.status = \"success\";\r\n        if (payload.length > 0) {\r\n          state.items = state.items.concat(payload);\r\n          state.info.count = state.items[state.items.length - 1].n;\r\n        }\r\n\r\n        delete state.error;\r\n      })\r\n      .addCase(getNewMessages.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      })\r\n  }\r\n})\r\n\r\nexport const { actions: topicActions, reducer: topic } = slice;\r\n","import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\r\n\r\nimport { ITopicsListRequest, fetchTopicsList } from 'src/api'\r\nimport { domain, urlTopicsList } from 'src/api';\r\nimport { RootState } from '../types';\r\n\r\nexport interface ITopicsListItem {\r\n  id: number,\r\n  author: string,\r\n  lastUser: string,\r\n  forum: string,\r\n  sectionCode: string,\r\n  section: string,\r\n  count: number,\r\n  text: string,\r\n  created: number,\r\n  updated: number,\r\n  closed: boolean,\r\n  down: boolean,\r\n  pinned: boolean\r\n  isVoting: boolean,\r\n  showPreview: boolean,\r\n  previewMsgNumber?: number\r\n}\r\n\r\nexport interface ITopicsList extends Array<ITopicsListItem> { }\r\n\r\nexport interface TopicsListState {\r\n  status: \"init\" | \"loading\" | \"success\" | \"error\",\r\n  items: ITopicsList,\r\n  error?: string,\r\n  lastUpdated?: number\r\n}\r\n\r\nconst initialState: TopicsListState = {\r\n  status: \"init\",\r\n  items: []\r\n}\r\n\r\nexport const getTopicsList = createAsyncThunk(\r\n  'topicsList/fetch',\r\n  async (params: ITopicsListRequest, { getState }) => {\r\n\r\n    const state = getState() as RootState;\r\n\r\n    let itemsPerPage = +state.options.items.topicsPerPage;\r\n    if (itemsPerPage > 99) itemsPerPage = 99;\r\n    params.itemsPerPage = itemsPerPage;\r\n\r\n    const json = await fetchTopicsList(params);\r\n    return json.slice(-itemsPerPage);\r\n\r\n  }\r\n)\r\n\r\nconst shouldFetch = ({ topicsList }: RootState) => {\r\n  \r\n  if (!topicsList) return true\r\n  if (topicsList.status === \"loading\") return false\r\n  \r\n  return true\r\n}\r\n\r\nexport const getTopicsListIfNeeded = (params: ITopicsListRequest): any => (dispatch: any, getState: any) => {\r\n  if (shouldFetch(getState())) {\r\n    return dispatch(getTopicsList(params));\r\n  }\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'topicsList',\r\n  initialState,\r\n  reducers: {\r\n    clear: (state) => {\r\n      state.items = [];\r\n      state.status = \"init\"; \r\n    },\r\n    togglePreview: (state, { payload }) => {\r\n      const item = state.items.find(item => item.id === payload.topicId); \r\n      item.showPreview = !item.showPreview; \r\n      item.previewMsgNumber = payload.msgNumber;\r\n    }\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(getTopicsList.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })\r\n      .addCase(getTopicsList.fulfilled, (state, { payload }) => {\r\n        state.status = \"success\";\r\n        state.items = payload;\r\n\r\n        delete state.error;\r\n      })\r\n      .addCase(getTopicsList.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = `${error?.message} ${domain}/${urlTopicsList}`;\r\n      })\r\n  }\r\n})\r\n\r\nexport const { actions: topicsListActions, reducer: topicsList } = slice;\r\n","import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit'\r\nimport { INewMessageRequest, fetchNewMessage } from 'src/api';\r\n\r\nexport type NewMessageState = {\r\n  status: \"init\" | \"loading\" | \"success\" | \"error\",\r\n  text: string,\r\n  error?: string\r\n};\r\n\r\nconst initialState: NewMessageState = {\r\n  status: \"init\",\r\n  text: ''\r\n}\r\n\r\nexport type PostNewmessageParams = {\r\n  text: string,\r\n  topicId: string,\r\n  voting_select?: number,\r\n  onSuccess?: () => void\r\n}\r\n\r\nexport const postNewMessage = createAsyncThunk(\r\n  'newMessage/post',\r\n  async (params: PostNewmessageParams) => {\r\n    let fetchParams: INewMessageRequest = {\r\n      message_text: params.text,\r\n      action: \"new\",\r\n      topic_id: params.topicId,\r\n      rnd: Math.round(Math.random() * 10000000000)\r\n    };\r\n\r\n    if (params.voting_select)\r\n      fetchParams.voting_select = params.voting_select;\r\n\r\n    await fetchNewMessage(fetchParams);\r\n\r\n    // if (params.onSuccess)\r\n    //   params.onSuccess();\r\n  })\r\n\r\nconst slice = createSlice({\r\n  name: 'newMessage',\r\n  initialState,\r\n  reducers: {\r\n    changeText: (state, { payload }: PayloadAction<string>) => {\r\n      state.text = payload;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(postNewMessage.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })\r\n      .addCase(postNewMessage.fulfilled, (state) => {\r\n        state.text = '';\r\n        delete state.error;\r\n      })\r\n      .addCase(postNewMessage.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      })\r\n  }\r\n});\r\n\r\nexport const { actions: newMessageActions, reducer: newMessage } = slice;","import { combineReducers, configureStore  } from '@reduxjs/toolkit'\r\nimport { persistStore, persistReducer, FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER } from 'redux-persist'\r\nimport storage from 'redux-persist/lib/storage'\r\n\r\nimport { topicsList, topic, sections, options, login, tooltips, newTopic, newMessage } from './slices'\r\n\r\n\r\nconst persistConfig = {\r\n  key: 'options',\r\n  storage,\r\n}\r\n\r\nexport const reducer = combineReducers({\r\n  topicsList,\r\n  topic,\r\n  sections,\r\n  options: persistReducer(persistConfig, options),\r\n  login,\r\n  tooltips,\r\n  newTopic,\r\n  newMessage\r\n});\r\n\r\nexport const store = configureStore({\r\n  reducer,\r\n  middleware: (getDefaultMiddleware) =>\r\n    getDefaultMiddleware({\r\n      serializableCheck: {\r\n        ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\r\n      },\r\n    }),\r\n  devTools: process.env.NODE_ENV !== 'production'\r\n})\r\n\r\nexport const persistor = persistStore(store);\r\n","import { useMemo } from \"react\";\r\nimport { ActionCreatorsMapObject, bindActionCreators } from \"@reduxjs/toolkit\";\r\nimport { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\r\nimport { AppDispatch, RootState } from \"./types\";\r\n\r\nexport const useAppDispatch =  () => useDispatch<AppDispatch>();\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n\r\nexport const useActionCreators = (actions: ActionCreatorsMapObject) => {\r\n  const dispatch = useAppDispatch();\r\n  return useMemo(() => bindActionCreators(actions, dispatch), [actions, dispatch]);\r\n};","import { ReactElement } from 'react';\r\nimport { useDispatch } from 'react-redux'\r\n\r\nimport Navbar from 'react-bootstrap/Navbar'\r\nimport Nav from 'react-bootstrap/Nav'\r\nimport Form from 'react-bootstrap/Form'\r\nimport { Link, useLocation } from \"react-router-dom\";\r\n\r\nimport Search from 'src/components/common/search'\r\nimport { getTopicsListIfNeeded } from 'src/store'\r\n\r\nimport './nav_bar.css'\r\n\r\nconst NavBar = (): ReactElement => {\r\n\r\n  const location = useLocation();\r\n  const dispatch = useDispatch();\r\n\r\n  const locationParams = new URLSearchParams(location.search);\r\n  const forum = locationParams.get('forum');\r\n\r\n  const onClick = () => {\r\n    dispatch(getTopicsListIfNeeded({}));\r\n  }\r\n\r\n  const internalLinks = [\r\n    { name: '1C', link: `/index.php?forum=1C` },\r\n    { name: 'IT', link: `/index.php?forum=IT` },\r\n    { name: 'JOB', link: `/index.php?forum=JOB` },\r\n    { name: 'LIFE', link: `/index.php?forum=LIFE` },\r\n    { name: '', link: '/options.php' },    \r\n  ];\r\n\r\n  const externalLinks = [\r\n    { name: 'Wiki', link: 'https://wiki.mista.ru' },\r\n    { name: ' ', link: 'https://kb.mista.ru' },\r\n  ];\r\n\r\n  return (\r\n    <Navbar bg=\"dark\" variant=\"dark\" expand=\"md\" fixed=\"top\">\r\n      <Navbar.Brand\r\n        as={Link}\r\n        to={`/`}\r\n        onClick={onClick}>\r\n        React.Mista\r\n      </Navbar.Brand>\r\n      <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n      <Navbar.Collapse>\r\n        <Nav className=\"me-auto\">\r\n          {internalLinks.map((item, i) =>\r\n            <Nav.Item key={'i'+ i}>\r\n              <Nav.Link to={item.link} active={item.name === forum} as={Link}>\r\n                {item.name}\r\n              </Nav.Link>\r\n            </Nav.Item>\r\n          )}\r\n          {externalLinks.map((item, i) =>\r\n            <Nav.Item key={'e'+ i}>\r\n              <Nav.Link href={item.link}>\r\n                {item.name}\r\n              </Nav.Link>\r\n            </Nav.Item>\r\n          )}          \r\n        </Nav>\r\n        <Form className=\"d-flex\">\r\n          <Search />\r\n        </Form>\r\n      </Navbar.Collapse>\r\n    </Navbar>\r\n  )\r\n}\r\n\r\nexport default NavBar;","import React, { FC, ReactElement } from 'react'\r\nimport { Dropdown } from 'react-bootstrap'\r\n\r\nimport { loginActions, useActionCreators } from 'src/store'\r\nimport { domain } from 'src/api'\r\n\r\ntype IProps = {\r\n  userId: number,\r\n  userName: string\r\n}\r\n\r\ntype HTMLProps = React.HTMLProps<HTMLSpanElement>\r\nconst CustomToggle = React.forwardRef<HTMLSpanElement, HTMLProps>(({ children, onClick }, ref) => (\r\n  <span\r\n    ref={ref}\r\n    style={{ cursor: \"pointer\" }}\r\n    className='link'\r\n    onClick={(e) => {\r\n      e.preventDefault();\r\n      onClick(e);\r\n    }}\r\n  >\r\n    {children}\r\n  </span>\r\n));\r\n\r\nconst LoggedUser: FC<IProps> = ({ userId, userName }): ReactElement => {\r\n\r\n  const actions = useActionCreators(loginActions);\r\n\r\n  const onLogout = (event: React.SyntheticEvent) => {\r\n    event.preventDefault();\r\n    actions.doLogout()\r\n  }\r\n\r\n  const onMenuSelect = (eventKey: string, event: React.SyntheticEvent): void => {\r\n    if (eventKey === 'exit') {\r\n      onLogout(event);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div style={{ float: \"left\" }}>\r\n      <Dropdown id=\"dropdown-custom-menu\" onSelect={onMenuSelect}>\r\n        <span>, </span>\r\n        <Dropdown.Toggle as={CustomToggle}>{userName} </Dropdown.Toggle>\r\n        <Dropdown.Menu>\r\n          <Dropdown.Item eventKey=\"profile\" href={`${domain}/users.php?id=${userId}`}></Dropdown.Item>\r\n          <Dropdown.Item eventKey=\"myTopics\" href={`#/index.php?user_id=${userId}`}> </Dropdown.Item>\r\n          <Dropdown.Divider />\r\n          <Dropdown.Item eventKey=\"options\" href={`#/options.php`}></Dropdown.Item>\r\n          <Dropdown.Divider />\r\n          <Dropdown.Item eventKey=\"exit\"></Dropdown.Item>\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LoggedUser;","import { FormEvent, ReactElement, useState } from 'react'\r\nimport { FormControl, Button } from 'react-bootstrap'\r\n\r\nimport { useAppDispatch } from 'src/store'\r\nimport { doLoginIfNeeded } from 'src/store'\r\n\r\nconst LoginForm = (): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  const onLogin = (event: FormEvent) => {\r\n    event.preventDefault();\r\n    dispatch(doLoginIfNeeded(username, password));\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <form name=\"enterform\" className=\"flex-row\" style={{ flexWrap: \"wrap\" }}>\r\n        <FormControl\r\n          id=\"username\"\r\n          type=\"text\"\r\n          placeholder=\"\"\r\n          value={username}\r\n          onChange={e => setUsername(e.target.value)}\r\n          size=\"sm\"\r\n          className='input'\r\n          style={{ marginRight: \"5px\", flex: \"0 1 300px\" }}\r\n        />\r\n        <FormControl\r\n          id=\"password\"\r\n          type=\"password\"\r\n          placeholder=\"\"\r\n          maxLength={20}\r\n          autoComplete=\"off\"\r\n          value={password}\r\n          onChange={e => setPassword(e.target.value)}\r\n          size=\"sm\"\r\n          className='input'\r\n          style={{ marginRight: \"5px\", flex: \"0 1 300px\" }}\r\n        />\r\n        <Button\r\n          size=\"sm\"\r\n          variant=\"light\"\r\n          className='button'\r\n          onClick={onLogin}\r\n        ></Button>\r\n      </form>\r\n      <p style={{ margin: \"0px\" }}>    <a href=\"https://forum.mista.ru/\">forum.mista.ru</a></p>\r\n      <a rel=\"nofollow\" href=\"https://forum.mista.ru/user_registration.php\"></a>\r\n      <span style={{ margin: \"5px\" }}>|</span>\r\n      <a rel=\"nofollow\" href=\"https://forum.mista.ru/remember_password.php\"> ?</a>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default LoginForm;","import { FC, ReactElement } from 'react'\r\n\r\nimport './error.css'\r\n\r\ntype IProps = {\r\n  text: string\r\n}\r\n\r\nconst ErrorElem: FC<IProps> = ({ text }): ReactElement | null => {\r\n  if (!text)\r\n    return null;\r\n\r\n  return (\r\n    <div className=\"error\" dangerouslySetInnerHTML={{ __html: text }}></div>\r\n  )\r\n}\r\n\r\nexport default ErrorElem;","import { ReactElement, useEffect } from 'react'\r\nimport LoggedUser from './logged_user'\r\nimport LoginForm from './login_form'\r\nimport ErrorElem from '../common/error'\r\n\r\nimport { useAppDispatch, useAppSelector } from 'src/store'\r\nimport { checkLoginIfNeeded } from 'src/store'\r\n\r\nconst Login = (): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n  const logged = useAppSelector(state => state.login.logged);\r\n  const userId = useAppSelector(state => state.login.userId);\r\n  const userName = useAppSelector(state => state.login.userName);\r\n  const error = useAppSelector(state => state.login.error);\r\n\r\n  useEffect(() => {\r\n    dispatch(checkLoginIfNeeded());\r\n  }, [dispatch]);\r\n\r\n  let elem: ReactElement;\r\n  if (logged === true)\r\n    elem = <LoggedUser userId={userId} userName={userName} />\r\n  else if (logged === false)\r\n    elem = <LoginForm />\r\n  else\r\n    elem = null;\r\n\r\n  return (\r\n    <>\r\n      {elem}\r\n      {error && <ErrorElem text={error} />}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Login;","import { FC, ReactElement, useEffect } from 'react'\r\nimport CSS from 'csstype'\r\nimport Form from 'react-bootstrap/Form'\r\n\r\nimport { useAppDispatch, useAppSelector } from 'src/store'\r\nimport { getSectionsIfNeeded, ISectionItem } from 'src/store'\r\n\r\nexport type IProps = {\r\n  id: string,\r\n  defaultValue: string,\r\n  selected?: string,\r\n  style?: CSS.Properties,\r\n  size?: 'sm' | 'lg',\r\n  onChange?: (e: React.ChangeEvent<HTMLElement>, value: ISectionItem) => void\r\n}\r\n\r\nconst Sections: FC<IProps> = (props): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n  const items = useAppSelector(state => state.sections.items);\r\n  const tree = useAppSelector(state => state.sections.tree);\r\n\r\n  useEffect(() => {\r\n    dispatch(getSectionsIfNeeded());\r\n  }, [dispatch]);\r\n\r\n  const onSelect = (e: React.ChangeEvent<HTMLSelectElement>): void => {\r\n\r\n    const { onChange } = props;\r\n\r\n    if (onChange) {\r\n      const code = e.currentTarget.value;\r\n      const arr = items.filter(item => item.code === code);\r\n      if (arr.length > 0)\r\n        onChange(e, arr[0]);\r\n      else\r\n        onChange(e, null);\r\n    }\r\n  }\r\n\r\n  let sectionsElem = [];\r\n  for (let forum in tree) {\r\n\r\n    let group =\r\n      <optgroup key={forum} label={forum}>\r\n        {tree[forum].map((item) => (\r\n          <option key={item.id} value={item.code}>\r\n            {item.name}\r\n          </option>\r\n        ))}\r\n      </optgroup>\r\n\r\n    sectionsElem.push(group);\r\n  }\r\n  \r\n  const { id, defaultValue, selected, style, size } = props;\r\n\r\n  return (\r\n    <Form.Select\r\n      aria-label=\"\"\r\n      onChange={onSelect}\r\n      value={selected}\r\n      style={style}\r\n      className='input'\r\n      size={size}\r\n      id={id}\r\n    >\r\n      <option value=\"\">{defaultValue}</option>\r\n      {sectionsElem}\r\n    </Form.Select>\r\n  )\r\n}\r\n\r\nexport default Sections;","import { ReactElement, useEffect } from 'react'\r\nimport { useLocation, useNavigate } from 'react-router-dom'\r\nimport { useDispatch } from 'react-redux'\r\nimport queryString from 'query-string'\r\n\r\nimport Login from '../../components/login'\r\nimport Sections from './sections'\r\nimport { ISectionItem, getSectionsIfNeeded } from 'src/store'\r\n\r\nconst Header = (): ReactElement => {\r\n\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const params = queryString.parse(location.search);\r\n\r\n  useEffect(() => {\r\n    dispatch(getSectionsIfNeeded());\r\n  }, [dispatch]);  \r\n\r\n  const onSectionChange = (e, value: ISectionItem) => {\r\n    if (value)\r\n      navigate(`/index.php?section=${value.code}`);\r\n    else\r\n      navigate(`/`);\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex-row\">\r\n      <div className=\"header-left\">\r\n        <Login />\r\n      </div>\r\n      <div className=\"header-right\">\r\n        <Sections\r\n          id=\"sect\"\r\n          defaultValue=\"-- --\"\r\n          selected={String(params.section) || \"\"}\r\n          onChange={onSectionChange}\r\n          size=\"sm\"\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default Header;","import { FC } from 'react'\r\n\r\ntype IProps = {\r\n  onUpdateClick: (e: React.MouseEvent) => void,\r\n  isLoading: boolean\r\n}\r\n\r\nconst TableHeader: FC<IProps> = ({ isLoading, onUpdateClick }): React.ReactElement => {\r\n\r\n  return (\r\n    <div className=\"th\" style={{ position: \"sticky\", top: \"39px\" }}>\r\n      <div style={{ letterSpacing: \"-1px\" }}></div>\r\n      <div></div>\r\n      <div></div>\r\n      <div>Re</div>\r\n      <div></div>\r\n      <div><span style={{ cursor: \"pointer\" }} title=\" \" onClick={onUpdateClick}>{isLoading ? \"\" : \"\"}</span></div>\r\n    </div>\r\n  )  \r\n}\r\n\r\nexport default TableHeader;","import { FC, ReactElement } from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { getMaxPage } from 'src/utils'\r\n\r\ntype IProps = {\r\n  count: number,\r\n  topicId: number\r\n}\r\n\r\nconst Pages: FC<IProps> = ({ count, topicId }): ReactElement => {\r\n\r\n  let pages = [];\r\n  if (count > 100) {\r\n    let maxPage = getMaxPage(count);\r\n    for (let i = 1; i <= maxPage; i++) {\r\n      let href = `/topic.php?id=${topicId}&page=${i}`;\r\n      let text: string;\r\n      if (i > 3 && i < maxPage)\r\n        text = '';\r\n      else\r\n        text = String(i);\r\n      pages.push(<Link key={i} className=\"agh\" style={{ margin: \"3px\" }} to={href}>{text}</Link>);\r\n    }\r\n  }\r\n\r\n  if (count > 20) {\r\n    let href = `/topic.php?id=${topicId}&page=last20#F`;\r\n    pages.push(<Link key=\"last20\" className=\"agh\" style={{ margin: \"3px\" }} to={href}></Link>);\r\n  }\r\n\r\n  return (\r\n    <span className=\"topic-pages\">\r\n      {pages}\r\n    </span>\r\n  )\r\n}\r\n\r\nexport default Pages;","import { FC, ReactElement } from \"react\";\r\nimport classNames from \"classnames\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport Pages from \"./pages\";\r\nimport { useAppSelector } from \"src/store\";\r\n\r\ntype IProps = {\r\n  id: number;\r\n  count: number;\r\n  author: string;\r\n  pinned: boolean;\r\n  forum: string;\r\n  sectionCode: string;\r\n  section: string;\r\n  text: string;\r\n  isVoting: boolean;\r\n  closed: boolean;\r\n  down: boolean;\r\n};\r\n\r\nconst addPrefix = (\r\n  text: string,\r\n  forum: string,\r\n  sectionCode: string\r\n): string => {\r\n  if (forum === \"life\" && !text.startsWith(\"OFF\")) return \"OFF: \" + text;\r\n  else if (sectionCode === \"job\" && !text.startsWith(\"JOB\"))\r\n    return \"JOB: \" + text;\r\n  else if (sectionCode === \"v7\" && !text.startsWith(\"v7\")) return \"v7: \" + text;\r\n\r\n  return text;\r\n};\r\n\r\nconst TopicNameCell: FC<IProps> = (props): ReactElement => {\r\n  const loggedUserName = useAppSelector((state) => state.login.userName);\r\n\r\n  let href = `/topic.php?id=${props.id}`;\r\n  let classes = classNames(\"agb\", \"mr5\", {\r\n    bold: props.count >= 100,\r\n    mytopics: props.author === loggedUserName,\r\n    pinned: props.pinned,\r\n  });\r\n\r\n  let sectionHref = `/index.php?section=${props.sectionCode}`;\r\n  let section: ReactElement;\r\n  if (props.section) {\r\n    section = (\r\n      <span className=\"topic-section\">\r\n        <span className=\"agh\" style={{ margin: \"0px 5px\" }}>\r\n          /\r\n        </span>\r\n        <Link key=\"1\" rel=\"nofollow\" className=\"agh\" to={sectionHref}>\r\n          {props.section}\r\n        </Link>\r\n      </span>\r\n    );\r\n  }\r\n\r\n  let text = addPrefix(props.text, props.forum, props.sectionCode);\r\n\r\n  return (\r\n    <div className=\"cell-title\">\r\n      <div className=\"cell-title--inner\">\r\n        {props.pinned && (\r\n          <i\r\n            className=\"fa fa-thumb-tack agh\"\r\n            aria-hidden=\"true\"\r\n            style={{ marginRight: \"5px\" }}\r\n          ></i>\r\n        )}\r\n        <Link\r\n          to={href}\r\n          className={classes}\r\n          dangerouslySetInnerHTML={{ __html: text }}\r\n          style={{ overflowWrap: \"anywhere\" }}\r\n        ></Link>\r\n        {props.isVoting && <span className=\"agh separator\">[]</span>}\r\n        <Pages count={props.count} topicId={props.id} />\r\n        {props.closed && <span className=\"agh\"></span>}\r\n        {props.down && <span className=\"agh\"></span>}\r\n        {section}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TopicNameCell;\r\n","import { FC, ReactElement } from 'react'\r\n\r\nimport { useActionCreators } from 'src/store';\r\nimport { topicsListActions } from 'src/store';\r\n\r\ntype IProps = {\r\n  topicId: number,\r\n  expanded: boolean\r\n};\r\n\r\nconst PreviewLink: FC<IProps> = ({ topicId, expanded }): ReactElement => {\r\n\r\n  const actions = useActionCreators(topicsListActions);\r\n\r\n  const onClick = () => {\r\n    actions.togglePreview({topicId, msgNumber: 0});\r\n  };\r\n\r\n  const text = expanded \r\n    ? <i className=\"fa fa-minus-square-o agh\" aria-hidden=\"true\"></i> \r\n    : <i className=\"fa fa-plus-square-o agh\" aria-hidden=\"true\"></i>;\r\n  return (\r\n    <div className=\"cell-preview-link\" onClick={onClick}>\r\n      <span>{text}</span>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default PreviewLink;","import { FC, ReactElement, useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport TopicNameCell from \"./topic_name_cell\";\r\nimport PreviewLink from \"./preview_link\";\r\n\r\nimport { formattedTime } from \"src/utils\";\r\nimport { useActionCreators } from \"src/store\";\r\nimport { ITopicsListItem, topicsListActions } from \"src/store\";\r\nimport { fetchTopicMessage } from \"src/api\";\r\n\r\ninterface IProps extends ITopicsListItem {\r\n  updated: number;\r\n  topicId: number;\r\n}\r\n\r\nconst Row: FC<IProps> = ({ topicId, updated, ...data }): ReactElement => {\r\n  const actions = useActionCreators(topicsListActions);\r\n\r\n  const [time, setTime] = useState(updated);\r\n\r\n  useEffect(() => {\r\n    if (!data.pinned) return;\r\n\r\n    const updateTime = async () => {\r\n      const msg = await fetchTopicMessage(topicId, data.count);\r\n      setTime(msg.time);\r\n    };\r\n\r\n    updateTime();\r\n  }, [data.pinned, topicId, data.count]);\r\n\r\n  useEffect(() => {\r\n    setTime(updated);\r\n  }, [updated]);\r\n\r\n  const countOnClick = () => {\r\n    actions.togglePreview({ topicId, msgNumber: data.count });\r\n  };\r\n\r\n  return (\r\n    <div className=\"topics-list-row\">\r\n      <div className=\"cell-forum\">\r\n        <div className=\"cell-forum--inner\">{data.forum}</div>\r\n      </div>\r\n      <div className=\"cell-section\">{data.section}</div>\r\n      <div className=\"cell-answ\" onClick={countOnClick}>\r\n        <div className=\"cell-answ--inner\">\r\n          <i\r\n            className=\"fa fa-comments-o\"\r\n            aria-hidden=\"true\"\r\n            style={{ marginRight: \"3px\" }}\r\n          ></i>\r\n          <span>{data.count}</span>\r\n        </div>\r\n      </div>\r\n      <PreviewLink topicId={data.id} expanded={data.showPreview} />\r\n      <TopicNameCell {...data} />\r\n      <div className=\"cell-author\">\r\n        <div className=\"cell-author--inner\">\r\n          <i\r\n            aria-hidden=\"true\"\r\n            className=\"fa fa-user-circle\"\r\n            style={{ marginRight: \"3px\" }}\r\n          ></i>\r\n          {data.author}\r\n        </div>\r\n      </div>\r\n      <div className=\"cell-lastuser\">\r\n        <div className=\"cell-author--inner\">\r\n          <span className=\"cell-lastuser-time\">{formattedTime(time)}</span>\r\n          <span className=\"cell-lastuser-user\">{data.lastUser}</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"cell-last20\">\r\n        <Link\r\n          to={`/topic.php?id=${data.id}&page=last20#F`}\r\n          style={{\r\n            color: \"inherit\",\r\n            display: \"block\",\r\n            width: \"100%\",\r\n            textAlign: \"center\",\r\n          }}\r\n        >\r\n          <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Row;\r\n","import { FC, ReactElement } from 'react'\r\nimport { Pagination } from 'react-bootstrap'\r\nimport { useLocation } from 'react-router-dom'\r\n\r\nimport './pages.css'\r\n\r\ntype IProps = {\r\n  maxPage: number,\r\n  last20?: boolean\r\n}\r\n\r\nconst Pages: FC<IProps> = ({ maxPage, last20 }): ReactElement => {\r\n\r\n  const location = useLocation();\r\n  let pathName = location.pathname;\r\n  if (pathName === '/')\r\n    pathName = '/index.php'\r\n\r\n  const locationParams = new URLSearchParams(location.search);\r\n\r\n  let currentPage: number | string;\r\n  const page = locationParams.get('page');\r\n  if (!page)\r\n    currentPage = 1;\r\n  else if (page === \"last20\")\r\n    currentPage = \"last20\";\r\n  else\r\n    currentPage = parseInt(page, 10) || 1;\r\n\r\n  let pages = [];\r\n  for (let i = 1; i <= maxPage; i++) {\r\n    locationParams.set('page', String(i));\r\n    let href = '#' + pathName + '?' + locationParams.toString();\r\n\r\n    pages.push(\r\n      <Pagination.Item active={currentPage === i} key={i} href={href}>\r\n        {i}\r\n      </Pagination.Item>);\r\n  }\r\n\r\n  if (last20 === true) {\r\n    locationParams.set(\"page\", \"last20\");\r\n    let href = '#' + pathName + '?' + locationParams.toString();\r\n    pages.push(<Pagination.Item active={currentPage === \"last20\"} key=\"last20\" href={href}></Pagination.Item>);\r\n  }\r\n\r\n  return (\r\n    <Pagination style={{ margin: \"0px\" }}>\r\n      {pages}\r\n    </Pagination>\r\n  )\r\n\r\n}\r\n\r\nexport default Pages;","import { FC, ReactElement, useRef, RefObject, useCallback } from 'react'\r\nimport { FormControl, Button, ButtonGroup, Form } from 'react-bootstrap'\r\n\r\nimport './text_editor.css'\r\n\r\ntype IProps = {\r\n  placeholder: string,\r\n  showVoting?: boolean,\r\n  isVoting?: boolean,\r\n  text: string,\r\n  isFetching: boolean,\r\n  formRef?: RefObject<HTMLFormElement>,\r\n  onChange?: (text: string) => void,\r\n  onShowVotingChange?: (show: boolean) => void\r\n}\r\n\r\nconst TextEditor: FC<IProps> = ({ placeholder, showVoting, isVoting, isFetching, text, formRef, onChange, onShowVotingChange }): ReactElement => {\r\n\r\n  const textAreaRef = useRef() as React.MutableRefObject<HTMLTextAreaElement>;\r\n\r\n  const onButtonCode1c = (e: React.MouseEvent<HTMLButtonElement>) => {\r\n\r\n    e.preventDefault();\r\n\r\n    const openTag = '[1C]\\n';\r\n    const closeTag = '\\n[/1C]';\r\n\r\n    const textAreaNode = textAreaRef.current;\r\n\r\n    const start = textAreaNode.selectionStart;\r\n    const end = textAreaNode.selectionEnd;\r\n\r\n    const oldText = textAreaNode.value;\r\n    const len = oldText.length;\r\n    const selectedText = oldText.substring(start, end);\r\n    const replacement = openTag + selectedText + closeTag;\r\n    let newText = oldText.substring(0, start) + replacement + oldText.substring(end, len);\r\n\r\n    if (onChange) onChange(newText);\r\n\r\n  }\r\n\r\n  const handleShowVotingChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (onShowVotingChange) onShowVotingChange(e.currentTarget.checked);\r\n  }, [onShowVotingChange]);\r\n\r\n  const handleChange = useCallback((e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n    if (onChange) onChange(e.currentTarget.value);\r\n  }, [onChange]);\r\n\r\n  const handleKeyUp = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\r\n\r\n    if (!formRef) return;\r\n    if (!formRef.current) return;\r\n\r\n    if (e.key === 'Enter' && e.ctrlKey) {\r\n      formRef.current.dispatchEvent(new Event(\"submit\", { cancelable: true, bubbles: true }));\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <FormControl\r\n        as=\"textarea\"\r\n        aria-label=\"\"\r\n        placeholder={placeholder}\r\n        cols={70} rows={3}\r\n        value={text}\r\n        onChange={handleChange}\r\n        onKeyUp={handleKeyUp}\r\n        ref={textAreaRef}\r\n        className=\"text-editor input\"\r\n        data-lpignore={true} \r\n      />\r\n      <div className=\"flex-row\">\r\n        <ButtonGroup>\r\n          <Button\r\n            size=\"sm\"\r\n            variant=\"light\"\r\n            onClick={onButtonCode1c}\r\n            style={{ marginRight: \"5px\" }}\r\n            className='button'\r\n          > 1</Button>\r\n          <Button\r\n            size=\"sm\"\r\n            variant=\"light\"\r\n            disabled={isFetching}\r\n            type=\"submit\"\r\n            className='button'\r\n          >\r\n            {isFetching ? '' : ''}\r\n          </Button>\r\n        </ButtonGroup>\r\n        {showVoting &&\r\n          <Form.Check\r\n            id=\"show_voting\"\r\n            type=\"checkbox\"\r\n            checked={isVoting}\r\n            onChange={handleShowVotingChange}\r\n            label=\"\"\r\n            style={{ margin: \"auto 0px auto auto\" }} />\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default TextEditor;","import { FC, ReactElement, useCallback, useState, useRef } from 'react'\r\nimport Form from 'react-bootstrap/Form'\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\nimport { FormGroup } from 'react-bootstrap'\r\n\r\nimport { useActionCreators, useAppDispatch, useAppSelector } from 'src/store'\r\n\r\nimport Sections from './sections'\r\nimport TextEditor from 'src/components/common/text_editor'\r\nimport ErrorElem from 'src/components/common/error'\r\n\r\nimport './new_topic.css'\r\nimport { ISectionItem, newTopicActions, postNewTopicIfNeeded } from 'src/store'\r\nimport { useEventCallback } from 'usehooks-ts'\r\n\r\ntype IProps = {\r\n  onSubmitSuccess?: any\r\n};\r\n\r\nconst NewTopic: FC<IProps> = ({ onSubmitSuccess }): ReactElement => {\r\n\r\n  const sections = useAppSelector(state => state.sections);\r\n  const newTopic = useAppSelector(state => state.newTopic);\r\n\r\n  const [currentSection, setSection] = useState(null);\r\n  const [votes, setVotes] = useState(Array(10).fill(\"\"));\r\n\r\n  const formRef = useRef(null);\r\n  const dispatch = useAppDispatch();\r\n  const actions = useActionCreators(newTopicActions);\r\n\r\n  const onSectionChange = useEventCallback((e: React.SyntheticEvent, section: ISectionItem) => {\r\n    setSection(section);\r\n    actions.changeSection(section);\r\n  });\r\n\r\n  const onVoteTextChange = (i: number) => (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    let votesCopy = votes.slice();\r\n    votesCopy[i] = e.target.value;\r\n    setVotes(votesCopy);\r\n  }\r\n\r\n  const onSubmit = useEventCallback((e: React.FormEvent<HTMLFormElement>) => {\r\n\r\n    e.preventDefault();\r\n\r\n    if (!currentSection) {\r\n      actions.setError('  ');\r\n      return;\r\n    }\r\n\r\n    let subject = newTopic.subject;\r\n    if (!subject) {\r\n      actions.setError('  ');\r\n      return;\r\n    }\r\n\r\n    if (!newTopic.text) {\r\n      actions.setError('  ');\r\n      return;\r\n    }\r\n\r\n    let params = {\r\n      subject,\r\n      text: newTopic.text,\r\n      section: currentSection.id,\r\n      forum: currentSection.forum,\r\n      isVoting: newTopic.isVoting,\r\n      votingItems: [],\r\n      onSuccess: this_onSubmitSuccess\r\n    };\r\n\r\n    if (newTopic.isVoting) {\r\n      params.votingItems = [];\r\n      for (let i = 1; i <= 10; i++) {\r\n        let val = votes[i - 1];\r\n        if (val) {\r\n          params.votingItems.push(val);\r\n        }\r\n      }\r\n    }\r\n\r\n    dispatch(postNewTopicIfNeeded(params));\r\n  });\r\n\r\n  const onSubjectChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    actions.changeSubject(e.target.value);\r\n  }, [actions]);\r\n  \r\n  const onTextChange = useCallback((text: string) => {\r\n    actions.changeText(text);\r\n  }, [actions]);\r\n\r\n  const onShowVotingChange = useCallback((show: boolean) => {\r\n    actions.showVoting(show);\r\n  }, [actions]);\r\n\r\n  const this_onSubmitSuccess = () => {\r\n\r\n    actions.clear();\r\n\r\n    if (onSubmitSuccess) {\r\n      onSubmitSuccess();\r\n    }\r\n  }\r\n  let groupsElem = [];\r\n  for (let forum in sections.tree) {\r\n    groupsElem.push(<option key={forum} value={forum.toLowerCase()}>{forum}</option>);\r\n  }\r\n\r\n  let votingOptions = [];\r\n\r\n  if (newTopic.isVoting) {\r\n    votingOptions.push(<div key=\"p\">:</div>);\r\n    for (let i = 1; i <= 10; i++) {\r\n      votingOptions.push(\r\n        <InputGroup key={i} size=\"sm\" style={{ marginBottom: \"3px\", width: \"100%\" }}>\r\n          <InputGroup.Text\r\n            style={{ width: \"40px\" }}\r\n            className='input'\r\n          >\r\n            {`${i}.`}\r\n          </InputGroup.Text>\r\n          <Form.Control\r\n            type=\"text\"\r\n            aria-label={` ${i}`}\r\n            maxLength={50}\r\n            className='input'\r\n            value={votes[i - 1]}\r\n            onChange={onVoteTextChange(i - 1)}\r\n          />\r\n        </InputGroup>\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form className=\"new-topic-container\" onSubmit={onSubmit} ref={formRef}>\r\n      <div id=\"newtopic_form\" className=\"new-topic-text\">\r\n        <div><b> :</b></div>\r\n        {newTopic.error && <ErrorElem text={newTopic.error} />}\r\n        <div className=\"flex-row\" style={{ marginBottom: \"3px\" }}>\r\n          <Form.Select\r\n            disabled\r\n            size=\"sm\"\r\n            value={newTopic.forum}\r\n            style={{ flex: \"0 1 90px\" }}\r\n            className='input'\r\n          >\r\n            {groupsElem}\r\n          </Form.Select>\r\n          <Sections\r\n            id=\"target_section\"\r\n            defaultValue=\"\"\r\n            selected={newTopic.section?.code}\r\n            size=\"sm\"\r\n            style={{ flex: \"1 1 auto\" }}\r\n            onChange={onSectionChange}\r\n          />\r\n        </div>\r\n        <Form.Control\r\n          type=\"text\"\r\n          aria-label=\"\"\r\n          placeholder=\"\"\r\n          size=\"sm\"\r\n          value={newTopic.subject}\r\n          onChange={onSubjectChange}\r\n          style={{ marginBottom: \"3px\" }}\r\n          className='input'\r\n          maxLength={90}\r\n        />\r\n        <TextEditor\r\n          placeholder=\"\"\r\n          showVoting={true}\r\n          isVoting={newTopic.isVoting}\r\n          text={newTopic.text}\r\n          isFetching={newTopic.status === \"loading\"}\r\n          onChange={onTextChange}\r\n          onShowVotingChange={onShowVotingChange}\r\n          formRef={formRef}\r\n        />\r\n      </div>\r\n      <FormGroup className=\"new-topic-voting\">\r\n        {votingOptions}\r\n      </FormGroup>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default NewTopic;","import { FC, ReactElement } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { useActionCreators } from 'src/store'\r\nimport { topicsListActions } from 'src/store'\r\n\r\nimport './topic_preview.css'\r\n\r\ntype IProps = {\r\n  topicId: number,\r\n  onFirst: () => void,\r\n  onLast: () => void,\r\n  onPrev: () => void,\r\n  onNext: () => void\r\n}\r\n\r\nconst PreviewButtons: FC<IProps> = ({ topicId, onFirst, onPrev, onNext, onLast }): ReactElement => {\r\n \r\n  const actions = useActionCreators(topicsListActions);\r\n\r\n  const closePreview = () => {\r\n    actions.togglePreview({topicId, msgNumber: 0});\r\n  }\r\n\r\n  return (\r\n    <div className=\"topic-preview-rewind\">\r\n      <div className=\"topic-preview-button flex-small\" onClick={onFirst} title=\" \">\r\n        <i className=\"fa fa-angle-double-left\" aria-hidden=\"true\"></i>\r\n      </div>\r\n      <div className=\"topic-preview-button flex-large\" onClick={onPrev} title=\" \">\r\n        <i className=\"fa fa-angle-left\" aria-hidden=\"true\"></i>\r\n      </div>\r\n      <div className=\"topic-preview-button flex-large\" onClick={onNext} title=\" \">\r\n        <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i>\r\n      </div>\r\n      <div className=\"topic-preview-button flex-small\" onClick={onLast} title=\" \"> \r\n        <i className=\"fa fa-angle-double-right\" aria-hidden=\"true\"></i>\r\n      </div>\r\n      <div className=\"topic-preview-button close-preview\" onClick={closePreview}> \r\n        <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i>\r\n        <i className=\"fa fa-angle-left\" aria-hidden=\"true\" style={{marginLeft: \"-2px\"}}></i>\r\n      </div>\r\n      <div className=\"topic-preview-button edit-preview\"> \r\n        <Link to={`/topic.php?id=${topicId}&page=last20#F`}>\r\n          <i className=\"fa fa-pencil\" aria-hidden=\"true\" style={{color:\"var(--font-color)\"}}></i>\r\n        </Link>  \r\n      </div>      \r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default PreviewButtons;","\r\nfunction highlight(text: string): string {\r\n\r\n  const keywords = new Set(\r\n    (\"if||then||elsif||else||endif|\" +\r\n    \"|do||for||to||each||in||while||enddo|\" +\r\n    \"|procedure||endprocedure||function||endfunction\" +\r\n    \"||var||export||goto||and||or||not|\" +\r\n    \"|val||break||continue||return||try||except|\" +\r\n    \"|endtry||raise||false||true|\" +\r\n    \"|undefined||null|new||execute|\" +\r\n    \"||async||wait\")\r\n      .split('|')\r\n  );\r\n\r\n  const  = new Set(\"():;.,=+-*<>?[]%/\".split(''));\r\n  const  = \"<span class=\";\r\n  const  = \"</span>\";\r\n\r\n  const  = \"bg>\";\r\n  const  = \"num>\";\r\n  const  = \"str>\";\r\n  //const  = \"par>\";\r\n  const  = \"com>\";\r\n  const  = \"sp>\";\r\n  const  = \"pr>\";\r\n  const 1 = \"key>\";\r\n\r\n\r\n  let : string;\r\n  let : boolean;\r\n  let : string | undefined;\r\n\r\n  let  = false;\r\n  let  = \"\";\r\n\r\n  function (: string) {\r\n    return .trim() === '';\r\n  }\r\n\r\n  function (: string, : number, : number) {\r\n    return .substring( - 1,  -1 + );\r\n  }\r\n\r\n  function (: string, : number) {\r\n    return .substring(.length - );\r\n  }\r\n\r\n  function isKeyword(token: string) {\r\n    return keywords.has(token.toLowerCase().trim());\r\n  }\r\n\r\n  function 1(: string, : string) {\r\n\r\n    if ( === \" \" ||  === ) {\r\n       =  + ;\r\n    } else {\r\n      if () {\r\n         =  + ;\r\n         = false;\r\n      };\r\n\r\n       =  +  +  + ;\r\n       = true;\r\n       = ;\r\n    };\r\n  }\r\n\r\n  function (: string) {\r\n\r\n    //  https://infostart.ru/profile/34707/public/\r\n    let  = false;\r\n    let  = false;\r\n    let  = 1;\r\n    let  = true;\r\n    //  8    4  \r\n\r\n    //      \r\n    let  = 1;\r\n    for ( = 1;  <= .length; ++) {\r\n\r\n      let  = .charAt( - 1);\r\n      if () {\r\n\r\n        //    \"\"\r\n        if ( === '\"') {\r\n          //    -   \r\n          1((, ,  -  + 1), );\r\n           = false;\r\n           = \"\";\r\n           = true;\r\n        } else {\r\n           =  + ;\r\n        };\r\n\r\n      } else if () {\r\n\r\n        //    \"\" \r\n        if ( === \"'\") {\r\n          //    -   \r\n          1((, ,  -  + 1), );\r\n           = false;\r\n           = \"\";\r\n           = true;\r\n        } else {\r\n           =  + ;\r\n        };\r\n\r\n      } else if ( === \" \") {\r\n        //       \r\n        if (!()) {\r\n          //   , \r\n          //  -  ...\r\n          if () {\r\n            1( + \" \", );\r\n             = false;\r\n\r\n          } else if (isKeyword(.trim())) {\r\n            1( + \" \", 1);\r\n\r\n          } else if (!isNaN(parseInt(, 10))) {\r\n            1( + \" \", );\r\n\r\n          } else {\r\n            1( + \" \", );\r\n          };\r\n           = \"\";\r\n        } else {\r\n           =  + \" \";\r\n        };\r\n         = true;\r\n\r\n      } else if (.has()) {\r\n\r\n        //     \r\n        if (!()) {\r\n          //        \r\n          //     ,     \".\"\r\n          if () {\r\n\r\n            1(, );\r\n             = false;\r\n             = ( !== \".\");\r\n\r\n          } else if ( && isKeyword()) {\r\n            1(, 1);\r\n             = ( !== \".\");\r\n\r\n          } else {\r\n            //    -  \r\n            if (!isNaN(parseInt(, 10))) {\r\n              1(, );\r\n\r\n            } else {\r\n              1(, );\r\n            };\r\n             = ( !== \".\");\r\n          };\r\n           = \"\";\r\n        };\r\n        //    \r\n        if ( === \".\" &&  === ) {\r\n          //  \r\n          1(, );\r\n          continue;\r\n\r\n        } else if ( === \"=\" && (,  - 1, 1) === \"<\") {\r\n          //  \"  \" -    \r\n           = undefined;\r\n\r\n        } else if ( === \"/\" && (,  + 1, 1) === \"/\") {\r\n          //   \r\n          1((, .length -  + 1), );\r\n          return;\r\n        };\r\n        1(, );\r\n\r\n      } else if ( === '\"' ||  === \"|\") {\r\n\r\n        //    \"\"\r\n        //  ,        \r\n        if (()) {\r\n           = ;\r\n           = true;\r\n        } else {\r\n          //  \r\n          1( + , );\r\n           = \"\";\r\n        };\r\n         = true;\r\n\r\n      } else if ( === \"'\") {\r\n\r\n        //    \"\" \r\n        //  ,        \r\n        if (()) {\r\n           = ;\r\n           = true;\r\n        } else {\r\n          //  \r\n          1( + , );\r\n           = \"\";\r\n        };\r\n         = true;\r\n\r\n      } else if ( === \"#\" || ( === \"&\" && ())) {\r\n\r\n        //   \r\n        1((, .length -  + 1), );\r\n         = .length;\r\n        break;\r\n\r\n      } else if ( === \"~\") {\r\n         =  + ;\r\n         = true;\r\n      } else {\r\n        //  \r\n         =  + ;\r\n      }\r\n    }\r\n\r\n    if () {\r\n\r\n      //  \r\n      1((, ,  -  + 1), );\r\n\r\n    } else if () {\r\n\r\n      //  \r\n      1((, ,  -  + 1), );\r\n\r\n    } else if (!()) {\r\n\r\n      //     \r\n      if (isKeyword()) {\r\n        1(, 1);\r\n\r\n      } else if (!isNaN(parseInt(, 10))) {\r\n        1(, );\r\n\r\n      } else {\r\n        1(, );\r\n      };\r\n\r\n    };\r\n\r\n  }\r\n\r\n   = false;\r\n   = \"\";\r\n   = false;\r\n   = undefined;\r\n   = '';\r\n\r\n  let result = [];\r\n\r\n  for (let  of text.split('\\n')) {\r\n\r\n    if (()) {\r\n      result.push('');\r\n      continue;\r\n    }\r\n\r\n     = '';\r\n    ();\r\n    if ( && !) {\r\n       += '</span>';\r\n       = false;\r\n       = '';\r\n       = '';\r\n    } else if (!) {\r\n       = '';\r\n       = '';\r\n    }\r\n\r\n    result.push();\r\n  }\r\n\r\n  return result.join('\\n');\r\n}\r\n\r\nexport default highlight;","import { ReactElement, useCallback, useEffect, useRef } from 'react'\r\n\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { topicActions, getTopicIfNeeded, getNewMessagesIfNeeded, useAppSelector } from 'src/store'\r\nimport { newMessageActions } from 'src/store'\r\n\r\nimport Error from 'src/components/common/error'\r\nimport Pages from 'src/components/common/pages'\r\nimport Header from './header'\r\nimport TopicInfo from './topic_info'\r\nimport Row from '../../pages/topic/row'\r\nimport Footer from './footer'\r\nimport NewMessage from './new_message';\r\nimport { getMaxPage, extractTextFromHTML } from 'src/utils';\r\nimport { useActionCreators, useAppDispatch } from 'src/store';\r\n\r\nimport './topic.css'\r\n\r\nvar scrolledToHash: boolean;\r\n\r\nconst getPageNumber = (locationPage: string | string[]): number | \"last20\" => {\r\n  if (!locationPage) return 1;\r\n  if (locationPage === \"last20\") return \"last20\";\r\n  if (isNaN(+locationPage)) return 1;\r\n  return +locationPage;\r\n}\r\n\r\nconst Topic = (): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n  const actions = useActionCreators(topicActions);\r\n  const location = useLocation();\r\n\r\n  const login = useAppSelector(state => state.login);\r\n  const info = useAppSelector(state => state.topic.info);\r\n  const item0 = useAppSelector(state => state.topic.item0);\r\n  const items = useAppSelector(state => state.topic.items);\r\n  const error = useAppSelector(state => state.topic.error);\r\n\r\n  let locationParams = new URLSearchParams(location.search);\r\n  const topicId = +locationParams.get('id');\r\n  const page = getPageNumber(locationParams.get('page'));\r\n  const maxPage = getMaxPage(info.count);\r\n  \r\n  const isLastPageRef = useRef(false);\r\n  isLastPageRef.current = (page === 'last20' || page === maxPage);\r\n\r\n  const updateNewMessages = useCallback(() => {\r\n    if (isLastPageRef.current)\r\n      dispatch(getNewMessagesIfNeeded());\r\n  }, [dispatch])\r\n\r\n  const onPostNewMessageSuccess = () => {\r\n    updateNewMessages();\r\n    dispatch(newMessageActions.changeText(''));\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (info.title)\r\n      document.title = extractTextFromHTML(info.title);\r\n  }, [info.title]);\r\n\r\n  useEffect(() => {\r\n    dispatch(getTopicIfNeeded(topicId, page));\r\n  }, [dispatch, topicId, page]);\r\n\r\n  useEffect(() => {\r\n\r\n    const timer = window.setInterval(updateNewMessages, 60 * 1000);\r\n\r\n    const clearStore = () => {\r\n      actions.clear();\r\n      scrolledToHash = undefined;\r\n      if (timer) clearInterval(timer);\r\n    }\r\n    return clearStore;\r\n\r\n  }, [actions, updateNewMessages]);\r\n\r\n  useEffect(() => {\r\n    if (!scrolledToHash &&\r\n      location.hash &&\r\n      items.length > 0) {\r\n      const nodeHash = document.getElementById(location.hash.slice(1));\r\n      if (nodeHash)\r\n        setTimeout(() => window.scrollTo(0, nodeHash.offsetTop), 1);\r\n      scrolledToHash = true;\r\n    }\r\n  });\r\n\r\n  return (\r\n    <div style={{ marginBottom: \"5px\" }}>\r\n      <Header />\r\n      {error && <Error text={error} />}\r\n      <div className=\"topic-table\">\r\n        <TopicInfo />\r\n        <Row key='0' data={item0} />\r\n        {items.map((item, i) => (\r\n          <Row key={item.n} data={item} />\r\n        ))}\r\n        {(maxPage > 1 || page === \"last20\") &&\r\n          <div className=\"tf\">\r\n            <Pages maxPage={maxPage} last20 />\r\n          </div>\r\n        }\r\n      </div>\r\n      <Footer page={page} />\r\n      {login.logged &&\r\n        <NewMessage onSubmitSuccess={onPostNewMessageSuccess} />\r\n      }\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default Topic;","import { FC, ReactElement, useState } from 'react'\r\nimport { childrenToText } from 'src/utils'\r\nimport highlight from './code_highlight'\r\nimport './code1c.css'\r\n\r\nconst prepareText = (text: string): string => {\r\n\r\n  // replace double new-lines\r\n  let newtext = text\r\n    .replace(/\\n<br>/g, '\\n')\r\n    .replace(/<br>\\n/g, '\\n')\r\n    .replace(/\\r<br>/g, '\\n')\r\n    .replace(/<br>\\r/g, '\\n')\r\n    .replace(/<br>/g, '\\n');\r\n\r\n  // remove all leading|ending new-lines\r\n  while (newtext[0] === '\\n') {\r\n    newtext = newtext.substring(1);\r\n  }\r\n\r\n  while (newtext.substring(newtext.length - 1) === '\\n') {\r\n    newtext = newtext.substring(0, newtext.length - 1);\r\n  }\r\n\r\n  return highlight(newtext);\r\n}\r\n\r\nconst Code: FC<{ children?: React.ReactNode }> = ({ children }): ReactElement => {\r\n\r\n  const [hidden, setHidden] = useState(true);\r\n\r\n  let text: string = \"\";\r\n  if (children) {\r\n\r\n    const textArr = childrenToText(children);\r\n    text = textArr.join('');\r\n\r\n    text = prepareText(text);\r\n  }\r\n\r\n  const onShowClick = () => {\r\n    setHidden(!hidden);\r\n  }\r\n\r\n  let buttonText: string;\r\n  let linesCount = 0;\r\n  if (text)\r\n    linesCount = text.split(\"\\n\").length;\r\n\r\n  if (hidden)\r\n    buttonText = `: ${linesCount} `;\r\n  else\r\n    buttonText = '';\r\n\r\n  let buttonShow: ReactElement | null = null;\r\n  if (linesCount > 7)\r\n    buttonShow = (\r\n      <div className=\"expand-button-div\">\r\n        <span className=\"expand-button-span\" onClick={onShowClick}>{buttonText}</span>\r\n      </div>\r\n    );\r\n\r\n  let preStyle: React.CSSProperties = {\r\n  }\r\n\r\n  if (hidden && linesCount > 7) {\r\n    preStyle.overflow = \"hidden\";\r\n    preStyle.height = \"135px\";\r\n  } else {\r\n    preStyle.overflow = \"auto\";\r\n    preStyle.height = \"auto\";\r\n  }\r\n\r\n  return (\r\n    <div style={{ marginTop: \"5px\" }}>\r\n      <pre className=\"code-pre\" style={preStyle} dangerouslySetInnerHTML={{ __html: text }}>\r\n      </pre>\r\n      {buttonShow}\r\n    </div>\r\n  )\r\n\r\n\r\n}\r\n\r\nexport default Code;","import { FC, ReactElement, useRef, useState, useEffect } from 'react'\r\n\r\nimport { getMaxPage, childrenToText } from 'src/utils';\r\nimport { fetchTopicInfo } from 'src/api'\r\nimport { useActionCreators, useAppSelector } from 'src/store';\r\nimport { ITooltipKeys, tooltipsActions } from 'src/store';\r\n\r\ntype IProps = {\r\n  topicId: number,\r\n  number: number,\r\n  style?: {},\r\n  children?: React.ReactNode\r\n}\r\n\r\nconst LinkToPost: FC<IProps> = (props): ReactElement => {\r\n\r\n  const timerRef = useRef(null);\r\n  const actions = useActionCreators(tooltipsActions);\r\n\r\n  const currentTopicId = useAppSelector(state => state.topic.info?.id);\r\n  const tooltipDelay = useAppSelector(state => +state.options.items.tooltipDelay);\r\n\r\n  let initialText = '';\r\n  if (!props.children)\r\n    initialText = String(props.number);\r\n  else\r\n    initialText = childrenToText(props.children).join('');\r\n  \r\n  const [text, setText] = useState(initialText);\r\n\r\n  useEffect(() => {\r\n\r\n    let isMounted = true;\r\n\r\n    if (!initialText.startsWith(\"http\")) {\r\n      setText(initialText);\r\n      return;\r\n    }\r\n\r\n    const run = async () => {\r\n      const { title } = await fetchTopicInfo(props.topicId);\r\n      if (isMounted)\r\n        setText(title);\r\n    }\r\n\r\n    run();\r\n\r\n    return () => { isMounted = false };\r\n\r\n  }, [initialText, props.topicId]);\r\n\r\n  const onMouseOver = (e: React.MouseEvent<HTMLElement>) => {\r\n    e.persist();\r\n    timerRef.current = window.setTimeout(() => showToolTip(e), tooltipDelay);\r\n  }\r\n\r\n  const onMouseOut = () => {\r\n    if (timerRef.current)\r\n      clearTimeout(timerRef.current);\r\n  }\r\n\r\n  const onClick = (e: React.MouseEvent<HTMLElement>) => {\r\n    e.stopPropagation();\r\n    if (timerRef.current)\r\n      clearTimeout(timerRef.current);\r\n    showToolTip(e);\r\n  }\r\n\r\n  const showToolTip = (e: React.MouseEvent<HTMLElement>) => {\r\n\r\n    const { topicId, number } = props;\r\n\r\n    const coords = {\r\n      x: e.pageX,\r\n      y: e.pageY - 50 // remove navbar margin-top\r\n    }\r\n\r\n    const keys: ITooltipKeys = {\r\n      topicId: +topicId,\r\n      number: +number\r\n    }\r\n\r\n    actions.show({ keys, coords });\r\n\r\n  }\r\n\r\n  if ((props.topicId === currentTopicId) || !isNaN(+text))\r\n    return (\r\n      <span\r\n        onMouseOver={onMouseOver}\r\n        onMouseOut={onMouseOut}\r\n        onClick={onClick}\r\n        className='link'\r\n        style={{ ...props.style }}\r\n      >{text}</span>\r\n    )\r\n  else {\r\n    const page = getMaxPage(props.number);\r\n\r\n    let pageParam = '';\r\n    if (page > 1)\r\n      pageParam = `&page=${page}`;\r\n\r\n    return (\r\n      <span>\r\n        <a href={`#/topic.php?id=${props.topicId}${pageParam}#${props.number}`}\r\n          style={{ ...props.style }}\r\n        >{text}</a>{' '}\r\n        (<span onMouseOver={onMouseOver}\r\n          onMouseOut={onMouseOut}\r\n          onClick={onClick}\r\n          className='link'\r\n        >{props.number}</span>)\r\n      </span>\r\n    )\r\n  }\r\n}\r\n\r\nexport default LinkToPost;","import { FC, ReactElement } from 'react'\r\n\r\ntype IProps = {\r\n  href: string,\r\n  children?: React.ReactNode\r\n}\r\n\r\nconst LinkToUser: FC<IProps> = ({ href, children }): ReactElement => {\r\n  return <a href={href} className=\"registered-user\">{children}</a>\r\n}\r\n\r\nexport default LinkToUser;","import { FC, ReactElement, useEffect, useState } from 'react';\r\n\r\ntype IProps = {\r\n  href: string,\r\n}\r\n\r\nconst getVideoId = (href: string): string | null => {\r\n\r\n  let fullHref = href;\r\n  if (href.search(/http/) === -1) fullHref = 'http://' + fullHref;\r\n\r\n  try {\r\n    var url = new URL(fullHref);\r\n  } catch (e)  {\r\n    return null;\r\n  }\r\n\r\n  if (url.hostname.search(/youtube/) !== -1) {\r\n    return url.searchParams.get('v');\r\n\r\n  } else if (url.hostname.search(/youtu\\.be/) !== -1) {\r\n    return url.pathname.substring(1)\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\ntype HrefParams = {\r\n  hrefName: string\r\n  title: string,\r\n  notFound: boolean  \r\n}\r\n\r\nconst getVideoParams = async (videoId: string): Promise<HrefParams> => {\r\n\r\n  const apiKey = localStorage.getItem('youtubeApiKey') || 'AIzaSyCztN2QW4Fxw_1YuAHBTOZdYLbzigPz25g';\r\n  let apiUrl = `https://www.googleapis.com/youtube/v3/videos?key=${apiKey}&fields=items(snippet(title))&part=snippet&id=${videoId}`;\r\n  const response = await fetch(apiUrl);\r\n  const json = await response.json();\r\n\r\n  if (json.items.length === 0)\r\n    return {\r\n      hrefName: '',\r\n      title: '',\r\n      notFound: true  \r\n    };\r\n\r\n  const title = json.items[0].snippet.title;\r\n\r\n  let hrefName = title;\r\n  let maxLength = 50;\r\n  if (title.length > maxLength + 5)\r\n    hrefName = hrefName.substring(0, maxLength) + '...'\r\n\r\n  return {\r\n    hrefName,\r\n    title,\r\n    notFound: false\r\n  }\r\n}\r\n\r\nconst YoutubeLink: FC<IProps> = ({ href }): ReactElement => {\r\n\r\n  let [hrefName, setHrefName] = useState(href);\r\n  let [title, setTitle] = useState('');\r\n\r\n  useEffect(() => {\r\n\r\n    let isMounted = true;\r\n    const run = async () => {\r\n\r\n      const videoId = getVideoId(href);\r\n      if (!videoId)\r\n        return;\r\n\r\n      try {\r\n        \r\n        const params = await getVideoParams(videoId);\r\n\r\n        if (isMounted) {\r\n          if (params.notFound)\r\n            setHrefName(href + ' (  )');\r\n          else {  \r\n            setHrefName(params.hrefName);\r\n            setTitle(params.title);\r\n          }  \r\n        }  \r\n\r\n      } catch (e) {\r\n        console.error('youtube', videoId, e.message);\r\n      }\r\n    }\r\n\r\n    run();\r\n\r\n    return () => {isMounted = false};\r\n\r\n  }, [href])\r\n\r\n  const prefix = 'youtube';\r\n  return (\r\n    <a href={href} title={title}>{`${prefix}: ${hrefName}`}</a>\r\n  )\r\n}\r\n\r\nexport default YoutubeLink;","import { FC, ReactElement } from 'react'\r\nimport URL from 'url-parse'\r\n\r\nimport LinkToPost from './link_to_post'\r\nimport LinkToUser from './link_to_user'\r\nimport YoutubeLink from './youtube_link'\r\n\r\nimport { childrenToText } from 'src/utils'\r\nimport { useAppSelector } from 'src/store'\r\n\r\ntype IProps = {\r\n  href: string,\r\n  parentText?: string,\r\n  target?: string,\r\n  class?: string,\r\n  rel?: string,\r\n  children?: React.ReactNode\r\n}\r\n\r\nconst fixBrokenLink = (href: string, parentText: string): string => {\r\n  let escapedHref = href\r\n    .replace(/\\[/g, '\\\\[')\r\n    .replace(/\\]/g, '\\\\]')\r\n    .replace(/\\./g, '\\\\.')\r\n    .replace(/\\./g, '.')\r\n    .replace(/\\*/g, '\\\\*')\r\n    .replace(/\\+/g, '\\\\+')\r\n    .replace(/\\(/g, '\\\\(')\r\n    .replace(/\\)/g, '\\\\)')\r\n    .replace(/\\?/g, '\\\\?')\r\n    .replace(/\\//g, '\\\\/');\r\n\r\n  try {\r\n    let regExp = new RegExp(escapedHref + '<\\\\/a>(\\\\)|[--0-9#\\\\-\\\\+\\\\_\\\\%\\\\?=]*)');\r\n    let arr = parentText.match(regExp);\r\n    if (arr && arr.length > 1) {\r\n      if (arr[1] === ')' && href.search('\\\\(') === -1) {\r\n        return href;\r\n      }\r\n      href = href + arr[1];\r\n      return href;\r\n    }\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n  return href;\r\n}\r\n\r\nconst isYoutube = (hostname: string): boolean => {\r\n  if (hostname.search(/youtube/) !== -1\r\n    || hostname.search(/youtu\\.be/) !== -1)\r\n    return true;\r\n  else\r\n    return false\r\n}\r\n\r\nconst isMistaCatalog = (hostname: string): boolean => {\r\n  if (hostname.search(/catalog\\.mista/) !== -1)\r\n    return true;\r\n  else\r\n    return false\r\n}\r\n\r\nconst CustomLink: FC<IProps> = ({ href, children, parentText, ...props }): ReactElement => {\r\n\r\n  const showYoutubeVideoTitle = useAppSelector(state => state.options.items.showYoutubeVideoTitle === 'true');\r\n  const replaceCatalogMista = useAppSelector(state => state.options.items.replaceCatalogMista === 'true');\r\n  const fixBrokenLinks = useAppSelector(state => state.options.items.fixBrokenLinks === 'true');\r\n\r\n  try {\r\n    var url = new URL(href, true);\r\n  } catch (e) {\r\n    console.error((e as Error).message, href);\r\n    return <a href={href}>{href}</a>;\r\n  }\r\n\r\n  let newHref = href;\r\n  if (newHref.startsWith('/')) {\r\n    url.set('protocol', 'https')\r\n    url.set('hostname', 'forum.mista.ru')\r\n    newHref = url.href;\r\n  }\r\n\r\n  if (url.hostname.search(/forum\\.mista.ru/) !== -1) {\r\n\r\n    if (url.pathname === '/topic.php') {\r\n      return (\r\n        <LinkToPost topicId={url.query.id} number={url.hash.replace('#', '') || \"0\"}>\r\n          {childrenToText(children)}\r\n        </LinkToPost>\r\n      )\r\n    } else if (url.pathname === '/users.php') {\r\n      return (\r\n        <LinkToUser href={url.href} >\r\n          {children}\r\n        </LinkToUser>\r\n      )\r\n    }\r\n  }\r\n\r\n  if (url.hostname === 'a-sitnikov.github.io' &&\r\n    url.pathname === '/react.mista/') {\r\n\r\n    if (Object.keys(url.query).length === 0) {\r\n\r\n      url = new URL(href.replace(/#\\//, ''), true);\r\n      if (url.pathname === '/react.mista/topic.php')\r\n        return (\r\n          <LinkToPost topicId={url.query.id} number={url.hash.replace('#', '') || \"0\"}>\r\n            {childrenToText(children)}\r\n          </LinkToPost>\r\n        )\r\n    }\r\n  }\r\n\r\n  if (showYoutubeVideoTitle && isYoutube(url.hostname))\r\n    return <YoutubeLink href={href} />\r\n\r\n  if (replaceCatalogMista && isMistaCatalog(url.hostname)) {\r\n    url.set('hostname', 'infostart.ru')\r\n\r\n    return (\r\n      <a target={props?.target}\r\n        className={props?.class}\r\n        rel={props?.rel}\r\n        href={url.href} >{url.href} </a>\r\n    )\r\n  }\r\n\r\n  if (fixBrokenLinks && parentText) {\r\n    newHref = fixBrokenLink(newHref, parentText);\r\n  }\r\n\r\n  return (\r\n    <a target={props?.target}\r\n      className={props?.class}\r\n      rel={props?.rel}\r\n      href={newHref} >{children}</a>\r\n  )\r\n}\r\n\r\nexport default CustomLink;","import { FC, ReactElement } from 'react'\r\nimport CSS from 'csstype'\r\n\r\nimport { domain } from 'src/api'\r\n\r\nimport { IVotingItem } from 'src/store'\r\n\r\ntype IProps = {\r\n  topicId: number,\r\n  data: IVotingItem,\r\n  colors: string[],\r\n  total: number,\r\n  n: number\r\n}\r\n\r\nconst VoteItem: FC<IProps> = ({ topicId, data, total, n, colors }): ReactElement => {\r\n\r\n  const img = `${domain}/css/voting${n}.png`;\r\n\r\n  let percent = 0;\r\n\r\n  if (total) {\r\n    percent = Math.round(100 * data.count / total);\r\n  }\r\n\r\n  const imgStyle: CSS.Properties = { \r\n    maxWidth: \"500px\", \r\n    width: \"100%\", \r\n    height: \"15px\" \r\n  };\r\n\r\n  return (\r\n    <li className=\"voting-item\">\r\n      <div className=\"voting-title\">\r\n        <a rel=\"nofollow\" style={{ textDecoration: \"none\" }} href={`#/topic.php?id=${topicId}&sel=${n}`}>\r\n          <b><span style={{ color: colors[n - 1] }}>{`${n}. ${data.text}`}</span></b>\r\n        </a>\r\n      </div>\r\n      <div className=\"voting-percentage\">\r\n        <b><span style={{ color: colors[n - 1] }}>{`${percent}% (${data.count})`}</span></b>\r\n      </div>\r\n      <div className=\"voting-bar\">\r\n        <div style={{ width: `${percent}%` }}>\r\n          <a href={img}>\r\n            <img src={img} style={imgStyle} alt={` ${n}`} />\r\n          </a>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default VoteItem;","import { FC, ReactElement } from 'react'\r\nimport VoteItem from './vote_item'\r\nimport { IVotingItem } from 'src/store'\r\n\r\ntype IProps = {\r\n  items: IVotingItem[],\r\n  topicId: number,\r\n  colors: string[]\r\n}\r\n\r\nconst VoteChart: FC<IProps> = ({ items, topicId, colors }): ReactElement => {\r\n\r\n  let total = Math.max(...items.map(item => item.count));\r\n\r\n  return (\r\n    <ul style={{ paddingLeft: 0 }}>\r\n      {items.filter(item => item.text).map((data, i) => <VoteItem key={i} data={data} total={total} n={i + 1} topicId={topicId} colors={colors} />)}\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default VoteChart;","import { FC, ReactElement, memo } from 'react'\r\n\r\ntype IProps = {\r\n  colors: string[],\r\n  n: number,\r\n  text: string\r\n}\r\n\r\nconst Vote: FC<IProps> = memo(({ colors, n, text }): ReactElement => {\r\n\r\n  return (\r\n    <div style={{ marginTop: \"5px\" }}>\r\n      <b><span style={{ color: colors[n - 1] }}>{`${n}. ${text}`}</span></b>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default Vote;","import { FC, ReactElement, useEffect, useState, memo } from 'react'\r\nimport HtmlToReact from 'html-to-react';\r\n\r\nimport Code from 'src/components/extensions/code1c'\r\nimport LinkToPost from 'src/components/extensions/link_to_post'\r\nimport CustomLink from 'src/components/extensions/custom_link'\r\n\r\nimport VoteChart from './vote_chart'\r\nimport Vote from './vote'\r\nimport { useAppSelector } from 'src/store';\r\nimport { fetchTopicInfo } from 'src/api';\r\n\r\ntype IProps = {\r\n  topicId: number,\r\n  n: number,\r\n  html: string,\r\n  vote: number,\r\n  style?: {}\r\n}\r\n\r\nconst processLinksToPosts = (text: string, topicId: number): string => {\r\n\r\n  const regexp = /(\\()(\\d+)(\\))(?![^<>]*<\\/)/gi; // (12)\r\n  return text.replace(regexp, (res, ...segments) => {\r\n    const number = segments[1];\r\n    return `(<link data-topicid='${topicId}' data-number='${number}'></link>)`\r\n  });\r\n}\r\n\r\nconst processCode1C = (text: string): string => {\r\n\r\n  return (\r\n    text\r\n      .replace(/\\[1[C]\\]/gi, \"<code>\")    //[1C]\r\n      .replace(/<1[C]>/gi, \"<code>\")      //<1C>\r\n      .replace(/\\[\\/1[C]\\]/gi, \"</code>\") //[/1C]\r\n      .replace(/<\\/1[C]>/gi, \"</code>\")   //</1C>     \r\n  );\r\n\r\n}\r\n\r\nconst processText = (text: string, topicId: number): string | undefined => {\r\n\r\n  if (!text)\r\n    return text;\r\n\r\n  let newtext = processCode1C(text);\r\n  newtext = processLinksToPosts(newtext, topicId);\r\n\r\n  return newtext;\r\n}\r\n\r\nconst htmlToReactParser = HtmlToReact.Parser();\r\nconst processNodeDefinitions = HtmlToReact.ProcessNodeDefinitions();\r\nconst isValidNode = () => true;\r\n\r\nconst linkProcessor = {\r\n  shouldProcessNode: (node: any): boolean => {\r\n    return node?.name === 'link';\r\n  },\r\n  processNode: (node: any, children: any, index: number): React.ReactElement => {\r\n    const topicId = node.attribs['data-topicid'];\r\n    const number = node.attribs['data-number'];\r\n    return <LinkToPost key={index} topicId={topicId} number={number} />;\r\n  }\r\n}\r\n\r\nconst codeProcessor = {\r\n  shouldProcessNode: (node: any) => {\r\n    return node?.name === 'code' || node?.name === 'pre';\r\n  },\r\n  processNode: (node: any, children: any) => {\r\n    return <Code>{children}</Code>;\r\n  }\r\n}\r\n\r\nconst ProcessedText: FC<{ html: string, topicId: number }> = memo(({ html, topicId }): ReactElement => {\r\n\r\n  const processedHtml = processText(html, topicId);\r\n  const processingInstructions = [\r\n    linkProcessor,\r\n    codeProcessor,  \r\n    {\r\n      // <custom link>\r\n      shouldProcessNode: (node: any) => {\r\n        return node?.name === 'a';\r\n      },\r\n      processNode: function (node: any, children: any, index: number) {\r\n        const href = node.attribs['href'];\r\n        return <CustomLink key={index} href={href} parentText={processedHtml}>{children}</CustomLink>;\r\n      }\r\n    },   \r\n    {\r\n      // Anything else\r\n      shouldProcessNode: () => true,\r\n      processNode: processNodeDefinitions.processDefaultNode,\r\n    }\r\n  ];\r\n  \r\n  const reactComponent = htmlToReactParser.parseWithInstructions(\r\n    processedHtml, isValidNode, processingInstructions);\r\n\r\n  return (\r\n      <>\r\n        {reactComponent}\r\n      </>  \r\n  )\r\n})\r\n\r\nconst MsgText: FC<IProps> =\r\n  ({ topicId, n, html, vote, style }): ReactElement => {\r\n\r\n    const info = useAppSelector(state => state.topic.info);\r\n    const voteColors = useAppSelector(state => state.options.voteColors);\r\n\r\n    let initialVoteText: string = null;\r\n    if (vote && info.voting && topicId === info.id)\r\n      initialVoteText = info.voting[vote - 1].text;\r\n\r\n    const [voteText, setVoteText] = useState(initialVoteText);\r\n\r\n    useEffect(() => {\r\n\r\n      const getVoteText = async () => {\r\n        try {\r\n          const _info = await fetchTopicInfo(topicId);\r\n          setVoteText(_info.voting[vote - 1].text);\r\n        } catch (e) {\r\n          console.error(e.message);\r\n        }\r\n      }\r\n      \r\n      if (vote && !initialVoteText) {\r\n        getVoteText();\r\n      }\r\n\r\n    }, [vote, initialVoteText, topicId]);\r\n\r\n    const showVote = (vote !== 0) && (voteText !== null);\r\n    let voteChart: ReactElement;\r\n    if (n === 0 && info.isVoting && info.voting) {\r\n      voteChart = <VoteChart items={info.voting} topicId={topicId} colors={voteColors} />\r\n    }\r\n\r\n    return (\r\n      <div className=\"message\" style={style}>\r\n        {voteChart}\r\n        <div>\r\n          <ProcessedText html={html} topicId={topicId} />\r\n        </div>\r\n        {showVote && <Vote text={voteText} n={vote} colors={voteColors} />}\r\n      </div>\r\n    )\r\n  }\r\n\r\nexport default MsgText;","import { FC, ReactElement, useEffect, useState } from 'react'\r\nimport type { Property } from 'csstype'\r\nimport dayjs from 'dayjs'\r\nimport classNames from 'classnames'\r\nimport { domain } from 'src/api'\r\n\r\nimport { useActionCreators } from 'src/store'\r\nimport type { ITopicMessage } from 'src/store'\r\nimport { newMessageActions } from 'src/store'\r\n\r\ntype IProps = {\r\n  data: ITopicMessage,\r\n  isAuthor: boolean,\r\n  isYou: boolean,\r\n  isTooltip?: boolean\r\n}\r\n\r\nconst UserInfo: FC<IProps> = (props): ReactElement => {\r\n\r\n  const actions = useActionCreators(newMessageActions);\r\n\r\n  const [imgDisplay, setImgDisplay] = useState<Property.Display>('none');\r\n\r\n  const onClick = () => {\r\n    const { data } = props;\r\n    actions.changeText(`(${data.n})`);\r\n\r\n    let elem = document.getElementById('message_text');\r\n    if (elem)\r\n      window.scrollTo(0, elem.offsetTop);\r\n  }\r\n\r\n  const onImageLoad = () => {\r\n    setImgDisplay('inline');\r\n  }\r\n\r\n  const onImageError = () => {\r\n    setImgDisplay('none');\r\n  }\r\n\r\n  const { data, isAuthor, isYou, isTooltip } = props;\r\n  useEffect(() => {\r\n    setImgDisplay('none');\r\n  }, [data.n]);\r\n\r\n  const href = `${domain}/users.php?id=${data.userId}`;\r\n  let dataStr: ReactElement | string;\r\n  if (!data) {\r\n    dataStr = '';\r\n  } else if (data.n === 0) {\r\n    dataStr = dayjs(data.time).format('DD.MM.YY - HH:mm');\r\n  } else {\r\n    dataStr = (\r\n      <>\r\n        <span className=\"message-number\">{data.n}</span>{' - ' + dayjs(data.time).format('DD.MM.YY - HH:mm')}\r\n      </>\r\n    )\r\n  }\r\n\r\n  const userClassNames = classNames(\"registered-user\", {\r\n    \"is-author\": isAuthor,\r\n    \"is-you\": isYou\r\n  });\r\n\r\n  let imgElem: ReactElement;\r\n  if (window.innerWidth > 768)\r\n    imgElem = <img src={`${domain}/css/user_icons/${data.userId}_16x16.png`}\r\n      alt=\"user ico\"\r\n      onLoad={onImageLoad}\r\n      onError={onImageError}\r\n      style={{ display: imgDisplay, marginBottom: \"4px\", marginRight: \"1px\" }} />\r\n\r\n  let timeElem: ReactElement;\r\n  if (isTooltip) {\r\n    timeElem = <div className=\"ah\" style={{ display: \"inline-block\", marginLeft: \"5px\" }}>{dataStr}</div>;\r\n  } else {\r\n    timeElem =\r\n      <div className=\"message-time\">\r\n        <span className=\"ah\" >{dataStr}</span>\r\n        <button className=\"button ah\" onClick={onClick}>{dataStr}</button>\r\n      </div>\r\n  }\r\n\r\n  return (\r\n    <div className=\"user-info\">\r\n      {imgElem}\r\n      <a className={userClassNames} href={href}>{data.user}</a>\r\n      {timeElem}\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default UserInfo;","import { FC, ReactElement, useState, useEffect } from 'react'\r\n\r\nimport { fetchTopicMessage } from 'src/api'\r\n\r\nimport MsgText from 'src/pages/topic/row/msg_text'\r\nimport UserInfo from 'src/pages/topic/row/user_info'\r\n\r\nimport { ITopicMessage } from 'src/store'\r\n\r\nimport './topic_preview.css'\r\n\r\ntype IProps = {\r\n  topicId: number,\r\n  n: number,\r\n  author: string,\r\n  loggedUserId: number,\r\n  onDataLoaded?: () => void\r\n}\r\n\r\nconst PreviewContent: FC<IProps> = ({ topicId, n, author, loggedUserId, onDataLoaded }): ReactElement => {\r\n\r\n  const [data, setData] = useState<ITopicMessage | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n\r\n    const getData = async () => {\r\n      try {\r\n        const _data = await fetchTopicMessage(topicId, n);\r\n        if (_data) {\r\n          setData(_data);\r\n          setError(null);\r\n          if (onDataLoaded) onDataLoaded();\r\n        } else {\r\n          setData(null);\r\n          setError(`   ${n}`);\r\n        }  \r\n      } catch (e) {\r\n        setData(null);\r\n        setError((e as Error).message);\r\n      }\r\n\r\n    }\r\n\r\n    getData();\r\n\r\n  }, [topicId, n, onDataLoaded])\r\n\r\n  if (!data && !error)\r\n    return null;\r\n\r\n  return (\r\n    <>\r\n      {data &&\r\n        <div className='preview-content'>\r\n          <div className='topic-preview-userinfo'>\r\n            <UserInfo data={data} isAuthor={data.user === author} isYou={data.userId === loggedUserId} isTooltip />\r\n          </div>\r\n          <MsgText\r\n            topicId={topicId}\r\n            n={n}\r\n            html={data.text}\r\n            vote={data.vote}\r\n            style={{ overflowY: \"auto\", overflowWrap: \"break-word\" }}\r\n          />\r\n        </div>}\r\n      {error && <span>{error}</span>}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default PreviewContent;","import { FC, ReactElement, useCallback, useState } from 'react'\r\nimport { SwipeEventData, useSwipeable } from 'react-swipeable'\r\nimport { fetchTopicInfo } from 'src/api'\r\n\r\nimport PreviewButtons from './preview_buttons'\r\nimport PreviewContent from './preview_content'\r\nimport './topic_preview.css'\r\n\r\ntype IProps = {\r\n  topicId: number,\r\n  initialMsgNumber: number,\r\n  author: string,\r\n  loggedUserId: number\r\n}\r\n\r\nconst TopicPreview: FC<IProps> = ({ topicId, initialMsgNumber, author, loggedUserId }): ReactElement => {\r\n\r\n  const [deltaX, setDeltaX] = useState(0);\r\n  const [display, setDispaly] = useState('none');\r\n  const [state, setState] = useState({\r\n    msgNumber: initialMsgNumber,\r\n    key: 0\r\n  })\r\n\r\n  const onClickFirst = () => {\r\n    setState({\r\n      msgNumber: 0,\r\n      key: state.key\r\n    });\r\n  }\r\n\r\n  const onClickNext = () => {\r\n    setState({\r\n      msgNumber: state.msgNumber + 1,\r\n      key: state.key\r\n    });\r\n  }\r\n\r\n  const onClickPrev = () => {\r\n    if (state.msgNumber > 0)\r\n      setState({\r\n        msgNumber: state.msgNumber - 1,\r\n        key: state.key\r\n      });\r\n  }\r\n\r\n  const onClickLast = async () => {\r\n    const info = await fetchTopicInfo(topicId);\r\n    setState({\r\n      msgNumber: info.count,\r\n      key: state.key\r\n    });    \r\n  }\r\n\r\n  const onSwiping = (eventData: SwipeEventData) => {\r\n    if (Math.abs(eventData.deltaX) < 35)\r\n      setDeltaX(0);\r\n    else\r\n      setDeltaX(eventData.deltaX);\r\n  }\r\n\r\n  const onSwiped = (eventData: SwipeEventData) => {\r\n\r\n    if (Math.abs(eventData.deltaX) > 150) {\r\n      if (eventData.dir === \"Left\") {\r\n        setState({\r\n          msgNumber: state.msgNumber + 1,\r\n          key: state.key + 1\r\n        });         \r\n      } else if (eventData.dir === \"Right\" && state.msgNumber > 0) {\r\n        setState({\r\n          msgNumber: state.msgNumber - 1,\r\n          key: state.key + 1\r\n        });           \r\n      }\r\n    }\r\n    setDeltaX(0);\r\n  }\r\n\r\n  const swipeable = useSwipeable({\r\n    onSwiping,\r\n    onSwiped,\r\n    delta: 15\r\n  });\r\n\r\n  const onContentLoaded = useCallback(() => {\r\n    setDispaly('block');\r\n  }, []);\r\n\r\n  let items = [state.msgNumber];\r\n\r\n  if (deltaX < 0)\r\n    items.push(state.msgNumber + 1);\r\n  else if (deltaX > 0 && state.msgNumber > 0)\r\n    items.push(state.msgNumber - 1);\r\n\r\n  const style: React.CSSProperties = {\r\n    transform: `translate3d(${deltaX}px, 0px, 0px)`,\r\n    flexDirection: deltaX > 0 ? 'row-reverse' : 'row'\r\n  }\r\n\r\n  return (\r\n    <div className=\"preview-container\" style={{ display }}>\r\n      <div className=\"topic-preview\">\r\n        <PreviewButtons\r\n          topicId={topicId}\r\n          onFirst={onClickFirst}\r\n          onLast={onClickLast}\r\n          onNext={onClickNext}\r\n          onPrev={onClickPrev}\r\n        />\r\n        <div className='preview-carousel' {...swipeable} style={style}>\r\n          <div className='preview-carousel-item' key={state.key} style={{ order: 0 }}>\r\n            <PreviewContent\r\n              topicId={topicId}\r\n              n={items[0]}\r\n              loggedUserId={loggedUserId}\r\n              author={author}\r\n              onDataLoaded={onContentLoaded}\r\n            />\r\n          </div>\r\n          {items.length > 1 &&\r\n            <div className='preview-carousel-item' key={state.key + 1} style={{ order: 1 }}>\r\n              <PreviewContent\r\n                topicId={topicId}\r\n                n={items[1]}\r\n                loggedUserId={loggedUserId}\r\n                author={author}\r\n              />\r\n            </div>}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default TopicPreview;","import { ReactElement, useCallback, useEffect } from 'react'\r\nimport { useLocation } from 'react-router-dom'\r\nimport queryString from 'query-string'\r\n\r\nimport { useAppDispatch, useAppSelector } from 'src/store'\r\nimport { getTopicsListIfNeeded } from 'src/store'\r\n\r\nimport Header from './header'\r\nimport TableHeader from './table_header'\r\nimport Row from './row'\r\nimport Pages from 'src/components/common/pages'\r\nimport NewTopic from './new_topic'\r\nimport Error from 'src/components/common/error'\r\n\r\nimport TopicPreview from 'src/components/preview/topic_preview'\r\n\r\nimport './topics_list.css'\r\n\r\nconst TopicsList = (): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch()\r\n  const items = useAppSelector(state => state.topicsList.items);\r\n  const status = useAppSelector(state => state.topicsList.status);\r\n  const error = useAppSelector(state => state.topicsList.error);\r\n  const loggedUserId = useAppSelector(state => state.login.userId);\r\n\r\n  const location = useLocation();\r\n\r\n  const updateTopicsList = useCallback((locationParams) => {\r\n    dispatch(getTopicsListIfNeeded(locationParams));\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    document.title = 'React.Mista';\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, [location.pathname, location.search]);\r\n\r\n  useEffect(() => {\r\n    const locationParams = queryString.parse(location.search);\r\n    updateTopicsList(locationParams);\r\n  }, [location.search, updateTopicsList]);\r\n\r\n  let rows = new Array(items.length);\r\n  for (let item of items) {\r\n\r\n    rows.push(\r\n      <Row \r\n        key={item.id} \r\n        {...item} \r\n        topicId={item.id}\r\n      />\r\n    );\r\n\r\n    if (item.showPreview)\r\n      rows.push(\r\n        <TopicPreview \r\n          key={`preview${item.id}`} \r\n          topicId={item.id} \r\n          initialMsgNumber={item.previewMsgNumber}\r\n          author={item.author}\r\n          loggedUserId={loggedUserId}\r\n          />\r\n      )\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Header />\r\n      {error && (<Error text={error} />)}\r\n      <div className=\"topic-list-table\">\r\n        <TableHeader\r\n          onUpdateClick={updateTopicsList}\r\n          isLoading={status === \"loading\"}\r\n        />\r\n        {rows}\r\n        <div className=\"tf\">\r\n          <Pages maxPage={10} />\r\n        </div>\r\n      </div>\r\n      <div id=\"F\" className=\"newtopic\" style={{ marginBottom: \"10px\", marginTop: \"5px\", position: 'relative' }}>\r\n        <NewTopic \r\n          onSubmitSuccess={updateTopicsList}\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TopicsList;","import { ReactElement } from 'react';\r\n\r\nimport { useAppSelector } from 'src/store'\r\nimport Login from 'src/components/login'\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst forums = {\r\n  '1c': '1:',\r\n  'life': ' ',\r\n  'it': ' ',\r\n  'job': ''\r\n};\r\n\r\nconst Header =  (): ReactElement => {\r\n\r\n  const info = useAppSelector(state => state.topic.info);\r\n\r\n  return (\r\n\r\n    <div className=\"flex-row\">\r\n      <div className=\"header-left\">\r\n        <Login/>\r\n      </div>\r\n      <div className=\"header-right\">\r\n        <span id=\"forum_string\" className=\"bold120\">\r\n          <Link to={`/index.php?forum=${info.forum}`} style={{ textDecoration: \"none\" }}>{forums[info.forum]}</Link>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Header;","import { ReactElement } from 'react'\r\n\r\nimport { useAppSelector } from 'src/store'\r\nimport { domain, urlTopicInfo, urlTopicMessages } from 'src/api'\r\n\r\nconst TopicInfo = (): ReactElement => {\r\n\r\n  const topicId = useAppSelector(state => state.topic.info.id);\r\n  const title = useAppSelector(state => state.topic.info.title);\r\n\r\n  let yandexUrl = \"https://www.yandex.ru/search/?text=\" + encodeURIComponent(title);\r\n\r\n  return (\r\n    <div className=\"topic-row\">\r\n      <div className=\"cell-userinfo\">\r\n        <div className=\"topic-tools\">\r\n          <a title=\"API.info\" href={`${domain}/${urlTopicInfo}?id=${topicId}`} className=\"agh\" style={{ display: \"block\", lineHeight: \"1em\" }}>i</a>\r\n          <a title=\"API.messages\" href={`${domain}/${urlTopicMessages}?id=${topicId}&from=0&to=20`} className=\"agh\" style={{ display: \"block\", lineHeight: \"1em\" }}>m</a>\r\n          {/*<a href=\"add_voting.php?topic_id=815217\" title=\" \">vote</a> &nbsp;&nbsp;*/}\r\n        </div>\r\n      </div>\r\n      <div className=\"cell-message\">\r\n        <div className=\"flex-row\">\r\n          <div style={{ flex: 1, textAlign: \"center\" }}>\r\n            <a href={`${domain}/topic.php?id=${topicId}`}>\r\n              <h1 className=\"topic-title\" dangerouslySetInnerHTML={{ __html: title }}></h1>\r\n            </a>\r\n            <div className=\"moder-action\"></div>\r\n          </div>\r\n          <div style={{ flex: \"0 0 20px\", position: \"relative\" }}>\r\n            <div className=\"div-va-middle\">\r\n              <a rel=\"noopener noreferrer\" href={yandexUrl} title=\"  \" target=\"_blank\" className=\"yandex\"></a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default TopicInfo;","import { FC, ReactElement } from 'react'\r\n\r\nimport UserInfo from './user_info'\r\nimport MsgText from './msg_text'\r\nimport { useAppSelector } from 'src/store'\r\nimport { ITopicMessage } from 'src/store'\r\n\r\ntype IProps = {\r\n  data: ITopicMessage\r\n}\r\n\r\nconst Row: FC<IProps> = ({ data }): ReactElement => {\r\n\r\n    const topicId = useAppSelector(state => state.topic.info.id);\r\n    const login = useAppSelector(state => state.login);\r\n    const author = useAppSelector(state => state.topic.item0?.user || '');\r\n\r\n    if (!data)\r\n      return null;\r\n\r\n    return (\r\n      <div className=\"topic-row\" id={String(data.n)}>\r\n        <div className=\"cell-userinfo\">\r\n          <UserInfo data={data} isAuthor={data.user === author} isYou={data.user === login.userName} />\r\n        </div>\r\n        <div className=\"cell-message\">\r\n          <MsgText html={data.text} topicId={topicId} n={data.n} vote={data.vote} />\r\n        </div>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default Row;","import { FC, ReactElement } from 'react';\r\nimport { Button } from 'react-bootstrap'\r\n\r\nimport { getMaxPage } from 'src/utils'\r\nimport { useAppDispatch, useAppSelector } from 'src/store'\r\nimport { defaultInfo, getNewMessagesIfNeeded } from 'src/store'\r\n\r\ntype IProps = { page?: number | string };\r\n\r\nconst Footer: FC<IProps> = ({ page }): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n  const info = useAppSelector(state => state.topic.info || defaultInfo);\r\n  const status = useAppSelector(state => state.topic.status);\r\n\r\n  const onBookmarkClick = () => {\r\n    //dispatch(addBookmark(info));\r\n  }\r\n\r\n  const onRefreshClick = () => {\r\n    dispatch(getNewMessagesIfNeeded());\r\n  }\r\n\r\n  const maxPage = getMaxPage(info.count);\r\n\r\n  let showUpdateButton = false;\r\n  if (page === 'last20' || page === maxPage)\r\n    showUpdateButton = true;\r\n\r\n  return (\r\n    <div className=\"flex-row\" id=\"F\">\r\n      <div className=\"ta-left va-top\" style={{ width: \"50%\" }}>\r\n        <Button\r\n          onClick={onBookmarkClick}\r\n          disabled={false}\r\n          size=\"sm\"\r\n          className='button'\r\n          variant=\"light\">\r\n          {''}\r\n        </Button>\r\n      </div>\r\n      <div className=\"ta-right va-middle\" style={{ marginLeft: \"auto\" }}>\r\n        {showUpdateButton &&\r\n          <Button\r\n            onClick={onRefreshClick}\r\n            disabled={status === \"loading\"}\r\n            size=\"sm\"\r\n            className='button'\r\n            variant=\"light\">\r\n            {status === \"loading\" ? '' : ' '}\r\n          </Button>\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Footer;","import React, { FC, ReactElement, useState, useCallback } from 'react'\r\nimport { FormGroup, Form } from 'react-bootstrap'\r\n\r\nimport TextEditor from 'src/components/common/text_editor'\r\nimport { useActionCreators, useAppDispatch, useAppSelector } from 'src/store'\r\nimport { newMessageActions, postNewMessage, newTopicActions } from 'src/store'\r\n\r\nimport type { PostNewmessageParams } from 'src/store'\r\n\r\ntype IProps = {\r\n  onSubmitSuccess?: () => void\r\n}\r\n\r\nconst NewMessage: FC<IProps> = ({ onSubmitSuccess }): ReactElement => {\r\n\r\n  const [voting, setVoting] = useState<number | undefined>();\r\n  const dispatch = useAppDispatch();\r\n  const actions = useActionCreators(newMessageActions);\r\n\r\n  const info = useAppSelector(state => state.topic.info);\r\n  const newMessage = useAppSelector(state => state.newMessage);\r\n\r\n  const onSubmit = (e: React.SyntheticEvent) => {\r\n\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    let params: PostNewmessageParams = {\r\n      text: newMessage.text,\r\n      topicId: String(info?.id),\r\n      onSuccess: afterSubmit,\r\n      voting_select: undefined\r\n    };\r\n\r\n    if (voting) {\r\n      params.voting_select = voting;\r\n    }\r\n\r\n    dispatch(postNewMessage(params));\r\n  }\r\n\r\n  const afterSubmit = () => {\r\n\r\n    actions.changeText('');\r\n    setVoting(undefined);\r\n\r\n    if (onSubmitSuccess) {\r\n      onSubmitSuccess();\r\n    }\r\n  }\r\n\r\n  const clearVoting = (e: React.MouseEvent<HTMLElement>) => {\r\n\r\n    e.preventDefault();\r\n    setVoting(undefined);\r\n\r\n  }\r\n\r\n  const setVotingOption = (i: number) => {\r\n    setVoting(i);\r\n  }\r\n\r\n  const onTextChange = useCallback((text: string) => {\r\n    dispatch(newTopicActions.changeText(text));\r\n  }, [dispatch]);\r\n\r\n  let votingElem: ReactElement;\r\n  if (info?.isVoting && info?.voting) {\r\n\r\n    let votingOptions = [];\r\n    for (let i = 1; i <= info.voting.length; i++) {\r\n\r\n      const item = info.voting[i - 1];\r\n      if (!item.text)\r\n        continue;\r\n\r\n      votingOptions.push(\r\n        <Form.Check\r\n          type=\"radio\"\r\n          key={i}\r\n          name=\"voting\"\r\n          checked={voting === i}\r\n          onChange={() => setVotingOption(i)}\r\n          label={`${i}. ${item.text}`}\r\n        />\r\n      );\r\n    }\r\n\r\n\r\n    votingElem = (\r\n      <FormGroup>\r\n        <legend>\r\n          <small> :\r\n            <span id=\"voting_clear\" style={{ marginLeft: \"5px\", cursor: \"pointer\" }} onClick={clearVoting}></span>\r\n          </small>\r\n        </legend>\r\n        {votingOptions}\r\n          !\r\n      </FormGroup>\r\n    );\r\n\r\n  }\r\n\r\n  return (\r\n    <form style={{ marginTop: \"5px\" }} onSubmit={onSubmit}>\r\n      <div className=\"bold\">   :</div>\r\n      <div className=\"new-message-container\">\r\n        <div className=\"new-message-text\">\r\n          <TextEditor\r\n            isFetching={newMessage.status === \"loading\"}\r\n            text={newMessage.text}\r\n            placeholder=\"\"\r\n            onChange={onTextChange}\r\n          />\r\n        </div>\r\n        <div className=\"new-message-voting\">\r\n          {votingElem}\r\n        </div>\r\n      </div>\r\n    </form>\r\n  )\r\n\r\n}\r\n\r\nexport default NewMessage;","import { FC, ReactElement } from 'react'\r\nimport { Form } from 'react-bootstrap'\r\n\r\ntype IProps = {\r\n  name: string,\r\n  label: string,\r\n  value: string,\r\n  values: Array<{ name: string, descr: string }>,\r\n  onChange: (e: React.ChangeEvent<HTMLInputElement>, name: string, value: string) => void,\r\n  oneLine: boolean\r\n}\r\n\r\nconst RadioOption: FC<IProps> = ({ name, label, value, values, oneLine, onChange }): ReactElement => {\r\n\r\n  const onChangeValue = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    onChange(e, name, e.target.value);\r\n  }\r\n\r\n  return (\r\n    <span>\r\n      <span style={{ marginRight: \"5px\" }}> {label} </span>\r\n      {oneLine && <br/>}\r\n      {values.map((item, i) =>\r\n        <Form.Check key={i}\r\n          type=\"radio\"\r\n          id={item.name}\r\n          label={item.descr}\r\n          name={label}\r\n          checked={item.name === value}\r\n          value={item.name}\r\n          inline={oneLine}\r\n          onChange={onChangeValue}\r\n        >\r\n        </Form.Check>\r\n      )}\r\n    </span>\r\n  );\r\n}\r\n\r\nexport default RadioOption;","import { FC } from 'react'\r\n\r\ntype IProps = {\r\n  name: string,\r\n  label: string,\r\n  value: string,\r\n  onChange: (e: React.ChangeEvent<HTMLInputElement>, name: string, value: string) => void,\r\n  postfix?: string\r\n}\r\n\r\nconst StringOption: FC<IProps> = (props): React.ReactElement => {\r\n\r\n  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name } = props;\r\n    props.onChange(e, name, e.target.value);\r\n  }\r\n\r\n  const { name, value, label, postfix } = props;\r\n\r\n  return (\r\n    <label htmlFor={name} style={{ marginRight: \"5px\" }}>\r\n      <span style={{ marginRight: \"5px\" }}>{label}</span>\r\n      <input type=\"string\" name={name} value={value} onChange={onChange} className='input' />\r\n      {postfix !== undefined ?\r\n        <span style={{ marginLeft: \"5px\" }}>{postfix}</span>\r\n        : null}\r\n    </label>\r\n  );\r\n}\r\n\r\nexport default StringOption;","export const formTabs = [\r\n  {\r\n    tabName: '',\r\n    rows: [\r\n      ['theme'],\r\n      ['topicsPerPage'],\r\n      ['autoRefreshTopicsList', 'autoRefreshTopicsListInterval'],\r\n      ['autoRefreshTopic', 'autoRefreshTopicInterval'],\r\n    ]\r\n  },\r\n  {\r\n    tabName: '',\r\n    rows: [\r\n      ['showTooltips', 'tooltipDelay'],\r\n      ['showTooltipOnPostLink']\r\n    ]\r\n  },\r\n  {\r\n    tabName: '',\r\n    rows: [\r\n      ['showYoutubeVideoTitle'],\r\n      ['replaceCatalogMista'],\r\n      ['fixBrokenLinks'],\r\n    ]\r\n  }\r\n];\r\n\r\nexport const formParams = {\r\n  'theme': {\r\n    type: 'radio',\r\n    label: ' :',\r\n    oneLine: true,\r\n    values: [\r\n      { name: 'yellow', descr: '' },\r\n      { name: 'lightgray', descr: '' },\r\n      { name: 'dark', descr: '' }\r\n    ]\r\n  },\r\n  'topicsPerPage': {\r\n    type: 'number',\r\n    label: '   (max 99):',\r\n    min: 1,\r\n    max: 99\r\n  },\r\n  'autoRefreshTopicsList': {\r\n    type: 'checkbox',\r\n    label: '  '\r\n  },\r\n  'autoRefreshTopicsListInterval': {\r\n    type: 'number',\r\n    label: '',\r\n    min: 60,\r\n    max: 1000000,\r\n    postfix: ''\r\n  },\r\n  'autoRefreshTopic': {\r\n    type: 'checkbox',\r\n    label: ' '\r\n  },\r\n  'autoRefreshTopicInterval': {\r\n    type: 'number',\r\n    label: '',\r\n    min: 60,\r\n    max: 1000000,\r\n    postfix: ''\r\n  },\r\n  //Tooltips   \r\n  'showTooltips': {\r\n    type: 'checkbox',\r\n    label: ' , ',\r\n    disabled: true\r\n  },\r\n  'tooltipDelay': {\r\n    type: 'number',\r\n    max: 1000000,\r\n    label: '',\r\n    postfix: '',\r\n    disabled: true\r\n  },\r\n  'showTooltipOnPostLink': {\r\n    type: 'checkbox',\r\n    label: '     ',\r\n    disabled: true    \r\n  },\r\n  //links   \r\n  'showYoutubeVideoTitle': {\r\n    type: 'checkbox',\r\n    label: '   youtube'\r\n  },\r\n  'replaceCatalogMista': {\r\n    type: 'checkbox',\r\n    label: '  catalog.mista.ru  infostart.ru'\r\n  },\r\n  'fixBrokenLinks': {\r\n    type: 'checkbox',\r\n    label: '   (  )'\r\n  },\r\n}","import { FC, ReactElement } from \"react\";\r\n\r\ntype IProps = {\r\n  name: string,\r\n  children?: React.ReactNode\r\n}\r\n\r\nconst Tab: FC<IProps> = ({ name, children }): ReactElement => {\r\n  return (\r\n    <div>\r\n      <div className=\"tab-header\">\r\n        {name}\r\n      </div>\r\n      <div className=\"tab-content\">\r\n        {children}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Tab;","import { ReactElement, useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { Form, FormControl, Button } from 'react-bootstrap'\r\n\r\nimport RadioOption from './radio_option'\r\nimport StringOption from './string_option'\r\n\r\nimport { formTabs, formParams } from './formscheme'\r\nimport Tab from './tab'\r\n\r\nimport { IOptionsItems, useAppDispatch, useAppSelector } from 'src/store'\r\nimport { defaultOptionsState, optionsActions } from 'src/store'\r\n\r\nimport './options.css'\r\n\r\nconst Options = (): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const options = useAppSelector(state => state.options);\r\n\r\n  const [state, setState] = useState({\r\n    items: options.items\r\n  })\r\n\r\n  const closeForm = () => {\r\n    navigate('/#');\r\n  }\r\n\r\n  const resetOptions = () => {\r\n    setState({\r\n      ...state,\r\n      items: Object.assign({}, defaultOptionsState.items)\r\n    })\r\n  }\r\n\r\n  const applyOptions = () => {\r\n\r\n    dispatch(optionsActions.save(state.items));\r\n    closeForm();\r\n  }\r\n\r\n  const onChange = (e: React.FormEvent<HTMLElement>, name: string, value: IOptionsItems[keyof IOptionsItems]) => {\r\n\r\n    let items = Object.assign({}, state.items);\r\n    items[name] = value;\r\n    setState({\r\n      ...state,\r\n      items\r\n    })\r\n  }\r\n\r\n  let tabs = [];\r\n  for (let tab of formTabs) {\r\n\r\n    let rows = [];\r\n    for (let i in tab.rows) {\r\n\r\n      const row = tab.rows[i];\r\n      let rowElem = [];\r\n      for (let name of row) {\r\n\r\n        const item = formParams[name];\r\n        if (!item) continue;\r\n\r\n        const value = state.items[name];\r\n\r\n        if (item.type === 'radio') {\r\n          rowElem.push(\r\n            <RadioOption\r\n              key={name}\r\n              name={name}\r\n              label={item.label}\r\n              values={item.values}\r\n              value={value}\r\n              oneLine={item.oneLine}\r\n              onChange={onChange}\r\n            />\r\n          );\r\n        } else if (item.type === 'number') {\r\n\r\n          if (item.label)\r\n            rowElem.push(\r\n              <label\r\n                htmlFor={name}\r\n                key={name + '_label'}\r\n                style={{ fontWeight: \"inherit\" }}>\r\n                {item.label}\r\n              </label>\r\n            );\r\n\r\n          rowElem.push(\r\n            <div className='options-number' key={name}>\r\n              <FormControl\r\n                type=\"number\"\r\n                min={item.min}\r\n                max={item.max}\r\n                value={value}\r\n                disabled={item.disabled}\r\n                onChange={(e) => onChange(e, name, e.target.value)}\r\n                \r\n                className='input'\r\n                size=\"sm\"\r\n              >\r\n              </FormControl>\r\n              {item.postfix &&\r\n                <span key={name + '_postfix'} style={{ marginLeft: \"5px\", flex: \"0 0 auto\", }}>{item.postfix}</span>}\r\n            </div>\r\n          );\r\n\r\n        } else if (item.type === 'string') {\r\n          rowElem.push(\r\n            <StringOption\r\n              key={name}\r\n              name={name}\r\n              label={item.label}\r\n              postfix={item.postfix}\r\n              value={value}\r\n              onChange={onChange}\r\n            />\r\n          );\r\n        } else if (item.type === 'checkbox') {\r\n          rowElem.push(\r\n            <Form.Check\r\n              id={name}\r\n              type=\"checkbox\"\r\n              label={item.label}\r\n              key={name}\r\n              name={name}\r\n              checked={String(value) === 'true'}\r\n              disabled={item.disabled}              \r\n              onChange={(e) => onChange(e, name, String(e.target.checked))}\r\n              style={{ flex: \"0 0 auto\", margin: \"0px\", maxWidth: \"100%\" }}\r\n            />\r\n          );\r\n        }\r\n      }\r\n\r\n      rows.push(\r\n        <div key={i} className=\"options-row\">\r\n          {rowElem}\r\n        </div>\r\n      );\r\n\r\n    }\r\n\r\n    tabs.push(\r\n      <Tab key={tab.tabName} name={tab.tabName}>\r\n        {rows}\r\n      </Tab>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"options-form\">\r\n      <div className=\"options-header\" style={{ cursor: \"default\" }}>\r\n        <b></b>\r\n      </div>\r\n      {tabs}\r\n      <div className=\"button-row\">\r\n        <Button\r\n          id=\"applyOptions\"\r\n          size=\"sm\"\r\n          variant=\"light\"\r\n          style={{ margin: \"5px\" }}\r\n          className='button'\r\n          onClick={applyOptions}>\r\n          OK\r\n        </Button>\r\n        <Button\r\n          id=\"cancelOptions\"\r\n          size=\"sm\"\r\n          variant=\"light\"\r\n          style={{ margin: \"5px\", float: \"left\" }}\r\n          className='button'\r\n          onClick={closeForm}>\r\n          \r\n        </Button>\r\n        <Button\r\n          id=\"defaultOptions\"\r\n          size=\"sm\"\r\n          variant=\"light\"\r\n          style={{ margin: \"5px\", float: \"right\" }}\r\n          className='button'\r\n          onClick={resetOptions}>\r\n           \r\n        </Button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Options;","import { ReactElement } from 'react';\r\nimport { Routes, Route } from 'react-router-dom'\r\nimport { Container } from 'react-bootstrap';\r\n\r\nimport TopicsList from './topics_list'\r\nimport Topic from './topic'\r\nimport Options from './options'\r\n\r\nconst AppRoutes = (): ReactElement => {\r\n\r\n  return (\r\n    <Container>\r\n      <Routes>\r\n        <Route path='/' element={<TopicsList />} />\r\n        <Route path='/index.php' element={<TopicsList />} />\r\n        <Route path='/topic.php' element={<Topic />} />\r\n        <Route path='/options.php' element={<Options />} />\r\n      </Routes>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default AppRoutes;","import{ ReactElement } from 'react'\r\nimport { domain } from 'src/api'\r\n\r\nconst NavBarFooter = (): ReactElement => {\r\n\r\n    return (\r\n        <footer className=\"flex-row navbar-footer\">\r\n            <a href={`${domain}/rules.php`}></a>\r\n            <span className=\"separator\">|</span>\r\n            <a href={`${domain}/about.php`}></a>\r\n            <span className=\"separator\">|</span>\r\n            <b><a href={`${domain}/ad.php`}>  </a>  </b>\r\n            <span className=\"separator\">|</span>\r\n            <a href={`${domain}/find.php`}></a>\r\n            <span className=\"separator\">|</span>\r\n            <a rel=\"nofollow\" href={`${domain}/sections_list.php`}></a>\r\n            <span className=\"separator\">|</span>\r\n            <a rel=\"nofollow\" href={`${domain}/rating.php`}></a>\r\n            <span className=\"separator\">|</span>\r\n            <a href=\"http://kb.mista.ru\"> </a>\r\n            <span className=\"separator\">|</span>\r\n            <a href=\"http://wiki.mista.ru\">- (2)</a>\r\n            <span className=\"separator\">|</span>\r\n            <a rel=\"nofollow\" href=\"http://m.mista.ru/\"></a>\r\n            <span className=\"separator\">|</span>\r\n            <a href={`${domain}/archive.php`}></a>\r\n            <span className=\"separator\">|</span>\r\n            <a href={`${domain}/moders.php`}></a>\r\n            <span className=\"separator\">|</span>\r\n            <a href={`${domain}/users_gallery.php`}></a>\r\n            <span className=\"separator\">|</span>\r\n            <a href={`${domain}/ban_list.php`}></a>\r\n            <span className=\"separator\">|</span>\r\n            <span>18+</span>\r\n        </footer>\r\n    )\r\n}\r\n\r\nexport default NavBarFooter;","import { FC, ReactElement } from 'react'\r\n\r\ntype IProps = {\r\n  closeWindow?: (e: React.SyntheticEvent<HTMLDivElement>) => void,\r\n  children?: React.ReactNode\r\n}\r\n\r\nconst TooltipHeader: FC<IProps> = ({ children, closeWindow }): ReactElement => {\r\n  return (\r\n    <div className=\"tooltip-header\">\r\n      {children}\r\n      <div className=\"tooltip-close\" onClick={closeWindow} onTouchEnd={closeWindow}>\r\n        <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i>\r\n        <i className=\"fa fa-angle-left\" aria-hidden=\"true\" style={{ marginLeft: \"-2px\" }}></i>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TooltipHeader;","import { FC, ReactElement } from 'react'\r\n\r\ntype IProps = {\r\n  onScroll?: (delta: number) => void,\r\n  children?: React.ReactNode\r\n}\r\n\r\nconst TooltipBody: FC<IProps> = ({ children, onScroll }): ReactElement => {\r\n\r\n  let startX = 0;\r\n\r\n  const onTouchStart = (e: React.TouchEvent<HTMLElement>) => {\r\n    startX = e.nativeEvent.changedTouches[0].clientX;\r\n  }\r\n\r\n  const onTouchEnd = (e: React.TouchEvent<HTMLElement>) => {\r\n\r\n    if (!onScroll) return;\r\n\r\n    let endX = e.nativeEvent.changedTouches[0].clientX;\r\n    if (Math.abs(endX - startX) > 100)\r\n      onScroll(-endX + startX);\r\n  }\r\n\r\n  return (\r\n    <div className=\"tooltip-text\" onTouchStart={onTouchStart} onTouchEnd={onTouchEnd}>\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TooltipBody;","import React, { FC, ReactElement } from 'react'\r\n\r\nimport Draggable from 'react-draggable';\r\n\r\nimport TooltipHeader from './tooltip_header'\r\nimport TooltipBody from './tooltip_body'\r\n\r\nimport './tooltip.css'\r\n\r\nimport { useActionCreators } from 'src/store';\r\nimport { ITooltipItem, tooltipsActions } from 'src/store';\r\n\r\ntype IProps = {\r\n  tooltip: ITooltipItem,\r\n  zIndex?: number,\r\n  children?: React.ReactNode\r\n}\r\n\r\nconst TooltipWindow: FC<IProps> = ({ tooltip, zIndex, children }): ReactElement => {\r\n\r\n  const actions = useActionCreators(tooltipsActions);\r\n\r\n  const onCloseClick = () => {\r\n    actions.close(tooltip.keys);\r\n  }\r\n\r\n  const { coords } = tooltip;\r\n\r\n  let axis: \"both\" | \"x\" | \"y\" | \"none\";;\r\n  let position: {\r\n    top: number,\r\n    left: number\r\n  };\r\n\r\n  if (window.innerWidth <= 768) {\r\n    axis = \"y\";\r\n    position = { top: coords.y, left: 5 };\r\n  } else {\r\n    axis = \"both\";\r\n    position = { top: coords.y, left: Math.min(coords.x, window.innerWidth - 670) }\r\n  }\r\n\r\n  let [header, body] = React.Children.toArray(children);\r\n\r\n  return (\r\n    <Draggable\r\n      axis={axis}\r\n      handle=\".tooltip-header\"\r\n      defaultClassNameDragging=\"dragging\"\r\n      key={zIndex}>\r\n\r\n      <div className=\"tooltip-window\" style={{ ...position }}>\r\n        <TooltipHeader closeWindow={onCloseClick}>\r\n          {(header as ReactElement).props.children}\r\n        </TooltipHeader>\r\n        <TooltipBody>\r\n          {(body as ReactElement).props.children}\r\n        </TooltipBody>\r\n      </div>\r\n    </Draggable>\r\n  )\r\n\r\n}\r\n\r\nexport default TooltipWindow;","import { FC, useEffect, useState } from 'react';\r\n\r\nimport { fetchTopicMessage } from 'src/api';\r\n\r\nimport MsgText from 'src/pages/topic/row/msg_text'\r\nimport UserInfo from 'src/pages/topic/row/user_info';\r\n\r\nimport TooltipWindow from './tooltip_window'\r\nimport TooltipHeader from './tooltip_header'\r\nimport TooltipBody from './tooltip_body'\r\n\r\nimport './tooltip.css'\r\nimport { useAppSelector } from 'src/store';\r\nimport { ITopicMessage, ITooltipItem } from 'src/store';\r\n\r\ntype IProps = {\r\n  tooltip: ITooltipItem\r\n}\r\n\r\nconst Tooltip: FC<IProps> = (props): React.ReactElement | null => {\r\n\r\n  const { info, items, item0 } = useAppSelector(state => state.topic);\r\n  const { tooltip } = props;\r\n  const { keys } = tooltip;\r\n\r\n  let text = '';\r\n  let data: ITopicMessage | undefined;\r\n  if (keys.topicId === info.id) {\r\n    if (keys.number === 0)\r\n      data = item0;\r\n    else\r\n      data = items.find((item: ITopicMessage) => item.n === keys.number);\r\n\r\n    if (data)\r\n      text = data.text;\r\n  }\r\n\r\n  const [state, setState] = useState({\r\n    data,\r\n    text\r\n  })\r\n\r\n  useEffect(() => {\r\n    \r\n    const fetchData = async () => {\r\n\r\n      if (state.data) return;\r\n  \r\n      let data: ITopicMessage;\r\n      let text = '';\r\n  \r\n      try {\r\n        data = await fetchTopicMessage(keys.topicId, keys.number);\r\n        if (data)\r\n          text = data.text;\r\n        else\r\n          text = `   ${keys.number}`;\r\n  \r\n      } catch (e) {\r\n        text = (e as Error).message;\r\n      }\r\n  \r\n      setState({ data, text });\r\n    }\r\n    \r\n    fetchData();\r\n\r\n  }, [keys.topicId, keys.number, state.data])\r\n\r\n  if (!state.text)\r\n    return null;\r\n\r\n  let header: React.ReactElement;\r\n  if (!state.data) {\r\n    header = <b></b>\r\n  } else {\r\n    header = <UserInfo data={state.data} isAuthor={false} isYou={false} isTooltip={true} />\r\n  }\r\n\r\n  return (\r\n    <TooltipWindow tooltip={props.tooltip}>\r\n      <TooltipHeader>\r\n        {header}\r\n      </TooltipHeader>\r\n      <TooltipBody>\r\n        <MsgText\r\n          n={state.data?.n}\r\n          vote={state.data?.vote}\r\n          html={state.text}\r\n          topicId={keys.topicId}\r\n          style={{ maxHeight: \"min(550px, 80vh)\", overflowY: \"auto\" }}\r\n        />\r\n      </TooltipBody>\r\n    </TooltipWindow>\r\n  )\r\n\r\n}\r\n\r\nexport default Tooltip;","import { ReactElement, useRef } from 'react'\r\nimport { useOnClickOutside } from 'usehooks-ts'\r\n\r\nimport { useActionCreators, useAppSelector } from 'src/store';\r\nimport { tooltipsActions } from 'src/store'\r\n\r\nimport Tooltip from './tooltip'\r\n\r\nconst TooltipsContainer = (): ReactElement => {\r\n\r\n  const items = useAppSelector(state => state.tooltips.items);\r\n  const actions = useActionCreators(tooltipsActions);\r\n  const ref = useRef(null);\r\n\r\n  const handleClickOutside = () => {\r\n    actions.closeAll();\r\n  };\r\n\r\n  useOnClickOutside(ref, handleClickOutside);\r\n  \r\n  return (\r\n    <div ref={ref}>\r\n      {items.map((item) => {\r\n        return (\r\n          <Tooltip key={item.hash} tooltip={item} />\r\n        )\r\n      }\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TooltipsContainer;","import { ReactElement, useLayoutEffect } from 'react';\r\nimport { HashRouter } from 'react-router-dom'\r\n\r\nimport NavBar from './components/navigation/nav_bar';\r\nimport AppRoutes from './pages/approutes';\r\nimport NavBarFooter from './components/navigation/nav_bar_footer';\r\nimport TooltipsContainer from './components/tooltips/tooltips_container';\r\nimport { useAppSelector } from './store';\r\n\r\n\r\nconst App = (): ReactElement => {\r\n\r\n  const theme = useAppSelector(state => state.options.items.theme);\r\n\r\n  useLayoutEffect(() => {\r\n    document.body.setAttribute('data-theme', theme);\r\n  }, [theme])\r\n\r\n  return (\r\n    <HashRouter>\r\n      <NavBar />\r\n      <AppRoutes />\r\n      <NavBarFooter />\r\n      <TooltipsContainer />\r\n    </HashRouter>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { createRoot } from 'react-dom/client';\r\nimport { Provider } from 'react-redux'\r\n\r\nimport './index.css';\r\nimport App from './App';\r\nimport { store, persistor } from 'src/store'\r\nimport { PersistGate } from 'redux-persist/integration/react';\r\n\r\nconst Root = ({ store }): React.ReactElement => (\r\n  <Provider store={store}>\r\n    <PersistGate loading={null} persistor={persistor}>\r\n      <App />\r\n    </PersistGate>\r\n  </Provider>\r\n)\r\n\r\nconst container = document.getElementById('root');\r\nconst root = createRoot(container!);\r\nroot.render(<Root store={store} />);","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkreact_mista\"] = self[\"webpackChunkreact_mista\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [216], function() { return __webpack_require__(4737); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_useState","useState","_useState2","_slicedToArray","searchEngine","setSearchEngine","_useState3","_useState4","text","setText","handleTextChange","useCallback","e","target","value","handleKeyDown","useEventCallback","key","doSearch","url","concat","window","open","_jsxs","InputGroup","size","children","DropdownButton","id","title","variant","onSelect","_jsx","Dropdown","Item","eventKey","FormControl","type","placeholder","className","onKeyDown","onChange","Text","onClick","style","zIndex","parseJSON","JSON","parse","replace","console","error","message","log","getMaxPage","count","Math","min","ceil","childrenToText","map","displayName","props","number","formattedTime","time","td","dayjs","isSame","Date","format","paramsToString","paramsPrefix","params","searchParams","URLSearchParams","undefined","append","str","toString","length","fetchJsonpAndGetJson","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","options","fullUrl","response","responseJson","json","wrap","_context","prev","next","domain","fetchJsonp","sent","utils","abrupt","stop","_x","_x2","_x3","apply","arguments","fetchAndGetJson","_ref2","_callee2","init","_context2","mode","credentials","fetch","_x4","_x5","_x6","convertResponse","session","userId","Number","user_id","userName","user_name","userHash","user_hash","lastError","last_error","fetchCookies","_fetchCookies","urlCookies","fetchLogin","urlLogin","method","body","username","user_password","password","headers","redirect","fetchLogout","urlLogout","fetchNewMessage","result","urlNewMessage","topic_id","fetchNewTopic","urlNewTopic","forum","code","shortn","name","fulln","fetchSections","list","urlSections","voting","x","select","parseInt","sectionId","section","created","authorId","author","updated","lastUser","updated_name","answers_count","down","closed","deleted","isVoting","is_voting","fetchTopicInfo","_fetchTopicInfo","info","urlTopicInfo","n","user","utime","vote","fetchTopicMessages","_fetchTopicMessages","urlTopicMessages","fetchTopicMessage","_fetchTopicMessage","to","from","find","item","convertRequest","request","page","itemsCount","itemsPerPage","topics","String","section_short_name","mytopics","myTopics","sect1","sectionCode","sect2","user0","answ","pinned","showPreview","fetchTopicsList","_fetchTopicsList","urlTopicsList","localStorage","getItem","checkLogin","createAsyncThunk","doLogin","_ref3","dispatch","doLogout","_callee3","_context3","shouldLogin","_ref5","login","status","slice","createSlice","initialState","logged","reducers","extraReducers","builder","addCase","pending","state","fulfilled","_ref6","payload","rejected","_ref7","_ref8","loginActions","actions","reducer","postNewTopic","fetchParams","i","message_text","topic_text","subject","target_section","target_forum","toLowerCase","action","rnd","round","random","votingItems","clear","changeSubject","changeText","_ref4","changeSection","showVoting","setError","newTopicActions","newTopic","defaultOptionsState","voteColors","items","theme","topicsPerPage","autoRefreshTopicsList","autoRefreshTopicsListInterval","autoRefreshTopic","autoRefreshTopicInterval","showTooltips","tooltipDelay","showTooltipOnPostLink","showYoutubeVideoTitle","replaceCatalogMista","fixBrokenLinks","save","optionsActions","getSections","getSectionsIfNeeded","getState","sections","shouldGetSections","tree","getKey","reduce","previous","currentItem","group","push","show","hash","stringify","keys","index","findIndex","coords","close","filter","val","closeAll","tooltipsActions","tooltips","defaultInfo","getTopic","topicId","item0","rejectWithValue","_item0","_items","first","_first","last","_items2","t0","t1","getNewMessages","shouldFetch","topic","getNewMessagesIfNeeded","_state$topic$info","_ref9","_ref10","topicActions","getTopicsList","getTopicsListIfNeeded","topicsList","togglePreview","previewMsgNumber","msgNumber","topicsListActions","postNewMessage","voting_select","newMessageActions","newMessage","persistConfig","storage","combineReducers","persistReducer","store","configureStore","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","devTools","process","persistor","persistStore","useAppDispatch","useDispatch","useAppSelector","useSelector","useActionCreators","useMemo","bindActionCreators","location","useLocation","search","get","Navbar","bg","expand","fixed","Brand","as","Link","Toggle","Collapse","Nav","link","active","href","Form","Search","CustomToggle","React","ref","cursor","preventDefault","float","event","onLogout","Menu","Divider","setUsername","setPassword","flexWrap","marginRight","flex","maxLength","autoComplete","Button","doLoginIfNeeded","margin","rel","dangerouslySetInnerHTML","__html","elem","useEffect","LoggedUser","LoginForm","_Fragment","ErrorElem","sectionsElem","label","defaultValue","selected","Select","currentTarget","arr","navigate","useNavigate","queryString","Login","Sections","isLoading","onUpdateClick","position","top","letterSpacing","pages","maxPage","loggedUserName","classes","classNames","bold","sectionHref","startsWith","addPrefix","overflowWrap","Pages","expanded","data","_objectWithoutProperties","_excluded","setTime","updateTime","msg","PreviewLink","TopicNameCell","_objectSpread","color","display","width","textAlign","last20","pathName","pathname","currentPage","locationParams","set","Pagination","isFetching","formRef","onShowVotingChange","textAreaRef","useRef","handleShowVotingChange","checked","handleChange","cols","rows","onKeyUp","current","ctrlKey","dispatchEvent","Event","cancelable","bubbles","ButtonGroup","textAreaNode","start","selectionStart","end","selectionEnd","oldText","len","replacement","substring","newText","disabled","Check","_newTopic$section","onSubmitSuccess","currentSection","setSection","Array","fill","votes","setVotes","onSectionChange","onVoteTextChange","votesCopy","onSubmit","onSuccess","this_onSubmitSuccess","shouldPost","postNewTopicIfNeeded","onSubjectChange","onTextChange","groupsElem","votingOptions","marginBottom","Control","TextEditor","FormGroup","onFirst","onPrev","onNext","onLast","marginLeft","scrolledToHash","","","","keywords","Set","split","","","","","","","1","","","","","trim","","","","","isKeyword","token","has","1","","","","","","","","","","","charAt","isNaN","_step","_iterator","_createForOfIteratorHelper","s","done","err","f","join","hidden","setHidden","newtext","highlight","prepareText","buttonText","linesCount","buttonShow","preStyle","overflow","height","marginTop","timerRef","currentTopicId","initialText","isMounted","run","_yield$fetchTopicInfo","onMouseOver","persist","setTimeout","showToolTip","onMouseOut","clearTimeout","stopPropagation","pageX","y","pageY","pageParam","getVideoId","fullHref","URL","hostname","getVideoParams","videoId","apiKey","apiUrl","hrefName","notFound","snippet","setHrefName","setTitle","parentText","newHref","LinkToPost","query","LinkToUser","Object","isMistaCatalog","class","escapedHref","regExp","RegExp","match","fixBrokenLink","YoutubeLink","total","colors","img","percent","textDecoration","src","maxWidth","alt","max","_toConsumableArray","paddingLeft","VoteItem","memo","htmlToReactParser","HtmlToReact","processNodeDefinitions","isValidNode","linkProcessor","shouldProcessNode","node","processNode","attribs","codeProcessor","Code","ProcessedText","processedHtml","processCode1C","res","processLinksToPosts","processText","html","processingInstructions","CustomLink","processDefaultNode","reactComponent","parseWithInstructions","initialVoteText","voteText","setVoteText","getVoteText","_info","voteChart","showVote","VoteChart","Vote","imgDisplay","setImgDisplay","isAuthor","isYou","isTooltip","dataStr","imgElem","timeElem","userClassNames","innerWidth","onLoad","onError","document","getElementById","scrollTo","offsetTop","loggedUserId","onDataLoaded","setData","getData","_data","UserInfo","MsgText","overflowY","initialMsgNumber","deltaX","setDeltaX","setDispaly","_useState5","_useState6","setState","onClickLast","swipeable","useSwipeable","onSwiping","eventData","abs","onSwiped","dir","delta","onContentLoaded","transform","flexDirection","PreviewButtons","order","PreviewContent","updateTopicsList","Row","TopicPreview","Header","Error","TableHeader","NewTopic","forums","yandexUrl","encodeURIComponent","lineHeight","_state$topic$item","showUpdateButton","votingElem","setVoting","afterSubmit","_loop","setVotingOption","locationPage","isLastPageRef","updateNewMessages","htmltext","DOMParser","parseFromString","firstChild","innerText","getTopicIfNeeded","timer","setInterval","clearInterval","nodeHash","TopicInfo","Footer","NewMessage","values","oneLine","onChangeValue","descr","inline","postfix","htmlFor","formTabs","tabName","formParams","closeForm","assign","tabs","tab","_step2","row","rowElem","_iterator2","RadioOption","fontWeight","StringOption","Tab","Container","Routes","Route","path","element","TopicsList","Topic","Options","closeWindow","onTouchEnd","onScroll","startX","onTouchStart","nativeEvent","changedTouches","clientX","endX","axis","tooltip","left","_React$Children$toArr","toArray","_React$Children$toArr2","header","Draggable","handle","defaultClassNameDragging","TooltipHeader","TooltipBody","_state$data","_state$data2","_useAppSelector","fetchData","TooltipWindow","maxHeight","useOnClickOutside","Tooltip","useLayoutEffect","setAttribute","HashRouter","NavBar","AppRoutes","NavBarFooter","TooltipsContainer","Root","Provider","PersistGate","loading","App","container","createRoot","render","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","j","every","splice","r","getter","__esModule","d","a","leafPrototypes","getProto","getPrototypeOf","obj","__proto__","t","this","then","ns","create","def","indexOf","getOwnPropertyNames","forEach","definition","o","defineProperty","enumerable","g","globalThis","Function","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}