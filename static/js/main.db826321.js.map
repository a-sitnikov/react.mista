{"version":3,"file":"static/js/main.db826321.js","mappings":"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","sources":["components/common/search.tsx","utils.ts","api/api-utils.ts","api/cookies.ts","api/login.ts","api/new_message.ts","api/newtopic.ts","api/sections.ts","api/topic_info.ts","api/topic_messages.ts","api/topics_list.ts","api/index.ts","store/slices/login.ts","store/slices/new_topic.ts","store/slices/options.ts","store/slices/sections.ts","store/slices/tooltips.ts","store/slices/topic.ts","store/slices/topics_list.ts","store/slices/new_message.ts","store/root.ts","store/hooks.ts","components/navigation/nav_bar.tsx","components/login/logged_user.tsx","components/login/login_form.tsx","components/common/error.tsx","components/login/index.tsx","pages/topics_list/sections.tsx","pages/topics_list/header.tsx","pages/topics_list/table_header.tsx","pages/topics_list/row/pages.tsx","pages/topics_list/row/topic_name_cell.tsx","pages/topics_list/row/preview_link.tsx","pages/topics_list/row/index.tsx","components/common/pages.tsx","components/common/text_editor.tsx","pages/topics_list/new_topic.tsx","components/preview/preview_buttons.tsx","components/extensions/code_highlight.ts","pages/topic/index.tsx","components/extensions/code1c.tsx","components/extensions/link_to_post.tsx","components/extensions/link_to_user.tsx","components/extensions/youtube_link.tsx","components/extensions/custom_link.tsx","pages/topic/row/vote_item.tsx","pages/topic/row/vote_chart.tsx","pages/topic/row/vote.tsx","pages/topic/row/msg_text.tsx","pages/topic/row/user_info.tsx","components/preview/preview_content.tsx","components/preview/topic_preview.tsx","pages/topics_list/index.tsx","pages/topic/header.tsx","pages/topic/topic_info.tsx","pages/topic/row/index.tsx","pages/topic/footer.tsx","pages/topic/new_message.tsx","pages/options/radio_option.tsx","pages/options/string_option.tsx","pages/options/formscheme.ts","pages/options/tab.tsx","pages/options/index.tsx","pages/approutes.tsx","components/navigation/nav_bar_footer.tsx","components/tooltips/tooltip_header.tsx","components/tooltips/tooltip_body.tsx","components/tooltips/tooltip_window.tsx","components/tooltips/tooltip.tsx","components/tooltips/tooltips_container.tsx","App.tsx","index.tsx","../webpack/bootstrap","../webpack/runtime/chunk loaded","../webpack/runtime/compat get default export","../webpack/runtime/create fake namespace object","../webpack/runtime/define property getters","../webpack/runtime/global","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object","../webpack/runtime/node module decorator","../webpack/runtime/jsonp chunk loading","../webpack/startup"],"sourcesContent":["import { ReactElement, useState } from 'react'\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\nimport FormControl from 'react-bootstrap/FormControl'\r\nimport Dropdown from 'react-bootstrap/Dropdown'\r\nimport DropdownButton from 'react-bootstrap/DropdownButton'\r\n\r\nimport './search.css'\r\n\r\nconst Search = (): ReactElement => {\r\n\r\n  const [searchEngine, setSearchEngine] = useState('Яндекс');\r\n  const [text, setText] = useState('');\r\n\r\n  const onKeyPress = (e: any) => {\r\n    if (e.key === 'Enter') {\r\n      doSearch();\r\n    }\r\n  }\r\n\r\n  const doSearch = () => {\r\n\r\n    let url: string;\r\n    if (searchEngine === 'Яндекс') \r\n      url = `https://www.yandex.ru/search/?text=${text}&site=forum.mista.ru`;\r\n\r\n    else if (searchEngine === 'Google') \r\n      url = `https://www.google.ru/search?q=${text}+site:forum.mista.ru`\r\n\r\n    window.open(url);\r\n    setText('');\r\n  }\r\n\r\n  return (\r\n    <InputGroup size=\"sm\">\r\n      <DropdownButton \r\n        id=\"search-engine\" \r\n        title=\"\" \r\n        size=\"sm\" \r\n        style={{ marginRight: \"2px\" }} \r\n        className='button' \r\n        variant=\"light\"\r\n        onSelect={eventKey => setSearchEngine(eventKey)}\r\n        >\r\n        <Dropdown.Item eventKey=\"Яндекс\">Яндекс</Dropdown.Item>\r\n        <Dropdown.Item eventKey=\"Google\">Google</Dropdown.Item>\r\n      </DropdownButton>\r\n      <FormControl\r\n        type=\"text\"\r\n        placeholder={`${searchEngine}: поиск`}\r\n        style={{ marginRight: \"4px\", paddingRight: \"27px\" }}\r\n        className='input'\r\n        onKeyPress={onKeyPress}\r\n        onChange={e => setText(e.target.value)}\r\n        value={text}\r\n      />\r\n      <InputGroup.Text style={{ marginLeft: \"-35px\", marginTop: \"auto\", marginBottom: \"auto\", cursor: \"pointer\" }} onClick={doSearch}>\r\n        <i className=\"fa fa-search input\" style={{ zIndex: 1000 }} />\r\n      </InputGroup.Text>\r\n    </InputGroup>\r\n  )\r\n\r\n}\r\n\r\nexport default Search;","import moment from \"moment\";\r\n\r\nexport const groupBy = <T, K extends keyof any>(list: T[], getKey: (item: T) => K) =>\r\n  list.reduce((previous, currentItem) => {\r\n    const group = getKey(currentItem);\r\n    if (!previous[group]) previous[group] = [];\r\n    previous[group].push(currentItem);\r\n    return previous;\r\n  }, {} as Record<K, T[]>)\r\n\r\nexport const parseJSON = (text: string): {} => {\r\n\r\n  try {\r\n    return JSON.parse(text);\r\n  } catch (e) {\r\n\r\n  }\r\n\r\n  try {\r\n    text = text\r\n      .replace(/\\\\</g, '<')\r\n      .replace(/\\\\>/g, '>')\r\n      .replace(/\\\\&/g, '&')\r\n      .replace(/\\\\'/g, \"'\")\r\n      .replace(/\\\\\"/g, \"\")\r\n      .replace(/ \"/g, ' \\\\\"')\r\n      .replace(/\"\"/g, '\\\\\"\"')\r\n      .replace(/\\t/g, '\\\\t')\r\n      .replace(/\"(\\.| |\\?)/g, '\\\\\"$1')\r\n\r\n    //           console.log(text);\r\n    return JSON.parse(text);\r\n\r\n    //return eval(text);\r\n  } catch (e) {\r\n    console.error(e.message);\r\n    console.log(text);\r\n\r\n    return {};\r\n  }\r\n}\r\n\r\nexport const getMaxPage = (count: number): number => {\r\n  if (count === -1) return -1;\r\n  return Math.min(Math.ceil(count / 100), 10) || 1;\r\n}\r\n\r\nexport const childrenToText = (children: any): string[] => {\r\n\r\n  if (!children) return [''];\r\n\r\n  return children.map(value => {\r\n    if (typeof (value) === 'string') {\r\n      return value;\r\n    } else if (value.type === 'br') {\r\n      return '<br>'\r\n    } else if (value.type.displayName === 'Connect(LinkToPost)' || value.type.displayName === 'Connect(t)') {\r\n      return value.props.number;\r\n    } else {\r\n      console.log(value);\r\n      return value;\r\n    }\r\n  })\r\n}\r\n\r\nexport const extractTextFromHTML = (htmltext: string): string => {\r\n  const parser = new DOMParser();\r\n  const floatingElement = parser.parseFromString(htmltext, 'text/html');\r\n  return (floatingElement.firstChild as HTMLElement).innerText;\r\n}\r\n\r\nexport function isToday(td: Date | number): boolean {\r\n  return moment(td).isSame(new Date(), 'day');\r\n}\r\n\r\nexport const formattedTime = (time: number): string => {\r\n  \r\n  if (time === 2147483648000) return '';\r\n  \r\n  if (isToday(time)) {\r\n    return moment(time).format('HH:mm')\r\n  } else {\r\n    return moment(time).format('DD.MM.YY')\r\n  }  \r\n}\r\n","import fetchJsonp from 'fetch-jsonp';\r\nimport * as utils from 'src/utils';\r\nimport { domain } from '.';\r\n\r\n\r\nexport const paramsToString = (paramsPrefix: string, params?: {}): string => {\r\n  if (!params)\r\n    return '';\r\n\r\n  let searchParams = new URLSearchParams();\r\n  for (let key in params) {\r\n    const value = params[key];\r\n    if (value !== undefined)\r\n      searchParams.append(key, value);\r\n  }\r\n\r\n  let str = searchParams.toString();\r\n  if (str.length > 0)\r\n    return paramsPrefix + str;\r\n\r\n  else\r\n    return '';\r\n};\r\n\r\nexport const fetchJsonpAndGetJson = async (url: string, params?: {}, options?: {}): Promise<any> => {\r\n\r\n  let fullUrl = `${domain}/${url}${paramsToString('?', params)}`;\r\n  const response = await fetchJsonp(fullUrl);\r\n  let responseJson = await response.json();\r\n  let json;\r\n  if (typeof (responseJson) === 'string') {\r\n\r\n    try {\r\n      json = JSON.parse(responseJson);\r\n    } catch (e) {\r\n      json = utils.parseJSON(responseJson);\r\n    }\r\n  } else {\r\n    json = responseJson;\r\n  }\r\n  return json;\r\n};\r\n\r\nexport const fetchAndGetJson = async (url: string, params?: {}, init?: RequestInit): Promise<any> => {\r\n\r\n  let fullUrl = `${domain}/${url}${paramsToString('?', params)}`;\r\n\r\n  if (!init)\r\n    init = {\r\n      mode: 'cors',\r\n      credentials: 'same-origin'\r\n    };\r\n\r\n  const response = await fetch(fullUrl, init);\r\n  return await response.json();\r\n\r\n};\r\n","import { urlCookies } from '.'\r\nimport { fetchJsonpAndGetJson } from './api-utils';\r\nimport { ILogin } from 'src/store';\r\n\r\ntype IAPIResponse = {\r\n  cookie: {\r\n    entr_id: string,\r\n    entr_key: string,\r\n    entr_hash: string,\r\n    musthave: string,\r\n    hotlog: string\r\n  },\r\n  session: {\r\n    entered: number,\r\n    user_id: string,\r\n    user_name: string,\r\n    user_hash: string,\r\n    is_moderator: number,\r\n    light_moderator: number,\r\n    section: string,\r\n    show_moderator_tools: number,\r\n    kb: string,\r\n    registered_unixtime: string,\r\n    guid: string,\r\n    last_error?: string,\r\n    user: {\r\n      id: string,\r\n      name: string,\r\n      is_moderator: boolean,\r\n      light_moderator: boolean,\r\n      kb: boolean,\r\n      section_owner: boolean,\r\n      section: string,\r\n      registered_unixtime: string,\r\n      balance: number\r\n    }\r\n  }\r\n}\r\n\r\nfunction convertResponse(response: IAPIResponse): ILogin {\r\n\r\n  const { session } = response;\r\n\r\n  return ({\r\n    userId: Number(session?.user_id),\r\n    userName: session?.user_name,\r\n    userHash: session?.user_hash,\r\n    lastError: session?.last_error\r\n  })\r\n\r\n}\r\n\r\nasync function fetchCookies(): Promise<ILogin| undefined>  {\r\n\r\n  const response = await fetchJsonpAndGetJson(urlCookies);\r\n  return convertResponse(response);\r\n\r\n}\r\n\r\nexport { fetchCookies }","import { domain, urlLogin, urlLogout } from '.'\r\nimport { paramsToString } from './api-utils';\r\n\r\nexport interface ILoginRequest {\r\n  username: string,\r\n  password: string,\r\n}\r\n\r\nexport const fetchLogin = async (params: ILoginRequest): Promise<void> => {\r\n  await fetch(`${domain}/${urlLogin}`, {\r\n    method: 'POST',\r\n    body: paramsToString('', {user_name: params.username, user_password: params.password}),\r\n    mode: 'no-cors',\r\n    credentials: 'include',\r\n    headers: {\r\n      'Accept': 'text/html,application/xhtml+xml,application/xml',\r\n      'Content-Type': 'application/x-www-form-urlencoded',\r\n    },\r\n    redirect: 'follow'\r\n  });\r\n}\r\n\r\nexport const fetchLogout = async (): Promise<void> => {\r\n  const fullUrl = `${domain}/${urlLogout}`;\r\n  await fetch(fullUrl, {\r\n    mode: 'no-cors',\r\n    credentials: 'include'\r\n  });\r\n}","import { domain, urlNewMessage } from \".\";\r\nimport { paramsToString } from './api-utils';\r\n\r\n// New message\r\nexport interface INewMessageRequest {\r\n  message_text: string,\r\n  action: \"new\",\r\n  topic_id: string,\r\n  rnd: number,\r\n  voting_select?: number,\r\n  as_admin?: boolean\r\n}\r\n\r\nexport const fetchNewMessage = async (params: INewMessageRequest): Promise<any> => {\r\n  \r\n  const url = urlNewMessage.replace(':id', params.topic_id);\r\n\r\n  const options: RequestInit = {\r\n    method: 'POST',\r\n    body: paramsToString('', params),\r\n    mode: 'no-cors',\r\n    credentials: 'include',\r\n    headers: {\r\n      'Accept': 'text/html,application/xhtml+xml,application/xml',\r\n      'Content-Type': 'application/x-www-form-urlencoded'  \r\n    },\r\n    redirect: 'follow'\r\n  }\r\n\r\n  const result = await fetch(`${domain}/${url}`, options);\r\n  return result;\r\n}","import { domain, urlNewTopic } from \".\";\r\nimport { paramsToString } from './api-utils';\r\n\r\nexport interface INewTopicRequest {\r\n  action: \"new\",\r\n  rnd: number,\r\n  topic_text: string,\r\n  message_text: string,\r\n  target_section: string,\r\n  target_forum: string,\r\n  voting: number,\r\n  select1?: string,\r\n  select2?: string,\r\n  select3?: string,\r\n  select4?: string,\r\n  select5?: string,\r\n  select6?: string,\r\n  select7?: string,\r\n  select8?: string,\r\n  select9?: string,\r\n  select10?: string\r\n}\r\n\r\nexport const fetchNewTopic = async (params: INewTopicRequest): Promise<any> => {\r\n\r\n  await fetch(`${domain}/${urlNewTopic}`, {\r\n    method: 'POST',\r\n    body: paramsToString('', params),\r\n    mode: 'no-cors',\r\n    credentials: 'include',\r\n    headers: {\r\n      'Content-Type': 'application/x-www-form-urlencoded'\r\n    }\r\n  });\r\n}","import { urlSections } from '.'\r\nimport { fetchJsonpAndGetJson } from './api-utils'\r\nimport type { ISectionItem } from 'src/store'\r\n\r\ninterface IAPIResponse {\r\n  id: number,\r\n  forum: string,\r\n  shortn: string,\r\n  fulln: string\r\n}\r\n\r\nfunction convertResponse(response: IAPIResponse): ISectionItem {\r\n\r\n  return ({\r\n    id: response.id,\r\n    forum: response.forum,\r\n    code: response.shortn,\r\n    name: response.fulln,\r\n  })\r\n\r\n}\r\n\r\nexport const fetchSections = async (): Promise<ISectionItem[]> => {\r\n  const list = await fetchJsonpAndGetJson(urlSections);\r\n  return list.map(convertResponse);\r\n}\r\n","import { urlTopicInfo } from '.'\r\nimport { fetchAndGetJson } from './api-utils';\r\nimport type { ITopicInfo } from 'src/store'\r\n\r\ninterface IAPIResponse {\r\n  id: string,\r\n  text: string,\r\n  forum: string,\r\n  section: string,\r\n  created: string,\r\n  user_id: string,\r\n  user_name: string,\r\n  updated: string,\r\n  updated_name: string,\r\n  answers_count: string,\r\n  down: number,\r\n  closed: number,\r\n  deleted: number,\r\n  is_voting: number,\r\n  voting: {\r\n    select: string,\r\n    result: number\r\n  }[]\r\n}\r\n\r\nfunction convertResponse(response: IAPIResponse): ITopicInfo {\r\n\r\n  let voting = [];\r\n  if (response.voting)\r\n    voting = response.voting.map(x => ({\r\n      text: x.select,\r\n      count: x.result\r\n    }));\r\n    \r\n  return ({\r\n    id: parseInt(response.id),\r\n    title: response.text,\r\n    forum: response.forum,\r\n    sectionId: response.section,\r\n    created: parseInt(response.created) * 1000,\r\n    authorId: response.user_id,\r\n    author: response.user_name,\r\n    updated: parseInt(response.updated) * 1000,\r\n    lastUser: response.updated_name,\r\n    count: parseInt(response.answers_count),\r\n    down: response.down,\r\n    closed: response.closed,\r\n    deleted: response.deleted,\r\n    isVoting: response.is_voting,\r\n    voting\r\n  })\r\n\r\n}\r\n\r\nasync function fetchTopicInfo(id: number): Promise<ITopicInfo> {\r\n\r\n  const info = await fetchAndGetJson(urlTopicInfo, { id });\r\n  return convertResponse(info);\r\n\r\n}\r\n\r\nexport { fetchTopicInfo }","\r\nimport { urlTopicMessages } from '.'\r\nimport { fetchAndGetJson } from './api-utils'\r\nimport type { ITopicMessage, ITopicMessagesList } from 'src/store'\r\n\r\ninterface IAPIRequest {\r\n  id: number,\r\n  from?: number,\r\n  to?: number\r\n}\r\n\r\nexport interface ITopicMessageRequest extends IAPIRequest {}\r\n\r\ninterface IAPIResponse {\r\n  id: string,\r\n  n: string,\r\n  user: string,\r\n  userId: string,\r\n  text: string,\r\n  utime: string,\r\n  vote: number\r\n}  \r\n\r\nfunction convertResponse(response: IAPIResponse): ITopicMessage {\r\n\r\n  return ({\r\n    id: parseInt(response.id),\r\n    n: parseInt(response.n),\r\n    user: response.user,\r\n    userId: parseInt(response.userId),\r\n    text: response.text,\r\n    time: parseInt(response.utime) * 1000,\r\n    vote: response.vote\r\n  })\r\n\r\n}\r\n\r\nasync function fetchTopicMessages(params?: ITopicMessageRequest): Promise<ITopicMessagesList> {\r\n\r\n  const list = await fetchAndGetJson(urlTopicMessages, params);\r\n  return list.map(convertResponse);\r\n\r\n}\r\n\r\nasync function fetchTopicMessage(id: number, n: number): Promise<ITopicMessage> {\r\n\r\n  const to = (n === 0) ? n+1 : n;\r\n\r\n  const list = await fetchAndGetJson(urlTopicMessages, {id, from: n, to});\r\n  return list.map(convertResponse).find((item: ITopicMessage) => item.n === n);\r\n\r\n}\r\n\r\nexport { fetchTopicMessages, fetchTopicMessage }","import { urlTopicsList } from '.'\r\nimport { fetchAndGetJson } from './api-utils'\r\n\r\nimport type { ITopicsList, ITopicsListItem } from 'src/store'\r\n\r\nexport interface ITopicsListRequest {\r\n  itemsPerPage?: number | null,\r\n  page?: number | null,\r\n  beforeTime?: string | null,\r\n  forum?: string | null,\r\n  section?: string | null,\r\n  userId?: string | null,\r\n  myTopics?: string | null\r\n}\r\n\r\ninterface IAPIRequest {\r\n  topics?: string,\r\n  section_short_name?: string,\r\n  forum?: string,\r\n  user_id?: string,\r\n  mytopics?: string\r\n}\r\n\r\ninterface IAPIResponse {\r\n  id: number,\r\n  forum: string,\r\n  sect1: string,\r\n  sect2: string,\r\n  v8: string,\r\n  closed: number,\r\n  down: number,\r\n  paid: number,\r\n  text: string,\r\n  message: string,\r\n  created: number,\r\n  utime: number,\r\n  user: string,\r\n  user0: string,\r\n  is_voting: number,\r\n  answ: number\r\n}\r\n\r\nfunction convertRequest(request: ITopicsListRequest): IAPIRequest {\r\n\r\n  const page = request.page || 1;\r\n  const itemsCount = request.itemsPerPage * page;\r\n\r\n  return {\r\n    topics: String(itemsCount),\r\n    section_short_name: request.section,\r\n    forum: request.forum,\r\n    user_id: request.userId,\r\n    mytopics: request.myTopics,\r\n  }\r\n}\r\n\r\nfunction convertResponse(response: IAPIResponse): ITopicsListItem {\r\n\r\n  return ({\r\n    id: response.id,\r\n    forum: response.forum,\r\n    section: response.sect1,\r\n    sectionCode: response.sect2,\r\n    author: response.user0,\r\n    lastUser: response.user,\r\n    created: response.created * 1000,\r\n    updated: response.utime * 1000,\r\n    count: response.answ,\r\n    text: response.text,\r\n    closed: response.closed === 1,\r\n    down: response.down === 1,\r\n    pinned: response.utime === 2147483648,\r\n    isVoting: response.is_voting === 1,\r\n    showPreview: false\r\n  })\r\n\r\n}\r\n\r\nasync function fetchTopicsList(params?: ITopicsListRequest): Promise<ITopicsList> {\r\n\r\n  const request = convertRequest(params);\r\n\r\n  const list = await fetchAndGetJson(urlTopicsList, request);\r\n  return list.map(convertResponse);\r\n\r\n}\r\n\r\nexport { fetchTopicsList }","export const domain: string = localStorage.getItem('domain') || 'https://forum.mista.ru';\r\n//export const domain = 'https://dev.mista.ru';\r\nexport const urlTopicsList: string = localStorage.getItem('urlTopicsList') || 'api/topic.php';\r\nexport const urlTopicInfo: string = localStorage.getItem('urlTopicInfo') || 'ajax_gettopic.php';\r\nexport const urlTopicMessages: string = localStorage.getItem('urlTopicMessages') || 'api/message.php';\r\nexport const urlLogin: string = localStorage.getItem('urlLogin') || 'users.php?action=do_enter';\r\nexport const urlLogout: string = localStorage.getItem('urlLogout') || 'users.php?action=exit';\r\nexport const urlCookies: string = localStorage.getItem('urlCookies') || 'ajax_cookie.php';\r\nexport const urlSections: string = localStorage.getItem('urlSections') || 'ajax_getsectionslist.php';\r\nexport const urlNewMessage: string = localStorage.getItem('urlNewMessage') || 'topic.php?id=:id&page=1';\r\nexport const urlNewTopic: string = localStorage.getItem('urlNewTopic') || 'index.php';\r\nexport const urlAddBookmark: string = localStorage.getItem('urlAddBookmark') || 'ajax_addbookmark.php';\r\nexport const urlSearch: string = localStorage.getItem('urlSearch') || 'ajax_find.php';\r\n\r\nexport * from './cookies'\r\nexport * from './login'\r\nexport * from './new_message'\r\nexport * from './newtopic'\r\nexport * from './sections'\r\nexport * from './topic_info'\r\nexport * from './topic_messages'\r\nexport * from './topics_list'\r\n","import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit'\r\n\r\nimport { fetchLogin, fetchLogout, ILoginRequest } from 'src/api'\r\nimport { fetchCookies } from 'src/api'\r\n\r\nimport { RootState } from '../types';\r\n\r\nexport interface ILogin {\r\n  userId?: number;\r\n  userName?: string,\r\n  userHash?: string,\r\n  lastError?: string,\r\n}\r\n\r\nexport interface LoginState {\r\n  status: \"init\" | \"loading\" | \"success\" | \"error\",\r\n  logged: boolean,\r\n  userId?: number,\r\n  userName?: string,\r\n  userHash?: string,\r\n  lastError?: string,\r\n  error?: string,\r\n  lastUpdated?: number,\r\n  isFetching?: boolean,\r\n}\r\n\r\nconst initialState: LoginState = {\r\n  status: \"init\",\r\n  logged: false\r\n}\r\n\r\nexport const checkLogin = createAsyncThunk(\r\n  'login/check',\r\n  async () => {\r\n\r\n    return await fetchCookies();\r\n\r\n  }\r\n)\r\n\r\nexport const doLogin = createAsyncThunk(\r\n  'login/login',\r\n  async (params: ILoginRequest, { dispatch }) => {\r\n\r\n    await fetchLogin(params);\r\n    return fetchCookies();\r\n\r\n  }\r\n)\r\n\r\nexport const doLogout = createAsyncThunk(\r\n  'login/logout',\r\n  async () => {\r\n\r\n    return await fetchLogout();\r\n\r\n  }\r\n)\r\n\r\nconst shouldLogin = ({ login }: RootState): boolean => {\r\n \r\n  if (!login) return true;\r\n  if (login.status === \"loading\") return false;\r\n  \r\n  return true;\r\n}\r\n\r\nexport const doLoginIfNeeded = (username: string, password: string): any => (dispatch: any, getState: any) => {\r\n  if (shouldLogin(getState())) {\r\n    return dispatch(doLogin({ username, password }))\r\n  }\r\n}\r\n\r\nexport const checkLoginIfNeeded = (): any => (dispatch: any, getState: any) => {\r\n  if (shouldLogin(getState())) {\r\n    return dispatch(checkLogin())\r\n  }\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'login',\r\n  initialState,\r\n  reducers: {\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(doLogin.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })    \r\n      .addCase(doLogin.fulfilled, (state, { payload }: PayloadAction<ILogin>) => {\r\n        state.status = \"success\";\r\n        state.userId = payload.userId;\r\n        state.userName = payload.userName;\r\n        state.userHash = payload.userHash;\r\n        state.logged = true;\r\n        delete state.error;\r\n      })   \r\n      .addCase(doLogin.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      })   \r\n      // logout\r\n      .addCase(doLogout.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })    \r\n      .addCase(doLogout.fulfilled, (state) => {\r\n        state.status = \"success\";\r\n        state.logged = false;\r\n\r\n        delete state.userId;\r\n        delete state.userName;\r\n        delete state.userHash;\r\n        delete state.error;\r\n      })   \r\n      .addCase(doLogout.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      }) \r\n  }\r\n})  \r\n\r\nexport const { actions: loginActions, reducer: login } = slice;","import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit'\r\n\r\nimport { ISectionItem } from \"./sections\";\r\nimport { fetchNewTopic, INewTopicRequest } from 'src/api';\r\nimport { RootState } from '../types';\r\n\r\nexport type NewTopicState = {\r\n  status: \"init\" | \"loading\" | \"success\" | \"error\",\r\n  section: ISectionItem,\r\n  text: string,\r\n  subject: string,\r\n  forum: string,\r\n  isVoting: boolean,\r\n  error?: string\r\n};\r\n\r\nconst initialState: NewTopicState = {\r\n  status: \"init\",\r\n  section: null,\r\n  text: '',\r\n  subject: '',\r\n  forum: '1C',\r\n  isVoting: false\r\n}\r\n\r\nexport type postNewTopicParams = {\r\n  subject: string,\r\n  text: string,\r\n  section: number,\r\n  forum: string,\r\n  isVoting: boolean,\r\n  votingItems?: Array<string>,\r\n  onSuccess?: () => void\r\n};\r\n\r\nexport const postNewTopic = createAsyncThunk(\r\n  'newTopic/post',\r\n  async (params: postNewTopicParams) => {\r\n\r\n    let fetchParams: INewTopicRequest = {\r\n      message_text: params.text,\r\n      topic_text: params.subject,\r\n      target_section: String(params.section),\r\n      target_forum: params.forum.toLowerCase(),\r\n      action: 'new',\r\n      rnd: Math.round(Math.random() * 10000000000),\r\n      voting: params.isVoting ? 1 : 0\r\n    };\r\n\r\n    if (params.votingItems)\r\n      for (let i = 0; i < params.votingItems.length; i++) {\r\n        fetchParams[`section${i + 1}`] = params.votingItems[i];\r\n      }\r\n\r\n    await fetchNewTopic(fetchParams);\r\n    // if (params.onSuccess)\r\n    // params.onSuccess();\r\n  })\r\n\r\nexport const shouldPost = ({ newTopic }: RootState): boolean => {\r\n\r\n  if (!newTopic) return false\r\n  if (newTopic.status === \"loading\") return false\r\n\r\n  return true\r\n}\r\n\r\nexport const postNewTopicIfNeeded = (params: postNewTopicParams) => (dispatch: any, getState: any) => {\r\n  const state = getState();\r\n  if (shouldPost(state)) {\r\n    return dispatch(postNewTopic(params));\r\n  }\r\n}\r\n\r\nconst clear = (state: NewTopicState) => {\r\n  state.status = \"init\";\r\n  state.text = '';\r\n  state.subject = '';\r\n  state.forum = '';\r\n  state.isVoting = false;\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'newTopic',\r\n  initialState,\r\n  reducers: {\r\n    clear,\r\n    changeSubject: (state, { payload }: PayloadAction<string>) => {\r\n      state.subject = payload;\r\n    },\r\n    changeText: (state, { payload }: PayloadAction<string>) => {\r\n      state.text = payload;\r\n    },\r\n    changeSection: (state, { payload }: PayloadAction<ISectionItem>) => {\r\n      state.section = payload;\r\n      state.forum = payload?.forum.toLowerCase();\r\n    },\r\n    showVoting: (state, { payload }: PayloadAction<boolean>) => {\r\n      state.isVoting = payload;\r\n    },\r\n    setError: (state, { payload }: PayloadAction<string>) => {\r\n      state.error = payload;\r\n    }\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(postNewTopic.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })\r\n      .addCase(postNewTopic.fulfilled, (state) => {\r\n        clear(state);\r\n        delete state.error;\r\n      })\r\n      .addCase(postNewTopic.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      })\r\n  }\r\n});\r\n\r\nexport const { actions: newTopicActions, reducer: newTopic } = slice;","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\r\n\r\nexport interface IOptionsItems {\r\n  theme: 'yellow' | 'lightgray' | 'dark',\r\n  topicsPerPage: string,\r\n  autoRefreshTopicsList: string,\r\n  autoRefreshTopicsListInterval: string,\r\n  autoRefreshTopic: string,\r\n  autoRefreshTopicInterval: string,\r\n  tooltipDelay: string,\r\n  showTooltips: string,\r\n  showTooltipOnPostLink: string,\r\n  showYoutubeVideoTitle: string,\r\n  replaceCatalogMista: string,\r\n  fixBrokenLinks: string\r\n}\r\n\r\nexport interface OptionsState {\r\n  voteColors: Array<string>,\r\n  items: IOptionsItems,\r\n  show?: boolean\r\n};\r\n\r\nexport const defaultOptionsState: OptionsState = {\r\n  voteColors: [\r\n    \"#FF1616\", //1\r\n    \"#1A861A\", //2\r\n    \"#0023FF\", //3\r\n    \"#FF6B18\", //4\r\n    \"#9B3A6E\", //5\r\n    \"#567655\", //6\r\n    \"#233345\", //7\r\n    \"#CC0000\", //8\r\n    \"#00CCCC\", //9\r\n    \"#0000CC\", //10\r\n  ],\r\n  items: {\r\n    theme: 'lightgray',\r\n    topicsPerPage: '20',\r\n    autoRefreshTopicsList: 'false',\r\n    autoRefreshTopicsListInterval: '60',\r\n    autoRefreshTopic: 'true',\r\n    autoRefreshTopicInterval: '60',\r\n    //tooltips\r\n    showTooltips: 'true',\r\n    tooltipDelay: '500',\r\n    showTooltipOnPostLink: 'true',\r\n    //links\r\n    showYoutubeVideoTitle: 'true',\r\n    replaceCatalogMista: 'true',\r\n    fixBrokenLinks: 'true',\r\n  }\r\n}\r\n\r\nconst readOption = (name: string, defaultValue: string): string => {\r\n  return window.localStorage.getItem(name) || defaultValue;\r\n}\r\n\r\nconst readAllOptions = (): OptionsState => {\r\n  \r\n  let state: OptionsState = defaultOptionsState;\r\n  for (let key in state.items) {\r\n    state.items[key] = readOption(key, state.items[key]);\r\n  }\r\n\r\n  return state;\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'options',\r\n  initialState: readAllOptions(),\r\n  reducers: {\r\n    read: (state) => {\r\n      for (let key in defaultOptionsState.items) {\r\n        state.items[key] = readOption(key, defaultOptionsState.items[key]);\r\n      }\r\n    },\r\n    save: (state, { payload }: PayloadAction<IOptionsItems>) => {\r\n      for (let key in payload) {\r\n        const value = String(payload[key]); \r\n        state.items[key] = value;\r\n        window.localStorage.setItem(key, value);\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nexport const { actions: optionsActions, reducer: options } = slice;","import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\r\n\r\nimport { groupBy } from 'src/utils'\r\n\r\nimport { fetchSections } from 'src/api'\r\nimport { RootState } from '../types';\r\n\r\nexport interface ISectionItem {\r\n  id: number;\r\n  forum: string,\r\n  code: string,\r\n  name: string,\r\n}\r\n\r\nexport interface ISectionsTree{\r\n  [key: string]: ISectionItem[]\r\n}\r\n\r\nexport interface SectionsState {\r\n  status: \"init\" | \"loading\" | \"success\" | \"error\";\r\n  items: ISectionItem[],\r\n  tree?: ISectionsTree,\r\n  error?: string,\r\n  lastUpdated?: number\r\n}\r\n\r\nconst initialState: SectionsState = {\r\n  status: \"init\",\r\n  items: [],\r\n  tree: {}\r\n}\r\n\r\nexport const getSections = createAsyncThunk(\r\n  'sections/fetch',\r\n  async () => {\r\n    return await fetchSections();\r\n  }\r\n)\r\n\r\nconst shouldGetSections = ({ sections }: RootState): boolean => {\r\n\r\n  if (!sections) return true\r\n  if (sections.status === \"loading\") return false\r\n  if (sections.items.length > 0) return false;\r\n\r\n  return true;\r\n}\r\n\r\nexport const getSectionsIfNeeded = (): any => (dispatch: any, getState: any) => {\r\n  if (shouldGetSections(getState())) {\r\n    return dispatch(getSections());\r\n  }\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'sections',\r\n  initialState,\r\n  reducers: {\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(getSections.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;        \r\n      })\r\n      .addCase(getSections.fulfilled, (state, { payload }) => {\r\n        state.status = \"success\";\r\n        state.items = payload;\r\n        state.tree = groupBy(state.items, item => item.forum);\r\n        delete state.error;        \r\n      })\r\n      .addCase(getSections.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error  = error?.message;\r\n      })      \r\n  }\r\n});\r\n\r\nexport const { actions: sectionsActions, reducer: sections } = slice;","import { createSlice } from '@reduxjs/toolkit'\r\nimport type { PayloadAction } from '@reduxjs/toolkit'\r\n\r\nexport interface ITooltipKeys {\r\n  topicId: number,\r\n  number: number\r\n}\r\n\r\nexport interface ICoords {\r\n  x: number,\r\n  y: number\r\n}\r\n\r\nexport interface ITooltipItem {\r\n  hash: string,\r\n  keys: ITooltipKeys,\r\n  coords: ICoords,\r\n  zIndex: number\r\n}\r\n\r\nexport interface ITooltipsList extends Array<ITooltipItem> {}\r\n\r\nexport interface TooltipsState {\r\n  items: ITooltipsList,\r\n}\r\n\r\nconst initialState: TooltipsState = {\r\n  items: []\r\n}\r\n\r\nconst show = (state: TooltipsState, { payload }: PayloadAction<{ keys: ITooltipKeys; coords: ICoords}>) => {\r\n  const hash = JSON.stringify(payload.keys);\r\n  const index = state.items.findIndex(item => item.hash === hash);\r\n  let zIndex = 0;\r\n  if (state.items.length)\r\n    zIndex = state.items[state.items.length - 1].zIndex + 1;\r\n  if (index === - 1)\r\n    state.items.push({\r\n      keys: payload.keys,\r\n      coords: payload.coords,\r\n      hash,\r\n      zIndex \r\n    })\r\n  else {\r\n    //state.list = moveToEnd(state.list, index);\r\n    state.items[state.items.length - 1].zIndex = zIndex;\r\n  }\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'tooltips',\r\n  initialState,\r\n  reducers: {\r\n    show,\r\n    close: (state, { payload }: PayloadAction<ITooltipKeys>) => {\r\n      const hash = JSON.stringify(payload);\r\n      state.items = state.items.filter(val => val.hash !== hash); \r\n    },\r\n    closeAll: (state) => {\r\n      state.items = [];\r\n    } \r\n  }\r\n});\r\n\r\nexport const { actions: tooltipsActions, reducer: tooltips } = slice;\r\n","import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\r\n\r\nimport { fetchTopicMessage, fetchTopicMessages, fetchTopicInfo } from 'src/api'\r\nimport { RootState } from '../types';\r\n\r\nexport interface IVotingItem {\r\n  text: string,\r\n  count: number\r\n}\r\n\r\nexport interface ITopicInfo {\r\n    id: number,\r\n    title: string,\r\n    forum?: string,\r\n    sectionId?: string,\r\n    created?: number,\r\n    authorId?: string,\r\n    author?: string,\r\n    updated?: number,\r\n    lastUser?: string,\r\n    count?: number,\r\n    down?: number,\r\n    closed?: number,\r\n    deleted?: number,\r\n    isVoting?: number,\r\n    voting?: IVotingItem[]\r\n  }\r\n\r\nexport interface ITopicMessage {\r\n  id: number,\r\n  n: number,\r\n  user: string,\r\n  userId: number,\r\n  text: string,\r\n  time: number,\r\n  vote: number\r\n}\r\n\r\nexport interface ITopicMessagesList extends Array<ITopicMessage> {}\r\n\r\nexport interface TopicState {\r\n  status?: \"init\" | \"loading\" | \"success\" | \"error\",\r\n  items: ITopicMessagesList,\r\n  item0?: ITopicMessage,\r\n  info?: ITopicInfo,\r\n  error?: string,\r\n  lastUpdated?: number\r\n}\r\n\r\nexport const defaultInfo: ITopicInfo = {\r\n  id: 0,\r\n  title: \"\",\r\n  count: -1\r\n}\r\n\r\nconst initialState: TopicState = {\r\n  status: \"init\",\r\n  items: [],\r\n  info: defaultInfo\r\n}\r\n\r\nexport const getTopic = createAsyncThunk(\r\n  'topics/fetch',\r\n  async ({ topicId, page, item0 }: { \r\n      topicId: number, \r\n      page: number | string, \r\n      item0: ITopicMessage \r\n    }, { rejectWithValue }) => {\r\n\r\n    let info: ITopicInfo;\r\n    try {\r\n      info = await fetchTopicInfo(topicId);\r\n    } catch (e) {\r\n      console.error(e);\r\n      info = {\r\n        id: topicId,\r\n        title: '',\r\n        count: -1\r\n      };\r\n    }\r\n\r\n    try {\r\n      let _item0 = item0;\r\n      let _items;\r\n      if (page === 'last20') {\r\n\r\n        if (info.count > 21) {\r\n\r\n          if (!_item0) {\r\n            _item0 = await fetchTopicMessage(topicId, 0);\r\n          }\r\n\r\n          let first = info.count - 20;\r\n          _items = await fetchTopicMessages({\r\n            id: topicId,\r\n            from: first,\r\n            to: 1010\r\n          });\r\n\r\n        } else {\r\n          let items = await fetchTopicMessages({\r\n            id: topicId,\r\n            from: 0,\r\n            to: 1010\r\n          });\r\n          _item0 = items[0];\r\n          _items = items.slice(1);\r\n        }\r\n\r\n      } else {\r\n\r\n        page = +page;\r\n        let first = 0;\r\n        let last = page * 100 - 1;\r\n\r\n        if (page > 1) {\r\n\r\n          first = (page - 1) * 100;\r\n          if (!_item0) {\r\n            _item0 = await fetchTopicMessage(topicId, 0);\r\n          }\r\n\r\n          _items = await fetchTopicMessages({\r\n            id: topicId,\r\n            from: first,\r\n            to: last\r\n          });\r\n\r\n        } else {\r\n          if (_item0)\r\n            first = 1;\r\n          else\r\n            first = 0;\r\n\r\n          let items = await fetchTopicMessages({\r\n            id: topicId,\r\n            from: first,\r\n            to: last\r\n          });\r\n\r\n          if (_item0) {\r\n            _items = items;\r\n          } else {\r\n            _item0 = items[0];\r\n            _items = items.slice(1);\r\n          }\r\n        }\r\n\r\n      }\r\n\r\n      if (info.count === 0 && _items.length > 0)\r\n        info.count = _items[_items.length - 1].n;\r\n\r\n      if (page === 'last20' && _items.length > 20) {\r\n        _items = _items.slice(-20);\r\n      }\r\n\r\n      return {\r\n        info,\r\n        item0: _item0,\r\n        list: _items\r\n      }\r\n\r\n    } catch (error) {\r\n\r\n      console.error('Failed to fetch topic:', error);\r\n      rejectWithValue(error);\r\n\r\n    }\r\n  }\r\n)\r\n\r\nexport const getNewMessages = createAsyncThunk(\r\n  'topic/getNewMessages',\r\n  async ({ id, count }:  {\r\n      id: number, \r\n      count: number\r\n    }) => {\r\n\r\n    return await fetchTopicMessages({\r\n      id: id,\r\n      from: count + 1,\r\n      to: 1050\r\n    });\r\n\r\n  }\r\n)\r\n\r\nconst shouldFetch = ({ topic } : RootState) => {\r\n  \r\n  if (!topic) return true;\r\n  if (topic.status === \"loading\") return false;\r\n  \r\n  return true\r\n}\r\n\r\nexport const getTopicIfNeeded = (topicId: number, page: number |string): any => (dispatch: any, getState: any) => {\r\n \r\n  const state = getState();\r\n  if (shouldFetch(state)) {\r\n    let item0: ITopicMessage = null;\r\n    if (topicId === state.topic.info.id)\r\n      item0 = state.topic.item0;  \r\n    return dispatch(getTopic({ topicId, page, item0 }));\r\n  }\r\n}\r\n\r\nexport const getNewMessagesIfNeeded = () => (dispatch: any, getState: any) => {\r\n  const state = getState();\r\n  const { id, count } = state.topic.info;\r\n  if (shouldFetch(state)) {\r\n    return dispatch(getNewMessages({ id, count }));\r\n  }\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'topic',\r\n  initialState,\r\n  reducers: {\r\n    clear: (state) => {\r\n      state.info = initialState.info;\r\n      state.item0 = initialState.item0;\r\n      state.items = initialState.items;\r\n      state.status = initialState.status;\r\n      delete state.error;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(getTopic.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })\r\n      .addCase(getTopic.fulfilled, (state, { payload }) => {\r\n        state.status = \"success\";\r\n        state.items = payload.list;\r\n        state.item0 = payload.item0;\r\n        state.info = payload.info;\r\n\r\n        delete state.error;\r\n      })\r\n      .addCase(getTopic.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      })\r\n      // getNewMessages\r\n      .addCase(getNewMessages.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })\r\n      .addCase(getNewMessages.fulfilled, (state, { payload }) => {\r\n        state.status = \"success\";\r\n        if (payload.length > 0) {\r\n          state.items = state.items.concat(payload);\r\n          state.info.count = state.items[state.items.length - 1].n;\r\n        }\r\n\r\n        delete state.error;\r\n      })\r\n      .addCase(getNewMessages.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      })\r\n  }\r\n})\r\n\r\nexport const { actions: topicActions, reducer: topic } = slice;\r\n","import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\r\n\r\nimport { ITopicsListRequest, fetchTopicsList } from 'src/api'\r\nimport { domain, urlTopicsList } from 'src/api';\r\nimport { RootState } from '../types';\r\n\r\nexport interface ITopicsListItem {\r\n  id: number,\r\n  author: string,\r\n  lastUser: string,\r\n  forum: string,\r\n  sectionCode: string,\r\n  section: string,\r\n  count: number,\r\n  text: string,\r\n  created: number,\r\n  updated: number,\r\n  closed: boolean,\r\n  down: boolean,\r\n  pinned: boolean\r\n  isVoting: boolean,\r\n  showPreview: boolean,\r\n  previewMsgNumber?: number\r\n}\r\n\r\nexport interface ITopicsList extends Array<ITopicsListItem> { }\r\n\r\nexport interface TopicsListState {\r\n  status: \"init\" | \"loading\" | \"success\" | \"error\",\r\n  items: ITopicsList,\r\n  error?: string,\r\n  lastUpdated?: number\r\n}\r\n\r\nconst initialState: TopicsListState = {\r\n  status: \"init\",\r\n  items: []\r\n}\r\n\r\nexport const getTopicsList = createAsyncThunk(\r\n  'topicsList/fetch',\r\n  async (params: ITopicsListRequest, { getState }) => {\r\n\r\n    const state = getState() as RootState;\r\n\r\n    let itemsPerPage = +state.options.items.topicsPerPage;\r\n    if (itemsPerPage > 99) itemsPerPage = 99;\r\n    params.itemsPerPage = itemsPerPage;\r\n\r\n    const json = await fetchTopicsList(params);\r\n    return json.slice(-itemsPerPage);\r\n\r\n  }\r\n)\r\n\r\nconst shouldFetch = ({ topicsList }: RootState) => {\r\n  \r\n  if (!topicsList) return true\r\n  if (topicsList.status === \"loading\") return false\r\n  \r\n  return true\r\n}\r\n\r\nexport const getTopicsListIfNeeded = (params: ITopicsListRequest): any => (dispatch: any, getState: any) => {\r\n  if (shouldFetch(getState())) {\r\n    return dispatch(getTopicsList(params));\r\n  }\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'topicsList',\r\n  initialState,\r\n  reducers: {\r\n    clear: (state) => {\r\n      state.items = [];\r\n      state.status = \"init\"; \r\n    },\r\n    togglePreview: (state, { payload }) => {\r\n      const item = state.items.find(item => item.id === payload.topicId); \r\n      item.showPreview = !item.showPreview; \r\n      item.previewMsgNumber = payload.msgNumber;\r\n    }\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(getTopicsList.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })\r\n      .addCase(getTopicsList.fulfilled, (state, { payload }) => {\r\n        state.status = \"success\";\r\n        state.items = payload;\r\n\r\n        delete state.error;\r\n      })\r\n      .addCase(getTopicsList.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = `${error?.message} ${domain}/${urlTopicsList}`;\r\n      })\r\n  }\r\n})\r\n\r\nexport const { actions: topicsListActions, reducer: topicsList } = slice;\r\n","import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit'\r\nimport { INewMessageRequest, fetchNewMessage } from 'src/api';\r\n\r\nexport type NewMessageState = {\r\n  status: \"init\" | \"loading\" | \"success\" | \"error\",\r\n  text: string,\r\n  error?: string\r\n};\r\n\r\nconst initialState: NewMessageState = {\r\n  status: \"init\",\r\n  text: ''\r\n}\r\n\r\nexport type PostNewmessageParams = {\r\n  text: string,\r\n  topicId: string,\r\n  voting_select?: number,\r\n  onSuccess?: () => void\r\n}\r\n\r\nexport const postNewMessage = createAsyncThunk(\r\n  'newMessage/post',\r\n  async (params: PostNewmessageParams) => {\r\n    let fetchParams: INewMessageRequest = {\r\n      message_text: params.text,\r\n      action: \"new\",\r\n      topic_id: params.topicId,\r\n      rnd: Math.round(Math.random() * 10000000000)\r\n    };\r\n\r\n    if (params.voting_select)\r\n      fetchParams.voting_select = params.voting_select;\r\n\r\n    await fetchNewMessage(fetchParams);\r\n\r\n    // if (params.onSuccess)\r\n    //   params.onSuccess();\r\n  })\r\n\r\nconst slice = createSlice({\r\n  name: 'newMessage',\r\n  initialState,\r\n  reducers: {\r\n    changeText: (state, { payload }: PayloadAction<string>) => {\r\n      state.text = payload;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(postNewMessage.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })\r\n      .addCase(postNewMessage.fulfilled, (state) => {\r\n        state.text = '';\r\n        delete state.error;\r\n      })\r\n      .addCase(postNewMessage.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      })\r\n  }\r\n});\r\n\r\nexport const { actions: newMessageActions, reducer: newMessage } = slice;","import { configureStore  } from '@reduxjs/toolkit'\r\nimport logger from 'redux-logger' // eslint-disable-line @typescript-eslint/no-unused-vars\r\n\r\nimport { topicsList, topic, sections, options, login, tooltips, newTopic, newMessage } from './slices'\r\n\r\nexport const reducer = {\r\n  topicsList,\r\n  topic,\r\n  sections,\r\n  options,\r\n  login,\r\n  tooltips,\r\n  newTopic,\r\n  newMessage\r\n}\r\n\r\nexport const store = configureStore({\r\n  reducer,\r\n  //middleware: (getDefaultMiddleware) => getDefaultMiddleware().concat(logger),\r\n  devTools: process.env.NODE_ENV !== 'production'\r\n})\r\n","import { useMemo } from \"react\";\r\nimport { ActionCreatorsMapObject, bindActionCreators } from \"@reduxjs/toolkit\";\r\nimport { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\r\nimport { AppDispatch, RootState } from \"./types\";\r\n\r\nexport const useAppDispatch =  () => useDispatch<AppDispatch>();\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n\r\nexport const useActionCreators = (actions: ActionCreatorsMapObject) => {\r\n  const dispatch = useAppDispatch();\r\n  return useMemo(() => bindActionCreators(actions, dispatch), [actions, dispatch]);\r\n};","import { ReactElement } from 'react';\r\nimport { useDispatch } from 'react-redux'\r\n\r\nimport Navbar from 'react-bootstrap/Navbar'\r\nimport Nav from 'react-bootstrap/Nav'\r\nimport Form from 'react-bootstrap/Form'\r\nimport { Link, useLocation } from \"react-router-dom\";\r\n\r\nimport Search from 'src/components/common/search'\r\nimport { getTopicsListIfNeeded } from 'src/store'\r\n\r\nimport './nav_bar.css'\r\n\r\nconst NavBar = (): ReactElement => {\r\n\r\n  const location = useLocation();\r\n  const dispatch = useDispatch();\r\n\r\n  const locationParams = new URLSearchParams(location.search);\r\n  const forum = locationParams.get('forum');\r\n\r\n  const onClick = () => {\r\n    dispatch(getTopicsListIfNeeded({}));\r\n  }\r\n\r\n  const internalLinks = [\r\n    { name: '1C', link: `/index.php?forum=1C` },\r\n    { name: 'IT', link: `/index.php?forum=IT` },\r\n    { name: 'JOB', link: `/index.php?forum=JOB` },\r\n    { name: 'LIFE', link: `/index.php?forum=LIFE` },\r\n    { name: 'Настройки', link: '/options.php' },    \r\n  ];\r\n\r\n  const externalLinks = [\r\n    { name: 'Wiki', link: 'https://wiki.mista.ru' },\r\n    { name: 'Книга знаний', link: 'https://kb.mista.ru' },\r\n  ];\r\n\r\n  return (\r\n    <Navbar bg=\"dark\" variant=\"dark\" expand=\"md\" fixed=\"top\">\r\n      <Navbar.Brand\r\n        as={Link}\r\n        to={`/`}\r\n        onClick={onClick}>\r\n        React.Mista\r\n      </Navbar.Brand>\r\n      <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n      <Navbar.Collapse>\r\n        <Nav className=\"me-auto\">\r\n          {internalLinks.map((item, i) =>\r\n            <Nav.Item key={'i'+ i}>\r\n              <Nav.Link to={item.link} active={item.name === forum} as={Link}>\r\n                {item.name}\r\n              </Nav.Link>\r\n            </Nav.Item>\r\n          )}\r\n          {externalLinks.map((item, i) =>\r\n            <Nav.Item key={'e'+ i}>\r\n              <Nav.Link href={item.link}>\r\n                {item.name}\r\n              </Nav.Link>\r\n            </Nav.Item>\r\n          )}          \r\n        </Nav>\r\n        <Form className=\"d-flex\">\r\n          <Search />\r\n        </Form>\r\n      </Navbar.Collapse>\r\n    </Navbar>\r\n  )\r\n}\r\n\r\nexport default NavBar;","import React, { FC, ReactElement } from 'react'\r\nimport { Dropdown } from 'react-bootstrap'\r\n\r\nimport { loginActions, useActionCreators } from 'src/store'\r\nimport { domain } from 'src/api'\r\n\r\ntype IProps = {\r\n  userId: number,\r\n  userName: string\r\n}\r\n\r\ntype HTMLProps = React.HTMLProps<HTMLSpanElement>\r\nconst CustomToggle = React.forwardRef<HTMLSpanElement, HTMLProps>(({ children, onClick }, ref) => (\r\n  <span\r\n    ref={ref}\r\n    style={{ cursor: \"pointer\" }}\r\n    className='link'\r\n    onClick={(e) => {\r\n      e.preventDefault();\r\n      onClick(e);\r\n    }}\r\n  >\r\n    {children}\r\n  </span>\r\n));\r\n\r\nconst LoggedUser: FC<IProps> = ({ userId, userName }): ReactElement => {\r\n\r\n  const actions = useActionCreators(loginActions);\r\n\r\n  const onLogout = (event: any) => {\r\n    event.preventDefault();\r\n    actions.doLogout()\r\n  }\r\n\r\n  const onMenuSelect = (eventKey: any, event: any): any => {\r\n    if (eventKey === 'exit') {\r\n      onLogout(event);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div style={{ float: \"left\" }}>\r\n      <Dropdown id=\"dropdown-custom-menu\" onSelect={onMenuSelect}>\r\n        <span>Привет, </span>\r\n        <Dropdown.Toggle as={CustomToggle}>{userName} ▼</Dropdown.Toggle>\r\n        <Dropdown.Menu>\r\n          <Dropdown.Item eventKey=\"profile\" href={`${domain}/users.php?id=${userId}`}>Профиль</Dropdown.Item>\r\n          <Dropdown.Item eventKey=\"myTopics\" href={`#/index.php?user_id=${userId}`}>Мои темы</Dropdown.Item>\r\n          <Dropdown.Divider />\r\n          <Dropdown.Item eventKey=\"options\" href={`#/options.php`}>Настройки</Dropdown.Item>\r\n          <Dropdown.Divider />\r\n          <Dropdown.Item eventKey=\"exit\">Выход</Dropdown.Item>\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LoggedUser;","import { FormEvent, ReactElement, useState } from 'react'\r\nimport { FormControl, Button } from 'react-bootstrap'\r\n\r\nimport { useAppDispatch } from 'src/store'\r\nimport { doLoginIfNeeded } from 'src/store'\r\n\r\nconst LoginForm = (): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  const onLogin = (event: FormEvent) => {\r\n    event.preventDefault();\r\n    dispatch(doLoginIfNeeded(username, password));\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <form name=\"enterform\" className=\"flex-row\" style={{ flexWrap: \"wrap\" }}>\r\n        <FormControl\r\n          id=\"username\"\r\n          type=\"text\"\r\n          placeholder=\"Имя\"\r\n          value={username}\r\n          onChange={e => setUsername(e.target.value)}\r\n          size=\"sm\"\r\n          className='input'\r\n          style={{ marginRight: \"5px\", flex: \"0 1 300px\" }}\r\n        />\r\n        <FormControl\r\n          id=\"password\"\r\n          type=\"password\"\r\n          placeholder=\"Пароль\"\r\n          maxLength={20}\r\n          autoComplete=\"off\"\r\n          value={password}\r\n          onChange={e => setPassword(e.target.value)}\r\n          size=\"sm\"\r\n          className='input'\r\n          style={{ marginRight: \"5px\", flex: \"0 1 300px\" }}\r\n        />\r\n        <Button\r\n          size=\"sm\"\r\n          variant=\"light\"\r\n          className='button'\r\n          onClick={onLogin}\r\n        >Войти</Button>\r\n      </form>\r\n      <p style={{ margin: \"0px\" }}>Войти можно на сайте <a href=\"https://forum.mista.ru/\">forum.mista.ru</a></p>\r\n      <a rel=\"nofollow\" href=\"https://forum.mista.ru/user_registration.php\">Регистрация</a>\r\n      <span style={{ margin: \"5px\" }}>|</span>\r\n      <a rel=\"nofollow\" href=\"https://forum.mista.ru/remember_password.php\">Забыли пароль?</a>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default LoginForm;","import { FC, ReactElement } from 'react'\r\n\r\nimport './error.css'\r\n\r\ntype IProps = {\r\n  text: string\r\n}\r\n\r\nconst ErrorElem: FC<IProps> = ({ text }): ReactElement | null => {\r\n  if (!text)\r\n    return null;\r\n\r\n  return (\r\n    <div className=\"error\" dangerouslySetInnerHTML={{ __html: text }}></div>\r\n  )\r\n}\r\n\r\nexport default ErrorElem;","import { ReactElement, useEffect } from 'react'\r\nimport LoggedUser from './logged_user'\r\nimport LoginForm from './login_form'\r\nimport ErrorElem from '../common/error'\r\n\r\nimport { useAppDispatch, useAppSelector } from 'src/store'\r\nimport { checkLoginIfNeeded } from 'src/store'\r\n\r\nconst Login = (): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n  const logged = useAppSelector(state => state.login.logged);\r\n  const userId = useAppSelector(state => state.login.userId);\r\n  const userName = useAppSelector(state => state.login.userName);\r\n  const error = useAppSelector(state => state.login.error);\r\n\r\n  useEffect(() => {\r\n    dispatch(checkLoginIfNeeded());\r\n  }, [dispatch]);\r\n\r\n  let elem: ReactElement;\r\n  if (logged === true)\r\n    elem = <LoggedUser userId={userId} userName={userName} />\r\n  else if (logged === false)\r\n    elem = <LoginForm />\r\n  else\r\n    elem = null;\r\n\r\n  return (\r\n    <>\r\n      {elem}\r\n      {error && <ErrorElem text={error} />}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Login;","import { FC, ReactElement, useEffect } from 'react'\r\nimport CSS from 'csstype'\r\nimport Form from 'react-bootstrap/Form'\r\n\r\nimport { useAppDispatch, useAppSelector } from 'src/store'\r\nimport { getSectionsIfNeeded, ISectionItem } from 'src/store'\r\n\r\nexport type IProps = {\r\n  id: string,\r\n  defaultValue: string,\r\n  selected?: string,\r\n  style?: CSS.Properties,\r\n  size?: 'sm' | 'lg',\r\n  onChange?: (e: React.ChangeEvent<HTMLElement>, value: ISectionItem) => void\r\n}\r\n\r\nconst Sections: FC<IProps> = (props): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n  const items = useAppSelector(state => state.sections.items);\r\n  const tree = useAppSelector(state => state.sections.tree);\r\n\r\n  useEffect(() => {\r\n    dispatch(getSectionsIfNeeded());\r\n  }, [dispatch]);\r\n\r\n  const onSelect: (e: React.ChangeEvent<HTMLElement>) => void = (e: any) => {\r\n\r\n    const { onChange } = props;\r\n\r\n    if (onChange) {\r\n      const code = e.currentTarget.value;\r\n      const arr = items.filter(item => item.code === code);\r\n      if (arr.length > 0)\r\n        onChange(e, arr[0]);\r\n      else\r\n        onChange(e, null);\r\n    }\r\n  }\r\n\r\n  let sectionsElem = [];\r\n  for (let forum in tree) {\r\n\r\n    let group =\r\n      <optgroup key={forum} label={forum}>\r\n        {tree[forum].map((item) => (\r\n          <option key={item.id} value={item.code}>\r\n            {item.name}\r\n          </option>\r\n        ))}\r\n      </optgroup>\r\n\r\n    sectionsElem.push(group);\r\n  }\r\n  \r\n  const { id, defaultValue, selected, style, size } = props;\r\n\r\n  return (\r\n    <Form.Select\r\n      aria-label=\"Секция\"\r\n      onChange={onSelect}\r\n      value={selected}\r\n      style={style}\r\n      className='input'\r\n      size={size}\r\n      id={id}\r\n    >\r\n      <option value=\"\">{defaultValue}</option>\r\n      {sectionsElem}\r\n    </Form.Select>\r\n  )\r\n}\r\n\r\nexport default Sections;","import { ReactElement, useEffect } from 'react'\r\nimport { useLocation, useNavigate } from 'react-router-dom'\r\nimport { useDispatch } from 'react-redux'\r\nimport queryString from 'query-string'\r\n\r\nimport Login from '../../components/login'\r\nimport Sections from './sections'\r\nimport { ISectionItem, getSectionsIfNeeded } from 'src/store'\r\n\r\nconst Header = (): ReactElement => {\r\n\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const params = queryString.parse(location.search);\r\n\r\n  useEffect(() => {\r\n    dispatch(getSectionsIfNeeded());\r\n  }, [dispatch]);  \r\n\r\n  const onSectionChange = (e, value: ISectionItem) => {\r\n    if (value)\r\n      navigate(`/index.php?section=${value.code}`);\r\n    else\r\n      navigate(`/`);\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex-row\">\r\n      <div className=\"header-left\">\r\n        <Login />\r\n      </div>\r\n      <div className=\"header-right\">\r\n        <Sections\r\n          id=\"sect\"\r\n          defaultValue=\"--Все секции--\"\r\n          selected={String(params.section) || \"\"}\r\n          onChange={onSectionChange}\r\n          size=\"sm\"\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default Header;","import { FC, ReactElement } from 'react'\r\n\r\ntype IProps = {\r\n  onUpdateClick: any,\r\n  isLoading: boolean\r\n}\r\n\r\nconst TableHeader: FC<IProps> = ({ isLoading, onUpdateClick }): ReactElement => {\r\n\r\n  return (\r\n    <div className=\"th\" style={{ position: \"sticky\", top: \"39px\" }}>\r\n      <div style={{ letterSpacing: \"-1px\" }}>Раздел</div>\r\n      <div></div>\r\n      <div>Тема</div>\r\n      <div>Re</div>\r\n      <div>Автор</div>\r\n      <div><span style={{ cursor: \"pointer\" }} title=\"Обновить список\" onClick={onUpdateClick}>{isLoading ? \"Обновляется\" : \"Обновлено\"}</span></div>\r\n    </div>\r\n  )  \r\n}\r\n\r\nexport default TableHeader;","import { FC, ReactElement } from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { getMaxPage } from 'src/utils'\r\n\r\ntype IProps = {\r\n  count: number,\r\n  topicId: number\r\n}\r\n\r\nconst Pages: FC<IProps> = ({ count, topicId }): ReactElement => {\r\n\r\n  let pages = [];\r\n  if (count > 100) {\r\n    let maxPage = getMaxPage(count);\r\n    for (let i = 1; i <= maxPage; i++) {\r\n      let href = `/topic.php?id=${topicId}&page=${i}`;\r\n      let text: string;\r\n      if (i > 3 && i < maxPage)\r\n        text = '•';\r\n      else\r\n        text = String(i);\r\n      pages.push(<Link key={i} className=\"agh\" style={{ margin: \"3px\" }} to={href}>{text}</Link>);\r\n    }\r\n  }\r\n\r\n  if (count > 20) {\r\n    let href = `/topic.php?id=${topicId}&page=last20#F`;\r\n    pages.push(<Link key=\"last20\" className=\"agh\" style={{ margin: \"3px\" }} to={href}>»</Link>);\r\n  }\r\n\r\n  return (\r\n    <span className=\"topic-pages\">\r\n      {pages}\r\n    </span>\r\n  )\r\n}\r\n\r\nexport default Pages;","import { FC, ReactElement } from 'react'\r\nimport classNames from 'classnames'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport Pages from './pages';\r\nimport { useAppSelector } from 'src/store';\r\n\r\ntype IProps = {\r\n  id: number,\r\n  count: number,\r\n  author: string,\r\n  pinned: boolean,\r\n  forum: string,\r\n  sectionCode: string,\r\n  section: string,\r\n  text: string,\r\n  isVoting: boolean\r\n  closed: boolean,\r\n  down: boolean,\r\n\r\n}\r\n\r\nconst addPrefix = (text: string, forum: string, sectionCode: string): string => {\r\n  \r\n  if (forum === 'life' && !text.startsWith('OFF'))\r\n    return 'OFF: ' + text;\r\n\r\n  else if (sectionCode === 'job' && !text.startsWith('JOB'))\r\n    return 'JOB: ' + text;\r\n\r\n  else if (sectionCode === 'v7' && !text.startsWith('v7'))\r\n    return  'v7: ' + text;\r\n\r\n  return text;  \r\n}\r\n\r\nconst TopicNameCell: FC<IProps> = (props): ReactElement => {\r\n\r\n  const loggedUserName = useAppSelector(state => state.login.userName);\r\n\r\n  let href = `/topic.php?id=${props.id}`;\r\n  let classes = classNames('agb', 'mr5', {\r\n    'bold': props.count >= 100,\r\n    'mytopics': props.author === loggedUserName,\r\n    'pinned': props.pinned\r\n  });\r\n\r\n  let sectionHref = `/index.php?section=${props.sectionCode}`;\r\n  let section: ReactElement;\r\n  if (props.section) {\r\n    section = (\r\n      <span className=\"topic-section\">\r\n        <span className=\"agh\" style={{ margin: \"0px 5px\" }}>/</span>\r\n        <Link key=\"1\" rel=\"nofollow\" className=\"agh\" to={sectionHref} >{props.section}</Link>\r\n      </span>\r\n    )\r\n  }\r\n\r\n  let text = addPrefix(props.text, props.forum, props.sectionCode);\r\n\r\n  return (\r\n    <div className=\"cell-title\">\r\n      {props.pinned && <i className=\"fa fa-thumb-tack agh\" aria-hidden=\"true\" style={{marginRight: \"5px\"}}></i>}\r\n      <Link to={href} className={classes} dangerouslySetInnerHTML={{ __html: text }} style={{ overflowWrap: \"anywhere\" }}></Link>\r\n      {props.isVoting && <span className=\"agh separator\">[±]</span>}\r\n      <Pages count={props.count} topicId={props.id} />\r\n      {props.closed && <span className=\"agh\">Ø</span>}\r\n      {props.down && <span className=\"agh\">↓</span>}\r\n      {section}\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default TopicNameCell;","import { FC, ReactElement } from 'react'\r\n\r\nimport { useActionCreators } from 'src/store';\r\nimport { topicsListActions } from 'src/store';\r\n\r\ntype IProps = {\r\n  topicId: number,\r\n  expanded: boolean\r\n};\r\n\r\nconst PreviewLink: FC<IProps> = ({ topicId, expanded }): ReactElement => {\r\n\r\n  const actions = useActionCreators(topicsListActions);\r\n\r\n  const onClick = () => {\r\n    actions.togglePreview({topicId, msgNumber: 0});\r\n  };\r\n\r\n  const text = expanded \r\n    ? <i className=\"fa fa-minus-square-o agh\" aria-hidden=\"true\"></i> \r\n    : <i className=\"fa fa-plus-square-o agh\" aria-hidden=\"true\"></i>;\r\n  return (\r\n    <div className=\"cell-preview-link\" onClick={onClick}>\r\n      <span>{text}</span>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default PreviewLink;","import { FC, ReactElement, useCallback, useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport TopicNameCell from './topic_name_cell';\r\nimport PreviewLink from './preview_link'\r\n\r\nimport { formattedTime } from 'src/utils'\r\nimport { useActionCreators } from 'src/store';\r\nimport { ITopicsListItem, topicsListActions } from 'src/store';\r\nimport { fetchTopicMessage } from 'src/api';\r\n\r\ninterface IProps extends ITopicsListItem {\r\n  updated: number,\r\n  topicId: number\r\n}\r\n\r\nconst Row: FC<IProps> = ({ topicId, updated, ...data }): ReactElement => {\r\n\r\n  const actions = useActionCreators(topicsListActions);\r\n\r\n  const [time, setTime] = useState(updated);\r\n  const updateTime = useCallback(async () => {\r\n    const msg = await fetchTopicMessage(topicId, data.count);\r\n    setTime(msg.time);\r\n  }, [topicId, data.count])\r\n  \r\n  useEffect(() => {\r\n    if (data.pinned)\r\n      updateTime();\r\n  }, [data.pinned, updateTime])\r\n  \r\n  useEffect(() => {\r\n    setTime(updated);\r\n  }, [updated])\r\n\r\n  const countOnClick = useCallback(() => {\r\n    actions.togglePreview({topicId, msgNumber: data.count});\r\n  }, [actions, topicId, data.count]);\r\n  \r\n  return (\r\n    <div className=\"topics-list-row\">\r\n      <div className=\"cell-forum\">\r\n        {data.forum}\r\n      </div>\r\n      <div className=\"cell-section\">\r\n        {data.section}\r\n      </div>\r\n      <div className=\"cell-answ\" onClick={countOnClick}>\r\n        <i className=\"fa fa-comments-o\" aria-hidden=\"true\" style={{marginRight: \"3px\"}}></i>\r\n        <span>{data.count}</span>\r\n      </div>\r\n      <PreviewLink topicId={data.id} expanded={data.showPreview} />\r\n      <TopicNameCell {...data}/>\r\n      <div className=\"cell-author\">\r\n        <i aria-hidden=\"true\" className=\"fa fa-user-circle\" style={{marginRight: \"3px\"}}></i>\r\n        {data.author}\r\n      </div>\r\n      <div className=\"cell-lastuser\">\r\n        <div style={{ display: \"flex\" }}>\r\n          <span className=\"cell-lastuser-time\">{formattedTime(time)}</span>\r\n          <span className=\"cell-lastuser-user\">{data.lastUser}</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"cell-last20\">\r\n        <Link to={`/topic.php?id=${data.id}&page=last20#F`} style={{ color: \"inherit\", display: \"block\", width: \"100%\", textAlign: \"center\" }}>\r\n          <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default Row;","import { FC, ReactElement } from 'react'\r\nimport { Pagination } from 'react-bootstrap'\r\nimport { useLocation } from 'react-router-dom'\r\n\r\nimport './pages.css'\r\n\r\ntype IProps = {\r\n  maxPage: number,\r\n  last20?: boolean\r\n}\r\n\r\nconst Pages: FC<IProps> = ({ maxPage, last20 }): ReactElement => {\r\n\r\n  const location = useLocation();\r\n  let pathName = location.pathname;\r\n  if (pathName === '/')\r\n    pathName = '/index.php'\r\n\r\n  const locationParams = new URLSearchParams(location.search);\r\n\r\n  let currentPage: number | string;\r\n  const page = locationParams.get('page');\r\n  if (!page)\r\n    currentPage = 1;\r\n  else if (page === \"last20\")\r\n    currentPage = \"last20\";\r\n  else\r\n    currentPage = parseInt(page, 10) || 1;\r\n\r\n  let pages = [];\r\n  for (let i = 1; i <= maxPage; i++) {\r\n    locationParams.set('page', String(i));\r\n    let href = '#' + pathName + '?' + locationParams.toString();\r\n\r\n    pages.push(\r\n      <Pagination.Item active={currentPage === i} key={i} href={href}>\r\n        {i}\r\n      </Pagination.Item>);\r\n  }\r\n\r\n  if (last20 === true) {\r\n    locationParams.set(\"page\", \"last20\");\r\n    let href = '#' + pathName + '?' + locationParams.toString();\r\n    pages.push(<Pagination.Item active={currentPage === \"last20\"} key=\"last20\" href={href}>»</Pagination.Item>);\r\n  }\r\n\r\n  return (\r\n    <Pagination style={{ margin: \"0px\" }}>\r\n      {pages}\r\n    </Pagination>\r\n  )\r\n\r\n}\r\n\r\nexport default Pages;","import { FC, ReactElement, useRef, RefObject, useCallback } from 'react'\r\nimport { FormControl, Button, ButtonGroup, Form } from 'react-bootstrap'\r\n\r\nimport './text_editor.css'\r\n\r\ntype IProps = {\r\n  placeholder: string,\r\n  showVoting?: boolean,\r\n  isVoting?: boolean,\r\n  text: string,\r\n  isFetching: boolean,\r\n  formRef?: RefObject<HTMLFormElement>,\r\n  onChange?: (text: string) => void,\r\n  onShowVotingChange?: (show: boolean) => void\r\n}\r\n\r\nconst TextEditor: FC<IProps> = ({ placeholder, showVoting, isVoting, isFetching, text, formRef, onChange, onShowVotingChange }): ReactElement => {\r\n\r\n  const textAreaRef = useRef() as React.MutableRefObject<HTMLTextAreaElement>;\r\n\r\n  const onButtonCode1c = (e: React.MouseEvent<HTMLButtonElement>) => {\r\n\r\n    e.preventDefault();\r\n\r\n    const openTag = '[1C]\\n';\r\n    const closeTag = '\\n[/1C]';\r\n\r\n    const textAreaNode = textAreaRef.current;\r\n\r\n    const start = textAreaNode.selectionStart;\r\n    const end = textAreaNode.selectionEnd;\r\n\r\n    const oldText = textAreaNode.value;\r\n    const len = oldText.length;\r\n    const selectedText = oldText.substring(start, end);\r\n    const replacement = openTag + selectedText + closeTag;\r\n    let newText = oldText.substring(0, start) + replacement + oldText.substring(end, len);\r\n\r\n    if (onChange) onChange(newText);\r\n\r\n  }\r\n\r\n  const handleShowVotingChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (onShowVotingChange) onShowVotingChange(e.currentTarget.checked);\r\n  }, [onShowVotingChange]);\r\n\r\n  const handleChange = useCallback((e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n    if (onChange) onChange(e.currentTarget.value);\r\n  }, [onChange]);\r\n\r\n  const handleKeyUp = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\r\n\r\n    if (!formRef) return;\r\n    if (!formRef.current) return;\r\n\r\n    if (e.key === 'Enter' && e.ctrlKey) {\r\n      formRef.current.dispatchEvent(new Event(\"submit\", { cancelable: true, bubbles: true }));\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <FormControl\r\n        as=\"textarea\"\r\n        aria-label=\"Сообщение\"\r\n        placeholder={placeholder}\r\n        cols={70} rows={3}\r\n        value={text}\r\n        onChange={handleChange}\r\n        onKeyUp={handleKeyUp}\r\n        ref={textAreaRef}\r\n        className=\"text-editor input\"\r\n        data-lpignore={true} \r\n      />\r\n      <div className=\"flex-row\">\r\n        <ButtonGroup>\r\n          <Button\r\n            size=\"sm\"\r\n            variant=\"light\"\r\n            onClick={onButtonCode1c}\r\n            style={{ marginRight: \"5px\" }}\r\n            className='button'\r\n          >Код 1С</Button>\r\n          <Button\r\n            size=\"sm\"\r\n            variant=\"light\"\r\n            disabled={isFetching}\r\n            type=\"submit\"\r\n            className='button'\r\n          >\r\n            {isFetching ? 'Отправляется' : 'Отправить'}\r\n          </Button>\r\n        </ButtonGroup>\r\n        {showVoting &&\r\n          <Form.Check\r\n            id=\"show_voting\"\r\n            type=\"checkbox\"\r\n            checked={isVoting}\r\n            onChange={handleShowVotingChange}\r\n            label=\"Голосование\"\r\n            style={{ margin: \"auto 0px auto auto\" }} />\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default TextEditor;","import { FC, ReactElement, useCallback, useState, useRef } from 'react'\r\nimport Form from 'react-bootstrap/Form'\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\nimport { FormGroup } from 'react-bootstrap'\r\n\r\nimport { useActionCreators, useAppDispatch, useAppSelector } from 'src/store'\r\n\r\nimport Sections from './sections'\r\nimport TextEditor from 'src/components/common/text_editor'\r\nimport ErrorElem from 'src/components/common/error'\r\n\r\nimport './new_topic.css'\r\nimport { ISectionItem, newTopicActions, postNewTopicIfNeeded } from 'src/store'\r\n\r\ntype IProps = {\r\n  onSubmitSuccess?: any\r\n};\r\n\r\nconst NewTopic: FC<IProps> = ({ onSubmitSuccess }): ReactElement => {\r\n\r\n  const sections = useAppSelector(state => state.sections);\r\n  const newTopic = useAppSelector(state => state.newTopic);\r\n\r\n  const [currentSection, setSection] = useState(null);\r\n  const [votes, setVotes] = useState(Array(10).fill(\"\"));\r\n\r\n  const formRef = useRef(null);\r\n  const dispatch = useAppDispatch();\r\n  const actions = useActionCreators(newTopicActions);\r\n\r\n  const onSectionChange = (e: any, section: ISectionItem) => {\r\n    setSection(section);\r\n    actions.changeSection(section);\r\n  }\r\n\r\n  const onVoteTextChange = (i: number) => (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    let votesCopy = votes.slice();\r\n    votesCopy[i] = e.target.value;\r\n    setVotes(votesCopy);\r\n  }\r\n\r\n  const onSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n\r\n    e.preventDefault();\r\n\r\n    if (!currentSection) {\r\n      actions.setError('Не выбрана секция');\r\n      return;\r\n    }\r\n\r\n    let subject = newTopic.subject;\r\n    if (!subject) {\r\n      actions.setError('Не указана тема');\r\n      return;\r\n    }\r\n\r\n    if (!newTopic.text) {\r\n      actions.setError('Не указано сообщение');\r\n      return;\r\n    }\r\n\r\n    let params = {\r\n      subject,\r\n      text: newTopic.text,\r\n      section: currentSection.id,\r\n      forum: currentSection.forum,\r\n      isVoting: newTopic.isVoting,\r\n      votingItems: [],\r\n      onSuccess: this_onSubmitSuccess\r\n    };\r\n\r\n    if (newTopic.isVoting) {\r\n      params.votingItems = [];\r\n      for (let i = 1; i <= 10; i++) {\r\n        let val = votes[i - 1];\r\n        if (val) {\r\n          params.votingItems.push(val);\r\n        }\r\n      }\r\n    }\r\n\r\n    dispatch(postNewTopicIfNeeded(params));\r\n  }\r\n\r\n  const onSubjectChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    actions.changeSubject(e.target.value);\r\n  }, [actions]);\r\n  \r\n  const onTextChange = useCallback((text: string) => {\r\n    actions.changeText(text);\r\n  }, [actions]);\r\n\r\n  const onShowVotingChange = useCallback((show: boolean) => {\r\n    actions.showVoting(show);\r\n  }, [actions]);\r\n\r\n  const this_onSubmitSuccess = () => {\r\n\r\n    actions.clear();\r\n\r\n    if (onSubmitSuccess) {\r\n      onSubmitSuccess();\r\n    }\r\n  }\r\n  let groupsElem = [];\r\n  for (let forum in sections.tree) {\r\n    groupsElem.push(<option key={forum} value={forum.toLowerCase()}>{forum}</option>);\r\n  }\r\n\r\n  let votingOptions = [];\r\n\r\n  if (newTopic.isVoting) {\r\n    votingOptions.push(<div key=\"p\">Варианты:</div>);\r\n    for (let i = 1; i <= 10; i++) {\r\n      votingOptions.push(\r\n        <InputGroup key={i} size=\"sm\" style={{ marginBottom: \"3px\", width: \"100%\" }}>\r\n          <InputGroup.Text\r\n            style={{ width: \"40px\" }}\r\n            className='input'\r\n          >\r\n            {`${i}.`}\r\n          </InputGroup.Text>\r\n          <Form.Control\r\n            type=\"text\"\r\n            aria-label={`Вариант ${i}`}\r\n            maxLength={50}\r\n            className='input'\r\n            value={votes[i - 1]}\r\n            onChange={onVoteTextChange(i - 1)}\r\n          />\r\n        </InputGroup>\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form className=\"new-topic-container\" onSubmit={onSubmit} ref={formRef}>\r\n      <div id=\"newtopic_form\" className=\"new-topic-text\">\r\n        <div><b>Новая тема:</b></div>\r\n        {newTopic.error && <ErrorElem text={newTopic.error} />}\r\n        <div className=\"flex-row\" style={{ marginBottom: \"3px\" }}>\r\n          <Form.Select\r\n            disabled\r\n            size=\"sm\"\r\n            value={newTopic.forum}\r\n            style={{ flex: \"0 1 90px\" }}\r\n            className='input'\r\n          >\r\n            {groupsElem}\r\n          </Form.Select>\r\n          <Sections\r\n            id=\"target_section\"\r\n            defaultValue=\"Секция\"\r\n            selected={newTopic.section?.code}\r\n            size=\"sm\"\r\n            style={{ flex: \"1 1 auto\" }}\r\n            onChange={onSectionChange}\r\n          />\r\n        </div>\r\n        <Form.Control\r\n          type=\"text\"\r\n          aria-label=\"Тема\"\r\n          placeholder=\"Тема\"\r\n          size=\"sm\"\r\n          value={newTopic.subject}\r\n          onChange={onSubjectChange}\r\n          style={{ marginBottom: \"3px\" }}\r\n          className='input'\r\n          maxLength={90}\r\n        />\r\n        <TextEditor\r\n          placeholder=\"Сообщение\"\r\n          showVoting={true}\r\n          isVoting={newTopic.isVoting}\r\n          text={newTopic.text}\r\n          isFetching={newTopic.status === \"loading\"}\r\n          onChange={onTextChange}\r\n          onShowVotingChange={onShowVotingChange}\r\n          formRef={formRef}\r\n        />\r\n      </div>\r\n      <FormGroup className=\"new-topic-voting\">\r\n        {votingOptions}\r\n      </FormGroup>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default NewTopic;","import { FC, ReactElement } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { useActionCreators } from 'src/store'\r\nimport { topicsListActions } from 'src/store'\r\n\r\nimport './topic_preview.css'\r\n\r\ntype IProps = {\r\n  topicId: number,\r\n  onFirst: any,\r\n  onLast: any,\r\n  onPrev: any,\r\n  onNext: any\r\n}\r\n\r\nconst PreviewButtons: FC<IProps> = ({ topicId, onFirst, onPrev, onNext, onLast }): ReactElement => {\r\n \r\n  const actions = useActionCreators(topicsListActions);\r\n\r\n  const closePreview = () => {\r\n    actions.togglePreview({topicId, msgNumber: 0});\r\n  }\r\n\r\n  return (\r\n    <div className=\"topic-preview-rewind\">\r\n      <div className=\"topic-preview-button flex-small\" onClick={onFirst} title=\"К первому\">\r\n        <i className=\"fa fa-angle-double-left\" aria-hidden=\"true\"></i>\r\n      </div>\r\n      <div className=\"topic-preview-button flex-large\" onClick={onPrev} title=\"К предыдущему\">\r\n        <i className=\"fa fa-angle-left\" aria-hidden=\"true\"></i>\r\n      </div>\r\n      <div className=\"topic-preview-button flex-large\" onClick={onNext} title=\"К следующему\">\r\n        <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i>\r\n      </div>\r\n      <div className=\"topic-preview-button flex-small\" onClick={onLast} title=\"К последнему\"> \r\n        <i className=\"fa fa-angle-double-right\" aria-hidden=\"true\"></i>\r\n      </div>\r\n      <div className=\"topic-preview-button close-preview\" onClick={closePreview}> \r\n        <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i>\r\n        <i className=\"fa fa-angle-left\" aria-hidden=\"true\" style={{marginLeft: \"-2px\"}}></i>\r\n      </div>\r\n      <div className=\"topic-preview-button edit-preview\"> \r\n        <Link to={`/topic.php?id=${topicId}&page=last20#F`}>\r\n          <i className=\"fa fa-pencil\" aria-hidden=\"true\" style={{color:\"var(--font-color)\"}}></i>\r\n        </Link>  \r\n      </div>      \r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default PreviewButtons;","\r\nfunction highlight(text: string): string {\r\n\r\n  const keywords = new Set(\r\n    (\"if|если|then|тогда|elsif|иначеесли|else|иначе|endif|конецесли\" +\r\n    \"|do|цикл|for|для|to|по|each|каждого|in|из|while|пока|enddo|конеццикла\" +\r\n    \"|procedure|процедура|endprocedure|конецпроцедуры|function|функция|endfunction\" +\r\n    \"|конецфункции|var|перем|export|экспорт|goto|перейти|and|и|or|или|not|не\" +\r\n    \"|val|знач|break|прервать|continue|продолжить|return|возврат|try|попытка|except|исключение\" +\r\n    \"|endtry|конецпопытки|raise|вызватьисключение|false|ложь|true|истина\" +\r\n    \"|undefined|неопределено|null|new|новый|execute|выполнить\" +\r\n    \"|асинх|async|ждать|wait\")\r\n      .split('|')\r\n  );\r\n\r\n  const Спецсиволы = new Set(\"():;.,=+-*<>?[]%/\".split(''));\r\n  const НачалоТега = \"<span class=\";\r\n  const КонецТега = \"</span>\";\r\n\r\n  const мЦветФона = \"bg>\";\r\n  const мЦветЧисла = \"num>\";\r\n  const мЦветСтроки = \"str>\";\r\n  //const мЦветПараметра = \"par>\";\r\n  const мЦветКомментария = \"com>\";\r\n  const мЦветСпецСимвола = \"sp>\";\r\n  const мЦветПрепроцессора = \"pr>\";\r\n  const мЦветКлючевогоСлова1 = \"key>\";\r\n\r\n\r\n  let СтрокаРезультат: string;\r\n  let УстановленЦвет: boolean;\r\n  let ПоследнийЦвет: string | undefined;\r\n\r\n  let ВСтроке = false;\r\n  let Токен = \"\";\r\n\r\n  function ПустаяСтрока(Строка: string) {\r\n    return Строка.trim() === '';\r\n  }\r\n\r\n  function Сред(Строка: string, Нач: number, Длина: number) {\r\n    return Строка.substring(Нач - 1, Нач -1 + Длина);\r\n  }\r\n\r\n  function Прав(Строка: string, Длина: number) {\r\n    return Строка.substring(Строка.length - Длина);\r\n  }\r\n\r\n  function isKeyword(token: string) {\r\n    return keywords.has(token.toLowerCase().trim());\r\n  }\r\n\r\n  function ДобавитьЧастьСтроки1С(Часть: string, Цвет: string) {\r\n\r\n    if (Часть === \" \" || ПоследнийЦвет === Цвет) {\r\n      СтрокаРезультат = СтрокаРезультат + Часть;\r\n    } else {\r\n      if (УстановленЦвет) {\r\n        СтрокаРезультат = СтрокаРезультат + КонецТега;\r\n        УстановленЦвет = false;\r\n      };\r\n\r\n      СтрокаРезультат = СтрокаРезультат + НачалоТега + Цвет + Часть;\r\n      УстановленЦвет = true;\r\n      ПоследнийЦвет = Цвет;\r\n    };\r\n  }\r\n\r\n  function РазукраситьСтроку(СтрокаКода: string) {\r\n\r\n    //  https://infostart.ru/profile/34707/public/\r\n    let ВСтрокеСкобка = false;\r\n    let ВСтрокеТильда = false;\r\n    let НачалоСтроки = 1;\r\n    let ТокенДоТочки = true;\r\n    // Заменяем 8 символьную табуляцию на 4 символьную пробелами\r\n\r\n    // Последовательно перебираются все символы строки кода\r\n    let Поз = 1;\r\n    for (Поз = 1; Поз <= СтрокаКода.length; Поз++) {\r\n\r\n      let ТекущийСимвол = СтрокаКода.charAt(Поз - 1);\r\n      if (ВСтроке) {\r\n\r\n        // Операции встрече символа \"кавычка\"\r\n        if (ТекущийСимвол === '\"') {\r\n          // Нашли парную кавычку - окрашиваем как строку\r\n          ДобавитьЧастьСтроки1С(Сред(СтрокаКода, НачалоСтроки, Поз - НачалоСтроки + 1), мЦветСтроки);\r\n          ВСтроке = false;\r\n          Токен = \"\";\r\n          ТокенДоТочки = true;\r\n        } else {\r\n          Токен = Токен + ТекущийСимвол;\r\n        };\r\n\r\n      } else if (ВСтрокеСкобка) {\r\n\r\n        // Операции встрече символа \"кавычка\" литерал\r\n        if (ТекущийСимвол === \"'\") {\r\n          // Нашли парную скобку - окрашиваем как комментарий\r\n          ДобавитьЧастьСтроки1С(Сред(СтрокаКода, НачалоСтроки, Поз - НачалоСтроки + 1), мЦветСтроки);\r\n          ВСтрокеСкобка = false;\r\n          Токен = \"\";\r\n          ТокенДоТочки = true;\r\n        } else {\r\n          Токен = Токен + ТекущийСимвол;\r\n        };\r\n\r\n      } else if (ТекущийСимвол === \" \") {\r\n        // Операции при встрече символа табуляции или пробела\r\n        if (!ПустаяСтрока(Токен)) {\r\n          // Пробел после токена, значит\r\n          // токен - ключевое слово...\r\n          if (ВСтрокеТильда) {\r\n            ДобавитьЧастьСтроки1С(Токен + \" \", мЦветСтроки);\r\n            ВСтрокеТильда = false;\r\n\r\n          } else if (isKeyword(Токен.trim())) {\r\n            ДобавитьЧастьСтроки1С(Токен + \" \", мЦветКлючевогоСлова1);\r\n\r\n          } else if (!isNaN(parseInt(Токен, 10))) {\r\n            ДобавитьЧастьСтроки1С(Токен + \" \", мЦветЧисла);\r\n\r\n          } else {\r\n            ДобавитьЧастьСтроки1С(Токен + \" \", мЦветФона);\r\n          };\r\n          Токен = \"\";\r\n        } else {\r\n          СтрокаРезультат = СтрокаРезультат + \" \";\r\n        };\r\n        ТокенДоТочки = true;\r\n\r\n      } else if (Спецсиволы.has(ТекущийСимвол)) {\r\n\r\n        // Встретился один из специальных символов\r\n        if (!ПустаяСтрока(Токен)) {\r\n          // Чтобы избежать окраски метода объекта с совпадающим именем\r\n          // с одним из ключевых слов, проверяем текущий символ на \".\"\r\n          if (ВСтрокеТильда) {\r\n\r\n            ДобавитьЧастьСтроки1С(Токен, мЦветСтроки);\r\n            ВСтрокеТильда = false;\r\n            ТокенДоТочки = (ТекущийСимвол !== \".\");\r\n\r\n          } else if (ТокенДоТочки && isKeyword(Токен)) {\r\n            ДобавитьЧастьСтроки1С(Токен, мЦветКлючевогоСлова1);\r\n            ТокенДоТочки = (ТекущийСимвол !== \".\");\r\n\r\n          } else {\r\n            // Не ключевое слово - значит число\r\n            if (!isNaN(parseInt(Токен, 10))) {\r\n              ДобавитьЧастьСтроки1С(Токен, мЦветЧисла);\r\n\r\n            } else {\r\n              ДобавитьЧастьСтроки1С(Токен, мЦветФона);\r\n            };\r\n            ТокенДоТочки = (ТекущийСимвол !== \".\");\r\n          };\r\n          Токен = \"\";\r\n        };\r\n        // Один из специальных символов\r\n        if (ТекущийСимвол === \".\" && ПоследнийЦвет === мЦветЧисла) {\r\n          // Продолжение числа\r\n          ДобавитьЧастьСтроки1С(ТекущийСимвол, мЦветЧисла);\r\n          continue;\r\n\r\n        } else if (ТекущийСимвол === \"=\" && Сред(СтрокаКода, Поз - 1, 1) === \"<\") {\r\n          // Знак \"меньше или равно\" - вторая ошибка движка Инфостарт\r\n          ПоследнийЦвет = undefined;\r\n\r\n        } else if (ТекущийСимвол === \"/\" && Сред(СтрокаКода, Поз + 1, 1) === \"/\") {\r\n          // Проверяется на комментарий\r\n          ДобавитьЧастьСтроки1С(Прав(СтрокаКода, СтрокаКода.length - Поз + 1), мЦветКомментария);\r\n          return;\r\n        };\r\n        ДобавитьЧастьСтроки1С(ТекущийСимвол, мЦветСпецСимвола);\r\n\r\n      } else if (ТекущийСимвол === '\"' || ТекущийСимвол === \"|\") {\r\n\r\n        // Операции встрече символа \"кавычка\"\r\n        // Первая кавычка, запоминаем позицию и взводим флаг нахождения в строке\r\n        if (ПустаяСтрока(Токен)) {\r\n          НачалоСтроки = Поз;\r\n          ВСтроке = true;\r\n        } else {\r\n          // Ошибка синтаксиса\r\n          ДобавитьЧастьСтроки1С(Токен + ТекущийСимвол, мЦветСтроки);\r\n          Токен = \"\";\r\n        };\r\n        ТокенДоТочки = true;\r\n\r\n      } else if (ТекущийСимвол === \"'\") {\r\n\r\n        // Операции встрече символа \"кавычка\" литерал\r\n        // Первая кавычка, запоминаем позицию и взводим флаг нахождения в строке\r\n        if (ПустаяСтрока(Токен)) {\r\n          НачалоСтроки = Поз;\r\n          ВСтрокеСкобка = true;\r\n        } else {\r\n          // Ошибка синтаксиса\r\n          ДобавитьЧастьСтроки1С(Токен + ТекущийСимвол, мЦветСтроки);\r\n          Токен = \"\";\r\n        };\r\n        ТокенДоТочки = true;\r\n\r\n      } else if (ТекущийСимвол === \"#\" || (ТекущийСимвол === \"&\" && ПустаяСтрока(СтрокаРезультат))) {\r\n\r\n        // Встретился символ препроцессора\r\n        ДобавитьЧастьСтроки1С(Прав(СтрокаКода, СтрокаКода.length - Поз + 1), мЦветПрепроцессора);\r\n        Поз = СтрокаКода.length;\r\n        break;\r\n\r\n      } else if (ТекущийСимвол === \"~\") {\r\n        Токен = Токен + ТекущийСимвол;\r\n        ВСтрокеТильда = true;\r\n      } else {\r\n        // Остальные символы\r\n        Токен = Токен + ТекущийСимвол;\r\n      }\r\n    }\r\n\r\n    if (ВСтроке) {\r\n\r\n      // Многострочная строка\r\n      ДобавитьЧастьСтроки1С(Сред(СтрокаКода, НачалоСтроки, Поз - НачалоСтроки + 1), мЦветСтроки);\r\n\r\n    } else if (ВСтрокеСкобка) {\r\n\r\n      // Незавершенный литерал\r\n      ДобавитьЧастьСтроки1С(Сред(СтрокаКода, НачалоСтроки, Поз - НачалоСтроки + 1), мЦветСтроки);\r\n\r\n    } else if (!ПустаяСтрока(Токен)) {\r\n\r\n      // Анализируем последний токен строки кода\r\n      if (isKeyword(Токен)) {\r\n        ДобавитьЧастьСтроки1С(Токен, мЦветКлючевогоСлова1);\r\n\r\n      } else if (!isNaN(parseInt(Токен, 10))) {\r\n        ДобавитьЧастьСтроки1С(Токен, мЦветЧисла);\r\n\r\n      } else {\r\n        ДобавитьЧастьСтроки1С(Токен, мЦветФона);\r\n      };\r\n\r\n    };\r\n\r\n  }\r\n\r\n  ВСтроке = false;\r\n  Токен = \"\";\r\n  УстановленЦвет = false;\r\n  ПоследнийЦвет = undefined;\r\n  СтрокаРезультат = '';\r\n\r\n  let result = [];\r\n\r\n  for (let СтрокаКода of text.split('\\n')) {\r\n\r\n    if (ПустаяСтрока(СтрокаКода)) {\r\n      result.push('');\r\n      continue;\r\n    }\r\n\r\n    СтрокаРезультат = '';\r\n    РазукраситьСтроку(СтрокаКода);\r\n    if (УстановленЦвет && !ВСтроке) {\r\n      СтрокаРезультат += '</span>';\r\n      УстановленЦвет = false;\r\n      ПоследнийЦвет = '';\r\n      Токен = '';\r\n    } else if (!ВСтроке) {\r\n      ПоследнийЦвет = '';\r\n      Токен = '';\r\n    }\r\n\r\n    result.push(СтрокаРезультат);\r\n  }\r\n\r\n  return result.join('\\n');\r\n}\r\n\r\nexport default highlight;","import { ReactElement, useCallback, useEffect, useRef } from 'react'\r\n\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { topicActions, getTopicIfNeeded, getNewMessagesIfNeeded, useAppSelector } from 'src/store'\r\nimport { newMessageActions } from 'src/store'\r\n\r\nimport Error from 'src/components/common/error'\r\nimport Pages from 'src/components/common/pages'\r\nimport Header from './header'\r\nimport TopicInfo from './topic_info'\r\nimport Row from '../../pages/topic/row'\r\nimport Footer from './footer'\r\nimport NewMessage from './new_message';\r\nimport { getMaxPage, extractTextFromHTML } from 'src/utils';\r\nimport { useActionCreators, useAppDispatch } from 'src/store';\r\n\r\nimport './topic.css'\r\n\r\nvar scrolledToHash: boolean;\r\n\r\nconst getPageNumber = (locationPage: string | string[]): number | \"last20\" => {\r\n  if (!locationPage) return 1;\r\n  if (locationPage === \"last20\") return \"last20\";\r\n  if (isNaN(+locationPage)) return 1;\r\n  return +locationPage;\r\n}\r\n\r\nconst Topic = (): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n  const actions = useActionCreators(topicActions);\r\n  const location = useLocation();\r\n\r\n  const login = useAppSelector(state => state.login);\r\n  const info = useAppSelector(state => state.topic.info);\r\n  const item0 = useAppSelector(state => state.topic.item0);\r\n  const items = useAppSelector(state => state.topic.items);\r\n  const error = useAppSelector(state => state.topic.error);\r\n\r\n  let locationParams = new URLSearchParams(location.search);\r\n  const topicId = +locationParams.get('id');\r\n  const page = getPageNumber(locationParams.get('page'));\r\n  const maxPage = getMaxPage(info.count);\r\n  \r\n  const isLastPageRef = useRef(false);\r\n  isLastPageRef.current = (page === 'last20' || page === maxPage);\r\n\r\n  const updateNewMessages = useCallback(() => {\r\n    if (isLastPageRef.current)\r\n      dispatch(getNewMessagesIfNeeded());\r\n  }, [dispatch])\r\n\r\n  const onPostNewMessageSuccess = () => {\r\n    updateNewMessages();\r\n    dispatch(newMessageActions.changeText(''));\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (info.title)\r\n      document.title = extractTextFromHTML(info.title);\r\n  }, [info.title]);\r\n\r\n  useEffect(() => {\r\n    dispatch(getTopicIfNeeded(topicId, page));\r\n  }, [dispatch, topicId, page]);\r\n\r\n  useEffect(() => {\r\n\r\n    const timer = window.setInterval(updateNewMessages, 60 * 1000);\r\n\r\n    const clearStore = () => {\r\n      actions.clear();\r\n      scrolledToHash = undefined;\r\n      if (timer) clearInterval(timer);\r\n    }\r\n    return clearStore;\r\n\r\n  }, [actions, updateNewMessages]);\r\n\r\n  useEffect(() => {\r\n    if (!scrolledToHash &&\r\n      location.hash &&\r\n      items.length > 0) {\r\n      const nodeHash = document.getElementById(location.hash.slice(1));\r\n      if (nodeHash)\r\n        setTimeout(() => window.scrollTo(0, nodeHash.offsetTop), 1);\r\n      scrolledToHash = true;\r\n    }\r\n  });\r\n\r\n  return (\r\n    <div style={{ marginBottom: \"5px\" }}>\r\n      <Header />\r\n      {error && <Error text={error} />}\r\n      <div className=\"topic-table\">\r\n        <TopicInfo />\r\n        <Row key='0' data={item0} />\r\n        {items.map((item, i) => (\r\n          <Row key={item.n} data={item} />\r\n        ))}\r\n        {(maxPage > 1 || page === \"last20\") &&\r\n          <div className=\"tf\">\r\n            <Pages maxPage={maxPage} last20 />\r\n          </div>\r\n        }\r\n      </div>\r\n      <Footer page={page} />\r\n      {login.logged &&\r\n        <NewMessage onSubmitSuccess={onPostNewMessageSuccess} />\r\n      }\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default Topic;","import { FC, ReactElement, useState } from 'react'\r\nimport { childrenToText } from 'src/utils'\r\nimport highlight from './code_highlight'\r\nimport './code1c.css'\r\n\r\nconst prepareText = (text: string): string => {\r\n\r\n  // replace double new-lines\r\n  let newtext = text\r\n    .replace(/\\n<br>/g, '\\n')\r\n    .replace(/<br>\\n/g, '\\n')\r\n    .replace(/\\r<br>/g, '\\n')\r\n    .replace(/<br>\\r/g, '\\n')\r\n    .replace(/<br>/g, '\\n');\r\n\r\n  // remove all leading|ending new-lines\r\n  while (newtext[0] === '\\n') {\r\n    newtext = newtext.substring(1);\r\n  }\r\n\r\n  while (newtext.substring(newtext.length - 1) === '\\n') {\r\n    newtext = newtext.substring(0, newtext.length - 1);\r\n  }\r\n\r\n  return highlight(newtext);\r\n}\r\n\r\nconst Code: FC = ({ children }): ReactElement => {\r\n\r\n  const [hidden, setHidden] = useState(true);\r\n\r\n  let text: string = \"\";\r\n  if (children) {\r\n\r\n    const textArr = childrenToText(children);\r\n    text = textArr.join('');\r\n\r\n    text = prepareText(text);\r\n  }\r\n\r\n  const onShowClick = () => {\r\n    setHidden(!hidden);\r\n  }\r\n\r\n  let buttonText: string;\r\n  let linesCount = 0;\r\n  if (text)\r\n    linesCount = text.split(\"\\n\").length;\r\n\r\n  if (hidden)\r\n    buttonText = `Показать: ${linesCount} строк`;\r\n  else\r\n    buttonText = 'Скрыть';\r\n\r\n  let buttonShow: ReactElement | null = null;\r\n  if (linesCount > 7)\r\n    buttonShow = (\r\n      <div className=\"expand-button-div\">\r\n        <span className=\"expand-button-span\" onClick={onShowClick}>{buttonText}</span>\r\n      </div>\r\n    );\r\n\r\n  let preStyle: React.CSSProperties = {\r\n  }\r\n\r\n  if (hidden && linesCount > 7) {\r\n    preStyle.overflow = \"hidden\";\r\n    preStyle.height = \"135px\";\r\n  } else {\r\n    preStyle.overflow = \"auto\";\r\n    preStyle.height = \"auto\";\r\n  }\r\n\r\n  return (\r\n    <div style={{ marginTop: \"5px\" }}>\r\n      <pre className=\"code-pre\" style={preStyle} dangerouslySetInnerHTML={{ __html: text }}>\r\n      </pre>\r\n      {buttonShow}\r\n    </div>\r\n  )\r\n\r\n\r\n}\r\n\r\nexport default Code;","import { FC, ReactElement, useRef, useState, useEffect } from 'react'\r\n\r\nimport { getMaxPage, childrenToText } from 'src/utils';\r\nimport { fetchTopicInfo } from 'src/api'\r\nimport { useActionCreators, useAppSelector } from 'src/store';\r\nimport { ITooltipKeys, tooltipsActions } from 'src/store';\r\n\r\ntype IProps = {\r\n  topicId: number,\r\n  number: number,\r\n  style?: {}\r\n}\r\n\r\nconst LinkToPost: FC<IProps> = (props): ReactElement => {\r\n\r\n  const timerRef = useRef(null);\r\n  const actions = useActionCreators(tooltipsActions);\r\n\r\n  const currentTopicId = useAppSelector(state => state.topic.info?.id);\r\n  const tooltipDelay = useAppSelector(state => +state.options.items.tooltipDelay);\r\n\r\n  let initialText = '';\r\n  if (!props.children)\r\n    initialText = String(props.number);\r\n  else  \r\n    initialText = childrenToText(props.children).join('');\r\n\r\n  const [text, setText] = useState(initialText);\r\n\r\n  useEffect(() => {\r\n\r\n    if (!initialText.startsWith(\"http\")) return;\r\n\r\n    const run = async () => {\r\n      const topicInfo = await fetchTopicInfo(props.topicId);\r\n      setText(topicInfo.title)\r\n    }\r\n\r\n    run();\r\n\r\n  }, [initialText, props.topicId]);\r\n\r\n  const onMouseOver = (e: React.MouseEvent<HTMLElement>) => {\r\n    e.persist();\r\n    timerRef.current = window.setTimeout(() => showToolTip(e), tooltipDelay);\r\n  }\r\n\r\n  const onMouseOut = () => {\r\n    if (timerRef.current)\r\n      clearTimeout(timerRef.current);\r\n  }\r\n\r\n  const onClick = (e: React.MouseEvent<HTMLElement>) => {\r\n    e.stopPropagation();\r\n    if (timerRef.current)\r\n      clearTimeout(timerRef.current);\r\n    showToolTip(e);\r\n  }\r\n\r\n  const showToolTip = (e: React.MouseEvent<HTMLElement>) => {\r\n\r\n    const { topicId, number } = props;\r\n\r\n    const coords = {\r\n      x: e.pageX,\r\n      y: e.pageY - 50 // remove navbar margin-top\r\n    }\r\n\r\n    const keys: ITooltipKeys = {\r\n      topicId: +topicId,\r\n      number: +number\r\n    }\r\n\r\n    actions.show({ keys, coords });\r\n\r\n  }\r\n\r\n  if ((props.topicId === currentTopicId) || !isNaN(+text))\r\n    return (\r\n      <span\r\n        onMouseOver={onMouseOver}\r\n        onMouseOut={onMouseOut}\r\n        onClick={onClick}\r\n        className='link'\r\n        style={{ ...props.style }}\r\n      >{text}</span>\r\n    )\r\n  else {\r\n    const page = getMaxPage(props.number);\r\n\r\n    let pageParam = '';\r\n    if (page > 1)\r\n      pageParam = `&page=${page}`;\r\n      \r\n      console.log(2, props.topicId, currentTopicId, text);\r\n      return (\r\n      <span>\r\n        <a href={`#/topic.php?id=${props.topicId}${pageParam}#${props.number}`}\r\n          style={{ ...props.style }}\r\n        >{text}</a>{' '}\r\n        (<span onMouseOver={onMouseOver}\r\n          onMouseOut={onMouseOut}\r\n          onClick={onClick}\r\n          className='link'\r\n        >{props.number}</span>)\r\n      </span>\r\n    )\r\n  }  \r\n}\r\n\r\nexport default LinkToPost;","import { FC, ReactElement } from 'react'\r\n\r\ntype IProps = {\r\n  href: string\r\n}\r\n\r\nconst LinkToUser: FC<IProps> = ({ href, children }): ReactElement => {\r\n  return <a href={href} className=\"registered-user\">{children}</a>\r\n}\r\n\r\nexport default LinkToUser;","import { FC, ReactElement, useEffect, useState } from 'react';\r\n\r\ntype IProps = {\r\n  href: string,\r\n}\r\n\r\nconst getVideoId = (href: string): string | null => {\r\n\r\n  let fullHref = href;\r\n  if (href.search(/http/) === -1) fullHref = 'http://' + fullHref;\r\n\r\n  try {\r\n    var url = new URL(fullHref);\r\n  } catch (e)  {\r\n    return null;\r\n  }\r\n\r\n  if (url.hostname.search(/youtube/) !== -1) {\r\n    return url.searchParams.get('v');\r\n\r\n  } else if (url.hostname.search(/youtu\\.be/) !== -1) {\r\n    return url.pathname.substring(1)\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\ntype HrefParams = {\r\n  hrefName: string\r\n  title: string,\r\n  notFound: boolean  \r\n}\r\n\r\nconst getVideoParams = async (videoId: string): Promise<HrefParams> => {\r\n\r\n  const apiKey = localStorage.getItem('youtubeApiKey') || 'AIzaSyCztN2QW4Fxw_1YuAHBTOZdYLbzigPz25g';\r\n  let apiUrl = `https://www.googleapis.com/youtube/v3/videos?key=${apiKey}&fields=items(snippet(title))&part=snippet&id=${videoId}`;\r\n  const response = await fetch(apiUrl);\r\n  const json = await response.json();\r\n\r\n  if (json.items.length === 0)\r\n    return {\r\n      hrefName: '',\r\n      title: '',\r\n      notFound: true  \r\n    };\r\n\r\n  const title = json.items[0].snippet.title;\r\n\r\n  let hrefName = title;\r\n  let maxLength = 50;\r\n  if (title.length > maxLength + 5)\r\n    hrefName = hrefName.substring(0, maxLength) + '...'\r\n\r\n  return {\r\n    hrefName,\r\n    title,\r\n    notFound: false\r\n  }\r\n}\r\n\r\nconst YoutubeLink: FC<IProps> = ({ href }): ReactElement => {\r\n\r\n  let [hrefName, setHrefName] = useState(href);\r\n  let [title, setTitle] = useState('');\r\n\r\n  useEffect(() => {\r\n\r\n    let isMounted = true;\r\n    const run = async () => {\r\n\r\n      const videoId = getVideoId(href);\r\n      if (!videoId)\r\n        return;\r\n\r\n      try {\r\n        \r\n        const params = await getVideoParams(videoId);\r\n\r\n        if (isMounted) {\r\n          if (params.notFound)\r\n            setHrefName(href + ' (видео не найдено)');\r\n          else {  \r\n            setHrefName(params.hrefName);\r\n            setTitle(params.title);\r\n          }  \r\n        }  \r\n\r\n      } catch (e) {\r\n        console.error('youtube', videoId, e.message);\r\n      }\r\n    }\r\n\r\n    run();\r\n\r\n    return () => {isMounted = false};\r\n\r\n  }, [href])\r\n\r\n  const prefix = 'youtube';\r\n  return (\r\n    <a href={href} title={title}>{`${prefix}: ${hrefName}`}</a>\r\n  )\r\n}\r\n\r\nexport default YoutubeLink;","import { FC, ReactElement } from 'react'\r\nimport URL from 'url-parse'\r\n\r\nimport LinkToPost from './link_to_post'\r\nimport LinkToUser from './link_to_user'\r\nimport YoutubeLink from './youtube_link'\r\n\r\nimport { childrenToText } from 'src/utils'\r\nimport { useAppSelector } from 'src/store'\r\n\r\ntype IProps = {\r\n  href: string,\r\n  parentText?: string,\r\n  target?: string,\r\n  class?: string,\r\n  rel?: string\r\n}\r\n\r\nconst fixBrokenLink = (href: string, parentText: string): string => {\r\n  let escapedHref = href\r\n    .replace(/\\[/g, '\\\\[')\r\n    .replace(/\\]/g, '\\\\]')\r\n    .replace(/\\./g, '\\\\.')\r\n    .replace(/\\./g, '.')\r\n    .replace(/\\*/g, '\\\\*')\r\n    .replace(/\\+/g, '\\\\+')\r\n    .replace(/\\(/g, '\\\\(')\r\n    .replace(/\\)/g, '\\\\)')\r\n    .replace(/\\?/g, '\\\\?')\r\n    .replace(/\\//g, '\\\\/');\r\n\r\n  try {\r\n    let regExp = new RegExp(escapedHref + '<\\\\/a>(\\\\)|[а-яёА-ЯЁ0-9#\\\\-\\\\+\\\\_\\\\%\\\\?=]*)');\r\n    let arr = parentText.match(regExp);\r\n    if (arr && arr.length > 1) {\r\n      if (arr[1] === ')' && href.search('\\\\(') === -1) {\r\n        return href;\r\n      }\r\n      href = href + arr[1];\r\n      return href;\r\n    }\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n  return href;\r\n}\r\n\r\nconst isYoutube = (hostname: string): boolean => {\r\n  if (hostname.search(/youtube/) !== -1\r\n    || hostname.search(/youtu\\.be/) !== -1)\r\n    return true;\r\n  else\r\n    return false\r\n}\r\n\r\nconst isMistaCatalog = (hostname: string): boolean => {\r\n  if (hostname.search(/catalog\\.mista/) !== -1)\r\n    return true;\r\n  else\r\n    return false\r\n}\r\n\r\nconst CustomLink: FC<IProps> = ({ href, children, parentText, ...props }): ReactElement => {\r\n\r\n  const showYoutubeVideoTitle = useAppSelector(state => state.options.items.showYoutubeVideoTitle === 'true');\r\n  const replaceCatalogMista = useAppSelector(state => state.options.items.replaceCatalogMista === 'true');\r\n  const fixBrokenLinks = useAppSelector(state => state.options.items.fixBrokenLinks === 'true');\r\n\r\n  try {\r\n    var url = new URL(href, true);\r\n  } catch (e) {\r\n    console.error((e as Error).message, href);\r\n    return <a href={href}>{href}</a>;\r\n  }\r\n\r\n  let newHref = href;\r\n  if (newHref.startsWith('/')) {\r\n    url.set('protocol', 'https')\r\n    url.set('hostname', 'forum.mista.ru')\r\n    newHref = url.href;\r\n  }\r\n\r\n  if (url.hostname.search(/forum\\.mista.ru/) !== -1) {\r\n\r\n    if (url.pathname === '/topic.php') {\r\n      return (\r\n        <LinkToPost topicId={url.query.id} number={url.hash.replace('#', '') || \"0\"}>\r\n          {childrenToText(children)}\r\n        </LinkToPost>\r\n      )\r\n    } else if (url.pathname === '/users.php') {\r\n      return (\r\n        <LinkToUser href={url.href} >\r\n          {children}\r\n        </LinkToUser>\r\n      )\r\n    }\r\n  }\r\n\r\n  if (url.hostname === 'a-sitnikov.github.io' &&\r\n    url.pathname === '/react.mista/') {\r\n\r\n    if (Object.keys(url.query).length === 0) {\r\n\r\n      url = new URL(href.replace(/#\\//, ''), true);\r\n      if (url.pathname === '/react.mista/topic.php')\r\n        return (\r\n          <LinkToPost topicId={url.query.id} number={url.hash.replace('#', '') || \"0\"}>\r\n            {childrenToText(children)}\r\n          </LinkToPost>\r\n        )\r\n    }\r\n  }\r\n\r\n  if (showYoutubeVideoTitle && isYoutube(url.hostname))\r\n    return <YoutubeLink href={href} />\r\n\r\n  if (replaceCatalogMista && isMistaCatalog(url.hostname)) {\r\n    url.set('hostname', 'infostart.ru')\r\n\r\n    return (\r\n      <a target={props?.target}\r\n        className={props?.class}\r\n        rel={props?.rel}\r\n        href={url.href} >{url.href} </a>\r\n    )\r\n  }\r\n\r\n  if (fixBrokenLinks && parentText) {\r\n    newHref = fixBrokenLink(newHref, parentText);\r\n  }\r\n\r\n  return (\r\n    <a target={props?.target}\r\n      className={props?.class}\r\n      rel={props?.rel}\r\n      href={newHref} >{children}</a>\r\n  )\r\n}\r\n\r\nexport default CustomLink;","import { FC, ReactElement, memo } from 'react'\r\nimport CSS from 'csstype'\r\n\r\nimport { domain } from 'src/api'\r\n\r\nimport { IVotingItem } from 'src/store'\r\n\r\ntype IProps = {\r\n  topicId: number,\r\n  data: IVotingItem,\r\n  colors: string[],\r\n  total: number,\r\n  n: number\r\n}\r\n\r\nconst VoteItem: FC<IProps> = memo(({ topicId, data, total, n, colors }): ReactElement => {\r\n\r\n  const img = `${domain}/css/voting${n}.png`;\r\n\r\n  let percent = 0;\r\n\r\n  if (total) {\r\n    percent = Math.round(100 * data.count / total);\r\n  }\r\n\r\n  const imgStyle: CSS.Properties = { \r\n    maxWidth: \"500px\", \r\n    width: \"100%\", \r\n    height: \"15px\" \r\n  };\r\n\r\n  return (\r\n    <li className=\"voting-item\">\r\n      <div className=\"voting-title\">\r\n        <a rel=\"nofollow\" style={{ textDecoration: \"none\" }} href={`#/topic.php?id=${topicId}&sel=${n}`}>\r\n          <b><span style={{ color: colors[n - 1] }}>{`${n}. ${data.text}`}</span></b>\r\n        </a>\r\n      </div>\r\n      <div className=\"voting-percentage\">\r\n        <b><span style={{ color: colors[n - 1] }}>{`${percent}% (${data.count})`}</span></b>\r\n      </div>\r\n      <div className=\"voting-bar\">\r\n        <div style={{ width: `${percent}%` }}>\r\n          <a href={img}>\r\n            <img src={img} style={imgStyle} alt={`вариант ${n}`} />\r\n          </a>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  )\r\n})\r\n\r\nexport default VoteItem;","import { FC, ReactElement } from 'react'\r\nimport VoteItem from './vote_item'\r\nimport { IVotingItem } from 'src/store'\r\n\r\ntype IProps = {\r\n  items: IVotingItem[],\r\n  topicId: number,\r\n  colors: string[]\r\n}\r\n\r\nconst VoteChart: FC<IProps> = ({ items, topicId, colors }): ReactElement => {\r\n\r\n  let total = Math.max(...items.map(item => item.count));\r\n\r\n  return (\r\n    <ul style={{ paddingLeft: 0 }}>\r\n      {items.filter(item => item.text).map((data, i) => <VoteItem key={i} data={data} total={total} n={i + 1} topicId={topicId} colors={colors} />)}\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default VoteChart;","import { FC, ReactElement, memo } from 'react'\r\n\r\ntype IProps = {\r\n  colors: string[],\r\n  n: number,\r\n  text: string\r\n}\r\n\r\nconst Vote: FC<IProps> = memo(({ colors, n, text }): ReactElement => {\r\n\r\n  return (\r\n    <div style={{ marginTop: \"5px\" }}>\r\n      <b><span style={{ color: colors[n - 1] }}>{`${n}. ${text}`}</span></b>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default Vote;","import { FC, ReactElement, useEffect, useState, useCallback, memo } from 'react'\r\nimport activeHtml from 'react-active-html';\r\n\r\nimport Code from 'src/components/extensions/code1c'\r\nimport LinkToPost from 'src/components/extensions/link_to_post'\r\nimport CustomLink from 'src/components/extensions/custom_link'\r\n\r\nimport VoteChart from './vote_chart'\r\nimport Vote from './vote'\r\nimport { useAppSelector } from 'src/store';\r\nimport { ITopicMessage } from 'src/store';\r\nimport { fetchTopicInfo } from 'src/api';\r\n\r\ntype IProps = {\r\n  topicId: number,\r\n  n: number,\r\n  html: string,\r\n  vote: number,\r\n  data: ITopicMessage,\r\n  style?: {}\r\n}\r\n\r\nconst processLinksToPosts = (text: string, topicId: number): string => {\r\n\r\n  const regexp = /(\\()(\\d+)(\\))/gi; // (12)\r\n  return text.replace(regexp, (res, ...segments) => {\r\n    const number = segments[1];\r\n    return `(<link data-topicid='${topicId}' data-number='${number}'></link>)`\r\n  });\r\n}\r\n\r\nconst processCode1C = (text: string): string => {\r\n\r\n  const regexp = /(\\[1[CС]\\])((.|\\n|\\r)*?)(\\[\\/1[CС]\\])/gi; // [1C] text [/1C]\r\n  return text.replace(regexp, (res, ...segments) => {\r\n    let txt = segments[1];\r\n\r\n    //remove first <br>\r\n    if (txt.substr(0, 4) === \"<br>\")\r\n      txt = txt.substr(4);\r\n    return `<code>${txt}</code>`\r\n  });\r\n}\r\n\r\nconst processText = (text: string, topicId: number): string | undefined => {\r\n\r\n  if (!text)\r\n    return text;\r\n\r\n  let newtext = processCode1C(text);\r\n  newtext = processLinksToPosts(newtext, topicId);\r\n\r\n  return newtext;\r\n}\r\n\r\nconst ProcessedText: FC<{ html: string, topicId: number }> = memo(({ html, topicId }): ReactElement => {\r\n\r\n  let processedHtml = processText(html, topicId);\r\n  const componentsMap = {\r\n    link: (props: any) => <LinkToPost topicId={props['data-topicid']} number={props['data-number']} key={props.key} />,\r\n    code: (props: any) => <Code {...props} />,\r\n    a: (props: any) => <CustomLink {...props} parentText={processedHtml} />\r\n  };\r\n  const textComponent = activeHtml(processedHtml, componentsMap);\r\n\r\n  return (\r\n      <>\r\n        {textComponent}\r\n      </>  \r\n  )\r\n})\r\n\r\nconst MsgText: FC<IProps> =\r\n  ({ topicId, n, html, vote, style }): ReactElement => {\r\n\r\n    const info = useAppSelector(state => state.topic.info);\r\n    const voteColors = useAppSelector(state => state.options.voteColors);\r\n\r\n    let initialVoteText: string = null;\r\n    if (vote && info.voting && topicId === info.id)\r\n      initialVoteText = info.voting[vote - 1].text;\r\n\r\n    const [voteText, setVoteText] = useState(initialVoteText);\r\n\r\n    const getVoteText = useCallback(async () => {\r\n      try {\r\n        const _info = await fetchTopicInfo(topicId);\r\n        setVoteText(_info.voting[vote - 1].text);\r\n      } catch (e) {\r\n        console.error(e.message);\r\n      }\r\n    }, [topicId, vote]);\r\n\r\n    useEffect(() => {\r\n      if (vote && !initialVoteText) {\r\n        getVoteText();\r\n      } \r\n    }, [vote, getVoteText, initialVoteText]);\r\n\r\n    const showVote = (vote !== 0) && (voteText !== null);\r\n    let voteChart: ReactElement;\r\n    if (n === 0 && info.isVoting && info.voting) {\r\n      voteChart = <VoteChart items={info.voting} topicId={topicId} colors={voteColors} />\r\n    }\r\n\r\n    return (\r\n      <div className=\"message\" style={style}>\r\n        {voteChart}\r\n        <div>\r\n          <ProcessedText html={html} topicId={topicId} />\r\n        </div>\r\n        {showVote && <Vote text={voteText} n={vote} colors={voteColors} />}\r\n      </div>\r\n    )\r\n  }\r\n\r\nexport default MsgText;","import { FC, ReactElement, useEffect, useState } from 'react'\r\nimport type { Property } from 'csstype'\r\nimport moment from 'moment'\r\nimport classNames from 'classnames'\r\nimport { domain } from 'src/api'\r\n\r\nimport { useActionCreators } from 'src/store'\r\nimport type { ITopicMessage } from 'src/store'\r\nimport { newMessageActions } from 'src/store'\r\n\r\ntype IProps = {\r\n  data: ITopicMessage,\r\n  isAuthor: boolean,\r\n  isYou: boolean,\r\n  isTooltip?: boolean\r\n}\r\n\r\nconst UserInfo: FC<IProps> = (props): ReactElement => {\r\n\r\n  const actions = useActionCreators(newMessageActions);\r\n\r\n  const [imgDisplay, setImgDisplay] = useState<Property.Display>('none');\r\n\r\n  const onClick = () => {\r\n    const { data } = props;\r\n    actions.changeText(`(${data.n})`);\r\n\r\n    let elem = document.getElementById('message_text');\r\n    if (elem)\r\n      window.scrollTo(0, elem.offsetTop);\r\n  }\r\n\r\n  const onImageLoad = () => {\r\n    setImgDisplay('inline');\r\n  }\r\n\r\n  const onImageError = () => {\r\n    setImgDisplay('none');\r\n  }\r\n\r\n  const { data, isAuthor, isYou, isTooltip } = props;\r\n  useEffect(() => {\r\n    setImgDisplay('none');\r\n  }, [data.n]);\r\n\r\n  const href = `${domain}/users.php?id=${data.userId}`;\r\n  let dataStr: ReactElement | string;\r\n  if (!data) {\r\n    dataStr = '';\r\n  } else if (data.n === 0) {\r\n    dataStr = moment(data.time).format('DD.MM.YY - HH:MM');\r\n  } else {\r\n    dataStr = (\r\n      <>\r\n        <span className=\"message-number\">{data.n}</span>{' - ' + moment(data.time).format('DD.MM.YY - HH:MM')}\r\n      </>\r\n    )\r\n  }\r\n\r\n  const userClassNames = classNames(\"registered-user\", {\r\n    \"is-author\": isAuthor,\r\n    \"is-you\": isYou\r\n  });\r\n\r\n  let imgElem: ReactElement;\r\n  if (window.innerWidth > 768)\r\n    imgElem = <img src={`${domain}/css/user_icons/${data.userId}_16x16.png`}\r\n      alt=\"user ico\"\r\n      onLoad={onImageLoad}\r\n      onError={onImageError}\r\n      style={{ display: imgDisplay, marginBottom: \"4px\", marginRight: \"1px\" }} />\r\n\r\n  let timeElem: ReactElement;\r\n  if (isTooltip) {\r\n    timeElem = <div className=\"ah\" style={{ display: \"inline-block\", marginLeft: \"5px\" }}>{dataStr}</div>;\r\n  } else {\r\n    timeElem =\r\n      <div className=\"message-time\">\r\n        <span className=\"ah\" >{dataStr}</span>\r\n        <button className=\"button ah\" onClick={onClick}>{dataStr}</button>\r\n      </div>\r\n  }\r\n\r\n  return (\r\n    <div className=\"user-info\">\r\n      {imgElem}\r\n      <a className={userClassNames} href={href}>{data.user}</a>\r\n      {timeElem}\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default UserInfo;","import { FC, ReactElement, useState, useEffect } from 'react'\r\n\r\nimport { fetchTopicMessage } from 'src/api'\r\n\r\nimport MsgText from 'src/pages/topic/row/msg_text'\r\nimport UserInfo from 'src/pages/topic/row/user_info'\r\n\r\nimport { ITopicMessage } from 'src/store'\r\n\r\nimport './topic_preview.css'\r\n\r\ntype IProps = {\r\n  topicId: number,\r\n  n: number,\r\n  author: string,\r\n  loggedUserId: number,\r\n  onDataLoaded?: () => void\r\n}\r\n\r\nconst PreviewContent: FC<IProps> = ({ topicId, n, author, loggedUserId, onDataLoaded }): ReactElement => {\r\n\r\n  const [data, setData] = useState<ITopicMessage | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n\r\n    const getData = async () => {\r\n      try {\r\n        const _data = await fetchTopicMessage(topicId, n);\r\n        if (_data) {\r\n          setData(_data);\r\n          setError(null);\r\n          if (onDataLoaded) onDataLoaded();\r\n        } else {\r\n          setData(null);\r\n          setError(`Не найдено сообщение ${n}`);\r\n        }  \r\n      } catch (e) {\r\n        setData(null);\r\n        setError((e as Error).message);\r\n      }\r\n\r\n    }\r\n\r\n    getData();\r\n\r\n  }, [topicId, n, onDataLoaded])\r\n\r\n  if (!data && !error)\r\n    return null;\r\n\r\n  return (\r\n    <>\r\n      {data &&\r\n        <div className='preview-content'>\r\n          <div className='topic-preview-userinfo'>\r\n            <UserInfo data={data} isAuthor={data.user === author} isYou={data.userId === loggedUserId} isTooltip />\r\n          </div>\r\n          <MsgText\r\n            topicId={topicId}\r\n            n={n}\r\n            data={data}\r\n            html={data.text}\r\n            vote={data.vote}\r\n            style={{ overflowY: \"auto\", overflowWrap: \"break-word\" }}\r\n          />\r\n        </div>}\r\n      {error && <span>{error}</span>}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default PreviewContent;","import { FC, ReactElement, useCallback, useState } from 'react'\r\nimport { SwipeEventData, useSwipeable } from 'react-swipeable'\r\nimport { fetchTopicInfo } from 'src/api'\r\n\r\nimport PreviewButtons from './preview_buttons'\r\nimport PreviewContent from './preview_content'\r\nimport './topic_preview.css'\r\n\r\ntype IProps = {\r\n  topicId: number,\r\n  initialMsgNumber: number,\r\n  author: string,\r\n  loggedUserId: number\r\n}\r\n\r\nconst TopicPreview: FC<IProps> = ({ topicId, initialMsgNumber, author, loggedUserId }): ReactElement => {\r\n\r\n  const [deltaX, setDeltaX] = useState(0);\r\n  const [display, setDispaly] = useState('none');\r\n  const [state, setState] = useState({\r\n    msgNumber: initialMsgNumber,\r\n    key: 0\r\n  })\r\n\r\n  const onClickFirst = () => {\r\n    setState({\r\n      msgNumber: 0,\r\n      key: state.key\r\n    });\r\n  }\r\n\r\n  const onClickNext = () => {\r\n    setState({\r\n      msgNumber: state.msgNumber + 1,\r\n      key: state.key\r\n    });\r\n  }\r\n\r\n  const onClickPrev = () => {\r\n    if (state.msgNumber > 0)\r\n      setState({\r\n        msgNumber: state.msgNumber - 1,\r\n        key: state.key\r\n      });\r\n  }\r\n\r\n  const onClickLast = async () => {\r\n    const info = await fetchTopicInfo(topicId);\r\n    setState({\r\n      msgNumber: info.count,\r\n      key: state.key\r\n    });    \r\n  }\r\n\r\n  const onSwiping = (eventData: SwipeEventData) => {\r\n    if (Math.abs(eventData.deltaX) < 35)\r\n      setDeltaX(0);\r\n    else\r\n      setDeltaX(eventData.deltaX);\r\n  }\r\n\r\n  const onSwiped = (eventData: SwipeEventData) => {\r\n\r\n    if (Math.abs(eventData.deltaX) > 150) {\r\n      if (eventData.dir === \"Left\") {\r\n        setState({\r\n          msgNumber: state.msgNumber + 1,\r\n          key: state.key + 1\r\n        });         \r\n      } else if (eventData.dir === \"Right\" && state.msgNumber > 0) {\r\n        setState({\r\n          msgNumber: state.msgNumber - 1,\r\n          key: state.key + 1\r\n        });           \r\n      }\r\n    }\r\n    setDeltaX(0);\r\n  }\r\n\r\n  const swipeable = useSwipeable({\r\n    onSwiping,\r\n    onSwiped,\r\n    delta: 15\r\n  });\r\n\r\n  const onContentLoaded = useCallback(() => {\r\n    setDispaly('block');\r\n  }, []);\r\n\r\n  let items = [state.msgNumber];\r\n\r\n  if (deltaX < 0)\r\n    items.push(state.msgNumber + 1);\r\n  else if (deltaX > 0 && state.msgNumber > 0)\r\n    items.push(state.msgNumber - 1);\r\n\r\n  const style: React.CSSProperties = {\r\n    transform: `translate3d(${deltaX}px, 0px, 0px)`,\r\n    flexDirection: deltaX > 0 ? 'row-reverse' : 'row'\r\n  }\r\n\r\n  return (\r\n    <div className=\"preview-container\" style={{ display }}>\r\n      <div className=\"topic-preview\">\r\n        <PreviewButtons\r\n          topicId={topicId}\r\n          onFirst={onClickFirst}\r\n          onLast={onClickLast}\r\n          onNext={onClickNext}\r\n          onPrev={onClickPrev}\r\n        />\r\n        <div className='preview-carousel' {...swipeable} style={style}>\r\n          <div className='preview-carousel-item' key={state.key} style={{ order: 0 }}>\r\n            <PreviewContent\r\n              topicId={topicId}\r\n              n={items[0]}\r\n              loggedUserId={loggedUserId}\r\n              author={author}\r\n              onDataLoaded={onContentLoaded}\r\n            />\r\n          </div>\r\n          {items.length > 1 &&\r\n            <div className='preview-carousel-item' key={state.key + 1} style={{ order: 1 }}>\r\n              <PreviewContent\r\n                topicId={topicId}\r\n                n={items[1]}\r\n                loggedUserId={loggedUserId}\r\n                author={author}\r\n              />\r\n            </div>}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default TopicPreview;","import { ReactElement, useCallback, useEffect } from 'react'\r\nimport { useLocation } from 'react-router-dom'\r\nimport queryString from 'query-string'\r\n\r\nimport { useAppDispatch, useAppSelector } from 'src/store'\r\nimport { getTopicsListIfNeeded } from 'src/store'\r\n\r\nimport Header from './header'\r\nimport TableHeader from './table_header'\r\nimport Row from './row'\r\nimport Pages from 'src/components/common/pages'\r\nimport NewTopic from './new_topic'\r\nimport Error from 'src/components/common/error'\r\n\r\nimport TopicPreview from 'src/components/preview/topic_preview'\r\n\r\nimport './topics_list.css'\r\n\r\nconst TopicsList = (): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch()\r\n  const items = useAppSelector(state => state.topicsList.items);\r\n  const status = useAppSelector(state => state.topicsList.status);\r\n  const error = useAppSelector(state => state.topicsList.error);\r\n  const loggedUserId = useAppSelector(state => state.login.userId);\r\n\r\n  const location = useLocation();\r\n\r\n  const updateTopicsList = useCallback((locationParams) => {\r\n    dispatch(getTopicsListIfNeeded(locationParams));\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    document.title = 'React.Mista';\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, [location.pathname, location.search]);\r\n\r\n  useEffect(() => {\r\n    const locationParams = queryString.parse(location.search);\r\n    updateTopicsList(locationParams);\r\n  }, [location.search, updateTopicsList]);\r\n\r\n  let rows = [];\r\n  for (let item of items) {\r\n\r\n    rows.push(\r\n      <Row \r\n        key={item.id} \r\n        {...item} \r\n        topicId={item.id}\r\n      />\r\n    );\r\n\r\n    if (item.showPreview)\r\n      rows.push(\r\n        <TopicPreview \r\n          key={`preview${item.id}`} \r\n          topicId={item.id} \r\n          initialMsgNumber={item.previewMsgNumber}\r\n          author={item.author}\r\n          loggedUserId={loggedUserId}\r\n          />\r\n      )\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Header />\r\n      {error && (<Error text={error} />)}\r\n      <div className=\"topic-list-table\">\r\n        <TableHeader\r\n          onUpdateClick={updateTopicsList}\r\n          isLoading={status === \"loading\"}\r\n        />\r\n        {rows}\r\n        <div className=\"tf\">\r\n          <Pages maxPage={10} />\r\n        </div>\r\n      </div>\r\n      <div id=\"F\" className=\"newtopic\" style={{ marginBottom: \"10px\", marginTop: \"5px\", position: 'relative' }}>\r\n        <NewTopic \r\n          onSubmitSuccess={updateTopicsList}\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TopicsList;","import { ReactElement } from 'react';\r\n\r\nimport { useAppSelector } from 'src/store'\r\nimport Login from 'src/components/login'\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst forums = {\r\n  '1c': '1С:Предприятие',\r\n  'life': 'О жизни',\r\n  'it': 'Информационные технологии',\r\n  'job': 'Работа'\r\n};\r\n\r\nconst Header =  (): ReactElement => {\r\n\r\n  const info = useAppSelector(state => state.topic.info);\r\n\r\n  return (\r\n\r\n    <div className=\"flex-row\">\r\n      <div className=\"header-left\">\r\n        <Login/>\r\n      </div>\r\n      <div className=\"header-right\">\r\n        <span id=\"forum_string\" className=\"bold120\">\r\n          <Link to={`/index.php?forum=${info.forum}`} style={{ textDecoration: \"none\" }}>{forums[info.forum]}</Link>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Header;","import { ReactElement } from 'react'\r\n\r\nimport { useAppSelector } from 'src/store'\r\nimport { domain, urlTopicInfo, urlTopicMessages } from 'src/api'\r\n\r\nconst TopicInfo = (): ReactElement => {\r\n\r\n  const topicId = useAppSelector(state => state.topic.info.id);\r\n  const title = useAppSelector(state => state.topic.info.title);\r\n\r\n  let yandexUrl = \"https://www.yandex.ru/search/?text=\" + encodeURIComponent(title);\r\n\r\n  return (\r\n    <div className=\"topic-row\">\r\n      <div className=\"cell-userinfo\">\r\n        <div className=\"topic-tools\">\r\n          <a title=\"API.info\" href={`${domain}/${urlTopicInfo}?id=${topicId}`} className=\"agh\" style={{ display: \"block\", lineHeight: \"1em\" }}>i</a>\r\n          <a title=\"API.messages\" href={`${domain}/${urlTopicMessages}?id=${topicId}&from=0&to=20`} className=\"agh\" style={{ display: \"block\", lineHeight: \"1em\" }}>m</a>\r\n          {/*<a href=\"add_voting.php?topic_id=815217\" title=\"Добавить голосование\">vote</a> &nbsp;&nbsp;*/}\r\n        </div>\r\n      </div>\r\n      <div className=\"cell-message\">\r\n        <div className=\"flex-row\">\r\n          <div style={{ flex: 1, textAlign: \"center\" }}>\r\n            <a href={`${domain}/topic.php?id=${topicId}`}>\r\n              <h1 className=\"topic-title\" dangerouslySetInnerHTML={{ __html: title }}></h1>\r\n            </a>\r\n            <div className=\"moder-action\"></div>\r\n          </div>\r\n          <div style={{ flex: \"0 0 20px\", position: \"relative\" }}>\r\n            <div className=\"div-va-middle\">\r\n              <a rel=\"noopener noreferrer\" href={yandexUrl} title=\"Искать в Яндексе\" target=\"_blank\" className=\"yandex\">Я</a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default TopicInfo;","import { FC, ReactElement } from 'react'\r\n\r\nimport UserInfo from './user_info'\r\nimport MsgText from './msg_text'\r\nimport { useAppSelector } from 'src/store'\r\nimport { ITopicMessage } from 'src/store'\r\n\r\ntype IProps = {\r\n  data: ITopicMessage\r\n}\r\n\r\nconst Row: FC<IProps> = ({ data }): ReactElement => {\r\n\r\n    const topicId = useAppSelector(state => state.topic.info.id);\r\n    const login = useAppSelector(state => state.login);\r\n    const author = useAppSelector(state => state.topic.item0?.user || '');\r\n\r\n    if (!data)\r\n      return null;\r\n\r\n    return (\r\n      <div className=\"topic-row\" id={String(data.n)}>\r\n        <div className=\"cell-userinfo\">\r\n          <UserInfo data={data} isAuthor={data.user === author} isYou={data.user === login.userName} />\r\n        </div>\r\n        <div className=\"cell-message\">\r\n          <MsgText data={data} html={data.text} topicId={topicId} n={data.n} vote={data.vote} />\r\n        </div>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default Row;","import { FC, ReactElement } from 'react';\r\nimport { Button } from 'react-bootstrap'\r\n\r\nimport { getMaxPage } from 'src/utils'\r\nimport { useAppDispatch, useAppSelector } from 'src/store'\r\nimport { defaultInfo, getNewMessagesIfNeeded } from 'src/store'\r\n\r\ntype IProps = { page?: number | string };\r\n\r\nconst Footer: FC<IProps> = ({ page }): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n  const info = useAppSelector(state => state.topic.info || defaultInfo);\r\n  const status = useAppSelector(state => state.topic.status);\r\n\r\n  const onBookmarkClick = () => {\r\n    //dispatch(addBookmark(info));\r\n  }\r\n\r\n  const onRefreshClick = () => {\r\n    dispatch(getNewMessagesIfNeeded());\r\n  }\r\n\r\n  const maxPage = getMaxPage(info.count);\r\n\r\n  let showUpdateButton = false;\r\n  if (page === 'last20' || page === maxPage)\r\n    showUpdateButton = true;\r\n\r\n  return (\r\n    <div className=\"flex-row\" id=\"F\">\r\n      <div className=\"ta-left va-top\" style={{ width: \"50%\" }}>\r\n        <Button\r\n          onClick={onBookmarkClick}\r\n          disabled={false}\r\n          size=\"sm\"\r\n          className='button'\r\n          variant=\"light\">\r\n          {'Закладка'}\r\n        </Button>\r\n      </div>\r\n      <div className=\"ta-right va-middle\" style={{ marginLeft: \"auto\" }}>\r\n        {showUpdateButton &&\r\n          <Button\r\n            onClick={onRefreshClick}\r\n            disabled={status === \"loading\"}\r\n            size=\"sm\"\r\n            className='button'\r\n            variant=\"light\">\r\n            {status === \"loading\" ? 'Обновляется' : 'Обновить ветку'}\r\n          </Button>\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Footer;","import { FC, ReactElement, useState, useCallback } from 'react'\r\nimport { FormGroup, Form } from 'react-bootstrap'\r\n\r\nimport TextEditor from 'src/components/common/text_editor'\r\nimport { useActionCreators, useAppDispatch, useAppSelector } from 'src/store'\r\nimport { newMessageActions, postNewMessage } from 'src/store'\r\n\r\nimport type { PostNewmessageParams } from 'src/store'\r\n\r\ntype IProps = {\r\n  onSubmitSuccess?: () => void\r\n}\r\n\r\nconst NewMessage: FC<IProps> = ({ onSubmitSuccess }): ReactElement => {\r\n\r\n  const [voting, setVoting] = useState<number | undefined>();\r\n  const dispatch = useAppDispatch();\r\n  const actions = useActionCreators(newMessageActions);\r\n\r\n  const info = useAppSelector(state => state.topic.info);\r\n  const newMessage = useAppSelector(state => state.newMessage);\r\n\r\n  const onSubmit = (e: any) => {\r\n\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    let params: PostNewmessageParams = {\r\n      text: newMessage.text,\r\n      topicId: String(info?.id),\r\n      onSuccess: afterSubmit,\r\n      voting_select: undefined\r\n    };\r\n\r\n    if (voting) {\r\n      params.voting_select = voting;\r\n    }\r\n\r\n    dispatch(postNewMessage(params));\r\n  }\r\n\r\n  const afterSubmit = () => {\r\n\r\n    actions.changeText('');\r\n    setVoting(undefined);\r\n\r\n    if (onSubmitSuccess) {\r\n      onSubmitSuccess();\r\n    }\r\n  }\r\n\r\n  const clearVoting = (e: React.MouseEvent<HTMLElement>) => {\r\n\r\n    e.preventDefault();\r\n    setVoting(undefined);\r\n\r\n  }\r\n\r\n  const setVotingOption = (i: number) => {\r\n    setVoting(i);\r\n  }\r\n\r\n  const onTextChange = useCallback((text: string) => {\r\n    //dispatch(newTopicActions.changeText(text));\r\n  }, []);\r\n\r\n  let votingElem: ReactElement;\r\n  if (info?.isVoting && info?.voting) {\r\n\r\n    let votingOptions = [];\r\n    for (let i = 1; i <= info.voting.length; i++) {\r\n\r\n      const item = info.voting[i - 1];\r\n      if (!item.text)\r\n        continue;\r\n\r\n      votingOptions.push(\r\n        <Form.Check\r\n          type=\"radio\"\r\n          key={i}\r\n          name=\"voting\"\r\n          checked={voting === i}\r\n          onChange={() => setVotingOption(i)}\r\n          label={`${i}. ${item.text}`}\r\n        />\r\n      );\r\n    }\r\n\r\n\r\n    votingElem = (\r\n      <FormGroup>\r\n        <legend>\r\n          <small>Ваш выбор:\r\n            <span id=\"voting_clear\" style={{ marginLeft: \"5px\", cursor: \"pointer\" }} onClick={clearVoting}>очистить</span>\r\n          </small>\r\n        </legend>\r\n        {votingOptions}\r\n        Обоснуйте свой выбор!\r\n      </FormGroup>\r\n    );\r\n\r\n  }\r\n\r\n  return (\r\n    <form style={{ marginTop: \"5px\" }} onSubmit={onSubmit}>\r\n      <div className=\"bold\">Добавить сообщение в тему:</div>\r\n      <div className=\"new-message-container\">\r\n        <div className=\"new-message-text\">\r\n          <TextEditor\r\n            isFetching={newMessage.status === \"loading\"}\r\n            text={newMessage.text}\r\n            placeholder=\"Сообщение\"\r\n            onChange={onTextChange}\r\n          />\r\n        </div>\r\n        <div className=\"new-message-voting\">\r\n          {votingElem}\r\n        </div>\r\n      </div>\r\n    </form>\r\n  )\r\n\r\n}\r\n\r\nexport default NewMessage;","import { FC, ReactElement } from 'react'\r\nimport { Form } from 'react-bootstrap'\r\n\r\ntype IProps = {\r\n  name: string,\r\n  label: string,\r\n  value: string,\r\n  values: Array<{ name: string, descr: string }>,\r\n  onChange: any,\r\n  oneLine: boolean\r\n}\r\n\r\nconst RadioOption: FC<IProps> = ({ name, label, value, values, oneLine, onChange }): ReactElement => {\r\n\r\n  const onChangeValue = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    onChange(e, name, e.target.value);\r\n  }\r\n\r\n  return (\r\n    <span>\r\n      <span style={{ marginRight: \"5px\" }}> {label} </span>\r\n      {oneLine && <br/>}\r\n      {values.map((item, i) =>\r\n        <Form.Check key={i}\r\n          type=\"radio\"\r\n          id={item.name}\r\n          label={item.descr}\r\n          name={label}\r\n          checked={item.name === value}\r\n          value={item.name}\r\n          inline={oneLine}\r\n          onChange={onChangeValue}\r\n        >\r\n        </Form.Check>\r\n      )}\r\n    </span>\r\n  );\r\n}\r\n\r\nexport default RadioOption;","import { FC, ReactElement } from 'react'\r\n\r\ntype IProps = {\r\n  name: string,\r\n  label: string,\r\n  value: string,\r\n  onChange: any,\r\n  postfix?: string\r\n}\r\n\r\nconst StringOption: FC<IProps> = (props): ReactElement => {\r\n\r\n  const onChange = (e: any) => {\r\n    const { name } = props;\r\n    props.onChange(e, name, e.target.value);\r\n  }\r\n\r\n  const { name, value, label, postfix } = props;\r\n\r\n  return (\r\n    <label htmlFor={name} style={{ marginRight: \"5px\" }}>\r\n      <span style={{ marginRight: \"5px\" }}>{label}</span>\r\n      <input type=\"string\" name={name} value={value} onChange={onChange} className='input' />\r\n      {postfix !== undefined ?\r\n        <span style={{ marginLeft: \"5px\" }}>{postfix}</span>\r\n        : null}\r\n    </label>\r\n  );\r\n}\r\n\r\nexport default StringOption;","export const formTabs = [\r\n  {\r\n    tabName: 'Общие',\r\n    rows: [\r\n      ['theme'],\r\n      ['topicsPerPage'],\r\n      ['autoRefreshTopicsList', 'autoRefreshTopicsListInterval'],\r\n      ['autoRefreshTopic', 'autoRefreshTopicInterval'],\r\n    ]\r\n  },\r\n  {\r\n    tabName: 'Тултипы',\r\n    rows: [\r\n      ['showTooltips', 'tooltipDelay'],\r\n      ['showTooltipOnPostLink']\r\n    ]\r\n  },\r\n  {\r\n    tabName: 'Ссылки',\r\n    rows: [\r\n      ['showYoutubeVideoTitle'],\r\n      ['replaceCatalogMista'],\r\n      ['fixBrokenLinks'],\r\n    ]\r\n  }\r\n];\r\n\r\nexport const formParams = {\r\n  'theme': {\r\n    type: 'radio',\r\n    label: 'Цветовая палитра:',\r\n    oneLine: true,\r\n    values: [\r\n      { name: 'yellow', descr: 'Золотая' },\r\n      { name: 'lightgray', descr: 'Серая' },\r\n      { name: 'dark', descr: 'Темная' }\r\n    ]\r\n  },\r\n  'topicsPerPage': {\r\n    type: 'number',\r\n    label: 'Тем на странице (max 99):',\r\n    min: 1,\r\n    max: 99\r\n  },\r\n  'autoRefreshTopicsList': {\r\n    type: 'checkbox',\r\n    label: 'Автообновление списка тем'\r\n  },\r\n  'autoRefreshTopicsListInterval': {\r\n    type: 'number',\r\n    label: '',\r\n    min: 60,\r\n    max: 1000000,\r\n    postfix: 'сек'\r\n  },\r\n  'autoRefreshTopic': {\r\n    type: 'checkbox',\r\n    label: 'Автообновление темы'\r\n  },\r\n  'autoRefreshTopicInterval': {\r\n    type: 'number',\r\n    label: '',\r\n    min: 60,\r\n    max: 1000000,\r\n    postfix: 'сек'\r\n  },\r\n  //Tooltips   \r\n  'showTooltips': {\r\n    type: 'checkbox',\r\n    label: 'Показывать тултипы, задержка',\r\n    disabled: true\r\n  },\r\n  'tooltipDelay': {\r\n    type: 'number',\r\n    max: 1000000,\r\n    label: '',\r\n    postfix: 'мс',\r\n    disabled: true\r\n  },\r\n  'showTooltipOnPostLink': {\r\n    type: 'checkbox',\r\n    label: 'Показывать тултип ссыки на другую ветку',\r\n    disabled: true    \r\n  },\r\n  //links   \r\n  'showYoutubeVideoTitle': {\r\n    type: 'checkbox',\r\n    label: 'Показывать наименования роликов youtube'\r\n  },\r\n  'replaceCatalogMista': {\r\n    type: 'checkbox',\r\n    label: 'Обратно заменять catalog.mista.ru на infostart.ru'\r\n  },\r\n  'fixBrokenLinks': {\r\n    type: 'checkbox',\r\n    label: 'Чинить поломанные ссылки (с русскими символами)'\r\n  },\r\n}","import { FC, ReactElement } from \"react\";\r\n\r\ntype IProps = {\r\n  name: string\r\n}\r\n\r\nconst Tab: FC<IProps> = ({ name, children }): ReactElement => {\r\n  return (\r\n    <div>\r\n      <div className=\"tab-header\">\r\n        {name}\r\n      </div>\r\n      <div className=\"tab-content\">\r\n        {children}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Tab;","import { ReactElement, useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { Form, FormControl, Button } from 'react-bootstrap'\r\n\r\nimport RadioOption from './radio_option'\r\nimport StringOption from './string_option'\r\n\r\nimport { formTabs, formParams } from './formscheme'\r\nimport Tab from './tab'\r\n\r\nimport { IOptionsItems, RootState, useAppDispatch, useAppSelector } from 'src/store'\r\nimport { defaultOptionsState, optionsActions } from 'src/store'\r\n\r\nimport './options.css'\r\n\r\nconst Options = (): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const options = useAppSelector(state => state.options);\r\n\r\n  const [state, setState] = useState({\r\n    items: options.items\r\n  })\r\n\r\n  const closeForm = () => {\r\n    navigate('/#');\r\n  }\r\n\r\n  const resetOptions = () => {\r\n    setState({\r\n      ...state,\r\n      items: Object.assign({}, defaultOptionsState.items)\r\n    })\r\n  }\r\n\r\n  const applyOptions = () => {\r\n\r\n    dispatch(optionsActions.save(state.items));\r\n    closeForm();\r\n  }\r\n\r\n  const onChange = (e: React.FormEvent<HTMLElement>, name: string, value: IOptionsItems[keyof IOptionsItems]) => {\r\n\r\n    let items = Object.assign({}, state.items);\r\n    items[name] = value;\r\n    setState({\r\n      ...state,\r\n      items\r\n    })\r\n  }\r\n\r\n  let tabs = [];\r\n  for (let tab of formTabs) {\r\n\r\n    let rows = [];\r\n    for (let i in tab.rows) {\r\n\r\n      const row = tab.rows[i];\r\n      let rowElem = [];\r\n      for (let name of row) {\r\n\r\n        const item = formParams[name];\r\n        if (!item) continue;\r\n\r\n        const value = state.items[name];\r\n\r\n        if (item.type === 'radio') {\r\n          rowElem.push(\r\n            <RadioOption\r\n              key={name}\r\n              name={name}\r\n              label={item.label}\r\n              values={item.values}\r\n              value={value}\r\n              oneLine={item.oneLine}\r\n              onChange={onChange}\r\n            />\r\n          );\r\n        } else if (item.type === 'number') {\r\n\r\n          if (item.label)\r\n            rowElem.push(\r\n              <label\r\n                htmlFor={name}\r\n                key={name + '_label'}\r\n                style={{ fontWeight: \"inherit\" }}>\r\n                {item.label}\r\n              </label>\r\n            );\r\n\r\n          rowElem.push(\r\n            <div className='options-number' key={name}>\r\n              <FormControl\r\n                type=\"number\"\r\n                min={item.min}\r\n                max={item.max}\r\n                value={value}\r\n                disabled={item.disabled}\r\n                onChange={(e) => onChange(e, name, e.target.value)}\r\n                \r\n                className='input'\r\n                size=\"sm\"\r\n              >\r\n              </FormControl>\r\n              {item.postfix &&\r\n                <span key={name + '_postfix'} style={{ marginLeft: \"5px\", flex: \"0 0 auto\", }}>{item.postfix}</span>}\r\n            </div>\r\n          );\r\n\r\n        } else if (item.type === 'string') {\r\n          rowElem.push(\r\n            <StringOption\r\n              key={name}\r\n              name={name}\r\n              label={item.label}\r\n              postfix={item.postfix}\r\n              value={value}\r\n              onChange={onChange}\r\n            />\r\n          );\r\n        } else if (item.type === 'checkbox') {\r\n          rowElem.push(\r\n            <Form.Check\r\n              id={name}\r\n              type=\"checkbox\"\r\n              label={item.label}\r\n              key={name}\r\n              name={name}\r\n              checked={String(value) === 'true'}\r\n              disabled={item.disabled}              \r\n              onChange={(e) => onChange(e, name, String(e.target.checked))}\r\n              style={{ flex: \"0 0 auto\", margin: \"0px\", maxWidth: \"100%\" }}\r\n            />\r\n          );\r\n        }\r\n      }\r\n\r\n      rows.push(\r\n        <div key={i} className=\"options-row\">\r\n          {rowElem}\r\n        </div>\r\n      );\r\n\r\n    }\r\n\r\n    tabs.push(\r\n      <Tab key={tab.tabName} name={tab.tabName}>\r\n        {rows}\r\n      </Tab>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"options-form\">\r\n      <div className=\"options-header\" style={{ cursor: \"default\" }}>\r\n        <b>Настройки</b>\r\n      </div>\r\n      {tabs}\r\n      <div className=\"button-row\">\r\n        <Button\r\n          id=\"applyOptions\"\r\n          size=\"sm\"\r\n          variant=\"light\"\r\n          style={{ margin: \"5px\" }}\r\n          className='button'\r\n          onClick={applyOptions}>\r\n          OK\r\n        </Button>\r\n        <Button\r\n          id=\"cancelOptions\"\r\n          size=\"sm\"\r\n          variant=\"light\"\r\n          style={{ margin: \"5px\", float: \"left\" }}\r\n          className='button'\r\n          onClick={closeForm}>\r\n          Отмена\r\n        </Button>\r\n        <Button\r\n          id=\"defaultOptions\"\r\n          size=\"sm\"\r\n          variant=\"light\"\r\n          style={{ margin: \"5px\", float: \"right\" }}\r\n          className='button'\r\n          onClick={resetOptions}>\r\n          Сбросить настройки\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Options;","import { ReactElement } from 'react';\r\nimport { Routes, Route } from 'react-router-dom'\r\nimport { Container } from 'react-bootstrap';\r\n\r\nimport TopicsList from './topics_list'\r\nimport Topic from './topic'\r\nimport Options from './options'\r\n\r\nconst AppRoutes = (): ReactElement => {\r\n\r\n  return (\r\n    <Container>\r\n      <Routes>\r\n        <Route path='/' element={<TopicsList />} />\r\n        <Route path='/index.php' element={<TopicsList />} />\r\n        <Route path='/topic.php' element={<Topic />} />\r\n        <Route path='/options.php' element={<Options />} />\r\n      </Routes>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default AppRoutes;","import{ ReactElement } from 'react'\r\nimport { domain } from 'src/api'\r\n\r\nconst NavBarFooter = (): ReactElement => {\r\n\r\n    return (\r\n        <footer className=\"flex-row navbar-footer\">\r\n            <a href={`${domain}/rules.php`}>Правила</a>\r\n            <span className=\"separator\">|</span>\r\n            <a href={`${domain}/about.php`}>Описание</a>\r\n            <span className=\"separator\">|</span>\r\n            <b><a href={`${domain}/ad.php`}>Реклама на сайте</a>  </b>\r\n            <span className=\"separator\">|</span>\r\n            <a href={`${domain}/find.php`}>Поиск</a>\r\n            <span className=\"separator\">|</span>\r\n            <a rel=\"nofollow\" href={`${domain}/sections_list.php`}>Секции</a>\r\n            <span className=\"separator\">|</span>\r\n            <a rel=\"nofollow\" href={`${domain}/rating.php`}>Рейтинг</a>\r\n            <span className=\"separator\">|</span>\r\n            <a href=\"http://kb.mista.ru\">Книга знаний</a>\r\n            <span className=\"separator\">|</span>\r\n            <a href=\"http://wiki.mista.ru\">Вики-миста (КЗ2)</a>\r\n            <span className=\"separator\">|</span>\r\n            <a rel=\"nofollow\" href=\"http://m.mista.ru/\">Мобильная</a>\r\n            <span className=\"separator\">|</span>\r\n            <a href={`${domain}/archive.php`}>Архив</a>\r\n            <span className=\"separator\">|</span>\r\n            <a href={`${domain}/moders.php`}>Модераторы</a>\r\n            <span className=\"separator\">|</span>\r\n            <a href={`${domain}/users_gallery.php`}>Галерея</a>\r\n            <span className=\"separator\">|</span>\r\n            <a href={`${domain}/ban_list.php`}>Баны</a>\r\n            <span className=\"separator\">|</span>\r\n            <span>18+</span>\r\n        </footer>\r\n    )\r\n}\r\n\r\nexport default NavBarFooter;","import { FC, ReactElement } from 'react'\r\n\r\ntype IProps = {\r\n  closeWindow?: (e: any) => any\r\n}\r\n\r\nconst TooltipHeader: FC<IProps> = ({ children, closeWindow }): ReactElement => {\r\n  return (\r\n    <div className=\"tooltip-header\">\r\n      {children}\r\n      <div className=\"tooltip-close\" onClick={closeWindow} onTouchEnd={closeWindow}>\r\n        <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i>\r\n        <i className=\"fa fa-angle-left\" aria-hidden=\"true\" style={{ marginLeft: \"-2px\" }}></i>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TooltipHeader;","import { FC, ReactElement } from 'react'\r\n\r\ntype IProps = {\r\n  onScroll?: (e: any) => any\r\n}\r\n\r\nconst TooltipBody: FC<IProps> = ({ children, onScroll }): ReactElement => {\r\n\r\n  let startX = 0;\r\n\r\n  const onTouchStart = (e: React.TouchEvent<HTMLElement>) => {\r\n    startX = e.nativeEvent.changedTouches[0].clientX;\r\n  }\r\n\r\n  const onTouchEnd = (e: React.TouchEvent<HTMLElement>) => {\r\n\r\n    if (!onScroll) return;\r\n\r\n    let endX = e.nativeEvent.changedTouches[0].clientX;\r\n    if (Math.abs(endX - startX) > 100)\r\n      onScroll(-endX + startX);\r\n  }\r\n\r\n  return (\r\n    <div className=\"tooltip-text\" onTouchStart={onTouchStart} onTouchEnd={onTouchEnd}>\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TooltipBody;","import React, { FC, ReactElement } from 'react'\r\n\r\nimport Draggable from 'react-draggable';\r\n\r\nimport TooltipHeader from './tooltip_header'\r\nimport TooltipBody from './tooltip_body'\r\n\r\nimport './tooltip.css'\r\n\r\nimport { useActionCreators } from 'src/store';\r\nimport { ITooltipItem, tooltipsActions } from 'src/store';\r\n\r\ntype IProps = {\r\n  tooltip: ITooltipItem,\r\n  zIndex?: number,\r\n}\r\n\r\nconst TooltipWindow: FC<IProps> = ({ tooltip, zIndex, children }): ReactElement => {\r\n\r\n  const actions = useActionCreators(tooltipsActions);\r\n\r\n  const onCloseClick = () => {\r\n    actions.close(tooltip.keys);\r\n  }\r\n\r\n  const { coords } = tooltip;\r\n\r\n  let axis: \"both\" | \"x\" | \"y\" | \"none\";;\r\n  let position: {\r\n    top: number,\r\n    left: number\r\n  };\r\n\r\n  if (window.innerWidth <= 768) {\r\n    axis = \"y\";\r\n    position = { top: coords.y, left: 5 };\r\n  } else {\r\n    axis = \"both\";\r\n    position = { top: coords.y, left: Math.min(coords.x, window.innerWidth - 670) }\r\n  }\r\n\r\n  let [header, body] = React.Children.toArray(children);\r\n\r\n  return (\r\n    <Draggable\r\n      axis={axis}\r\n      handle=\".tooltip-header\"\r\n      defaultClassNameDragging=\"dragging\"\r\n      key={zIndex}>\r\n\r\n      <div className=\"tooltip-window\" style={{ ...position }}>\r\n        <TooltipHeader closeWindow={onCloseClick}>\r\n          {(header as ReactElement).props.children}\r\n        </TooltipHeader>\r\n        <TooltipBody>\r\n          {(body as ReactElement).props.children}\r\n        </TooltipBody>\r\n      </div>\r\n    </Draggable>\r\n  )\r\n\r\n}\r\n\r\nexport default TooltipWindow;","import { FC, ReactElement, useCallback, useEffect, useState } from 'react';\r\n\r\nimport { fetchTopicMessage } from 'src/api';\r\n\r\nimport MsgText from 'src/pages/topic/row/msg_text'\r\nimport UserInfo from 'src/pages/topic/row/user_info';\r\n\r\nimport TooltipWindow from './tooltip_window'\r\nimport TooltipHeader from './tooltip_header'\r\nimport TooltipBody from './tooltip_body'\r\n\r\nimport './tooltip.css'\r\nimport { useAppSelector } from 'src/store';\r\nimport { ITopicMessage, ITooltipItem } from 'src/store';\r\n\r\ntype IProps = {\r\n  tooltip: ITooltipItem\r\n}\r\n\r\nconst Tooltip: FC<IProps> = (props): ReactElement | null => {\r\n\r\n  const { info, items, item0 } = useAppSelector(state => state.topic);\r\n  const { tooltip } = props;\r\n  const { keys } = tooltip;\r\n\r\n  let text = '';\r\n  let data: ITopicMessage | undefined;\r\n  if (keys.topicId === info.id) {\r\n    if (keys.number === 0)\r\n      data = item0;\r\n    else\r\n      data = items.find((item: ITopicMessage) => item.n === keys.number);\r\n\r\n    if (data)\r\n      text = data.text;\r\n  }\r\n\r\n  const [state, setState] = useState({\r\n    data,\r\n    text\r\n  })\r\n\r\n  const fetchData = useCallback(async () => {\r\n\r\n    if (state.data) return;\r\n\r\n    let data: ITopicMessage;\r\n    let text = '';\r\n\r\n    try {\r\n      data = await fetchTopicMessage(keys.topicId, keys.number);\r\n      if (data)\r\n        text = data.text;\r\n      else\r\n        text = `Сообщение не найдено ${keys.number}`;\r\n\r\n    } catch (e) {\r\n      text = (e as Error).message;\r\n    }\r\n\r\n    setState({ data, text });\r\n  }, [keys.topicId, keys.number, state.data])\r\n\r\n  useEffect(() => {\r\n      fetchData();\r\n  }, [fetchData])\r\n\r\n  if (!state.text)\r\n    return null;\r\n\r\n  let header: ReactElement;\r\n  if (!state.data) {\r\n    header = <b>Заголовок</b>\r\n  } else {\r\n    header = <UserInfo data={state.data} isAuthor={false} isYou={false} isTooltip={true} />\r\n  }\r\n\r\n  return (\r\n    <TooltipWindow tooltip={props.tooltip}>\r\n      <TooltipHeader>\r\n        {header}\r\n      </TooltipHeader>\r\n      <TooltipBody>\r\n        <MsgText\r\n          data={state.data}\r\n          n={state.data?.n}\r\n          vote={state.data?.vote}\r\n          html={state.text}\r\n          topicId={keys.topicId}\r\n          style={{ maxHeight: \"min(550px, 80vh)\", overflowY: \"auto\" }}\r\n        />\r\n      </TooltipBody>\r\n    </TooltipWindow>\r\n  )\r\n\r\n}\r\n\r\nexport default Tooltip;","import { ReactElement, useRef } from 'react'\r\nimport { useOnClickOutside } from 'usehooks-ts'\r\n\r\nimport { useActionCreators, useAppSelector } from 'src/store';\r\nimport { tooltipsActions } from 'src/store'\r\n\r\nimport Tooltip from './tooltip'\r\n\r\nconst TooltipsContainer = (): ReactElement => {\r\n\r\n  const items = useAppSelector(state => state.tooltips.items);\r\n  const actions = useActionCreators(tooltipsActions);\r\n  const ref = useRef(null);\r\n\r\n  const handleClickOutside = () => {\r\n    actions.closeAll();\r\n  };\r\n\r\n  useOnClickOutside(ref, handleClickOutside);\r\n  \r\n  return (\r\n    <div ref={ref}>\r\n      {items.map((item) => {\r\n        return (\r\n          <Tooltip key={item.hash} tooltip={item} />\r\n        )\r\n      }\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TooltipsContainer;","import { ReactElement, useLayoutEffect } from 'react';\r\nimport { HashRouter } from 'react-router-dom'\r\n\r\nimport NavBar from './components/navigation/nav_bar';\r\nimport AppRoutes from './pages/approutes';\r\nimport NavBarFooter from './components/navigation/nav_bar_footer';\r\nimport TooltipsContainer from './components/tooltips/tooltips_container';\r\nimport { useAppSelector } from './store';\r\n\r\n\r\nconst App = (): ReactElement => {\r\n\r\n  const theme = useAppSelector(state => state.options.items.theme);\r\n\r\n  useLayoutEffect(() => {\r\n    document.body.setAttribute('theme', theme);\r\n  }, [theme])\r\n\r\n  return (\r\n    <HashRouter>\r\n      <NavBar />\r\n      <AppRoutes />\r\n      <NavBarFooter />\r\n      <TooltipsContainer />\r\n    </HashRouter>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReactElement } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux'\r\n\r\nimport './index.css';\r\nimport App from './App';\r\nimport { store } from 'src/store'\r\n\r\nconst Root = ({ store }): ReactElement => (\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>\r\n)\r\n\r\nReactDOM.render(<Root store={store} />,\r\n  document.getElementById('root'));","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkreact_mista\"] = self[\"webpackChunkreact_mista\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [216], function() { return __webpack_require__(4737); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_useState","useState","_useState2","_slicedToArray","searchEngine","setSearchEngine","_useState3","_useState4","text","setText","doSearch","url","concat","window","open","_jsxs","InputGroup","size","children","DropdownButton","id","title","style","marginRight","className","variant","onSelect","eventKey","_jsx","Dropdown","Item","FormControl","type","placeholder","paddingRight","onKeyPress","e","key","onChange","target","value","Text","marginLeft","marginTop","marginBottom","cursor","onClick","zIndex","parseJSON","JSON","parse","replace","console","error","message","log","getMaxPage","count","Math","min","ceil","childrenToText","map","displayName","props","number","formattedTime","time","td","moment","isSame","Date","format","paramsToString","paramsPrefix","params","searchParams","URLSearchParams","undefined","append","str","toString","length","fetchJsonpAndGetJson","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","options","fullUrl","response","responseJson","json","wrap","_context","prev","next","domain","fetchJsonp","sent","utils","abrupt","stop","_x","_x2","_x3","apply","arguments","fetchAndGetJson","_ref2","_callee2","init","_context2","mode","credentials","fetch","_x4","_x5","_x6","convertResponse","session","userId","Number","user_id","userName","user_name","userHash","user_hash","lastError","last_error","fetchCookies","_fetchCookies","urlCookies","fetchLogin","urlLogin","method","body","username","user_password","password","headers","redirect","fetchLogout","urlLogout","fetchNewMessage","result","urlNewMessage","topic_id","fetchNewTopic","urlNewTopic","forum","code","shortn","name","fulln","fetchSections","list","urlSections","voting","x","select","parseInt","sectionId","section","created","authorId","author","updated","lastUser","updated_name","answers_count","down","closed","deleted","isVoting","is_voting","fetchTopicInfo","_fetchTopicInfo","info","urlTopicInfo","n","user","utime","vote","fetchTopicMessages","_fetchTopicMessages","urlTopicMessages","fetchTopicMessage","_fetchTopicMessage","to","from","find","item","convertRequest","request","page","itemsCount","itemsPerPage","topics","String","section_short_name","mytopics","myTopics","sect1","sectionCode","sect2","user0","answ","pinned","showPreview","fetchTopicsList","_fetchTopicsList","urlTopicsList","localStorage","getItem","checkLogin","createAsyncThunk","doLogin","_ref3","dispatch","doLogout","_callee3","_context3","shouldLogin","_ref5","login","status","slice","createSlice","initialState","logged","reducers","extraReducers","builder","addCase","pending","state","fulfilled","_ref6","payload","rejected","_ref7","_ref8","loginActions","actions","reducer","postNewTopic","fetchParams","i","message_text","topic_text","subject","target_section","target_forum","toLowerCase","action","rnd","round","random","votingItems","clear","changeSubject","changeText","_ref4","changeSection","showVoting","setError","newTopicActions","newTopic","defaultOptionsState","voteColors","items","theme","topicsPerPage","autoRefreshTopicsList","autoRefreshTopicsListInterval","autoRefreshTopic","autoRefreshTopicInterval","showTooltips","tooltipDelay","showTooltipOnPostLink","showYoutubeVideoTitle","replaceCatalogMista","fixBrokenLinks","readOption","defaultValue","readAllOptions","read","save","setItem","optionsActions","getSections","getSectionsIfNeeded","getState","sections","shouldGetSections","tree","getKey","reduce","previous","currentItem","group","push","show","hash","stringify","keys","index","findIndex","coords","close","filter","val","closeAll","tooltipsActions","tooltips","defaultInfo","getTopic","topicId","item0","rejectWithValue","_item0","_items","first","_first","last","_items2","t0","t1","getNewMessages","shouldFetch","topic","getNewMessagesIfNeeded","_state$topic$info","_ref9","_ref10","topicActions","getTopicsList","getTopicsListIfNeeded","topicsList","togglePreview","previewMsgNumber","msgNumber","topicsListActions","postNewMessage","voting_select","newMessageActions","newMessage","store","configureStore","devTools","process","useAppDispatch","useDispatch","useAppSelector","useSelector","useActionCreators","useMemo","bindActionCreators","location","useLocation","search","get","Navbar","bg","expand","fixed","Brand","as","Link","Toggle","Collapse","Nav","link","active","href","Form","Search","CustomToggle","React","ref","preventDefault","float","event","onLogout","Menu","Divider","setUsername","setPassword","flexWrap","flex","maxLength","autoComplete","Button","doLoginIfNeeded","margin","rel","dangerouslySetInnerHTML","__html","elem","useEffect","LoggedUser","LoginForm","_Fragment","ErrorElem","sectionsElem","label","selected","Select","currentTarget","arr","navigate","useNavigate","queryString","Login","Sections","isLoading","onUpdateClick","position","top","letterSpacing","pages","maxPage","loggedUserName","classes","classNames","sectionHref","startsWith","addPrefix","overflowWrap","Pages","expanded","data","_objectWithoutProperties","_excluded","setTime","updateTime","useCallback","msg","countOnClick","PreviewLink","TopicNameCell","_objectSpread","display","color","width","textAlign","last20","pathName","pathname","currentPage","locationParams","set","Pagination","isFetching","formRef","onShowVotingChange","textAreaRef","useRef","handleShowVotingChange","checked","handleChange","cols","rows","onKeyUp","current","ctrlKey","dispatchEvent","Event","cancelable","bubbles","ButtonGroup","textAreaNode","start","selectionStart","end","selectionEnd","oldText","len","replacement","substring","newText","disabled","Check","_newTopic$section","onSubmitSuccess","currentSection","setSection","Array","fill","votes","setVotes","onVoteTextChange","votesCopy","onSubjectChange","onTextChange","this_onSubmitSuccess","groupsElem","votingOptions","Control","onSubmit","onSuccess","shouldPost","postNewTopicIfNeeded","TextEditor","FormGroup","onFirst","onPrev","onNext","onLast","scrolledToHash","СтрокаРезультат","УстановленЦвет","ПоследнийЦвет","keywords","Set","split","Спецсиволы","НачалоТега","КонецТега","мЦветФона","мЦветЧисла","мЦветСтроки","мЦветКлючевогоСлова1","ВСтроке","Токен","ПустаяСтрока","Строка","trim","Сред","Нач","Длина","Прав","isKeyword","token","has","ДобавитьЧастьСтроки1С","Часть","Цвет","РазукраситьСтроку","СтрокаКода","ВСтрокеСкобка","ВСтрокеТильда","НачалоСтроки","ТокенДоТочки","Поз","ТекущийСимвол","charAt","isNaN","_step","_iterator","_createForOfIteratorHelper","s","done","err","f","join","hidden","setHidden","newtext","highlight","prepareText","buttonText","linesCount","buttonShow","preStyle","overflow","height","timerRef","currentTopicId","initialText","run","topicInfo","onMouseOver","persist","setTimeout","showToolTip","onMouseOut","clearTimeout","stopPropagation","pageX","y","pageY","pageParam","getVideoId","fullHref","URL","hostname","getVideoParams","videoId","apiKey","apiUrl","hrefName","notFound","snippet","setHrefName","setTitle","isMounted","parentText","newHref","LinkToPost","query","LinkToUser","Object","isMistaCatalog","class","escapedHref","regExp","RegExp","match","fixBrokenLink","YoutubeLink","memo","total","colors","img","percent","textDecoration","src","maxWidth","alt","max","_toConsumableArray","paddingLeft","VoteItem","ProcessedText","processedHtml","res","txt","substr","processCode1C","processLinksToPosts","processText","html","componentsMap","Code","a","CustomLink","textComponent","activeHtml","initialVoteText","voteText","setVoteText","getVoteText","_info","voteChart","showVote","VoteChart","Vote","imgDisplay","setImgDisplay","isAuthor","isYou","isTooltip","dataStr","imgElem","timeElem","userClassNames","innerWidth","onLoad","onError","document","getElementById","scrollTo","offsetTop","loggedUserId","onDataLoaded","setData","getData","_data","UserInfo","MsgText","overflowY","initialMsgNumber","deltaX","setDeltaX","setDispaly","_useState5","_useState6","setState","onClickLast","swipeable","useSwipeable","onSwiping","eventData","abs","onSwiped","dir","delta","onContentLoaded","transform","flexDirection","PreviewButtons","order","PreviewContent","updateTopicsList","Row","TopicPreview","Header","Error","TableHeader","NewTopic","forums","yandexUrl","encodeURIComponent","lineHeight","_state$topic$item","showUpdateButton","votingElem","setVoting","afterSubmit","_loop","setVotingOption","locationPage","isLastPageRef","updateNewMessages","htmltext","DOMParser","parseFromString","firstChild","innerText","getTopicIfNeeded","timer","setInterval","clearInterval","nodeHash","TopicInfo","Footer","NewMessage","values","oneLine","onChangeValue","descr","inline","postfix","htmlFor","formTabs","tabName","formParams","closeForm","assign","tabs","tab","_step2","row","rowElem","_iterator2","RadioOption","fontWeight","StringOption","Tab","Container","Routes","Route","path","element","TopicsList","Topic","Options","closeWindow","onTouchEnd","onScroll","startX","onTouchStart","nativeEvent","changedTouches","clientX","endX","axis","tooltip","left","_React$Children$toArr","toArray","_React$Children$toArr2","header","Draggable","handle","defaultClassNameDragging","TooltipHeader","TooltipBody","_state$data","_state$data2","_useAppSelector","fetchData","TooltipWindow","maxHeight","useOnClickOutside","Tooltip","useLayoutEffect","setAttribute","HashRouter","NavBar","AppRoutes","NavBarFooter","TooltipsContainer","Root","Provider","App","ReactDOM","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","loaded","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","j","every","splice","r","getter","__esModule","d","leafPrototypes","getProto","getPrototypeOf","obj","__proto__","t","this","then","ns","create","def","indexOf","getOwnPropertyNames","forEach","definition","o","defineProperty","enumerable","g","globalThis","Function","prop","prototype","hasOwnProperty","Symbol","toStringTag","nmd","paths","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}