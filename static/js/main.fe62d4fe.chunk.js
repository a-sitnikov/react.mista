(this["webpackJsonpreact.mista"]=this["webpackJsonpreact.mista"]||[]).push([[0],{107:function(e,t,n){},108:function(e,t,n){},111:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){},131:function(e,t,n){},140:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},152:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(21),s=n.n(c),i=n(10),o=(n(107),n(15)),l=n(61),u=n(54),d=n(37),p=n(11),h=n(6),j=n(50),f=n(71),b=n(59),m=n(91),x=(n(108),n(0)),O=function(){var e=Object(r.useState)("\u042f\u043d\u0434\u0435\u043a\u0441"),t=Object(h.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(h.a)(c,2),i=s[0],o=s[1],l=function(){var e;"\u042f\u043d\u0434\u0435\u043a\u0441"===n?e="https://www.yandex.ru/search/?text=".concat(i,"&site=forum.mista.ru"):"Google"===n&&(e="https://www.google.ru/search?q=".concat(i,"+site:forum.mista.ru")),window.open(e),o("")};return Object(x.jsxs)(j.a,{size:"sm",children:[Object(x.jsxs)(m.a,{id:"search-engine",title:"",size:"sm",style:{marginRight:"2px"},className:"button",variant:"light",onSelect:function(e){return a(e)},children:[Object(x.jsx)(b.a.Item,{eventKey:"\u042f\u043d\u0434\u0435\u043a\u0441",children:"\u042f\u043d\u0434\u0435\u043a\u0441"}),Object(x.jsx)(b.a.Item,{eventKey:"Google",children:"Google"})]}),Object(x.jsx)(f.a,{type:"text",placeholder:"".concat(n,": \u043f\u043e\u0438\u0441\u043a"),style:{marginRight:"4px",paddingRight:"27px"},className:"input",onKeyPress:function(e){"Enter"===e.key&&l()},onChange:function(e){return o(e.target.value)},value:i}),Object(x.jsx)(j.a.Text,{style:{marginLeft:"-35px",marginTop:"auto",marginBottom:"auto",cursor:"pointer"},onClick:l,children:Object(x.jsx)("i",{className:"fa fa-search input",style:{zIndex:1e3}})})]})},v=n(4),g=n.n(v),y=n(9),w=n(7),N=n(93),k=n.n(N);var C=function(e){try{return JSON.parse(e)}catch(t){}try{return e=e.replace(/\\</g,"<").replace(/\\>/g,">").replace(/\\&/g,"&").replace(/\\'/g,"'").replace(/\\"/g,"").replace(/ "/g,' \\"').replace(/""/g,'\\""').replace(/\t/g,"\\t").replace(/"(\.| |\?)/g,'\\"$1'),JSON.parse(e)}catch(t){return console.error(t.message),console.log(e),{}}},I=function(e){return Math.min(Math.ceil(e/100),10)||1},T=function(e){return e?e.map((function(e){return"string"===typeof e?e:"br"===e.type?"<br>":"Connect(LinkToPost)"===e.type.displayName||"Connect(t)"===e.type.displayName?e.props.number:(console.log(e),e)})):e},S=localStorage.getItem("domain")||"https://forum.mista.ru",E=localStorage.getItem("urlTopicsList")||"api/topic.php",_=localStorage.getItem("urlTopicInfo")||"ajax_gettopic.php",L=localStorage.getItem("urlTopicMessages")||"api/message.php",F=localStorage.getItem("urlLogin")||"users.php?action=do_enter",M=localStorage.getItem("urlLogout")||"users.php?action=exit",P=localStorage.getItem("urlCookies")||"ajax_cookie.php",R=localStorage.getItem("urlSections")||"ajax_getsectionslist.php",A=localStorage.getItem("urlNewMessage")||"topic.php?id=:id&page=1",V=localStorage.getItem("urlNewTopic")||"index.php",D=(localStorage.getItem("urlAddBookmark"),localStorage.getItem("urlSearch"),function(e,t){if(!t)return"";var n=new URLSearchParams;for(var r in t){var a=Reflect.get(t,r);void 0!==a&&n.append(r,a)}var c=n.toString();return c.length>0?e+c:""}),U=function(){var e=Object(y.a)(g.a.mark((function e(t,n,r){var a,c,s,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(S,"/").concat(t).concat(D("?",n)),e.next=3,k()(a);case 3:return c=e.sent,e.next=6,c.json();case 6:if("string"===typeof(s=e.sent))try{i=JSON.parse(s)}catch(r){i=C(s)}else i=s;return e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),W=function(){var e=Object(y.a)(g.a.mark((function e(t,n,r){var a,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(S,"/").concat(t).concat(D("?",n)),r||(r={mode:"cors",credentials:"same-origin"}),e.next=4,fetch(a,r);case 4:return c=e.sent,e.next=7,c.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function z(e){return{id:e.id,forum:e.forum,section:e.sect1,sectionCode:e.sect2,author:e.user0,lastUser:e.user,created:1e3*e.created,updated:1e3*e.utime,count:e.answ,text:e.text,closed:1===e.closed,down:1===e.down,pinned:2147483648===e.utime,isVoting:1===e.is_voting,showPreview:!1}}function B(e){return H.apply(this,arguments)}function H(){return(H=Object(y.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(E,t);case 2:return n=e.sent,e.abrupt("return",n.map(z));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=Object(w.b)("REQUEST_TOPICS_LIST"),Y=Object(w.b)("RECEIVE_TOPICS_LIST",(function(e){return{payload:{list:e},error:!1}})),J=Object(w.b)("RECEIVE_TOPICS_LIST",(function(e){return{payload:e,error:!0}})),K=Object(w.b)("CLEAR_TOPICS_LIST"),X=Object(w.b)("TOGGLE_PREVIEW",(function(e,t){return{payload:{id:e,msgNumber:t}}})),q=function(e){return function(t,n){if(function(e){var t=e.topicsList;return!t||!t.isFetching}(n()))return t(function(e){return function(){var t=Object(y.a)(g.a.mark((function t(n,r){var a,c,s,i,o,l;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(G()),a=e.page||1,c={},(s=+r().options.items.topicsPerPage)>99&&(s=99),i=a*s,c.topics=i,e.section&&(c.section_short_name=e.section),e.forum&&(c.forum=e.forum),e.user_id&&(c.user_id=e.user_id),e.mytopics&&(c.mytopics=e.mytopics),t.prev=11,t.next=14,B(c);case 14:o=t.sent,l=o.slice(-s),n(Y(l)),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(11),n(J("".concat(t.t0.message," ").concat(S,"/").concat(E))),console.error(t.t0.message);case 23:case"end":return t.stop()}}),t,null,[[11,19]])})));return function(e,n){return t.apply(this,arguments)}}()}(e))}},Q=(n(111),function(){var e=Object(p.e)(),t=Object(i.c)(),n=new URLSearchParams(e.search).get("forum");return Object(x.jsxs)(l.a,{bg:"dark",variant:"dark",expand:"md",fixed:"top",children:[Object(x.jsx)(l.a.Brand,{as:o.b,to:"/",onClick:function(){t(q({}))},children:"React.Mista"}),Object(x.jsx)(l.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(x.jsxs)(l.a.Collapse,{children:[Object(x.jsxs)(u.a,{className:"me-auto",children:[[{name:"1C",link:"/index.php?forum=1C"},{name:"IT",link:"/index.php?forum=IT"},{name:"JOB",link:"/index.php?forum=JOB"},{name:"LIFE",link:"/index.php?forum=LIFE"}].map((function(e,t){return Object(x.jsx)(u.a.Item,{children:Object(x.jsx)(u.a.Link,{to:e.link,active:e.name===n,as:o.b,children:e.name})},"i"+t)})),[{name:"Wiki",link:"https://wiki.mista.ru"},{name:"\u041a\u043d\u0438\u0433\u0430 \u0437\u043d\u0430\u043d\u0438\u0439",link:"https://kb.mista.ru"}].map((function(e,t){return Object(x.jsx)(u.a.Item,{children:Object(x.jsx)(u.a.Link,{href:e.link,children:e.name})},"e"+t)}))]}),Object(x.jsx)(d.a,{className:"d-flex",children:Object(x.jsx)(O,{})})]})]})}),Z=n(159),$=n(23),ee=n(74),te=n.n(ee),ne=Object(w.c)({isFetching:!1,items:[]},(function(e){e.addCase(G,(function(e){e.isFetching=!0})).addCase(Y,(function(e,t){t.error?e.error=t.payload.toString():(e.items=t.payload.list,delete e.error),e.lastUpdated=(new Date).getTime(),e.isFetching=!1})).addCase(K,(function(e){e.items=[],e.isFetching=!1,delete e.error,delete e.lastUpdated})).addCase(X,(function(e,t){var n=e.items.slice(),r=n.findIndex((function(e){return e.id===t.payload.id})),a=Object.assign({},n[r]);a.showPreview=!a.showPreview,a.previewMsgNumber=t.payload.msgNumber,n[r]=a,e.items=n}))})),re={id:0,title:"",count:0},ae={isFetching:!1,items:[],info:re};function ce(e){var t=[];return e.voting&&(t=e.voting.map((function(e){return{text:e.select,count:e.result}}))),{id:parseInt(e.id),title:e.text,forum:e.forum,sectionId:e.section,created:1e3*parseInt(e.created),authorId:e.user_id,author:e.user_name,updated:1e3*parseInt(e.updated),lastUser:e.updated_name,count:parseInt(e.answers_count),down:e.down,closed:e.closed,deleted:e.deleted,isVoting:e.is_voting,voting:t}}function se(e){return ie.apply(this,arguments)}function ie(){return(ie=Object(y.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(_,{id:t});case 2:return n=e.sent,e.abrupt("return",ce(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e){return{id:parseInt(e.id),n:parseInt(e.n),user:e.user,userId:parseInt(e.userId),text:e.text,time:1e3*parseInt(e.utime),vote:e.vote}}function le(e){return ue.apply(this,arguments)}function ue(){return(ue=Object(y.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(L,t);case 2:return n=e.sent,e.abrupt("return",n.map(oe));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e,t){return pe.apply(this,arguments)}function pe(){return(pe=Object(y.a)(g.a.mark((function e(t,n){var r,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=0===n?n+1:n,e.next=3,W(L,{id:t,from:n,to:r});case 3:return a=e.sent,e.abrupt("return",a.map(oe).find((function(e){return e.n===n})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var he=Object(w.b)("REQUEST_TOPIC"),je=Object(w.b)("RECEIVE_TOPIC",(function(e,t,n){return{payload:{info:e,item0:t,list:n},error:!1}})),fe=Object(w.b)("RECEIVE_TOPIC",(function(e){return{payload:e,error:!0}})),be=Object(w.b)("CLEAR_TOPIC_MESSAGES"),me=Object(w.b)("REQUEST_NEW_MESSAGES"),xe=Object(w.b)("RECEIVE_NEW_MESSAGES",(function(e){return{payload:{list:e},error:!1}})),Oe=Object(w.b)("RECEIVE_NEW_MESSAGES",(function(e){return{payload:e,error:!0}})),ve=function(e){var t=e.topic;return!t||!t.isFetching},ge=function(e,t,n){return function(r,a){if(ve(a()))return r(function(e,t,n){return function(){var r=Object(y.a)(g.a.mark((function r(a){var c,s,i,o,l,u,d,p;return g.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a(he()),r.prev=1,r.next=4,se(e);case 4:c=r.sent,r.next=11;break;case 7:r.prev=7,r.t0=r.catch(1),console.error(r.t0),c={id:e,title:"",count:0};case 11:if(r.prev=11,s=n,"last20"!==t){r.next=32;break}if(!(c.count>21)){r.next=25;break}if(s){r.next=19;break}return r.next=18,de(e,0);case 18:s=r.sent;case 19:return o=c.count-20,r.next=22,le({id:e,from:o,to:1010});case 22:i=r.sent,r.next=30;break;case 25:return r.next=27,le({id:e,from:0,to:1010});case 27:l=r.sent,s=l[0],i=l.slice(1);case 30:r.next=51;break;case 32:if(u=0,d=100*(t=+t)-1,!(t>1)){r.next=46;break}if(u=100*(t-1),s){r.next=41;break}return r.next=40,de(e,0);case 40:s=r.sent;case 41:return r.next=43,le({id:e,from:u,to:d});case 43:i=r.sent,r.next=51;break;case 46:return u=s?1:0,r.next=49,le({id:e,from:u,to:d});case 49:p=r.sent,s?i=p:(s=p[0],i=p.slice(1));case 51:0===c.count&&i.length>0&&(c.count=i[i.length-1].n),"last20"===t&&i.length>20&&(i=i.slice(-20)),a(je(c,s,i)),r.next=60;break;case 56:r.prev=56,r.t1=r.catch(11),console.error("Failed to fetch topic:",r.t1),a(fe(r.t1.message));case 60:case"end":return r.stop()}}),r,null,[[1,7],[11,56]])})));return function(e){return r.apply(this,arguments)}}()}(e,t,n))}},ye=function(){return function(e,t){var n=t(),r=n.topic.info,a=r.id,c=r.count;if(ve(n))return e(function(e,t){return function(){var n=Object(y.a)(g.a.mark((function n(r){var a;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(me()),n.prev=1,n.next=4,le({id:e,from:t+1,to:1050});case 4:a=n.sent,r(xe(a)),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),console.error("Failed to fetch new messages:",n.t0.message),r(Oe(n.t0.message));case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()}(a,c))}},we=Object(w.c)(ae,(function(e){e.addCase(he,(function(e){e.isFetching=!0})).addCase(je,(function(e,t){t.error?e.error=t.payload.toString():(e.items=t.payload.list,e.item0=t.payload.item0,e.info=t.payload.info,delete e.error),e.lastUpdated=(new Date).getTime(),e.isFetching=!1})).addCase(be,(function(e){e.items=[],e.info=re,delete e.item0,delete e.error})).addCase(me,(function(e){e.isFetching=!0})).addCase(xe,(function(e,t){t.error?e.error=t.payload.toString():(e.isFetching=!1,t.payload.list.length>0&&(e.items=e.items.concat(t.payload.list),e.info.count=e.items[e.items.length-1].n))}))}));function Ne(e){return{id:e.id,forum:e.forum,code:e.shortn,name:e.fulln}}var ke=function(){var e=Object(y.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(R);case 2:return t=e.sent,e.abrupt("return",t.map(Ne));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ce=Object(w.b)("REQUEST_SECTIONS"),Ie=Object(w.b)("RECEIVE_SECTIONS",(function(e){return{payload:{list:e},error:!1}})),Te=Object(w.b)("RECEIVE_SECTIONS",(function(e){return{payload:e,error:!0}})),Se=function(){return function(e,t){if(function(e){var t=e.sections;return!t||!t.isFetching&&!(t.items.length>0)}(t()))return e(function(){var e=Object(y.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Ce()),e.prev=1,e.next=4,ke();case 4:n=e.sent,t(Ie(n)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),t(Te(e.t0.message)),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}},Ee=Object(w.c)({isFetching:!1,items:[],tree:{}},(function(e){e.addCase(Ce,(function(e){e.isFetching=!0})).addCase(Ie,(function(e,t){var n,r;t.error?e.error=t.payload.toString():(e.items=t.payload.list,e.tree=(n=e.items,r=function(e){return e.forum},n.reduce((function(e,t){var n=r(t);return e[n]||(e[n]=[]),e[n].push(t),e}),{})),delete e.error),e.lastUpdated=(new Date).getTime(),e.isFetching=!1}))})),_e={voteColors:["#FF1616","#1A861A","#0023FF","#FF6B18","#9B3A6E","#567655","#233345","#CC0000","#00CCCC","#0000CC"],items:{theme:"lightgray",topicsPerPage:"20",autoRefreshTopicsList:"false",autoRefreshTopicsListInterval:"60",autoRefreshTopic:"true",autoRefreshTopicInterval:"60",showTooltips:"true",tooltipDelay:"500",showYoutubeVideoTitle:"true",replaceCatalogMista:"true",fixBrokenLinks:"true"}},Le=Object(w.b)("READ_OPTIONS"),Fe=Object(w.b)("SAVE_OPTIONS",(function(e){return{payload:{options:e}}})),Me=function(e,t){return window.localStorage.getItem(e)||t},Pe=Object(w.c)(function(){var e=_e;for(var t in e.items)e.items[t]=Me(t,e.items[t]);return e}(),(function(e){e.addCase(Le,(function(e){var t=Object.assign({},_e.items);for(var n in t)t[n]=Me(n,_e.items[n]);e.items=t})).addCase(Fe,(function(e,t){for(var n in t.payload.options){var r=String(t.payload.options[n]);window.localStorage.setItem(n,r),e.items[n]=r}}))}));function Re(e){var t=e.session;return{userId:Number(null===t||void 0===t?void 0:t.user_id),userName:null===t||void 0===t?void 0:t.user_name,userHash:null===t||void 0===t?void 0:t.user_hash,lastError:null===t||void 0===t?void 0:t.last_error}}function Ae(){return Ve.apply(this,arguments)}function Ve(){return(Ve=Object(y.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(P);case 2:return t=e.sent,e.abrupt("return",Re(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var De=function(){var e=Object(y.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(S,"/").concat(F),{method:"POST",body:D("",{user_name:t.username,user_password:t.password}),mode:"no-cors",credentials:"include",headers:{Accept:"text/html,application/xhtml+xml,application/xml","Content-Type":"application/x-www-form-urlencoded"},redirect:"follow"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(y.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(S,"/").concat(M),e.next=3,fetch(t,{mode:"no-cors",credentials:"include"});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),We=Object(w.b)("LOGIN_START"),ze=Object(w.b)("LOGIN_COMPLETE",(function(e,t,n){return{payload:{userId:e,userName:t,userHash:n},error:!1}})),Be=Object(w.b)("LOGIN_COMPLETE",(function(e){return{payload:e,error:!0}})),He=Object(w.b)("LOGOUT_START"),Ge=Object(w.b)("LOGOUT_COMPLETE"),Ye=Object(w.b)("CHECK_LOGIN_START"),Je=function(e){var t=e.login;return!t||!t.isFetching},Ke=function(){return function(){var e=Object(y.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Ye()),e.prev=1,e.next=4,Ae();case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),t(Be(e.t0.message)),e.abrupt("return");case 11:n&&n.userId?("\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435."===(n.lastError||"").trim()&&"",t(ze(n.userId,n.userName,n.userHash))):t(Be(""));case 12:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},Xe=function(e,t){return function(n,r){if(Je(r()))return n(function(e,t){return function(){var n=Object(y.a)(g.a.mark((function n(r){return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(We()),n.prev=1,n.next=4,De({username:e,password:t});case 4:r(Ke()),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(1),console.error("Login error :",n.t0),r(Be(n.t0.message));case 11:case"end":return n.stop()}}),n,null,[[1,7]])})));return function(e){return n.apply(this,arguments)}}()}(e,t))}},qe=Object(w.c)({isFetching:!1},(function(e){e.addCase(We,(function(e){e.isFetching=!0})).addCase(Ye,(function(e){e.isFetching=!0})).addCase(ze,(function(e,t){t.error?(e.logged=!1,e.error=t.payload.toString()):(e.userId=t.payload.userId,e.userName=t.payload.userName,e.userHash=t.payload.userHash,e.logged=!0,delete e.error),e.lastUpdated=(new Date).getTime(),e.isFetching=!1})).addCase(He,(function(e){e.isFetching=!0})).addCase(Ge,(function(e){e.isFetching=!1,e.logged=!1,delete e.userId,delete e.userName,delete e.userHash,delete e.error}))})),Qe=Object(w.b)("CREATE_TOOLTIP",(function(e,t){return{payload:{keys:e,coords:t}}})),Ze=Object(w.b)("CLOSE_TOOLTIP",(function(e){return{payload:{keys:e}}})),$e=Object(w.b)("CLEAR_TOOLTIPS"),et=Object(w.c)({items:[]},(function(e){e.addCase(Qe,(function(e,t){var n=JSON.stringify(t.payload.keys),r=e.items.findIndex((function(e){return e.hash===n})),a=0;e.items.length&&(a=e.items[e.items.length-1].zIndex+1),-1===r?e.items.push({keys:t.payload.keys,coords:t.payload.coords,hash:n,zIndex:a}):e.items[e.items.length-1].zIndex=a})).addCase(Ze,(function(e,t){var n=JSON.stringify(t.payload.keys);e.items=e.items.filter((function(e){return e.hash!==n}))})).addCase($e,(function(e){e.items=[]}))})),tt=function(){var e=Object(y.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(S,"/").concat(V),{method:"POST",body:D("",t),mode:"no-cors",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nt=Object(w.b)("POST_NEW_TOPIC_START"),rt=Object(w.b)("POST_NEW_TOPIC_COMPLETE"),at=Object(w.b)("POST_NEW_TOPIC_ERROR",(function(e){return{payload:e,error:!0}})),ct=Object(w.b)("NEW_TOPIC_TEXT",(function(e){return{payload:{text:e},error:!1}})),st=Object(w.b)("NEW_TOPIC_CLEAR"),it=Object(w.b)("NEW_TOPIC_SUBJECT",(function(e){return{payload:{text:e},error:!1}})),ot=Object(w.b)("NEW_TOPIC_SECTION",(function(e){return{payload:{section:e},error:!1}})),lt=Object(w.b)("SHOW_VOTING",(function(e){return{payload:{show:e},error:!1}})),ut=function(e){return function(){var t=Object(y.a)(g.a.mark((function t(n){var r,a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n(nt()),r={message_text:e.text,topic_text:e.subject,target_section:String(e.section),target_forum:e.forum.toLowerCase(),action:"new",rnd:Math.round(1e10*Math.random()),voting:e.isVoting?1:0},e.votingItems)for(a=0;a<e.votingItems.length;a++)r["section".concat(a+1)]=e.votingItems[a];return t.next=5,tt(r);case 5:n(rt()),e.onSuccess&&e.onSuccess();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},dt=Object(w.c)({isFetching:!1,section:null,text:"",subject:"",forum:"1C",isVoting:!1},(function(e){e.addCase(nt,(function(e){e.isFetching=!0,delete e.error})).addCase(rt,(function(e){e.isFetching=!1})).addCase(at,(function(e,t){e.isFetching=!1,e.error=t.payload})).addCase(ct,(function(e,t){e.text=t.payload.text})).addCase(st,(function(e){e.text="",e.subject="",e.isVoting=!1})).addCase(it,(function(e,t){e.subject=t.payload.text})).addCase(lt,(function(e,t){e.isVoting=t.payload.show})).addCase(ot,(function(e,t){e.section=t.payload.section,e.forum=null==t.payload.section?"":t.payload.section.forum.toLowerCase()}))})),pt=function(){var e=Object(y.a)(g.a.mark((function e(t){var n,r,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=A.replace(":id",t.topic_id),r={method:"POST",body:D("",t),mode:"no-cors",credentials:"include",headers:{Accept:"text/html,application/xhtml+xml,application/xml","Content-Type":"application/x-www-form-urlencoded"},redirect:"follow"},e.next=4,fetch("".concat(S,"/").concat(n),r);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ht=Object(w.b)("POST_NEW_MESSAGE_START"),jt=Object(w.b)("POST_NEW_MESSAGE_COMPLETE"),ft=Object(w.b)("NEW_MESSAGE_TEXT",(function(e){return{payload:{text:e}}})),bt=Object(w.b)("ADD_MESSAGE_TEXT",(function(e){return{payload:{text:e}}})),mt={topicsList:ne,topic:we,sections:Ee,options:Pe,login:qe,tooltips:et,newTopic:dt,newMessage:Object(w.c)({isFetching:!1,text:""},(function(e){e.addCase(ht,(function(e){e.isFetching=!0})).addCase(jt,(function(e){e.isFetching=!1})).addCase(ft,(function(e,t){e.text=t.payload.text})).addCase(bt,(function(e,t){e.text+=t.payload.text})).addCase(be,(function(e){e.text=""}))}))},xt=Object(w.a)({reducer:mt,devTools:!1}),Ot=function(){return Object(i.c)()},vt=(i.d,xt),gt=a.a.forwardRef((function(e,t){var n=e.children,r=e.onClick;return Object(x.jsx)("span",{ref:t,style:{cursor:"pointer"},className:"link",onClick:function(e){e.preventDefault(),r(e)},children:n})})),yt=function(e){var t=e.userId,n=e.userName,r=Ot(),a=function(e){e.preventDefault(),r(function(){var e=Object(y.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(He()),e.prev=1,e.next=4,Ue();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0);case 9:t(Ge()),t(Ke());case 11:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}())};return Object(x.jsx)("div",{style:{float:"left"},children:Object(x.jsxs)(b.a,{id:"dropdown-custom-menu",onSelect:function(e,t){"exit"===e&&a(t)},children:[Object(x.jsx)("span",{children:"\u041f\u0440\u0438\u0432\u0435\u0442, "}),Object(x.jsxs)(b.a.Toggle,{as:gt,children:[n," \u25bc"]}),Object(x.jsxs)(b.a.Menu,{children:[Object(x.jsx)(b.a.Item,{eventKey:"profile",href:"".concat(S,"/users.php?id=").concat(t),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(x.jsx)(b.a.Item,{eventKey:"myTopics",href:"#/index.php?user_id=".concat(t),children:"\u041c\u043e\u0438 \u0442\u0435\u043c\u044b"}),Object(x.jsx)(b.a.Divider,{}),Object(x.jsx)(b.a.Item,{eventKey:"options",href:"#/options.php",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),Object(x.jsx)(b.a.Divider,{}),Object(x.jsx)(b.a.Item,{eventKey:"exit",children:"\u0412\u044b\u0445\u043e\u0434"})]})]})})},wt=n(92),Nt=Object(i.b)((function(e){return e.login}))((function(e){var t=Ot(),n=Object(r.useState)(""),a=Object(h.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(""),o=Object(h.a)(i,2),l=o[0],u=o[1];return Object(x.jsxs)("div",{children:[Object(x.jsxs)("form",{name:"enterform",className:"flex-row",style:{flexWrap:"wrap"},children:[Object(x.jsx)(f.a,{type:"text",placeholder:"\u0418\u043c\u044f",value:c,onChange:function(e){return s(e.target.value)},size:"sm",className:"input",style:{marginRight:"5px",flex:"0 1 300px"}}),Object(x.jsx)(f.a,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",maxLength:20,autoComplete:"off",value:l,onChange:function(e){return u(e.target.value)},size:"sm",className:"input",style:{marginRight:"5px",flex:"0 1 300px"}}),Object(x.jsx)(wt.a,{size:"sm",variant:"light",className:"button",onClick:function(e){e.preventDefault(),t(Xe(c,l))},children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(x.jsxs)("p",{style:{margin:"0px"},children:["\u0412\u043e\u0439\u0442\u0438 \u043c\u043e\u0436\u043d\u043e \u043d\u0430 \u0441\u0430\u0439\u0442\u0435 ",Object(x.jsx)("a",{href:"https://forum.mista.ru/",children:"forum.mista.ru"})]}),Object(x.jsx)("a",{rel:"nofollow",href:"https://forum.mista.ru/user_registration.php",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(x.jsx)("span",{style:{margin:"5px"},children:"|"}),Object(x.jsx)("a",{rel:"nofollow",href:"https://forum.mista.ru/remember_password.php",children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"})]})})),kt=(n(128),function(e){var t=e.text;return t?Object(x.jsx)("div",{className:"error",dangerouslySetInnerHTML:{__html:t}}):null}),Ct=Object(i.b)((function(e){return e.login}))((function(e){var t,n=e.logged,a=e.userId,c=e.userName,s=e.error,i=Ot();return Object(r.useEffect)((function(){i((function(e,t){if(Je(t()))return e(Ke())}))}),[i]),t=!0===n?Object(x.jsx)(yt,{userId:a,userName:c}):!1===n?Object(x.jsx)(Nt,{}):null,Object(x.jsxs)(x.Fragment,{children:[t,s&&Object(x.jsx)(kt,{text:s})]})})),It=Object(i.b)((function(e){var t=e.sections;return{items:t.items,tree:t.tree}}))((function(e){var t=Ot();Object(r.useEffect)((function(){t(Se())}),[t]);var n=e.id,a=e.tree,c=e.defaultValue,s=e.selected,i=e.style,o=e.size,l=[];for(var u in a){var p=Object(x.jsx)("optgroup",{label:u,children:a[u].map((function(e){return Object(x.jsx)("option",{value:e.code,children:e.name},e.id)}))},u);l.push(p)}return Object(x.jsxs)(d.a.Select,{onChange:function(t){var n=e.items,r=e.onChange;if(r){var a=t.currentTarget.value,c=n.filter((function(e){return e.code===a}));c.length>0?r(t,c[0]):r(t,null)}},value:s,style:i,className:"input",size:o,id:n,children:[Object(x.jsx)("option",{value:"",children:c}),l]})})),Tt=function(){var e=Object(i.c)(),t=Object(p.f)(),n=Object(p.e)(),a=te.a.parse(n.search);Object(r.useEffect)((function(){e(Se())}),[e]);return Object(x.jsxs)("div",{className:"flex-row",children:[Object(x.jsx)("div",{className:"header-left",children:Object(x.jsx)(Ct,{})}),Object(x.jsx)("div",{className:"header-right",children:Object(x.jsx)(It,{id:"sect",defaultValue:"--\u0412\u0441\u0435 \u0441\u0435\u043a\u0446\u0438\u0438--",selected:String(a.section)||"",onChange:function(e,n){t(n?"/index.php?section=".concat(n.code):"/")},size:"sm"})})]})},St=n(53),Et=n(5),_t=n.n(Et),Lt=function(e){var t=e.count,n=e.topicId,r=[];if(t>100)for(var a=I(t),c=1;c<=a;c++){var s="/topic.php?id=".concat(n,"&page=").concat(c),i=void 0;i=c>3&&c<a?"\u2022":String(c),r.push(Object(x.jsx)(o.b,{className:"agh",style:{margin:"3px"},to:s,children:i},c))}if(t>20){var l="/topic.php?id=".concat(n,"&page=last20#F");r.push(Object(x.jsx)(o.b,{className:"agh",style:{margin:"3px"},to:l,children:"\xbb"},"last20"))}return Object(x.jsx)("span",{className:"topic-pages",children:r})},Ft=Object(i.b)((function(e){return{login:e.login}}))((function(e){var t,n=e.data,r=e.login,a="/topic.php?id=".concat(n.id),c=_t()("agb","mr5",{bold:n.count>=100,mytopics:n.author===r.userName,pinned:n.pinned});n.isVoting&&(t=Object(x.jsx)("span",{className:"agh separator",children:"[\xb1]"}));var s,i,l,u="/index.php?section=".concat(n.sectionCode);n.section&&(s=Object(x.jsxs)("span",{className:"topic-section",children:[Object(x.jsx)("span",{className:"agh",style:{margin:"0px 5px"},children:"/"}),Object(x.jsx)(o.b,{rel:"nofollow",className:"agh",to:u,children:n.section},"1")]}));var d=n.text;return n.closed&&(i=Object(x.jsx)("span",{className:"agh",children:"\xd8"})),n.down&&(l=Object(x.jsx)("span",{className:"agh",children:"\u2193"})),"job"===n.sectionCode&&"JOB"!==d.substring(0,3)?d="JOB: "+d:"life"===n.forum&&"OFF"!==d.substring(0,3)?d="OFF: "+d:"v7"===n.sectionCode&&"v7"!==d.substring(0,2)&&(d="v7: "+d),Object(x.jsxs)("div",{className:"cell-title",children:[n.pinned&&Object(x.jsx)("i",{className:"fa fa-thumb-tack agh","aria-hidden":"true",style:{marginRight:"5px"}}),Object(x.jsx)(o.b,{to:a,className:c,dangerouslySetInnerHTML:{__html:d},style:{overflowWrap:"anywhere"}}),t,Object(x.jsx)(Lt,{count:n.count,topicId:n.id}),i,l,s]})})),Mt=function(e){var t=e.topicId,n=e.expanded,r=Ot(),a=n?Object(x.jsx)("i",{className:"fa fa-minus-square-o agh","aria-hidden":"true"}):Object(x.jsx)("i",{className:"fa fa-plus-square-o agh","aria-hidden":"true"});return Object(x.jsx)("div",{className:"cell-preview-link",onClick:function(){r(X(t,0))},children:Object(x.jsx)("span",{children:a})})},Pt=Object(i.b)((function(e){return{login:e.login}}))((function(e){var t=e.data,n=e.updated,a=e.topicId,c=Ot(),s=Object(r.useState)(n),i=Object(h.a)(s,2),l=i[0],u=i[1],d=Object(r.useCallback)(Object(y.a)(g.a.mark((function e(){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de(a,t.count);case 2:n=e.sent,u(n.time);case 4:case"end":return e.stop()}}),e)}))),[a,t.count]);Object(r.useEffect)((function(){t.pinned&&d()}),[t.pinned,d]);var p,j=new Date(l);return p=2147483648e3===l?"":function(e){var t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}(j)?Object(St.a)(l,"HH:MM"):Object(St.a)(l,"dd.mm.yy"),Object(x.jsxs)("div",{className:"topics-list-row",children:[Object(x.jsx)("div",{className:"cell-forum",children:t.forum}),Object(x.jsx)("div",{className:"cell-section",children:t.section}),Object(x.jsxs)("div",{className:"cell-answ",onClick:function(){c(X(a,t.count))},children:[Object(x.jsx)("i",{className:"fa fa-comments-o","aria-hidden":"true",style:{marginRight:"3px"}}),Object(x.jsx)("span",{children:t.count})]}),Object(x.jsx)(Mt,{topicId:t.id,expanded:t.showPreview}),Object(x.jsx)(Ft,{data:t}),Object(x.jsxs)("div",{className:"cell-author",children:[Object(x.jsx)("i",{"aria-hidden":"true",className:"fa fa-user-circle",style:{marginRight:"3px"}}),t.author]}),Object(x.jsx)("div",{className:"cell-lastuser",children:Object(x.jsxs)("div",{style:{display:"flex"},children:[Object(x.jsx)("span",{className:"cell-lastuser-time",children:p}),Object(x.jsx)("span",{className:"cell-lastuser-user",children:t.lastUser})]})}),Object(x.jsx)("div",{className:"cell-last20",children:Object(x.jsx)(o.b,{to:"/topic.php?id=".concat(String(t.id),"&page=last20#F"),style:{color:"inherit",display:"block",width:"100%",textAlign:"center"},children:Object(x.jsx)("i",{className:"fa fa-angle-right","aria-hidden":"true"})})})]})})),Rt=n(160),At=(n(129),function(e){var t=e.maxPage,n=e.last20,r=Object(p.e)(),a=r.pathname;"/"===a&&(a="/index.php");var c,s=new URLSearchParams(r.search),i=s.get("page");c=i?"last20"===i?"last20":parseInt(i,10)||1:1;for(var o=[],l=1;l<=t;l++){s.set("page",String(l));var u="#"+a+"?"+s.toString();o.push(Object(x.jsx)(Rt.a.Item,{active:c===l,href:u,children:l},l))}if(!0===n){s.set("page","last20");var d="#"+a+"?"+s.toString();o.push(Object(x.jsx)(Rt.a.Item,{active:"last20"===c,href:d,children:"\xbb"},"last20"))}return Object(x.jsx)(Rt.a,{style:{margin:"0px"},children:o})}),Vt=n(73),Dt=n(158),Ut=(n(130),function(e){var t=e.formName,n=e.placeholder,a=e.showVoting,c=e.isVoting,s=e.isFetching,i=e.text,o=Ot(),l=Object(r.useRef)();return Object(x.jsxs)("div",{children:[Object(x.jsx)(f.a,{as:"textarea",placeholder:n,cols:70,rows:3,value:i,onChange:function(e){o({type:t+"_TEXT",payload:{text:e.currentTarget.value}})},onKeyPress:function(e){if("Enter"===e.key&&e.ctrlKey){for(var t=e.currentTarget.parentElement;t&&"FORM"!==t.tagName.toUpperCase();)t=t.parentElement;t&&t.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))}},ref:l,className:"text-editor input"}),Object(x.jsxs)("div",{className:"flex-row",children:[Object(x.jsxs)(Dt.a,{children:[Object(x.jsx)(wt.a,{size:"sm",variant:"light",onClick:function(e){e.preventDefault();var n=l.current,r=n.selectionStart,a=n.selectionEnd,c=n.value,s=c.length,i="[1C]\n"+c.substring(r,a)+"\n[/1C]",u=c.substring(0,r)+i+c.substring(a,s);o({type:t+"_TEXT",payload:{text:u}})},style:{marginRight:"5px"},className:"button",children:"\u041a\u043e\u0434 1\u0421"}),Object(x.jsx)(wt.a,{size:"sm",variant:"light",disabled:s,type:"submit",className:"button",children:s?"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]}),a&&Object(x.jsx)(d.a.Check,{id:"show_voting",type:"checkbox",checked:c,onChange:function(e){o(lt(e.currentTarget.checked))},label:"\u0413\u043e\u043b\u043e\u0441\u043e\u0432\u0430\u043d\u0438\u0435",style:{margin:"auto 0px auto auto"}})]})]})}),Wt=(n(131),Object(i.b)((function(e){return{sections:e.sections,newTopic:e.newTopic}}))((function(e){var t,n=e.sections,a=e.newTopic,c=e.onSubmitSuccess,s=Ot(),i=Object(r.useState)(null),o=Object(h.a)(i,2),l=o[0],u=o[1],p=Object(r.useState)(Array(10).fill("")),f=Object(h.a)(p,2),b=f[0],m=f[1],O=function(e){return function(t){var n=b.slice();n[e]=t.target.value,m(n)}},v=function(){s(st()),c&&c()},g=[];for(var y in n.tree)g.push(Object(x.jsx)("option",{value:y.toLowerCase(),children:y},y));var w=[];if(a.isVoting){w.push(Object(x.jsx)("div",{children:"\u0412\u0430\u0440\u0438\u0430\u043d\u0442\u044b:"},"p"));for(var N=1;N<=10;N++)w.push(Object(x.jsxs)(j.a,{size:"sm",style:{marginBottom:"3px",width:"100%"},children:[Object(x.jsx)(j.a.Text,{style:{width:"40px"},className:"input",children:"".concat(N,".")}),Object(x.jsx)(d.a.Control,{type:"text",maxLength:50,className:"input",value:b[N-1],onChange:O(N-1)})]},N))}return Object(x.jsxs)("form",{className:"new-topic-container",onSubmit:function(e){if(e.preventDefault(),l){var t=a.subject;if(t)if(a.text){var n={subject:t,text:a.text,section:l.id,forum:l.forum,isVoting:a.isVoting,votingItems:[],onSuccess:v};if(a.isVoting){n.votingItems=[];for(var r=1;r<=10;r++){var c=b[r-1];c&&n.votingItems.push(c)}}s(function(e){return function(t,n){if(function(e){var t=e.newTopic;return!!t&&!t.isFetching}(n()))return t(ut(e))}}(n))}else s(at("\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"));else s(at("\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430 \u0442\u0435\u043c\u0430"))}else s(at("\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u0430 \u0441\u0435\u043a\u0446\u0438\u044f"))},children:[Object(x.jsxs)("div",{id:"newtopic_form",className:"new-topic-text",children:[Object(x.jsx)("div",{children:Object(x.jsx)("b",{children:"\u041d\u043e\u0432\u0430\u044f \u0442\u0435\u043c\u0430:"})}),a.error&&Object(x.jsx)(kt,{text:a.error}),Object(x.jsxs)("div",{className:"flex-row",style:{marginBottom:"3px"},children:[Object(x.jsx)(d.a.Select,{disabled:!0,size:"sm",value:a.forum,style:{flex:"0 1 90px"},className:"input",children:g}),Object(x.jsx)(It,{id:"target_section",defaultValue:"\u0421\u0435\u043a\u0446\u0438\u044f",selected:null===(t=a.section)||void 0===t?void 0:t.code,size:"sm",style:{flex:"1 1 auto"},onChange:function(e,t){u(t),s(ot(t))}})]}),Object(x.jsx)(d.a.Control,{type:"text",size:"sm",value:a.subject,onChange:function(e){s(it(e.target.value))},style:{marginBottom:"3px"},className:"input",placeholder:"\u0422\u0435\u043c\u0430",maxLength:90}),Object(x.jsx)(Ut,{placeholder:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",showVoting:!0,isVoting:a.isVoting,text:a.text,isFetching:a.isFetching,formName:"NEW_TOPIC"})]}),Object(x.jsx)(Vt.a,{className:"new-topic-voting",children:w})]})}))),zt=n(2),Bt=n(95),Ht=(n(80),function(e){var t=e.topicId,n=e.onFirst,r=e.onPrev,a=e.onNext,c=e.onLast,s=Ot();return Object(x.jsxs)("div",{className:"topic-preview-rewind",children:[Object(x.jsx)("div",{className:"topic-preview-button flex-small",onClick:n,title:"\u041a \u043f\u0435\u0440\u0432\u043e\u043c\u0443",children:Object(x.jsx)("i",{className:"fa fa-angle-double-left","aria-hidden":"true"})}),Object(x.jsx)("div",{className:"topic-preview-button flex-large",onClick:r,title:"\u041a \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u043c\u0443",children:Object(x.jsx)("i",{className:"fa fa-angle-left","aria-hidden":"true"})}),Object(x.jsx)("div",{className:"topic-preview-button flex-large",onClick:a,title:"\u041a \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u043c\u0443",children:Object(x.jsx)("i",{className:"fa fa-angle-right","aria-hidden":"true"})}),Object(x.jsx)("div",{className:"topic-preview-button flex-small",onClick:c,title:"\u041a \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u043c\u0443",children:Object(x.jsx)("i",{className:"fa fa-angle-double-right","aria-hidden":"true"})}),Object(x.jsxs)("div",{className:"topic-preview-button close-preview",onClick:function(){s(X(t,0))},children:[Object(x.jsx)("i",{className:"fa fa-angle-right","aria-hidden":"true"}),Object(x.jsx)("i",{className:"fa fa-angle-left","aria-hidden":"true",style:{marginLeft:"-2px"}})]}),Object(x.jsx)("div",{className:"topic-preview-button edit-preview",children:Object(x.jsx)(o.b,{to:"/topic.php?id=".concat(t,"&page=last20#F"),children:Object(x.jsx)("i",{className:"fa fa-pencil","aria-hidden":"true",style:{color:"var(--font-color)"}})})})]})}),Gt=n(94),Yt=n.n(Gt);var Jt,Kt=function(e){var t,n,r,a=new Set("if|\u0435\u0441\u043b\u0438|then|\u0442\u043e\u0433\u0434\u0430|elsif|\u0438\u043d\u0430\u0447\u0435\u0435\u0441\u043b\u0438|else|\u0438\u043d\u0430\u0447\u0435|endif|\u043a\u043e\u043d\u0435\u0446\u0435\u0441\u043b\u0438|do|\u0446\u0438\u043a\u043b|for|\u0434\u043b\u044f|to|\u043f\u043e|each|\u043a\u0430\u0436\u0434\u043e\u0433\u043e|in|\u0438\u0437|while|\u043f\u043e\u043a\u0430|enddo|\u043a\u043e\u043d\u0435\u0446\u0446\u0438\u043a\u043b\u0430|procedure|\u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u0430|endprocedure|\u043a\u043e\u043d\u0435\u0446\u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u044b|function|\u0444\u0443\u043d\u043a\u0446\u0438\u044f|endfunction|\u043a\u043e\u043d\u0435\u0446\u0444\u0443\u043d\u043a\u0446\u0438\u0438|var|\u043f\u0435\u0440\u0435\u043c|export|\u044d\u043a\u0441\u043f\u043e\u0440\u0442|goto|\u043f\u0435\u0440\u0435\u0439\u0442\u0438|and|\u0438|or|\u0438\u043b\u0438|not|\u043d\u0435|val|\u0437\u043d\u0430\u0447|break|\u043f\u0440\u0435\u0440\u0432\u0430\u0442\u044c|continue|\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c|return|\u0432\u043e\u0437\u0432\u0440\u0430\u0442|try|\u043f\u043e\u043f\u044b\u0442\u043a\u0430|except|\u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435|endtry|\u043a\u043e\u043d\u0435\u0446\u043f\u043e\u043f\u044b\u0442\u043a\u0438|raise|\u0432\u044b\u0437\u0432\u0430\u0442\u044c\u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435|false|\u043b\u043e\u0436\u044c|true|\u0438\u0441\u0442\u0438\u043d\u0430|undefined|\u043d\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043e|null|new|\u043d\u043e\u0432\u044b\u0439|execute|\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c|\u0430\u0441\u0438\u043d\u0445|async|\u0436\u0434\u0430\u0442\u044c|wait".split("|")),c=new Set("():;.,=+-*<>?[]%/".split("")),s="bg>",i="num>",o="str>",l="key>",u=!1,d="";function p(e){return""===e.trim()}function h(e,t,n){return e.substring(t-1,t-1+n)}function j(e,t){return e.substring(e.length-t)}function f(e){return a.has(e.toLowerCase().trim())}function b(e,a){" "===e||r===a?t+=e:(n&&(t+="</span>",n=!1),t=t+"<span class="+a+e,n=!0,r=a)}function m(e){var n=!1,a=!1,m=1,x=!0,O=1;for(O=1;O<=e.length;O++){var v=e.charAt(O-1);if(u)'"'===v?(b(h(e,m,O-m+1),o),u=!1,d="",x=!0):d+=v;else if(n)"'"===v?(b(h(e,m,O-m+1),o),n=!1,d="",x=!0):d+=v;else if(" "===v)p(d)?t+=" ":(a?(b(d+" ",o),a=!1):f(d.trim())?b(d+" ",l):isNaN(parseInt(d,10))?b(d+" ",s):b(d+" ",i),d=""),x=!0;else if(c.has(v)){if(p(d)||(a?(b(d,o),a=!1,x="."!==v):x&&f(d)?(b(d,l),x="."!==v):(isNaN(parseInt(d,10))?b(d,s):b(d,i),x="."!==v),d=""),"."===v&&r===i){b(v,i);continue}if("="===v&&"<"===h(e,O-1,1))r=void 0;else if("/"===v&&"/"===h(e,O+1,1))return void b(j(e,e.length-O+1),"com>");b(v,"sp>")}else if('"'===v||"|"===v)p(d)?(m=O,u=!0):(b(d+v,o),d=""),x=!0;else if("'"===v)p(d)?(m=O,n=!0):(b(d+v,o),d=""),x=!0;else{if("#"===v||"&"===v&&p(t)){b(j(e,e.length-O+1),"pr>"),O=e.length;break}"~"===v?(d+=v,a=!0):d+=v}}u||n?b(h(e,m,O-m+1),o):p(d)||(f(d)?b(d,l):isNaN(parseInt(d,10))?b(d,s):b(d,i))}u=!1,d="",n=!1,r=void 0,t="";var x,O=[],v=Object($.a)(e.split("\n"));try{for(v.s();!(x=v.n()).done;){var g=x.value;p(g)?O.push(""):(t="",m(g),n&&!u?(t+="</span>",n=!1,r="",d=""):u||(r="",d=""),O.push(t))}}catch(y){v.e(y)}finally{v.f()}return O.join("\n")},Xt=(n(140),function(e){var t=e.children,n=Object(r.useState)(!0),a=Object(h.a)(n,2),c=a[0],s=a[1],i="";t&&(i=function(e){for(var t=e.replace(/\n<br>/g,"\n").replace(/<br>\n/g,"\n").replace(/\r<br>/g,"\n").replace(/<br>\r/g,"\n").replace(/<br>/g,"\n");"\n"===t[0];)t=t.substring(1);for(;"\n"===t.substring(t.length-1);)t=t.substring(0,t.length-1);return Kt(t)}(i=T(t).join("")));var o,l=0;i&&(l=i.split("\n").length),o=c?"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c: ".concat(l," \u0441\u0442\u0440\u043e\u043a"):"\u0421\u043a\u0440\u044b\u0442\u044c";var u=null;l>7&&(u=Object(x.jsx)("div",{className:"expand-button-div",children:Object(x.jsx)("span",{className:"expand-button-span",onClick:function(){s(!c)},children:o})}));var d={};return c&&l>7?(d.overflow="hidden",d.height="135px"):(d.overflow="auto",d.height="auto"),Object(x.jsxs)("div",{style:{marginTop:"5px"},children:[Object(x.jsx)("pre",{className:"code-pre",style:d,dangerouslySetInnerHTML:{__html:i}}),u]})}),qt=n(47),Qt=n(48),Zt=n(77),$t=n(76),en=Object(i.b)((function(e){var t=e.topic;return{items:t.items,info:t.info,tooltipDelay:e.options.items.tooltipDelay}}))(function(e){Object(Zt.a)(n,e);var t=Object($t.a)(n);function n(e){var r;Object(qt.a)(this,n),(r=t.call(this,e)).timer=void 0,r.onMouseOver=function(e){e.persist();var t=r.props.tooltipDelay;r.timer=window.setTimeout((function(){return r.showToolTip(e)}),+t)},r.onClick=function(e){e.stopPropagation(),clearTimeout(r.timer),r.showToolTip(e)},r.onMouseOut=function(){clearTimeout(r.timer)},r.showToolTip=function(e){var t=r.props,n=t.topicId,a=t.number;(0,t.dispatch)(function(e,t){return function(){var n=Object(y.a)(g.a.mark((function n(r){return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r(Qe(e,t));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}({topicId:+n,number:+a},{x:e.pageX,y:e.pageY-50}))};var a=r.props,c=a.children,s=a.number;return r.state=c?{text:T(c).join("")}:{text:String(s)},r}return Object(Qt.a)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.children||this.setState({text:String(e.number)})}},{key:"componentDidMount",value:function(){var e=this;this.state.text.startsWith("http")&&se(+this.props.topicId).then((function(t){e.setState({text:t.title})}))}},{key:"render",value:function(){var e=this.props,t=e.topicId,n=e.number,r=e.style,a=e.info,c=I(n),s="";return c>1&&(s="&page=".concat(c)),a&&+t===a.id||!isNaN(+this.state.text)?Object(x.jsx)("span",{onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onClick:this.onClick,className:"link",style:Object(zt.a)({},r),children:this.state.text}):Object(x.jsxs)("span",{children:[Object(x.jsx)("a",{href:"#/topic.php?id=".concat(t).concat(s,"#").concat(n),style:Object(zt.a)({},r),children:this.state.text})," ","(",Object(x.jsx)("span",{onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onClick:this.onClick,className:"link",children:n}),")"]})}}]),n}(r.Component)),tn=n(83),nn=n.n(tn),rn=function(e){var t=e.href,n=e.children;return Object(x.jsx)("a",{href:t,className:"registered-user",children:n})},an=function(e){var t=e;-1===e.search(/http/)&&(t="http://"+t);try{var n=new URL(t)}catch(r){return null}return-1!==n.hostname.search(/youtube/)?n.searchParams.get("v"):-1!==n.hostname.search(/youtu\.be/)?n.pathname.substring(1):null},cn=function(){var e=Object(y.a)(g.a.mark((function e(t){var n,r,a,c,s,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("youtubeApiKey")||"AIzaSyCztN2QW4Fxw_1YuAHBTOZdYLbzigPz25g",r="https://www.googleapis.com/youtube/v3/videos?key=".concat(n,"&fields=items(snippet(title))&part=snippet&id=").concat(t),e.next=4,fetch(r);case 4:return a=e.sent,e.next=7,a.json();case 7:return c=e.sent,s=c.items[0].snippet.title,i=s,50,s.length>55&&(i=i.substring(0,50)+"..."),e.abrupt("return",{hrefName:i,title:s});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sn=function(e){var t=e.href,n=Object(r.useState)({hrefName:t,title:""}),a=Object(h.a)(n,2),c=a[0],s=a[1];Object(r.useEffect)((function(){(function(){var e=Object(y.a)(g.a.mark((function e(){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=an(t)){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,cn(n);case 6:r=e.sent,s(Object(zt.a)({},r)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("youtube",e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}})()()}),[t]);return Object(x.jsx)("a",{href:t,title:c.title,children:"".concat("youtube",": ").concat(c.hrefName)})},on=Object(i.b)((function(e){var t=e.options.items;return{showYoutubeVideoTitle:t.showYoutubeVideoTitle,replaceCatalogMista:t.replaceCatalogMista,fixBrokenLinks:t.fixBrokenLinks}}))((function(e){var t=e.href,n=e.children,r=e.parentText,a=e.showYoutubeVideoTitle,c=e.replaceCatalogMista,s=e.fixBrokenLinks;try{var i=new nn.a(t,!0)}catch(u){return console.error(u.message,t),Object(x.jsx)("a",{href:t,children:t})}var o,l=t;if(l.startsWith("/")&&(i.set("protocol","https"),i.set("hostname","forum.mista.ru"),l=i.href),-1!==i.hostname.search(/forum\.mista.ru/)){if("/topic.php"===i.pathname)return Object(x.jsx)(en,{topicId:i.query.id,number:i.hash.replace("#","")||"0",children:T(n)});if("/users.php"===i.pathname)return Object(x.jsx)(rn,{href:i.href,children:n});if("a-sitnikov.github.io"===i.hostname&&"/react.mista/"===i.pathname&&0===Object.keys(i.query).length&&"/react.mista/topic.php"===(i=new nn.a(t.replace(/#\//,""),!0)).pathname)return Object(x.jsx)(en,{topicId:i.query.id,number:i.hash.replace("#","")||"0",children:T(n)})}return"true"!==a||-1===(o=i.hostname).search(/youtube/)&&-1===o.search(/youtu\.be/)?"true"===c&&function(e){return-1!==e.search(/catalog\.mista/)}(i.hostname)?(i.set("hostname","infostart.ru"),Object(x.jsxs)("a",{target:e.target,className:e.class,rel:e.rel,href:i.href,children:[i.href," "]})):("true"===s&&r&&(l=function(e,t){var n=e.replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\./g,"\\.").replace(/\./g,".").replace(/\*/g,"\\*").replace(/\+/g,"\\+").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\?/g,"\\?").replace(/\//g,"\\/");try{var r=new RegExp(n+"<\\/a>(\\)|[\u0430-\u044f\u0451\u0410-\u042f\u04010-9#\\-\\+\\_\\%\\?=]*)"),a=t.match(r);if(a&&a.length>1)return")"===a[1]&&-1===e.search("\\(")?e:e+=a[1]}catch(u){console.error(u)}return e}(l,r)),Object(x.jsx)("a",{target:e.target,className:e.class,rel:e.rel,href:l,children:n})):Object(x.jsx)(sn,{href:t})})),ln=n(38),un=function(e){var t=e.topicId,n=e.data,r=e.total,a=e.n,c=e.colors,s="".concat(S,"/css/voting").concat(a,".png"),i=0;r&&(i=Math.round(100*n.count/r));return Object(x.jsxs)("div",{className:"voting-item",children:[Object(x.jsx)("div",{className:"voting-title",children:Object(x.jsx)("a",{rel:"nofollow",style:{textDecoration:"none"},href:"#/topic.php?id=".concat(t,"&sel=").concat(a),children:Object(x.jsx)("b",{children:Object(x.jsx)("span",{style:{color:c[a-1]},children:"".concat(a,". ").concat(n.text)})})})}),Object(x.jsx)("div",{className:"voting-percentage",children:Object(x.jsx)("b",{children:Object(x.jsx)("span",{style:{color:c[a-1]},children:"".concat(i,"% (").concat(n.count,")")})})}),Object(x.jsx)("div",{className:"voting-bar",children:Object(x.jsx)("div",{style:{width:"".concat(i,"%")},children:Object(x.jsx)("a",{href:s,children:Object(x.jsx)("img",{src:s,style:{maxWwidth:"500px",width:"100%",height:"15px"},alt:"\u043f".concat(a)})})})})]})},dn=function(e){var t=e.items,n=e.topicId,r=e.colors,a=Math.max.apply(Math,Object(ln.a)(t.map((function(e){return e.count}))));return Object(x.jsx)("div",{style:{marginBottom:"10px"},children:t.filter((function(e){return e.text})).map((function(e,t){return Object(x.jsx)(un,{data:e,total:a,n:t+1,topicId:n,colors:r},t)}))})},pn=function(e){var t=e.colors,n=e.n,r=e.text;return Object(x.jsx)("div",{style:{marginTop:"5px"},children:Object(x.jsx)("b",{children:Object(x.jsx)("span",{style:{color:t[n-1]},children:"".concat(n,". ").concat(r)})})})},hn=Object(i.b)((function(e){return{info:e.topic.info,voteColors:e.options.voteColors,showTooltips:e.options.items.showTooltips}}))((function(e){var t=e.topicId,n=e.n,a=e.html,c=e.vote,s=e.info,i=e.style,o=e.voteColors;if(c&&s.voting&&t===s.id)var l=s.voting[c-1].text;else l=null;var u=Object(r.useState)(l),d=Object(h.a)(u,2),p=d[0],j=d[1],f=function(){var e=Object(y.a)(g.a.mark((function e(){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,se(t);case 3:n=e.sent,j(n.voting[c-1].text),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){c?l||f():p&&j(null)}),[c]);var b,m=0!==c&&null!==p;0===n&&s.isVoting&&s.voting&&(b=Object(x.jsx)(dn,{items:s.voting,topicId:t,colors:o}));var O=function(e,t){if(!e)return e;var n=function(e){return e.replace(/(\[1[C\u0421]\])((.|\n|\r)*?)(\[\/1[C\u0421]\])/gi,(function(e){var t=arguments.length<=2?void 0:arguments[2];return"<br>"===t.substr(0,4)&&(t=t.substr(4)),"<code>".concat(t,"</code>")}))}(e);return function(e,t){return e.replace(/(\()(\d+)(\))/gi,(function(e){var n=arguments.length<=2?void 0:arguments[2];return"(<link data-topicid='".concat(t,"' data-number='").concat(n,"' ></link>)")}))}(n,t)}(a,t),v={link:function(e){return Object(x.jsx)(en,{topicId:e["data-topicid"],number:e["data-number"]},e.key)},code:function(e){return Object(x.jsx)(Xt,Object(zt.a)({},e))},a:function(e){return Object(x.jsx)(on,Object(zt.a)(Object(zt.a)({},e),{},{parentText:O}))}},w=Yt()(O,v);return Object(x.jsxs)("div",{className:"message",style:i,children:[b,Object(x.jsx)("div",{children:w}),m&&Object(x.jsx)(pn,{text:p,n:c,colors:o})]})})),jn=function(e){var t=Ot(),n=Object(r.useState)("none"),a=Object(h.a)(n,2),c=a[0],s=a[1],i=e.data,o=e.isAuthor,l=e.isYou,u=e.isTooltip;Object(r.useEffect)((function(){s("none")}),[i.n]);var d,p="".concat(S,"/users.php?id=").concat(i.userId);d=i?0===i.n?Object(St.a)(new Date(i.time),"dd.mm.yy - HH:MM"):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("span",{className:"message-number",children:i.n})," - "+Object(St.a)(new Date(i.time),"dd.mm.yy - HH:MM")]}):"";var j,f,b=_t()("registered-user",{"is-author":o,"is-you":l});return window.innerWidth>768e4&&(j=Object(x.jsx)("img",{src:"".concat(S,"/css/user_icons/").concat(i.userId,"_16x16.png"),alt:"user ico",onLoad:function(){s("inline")},onError:function(){s("none")},style:{display:c,marginBottom:"4px",marginRight:"1px"}})),f=u?Object(x.jsx)("div",{className:"ah",style:{display:"inline-block",marginLeft:"5px"},children:d}):Object(x.jsxs)("div",{className:"message-time",children:[Object(x.jsx)("span",{className:"ah",children:d}),Object(x.jsx)("button",{className:"button ah",onClick:function(){var n=e.data;t(bt("(".concat(n.n,")")));var r=document.getElementById("message_text");r&&window.scrollTo(0,r.offsetTop)},children:d})]}),Object(x.jsxs)("div",{className:"user-info",children:[j,Object(x.jsx)("a",{className:b,href:p,children:i.user}),f]})},fn=function(e){var t=e.topicId,n=e.n,a=e.author,c=e.loggedUserId,s=e.onDataLoaded,i=Object(r.useState)(null),o=Object(h.a)(i,2),l=o[0],u=o[1],d=Object(r.useState)(null),p=Object(h.a)(d,2),j=p[0],f=p[1];return Object(r.useEffect)((function(){(function(){var e=Object(y.a)(g.a.mark((function e(){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,de(t,n);case 3:(r=e.sent)?(u(r),f(null),s&&s()):(u(null),f("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 ".concat(n))),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),u(null),f(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[t,n,s]),l||j?Object(x.jsxs)(x.Fragment,{children:[l&&Object(x.jsxs)("div",{className:"preview-content",children:[Object(x.jsx)("div",{className:"topic-preview-userinfo",children:Object(x.jsx)(jn,{data:l,isAuthor:l.user===a,isYou:l.userId===c,isTooltip:!0})}),Object(x.jsx)(hn,{topicId:t,n:n,data:l,html:l.text,vote:l.vote,style:{overflowY:"auto",overflowWrap:"break-word"}})]}),j&&Object(x.jsx)("span",{children:j})]}):null},bn=function(e){var t=e.topicId,n=e.initialMsgNumber,a=e.author,c=e.loggedUserId,s=Object(r.useState)(0),i=Object(h.a)(s,2),o=i[0],l=i[1],u=Object(r.useState)("none"),d=Object(h.a)(u,2),p=d[0],j=d[1],f=Object(r.useState)({msgNumber:n,key:0}),b=Object(h.a)(f,2),m=b[0],O=b[1],v=function(){var e=Object(y.a)(g.a.mark((function e(){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(t);case 2:n=e.sent,O({msgNumber:n.count,key:m.key});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=Object(Bt.useSwipeable)({onSwiping:function(e){Math.abs(e.deltaX)<35?l(0):l(e.deltaX)},onSwiped:function(e){Math.abs(e.deltaX)>150&&("Left"===e.dir?O({msgNumber:m.msgNumber+1,key:m.key+1}):"Right"===e.dir&&m.msgNumber>0&&O({msgNumber:m.msgNumber-1,key:m.key+1})),l(0)},delta:15}),N=[m.msgNumber];o<0?N.push(m.msgNumber+1):o>0&&m.msgNumber>0&&N.push(m.msgNumber-1);var k={transform:"translate3d(".concat(o,"px, 0px, 0px)"),flexDirection:o>0?"row-reverse":"row"};return Object(x.jsx)("div",{className:"preview-container",style:{display:p},children:Object(x.jsxs)("div",{className:"topic-preview",children:[Object(x.jsx)(Ht,{topicId:t,onFirst:function(){O({msgNumber:0,key:m.key})},onLast:v,onNext:function(){O({msgNumber:m.msgNumber+1,key:m.key})},onPrev:function(){m.msgNumber>0&&O({msgNumber:m.msgNumber-1,key:m.key})}}),Object(x.jsxs)("div",Object(zt.a)(Object(zt.a)({className:"preview-carousel"},w),{},{style:k,children:[Object(x.jsx)("div",{className:"preview-carousel-item",style:{order:0},children:Object(x.jsx)(fn,{topicId:t,n:N[0],loggedUserId:c,author:a,onDataLoaded:function(){j("block")}})},m.key),N.length>1&&Object(x.jsx)("div",{className:"preview-carousel-item",style:{order:1},children:Object(x.jsx)(fn,{topicId:t,n:N[1],loggedUserId:c,author:a})},m.key+1)]}))]})})},mn=(n(143),Object(i.b)((function(e){return{topicsList:e.topicsList,sections:e.sections,login:e.login,options:e.options}}))((function(e){var t=e.topicsList,n=(e.sections,e.login),a=Ot(),c=Object(p.e)(),s=Object(r.useCallback)((function(e){a(q(e))}),[a]);Object(r.useEffect)((function(){document.title="React.Mista"}),[]),Object(r.useEffect)((function(){var e=te.a.parse(c.search);s(e)}),[c.search,s]);var i,o=[],l=Object($.a)(t.items);try{for(l.s();!(i=l.n()).done;){var u=i.value;o.push(Object(x.jsx)(Pt,{data:u,updated:u.updated,topicId:u.id},u.id)),u.showPreview&&o.push(Object(x.jsx)(bn,{topicId:u.id,initialMsgNumber:u.previewMsgNumber,author:u.author,loggedUserId:n.userId},"preview".concat(u.id)))}}catch(d){l.e(d)}finally{l.f()}return Object(x.jsxs)("div",{children:[Object(x.jsx)(Tt,{}),t.error&&Object(x.jsx)(kt,{text:t.error}),Object(x.jsxs)("div",{className:"topic-list-table",children:[Object(x.jsxs)("div",{className:"th",style:{position:"sticky",top:"39px"},children:[Object(x.jsx)("div",{style:{letterSpacing:"-1px"},children:"\u0420\u0430\u0437\u0434\u0435\u043b"}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{children:"\u0422\u0435\u043c\u0430"}),Object(x.jsx)("div",{children:"Re"}),Object(x.jsx)("div",{children:"\u0410\u0432\u0442\u043e\u0440"}),Object(x.jsx)("div",{children:Object(x.jsx)("span",{style:{cursor:"pointer"},title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a",onClick:s,children:t.isFetching?"\u041e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u0442\u0441\u044f":"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043e"})})]}),o,Object(x.jsx)("div",{className:"tf",children:Object(x.jsx)(At,{maxPage:10})})]}),Object(x.jsx)("div",{id:"F",className:"newtopic",style:{marginBottom:"10px",marginTop:"5px",position:"relative"},children:Object(x.jsx)(Wt,{onSubmitSuccess:s})})]})}))),xn=Object(i.b)((function(e){return{info:e.topic.info,login:e.login}}))((function(e){var t=e.info;e.login;return Object(x.jsxs)("div",{className:"flex-row",children:[Object(x.jsx)("div",{className:"header-left",children:Object(x.jsx)(Ct,{})}),Object(x.jsx)("div",{className:"header-right",children:Object(x.jsx)("span",{id:"forum_string",className:"bold120",children:Object(x.jsx)(o.b,{to:"/index.php?forum=".concat(t.forum),style:{textDecoration:"none"},children:{"1c":"1\u0421:\u041f\u0440\u0435\u0434\u043f\u0440\u0438\u044f\u0442\u0438\u0435",life:"\u041e \u0436\u0438\u0437\u043d\u0438",it:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438",job:"\u0420\u0430\u0431\u043e\u0442\u0430"}[t.forum]})})})]})})),On=Object(i.b)((function(e){return{info:e.topic.info}}))((function(e){var t=e.info,n="https://www.yandex.ru/search/?text="+encodeURIComponent(t.title);return Object(x.jsxs)("div",{className:"topic-row",children:[Object(x.jsx)("div",{className:"cell-userinfo",children:Object(x.jsxs)("div",{className:"topic-tools",children:[Object(x.jsx)("a",{title:"API.info",href:"".concat(S,"/").concat(_,"?id=").concat(t.id),className:"agh",style:{display:"block",lineHeight:"1em"},children:"i"}),Object(x.jsx)("a",{title:"API.messages",href:"".concat(S,"/").concat(L,"?id=").concat(t.id,"&from=0&to=20"),className:"agh",style:{display:"block",lineHeight:"1em"},children:"m"})]})}),Object(x.jsx)("div",{className:"cell-message",children:Object(x.jsxs)("div",{className:"flex-row",children:[Object(x.jsxs)("div",{style:{flex:1,textAlign:"center"},children:[Object(x.jsx)("a",{href:"".concat(S,"/topic.php?id=").concat(t.id),children:Object(x.jsx)("h1",{className:"topic-title",dangerouslySetInnerHTML:{__html:t.title}})}),Object(x.jsx)("div",{className:"moder-action"})]}),Object(x.jsx)("div",{style:{flex:"0 0 20px",position:"relative"},children:Object(x.jsx)("div",{className:"div-va-middle",children:Object(x.jsx)("a",{rel:"noopener noreferrer",href:n,title:"\u0418\u0441\u043a\u0430\u0442\u044c \u0432 \u042f\u043d\u0434\u0435\u043a\u0441\u0435",target:"_blank",className:"yandex",children:"\u042f"})})})]})})]})})),vn=Object(i.b)((function(e){var t=e.topic||{info:{},item0:{}},n=t.info,r=t.item0;return{topicId:n.id,author:r?r.user:"",login:e.login}}))((function(e){var t=e.data,n=e.author,r=e.topicId,a=e.login;return t?Object(x.jsxs)("div",{className:"topic-row",id:String(t.n),children:[Object(x.jsx)("div",{className:"cell-userinfo",children:Object(x.jsx)(jn,{data:t,isAuthor:t.user===n,isYou:t.user===a.userName})}),Object(x.jsx)("div",{className:"cell-message",children:Object(x.jsx)(hn,{data:t,html:t.text,topicId:r,n:t.n,vote:t.vote})})]}):null})),gn=Object(i.b)((function(e){var t=e.topic||{isFetching:!0,info:re},n=t.isFetching,r=t.lastUpdated;return{info:t.info,isFetching:n,lastUpdated:r}}))((function(e){var t=e.info,n=e.isFetching,r=e.page,a=Ot(),c=I(t.count),s=!1;return"last20"!==r&&r!==c||(s=!0),Object(x.jsxs)("div",{className:"flex-row",id:"F",children:[Object(x.jsx)("div",{className:"ta-left va-top",style:{width:"50%"},children:Object(x.jsx)(wt.a,{onClick:function(){},disabled:!1,size:"sm",className:"button",variant:"light",children:"\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0430"})}),Object(x.jsx)("div",{className:"ta-right va-middle",style:{marginLeft:"auto"},children:s&&Object(x.jsx)(wt.a,{onClick:function(){a(ye())},disabled:n,size:"sm",className:"button",variant:"light",children:n?"\u041e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u0442\u0441\u044f":"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0432\u0435\u0442\u043a\u0443"})})]})})),yn=Object(i.b)((function(e){return{info:e.topic.info,newMessage:e.newMessage}}))((function(e){var t,n=e.info,a=e.newMessage,c=e.onSubmitSuccess,s=Object(r.useState)(),i=Object(h.a)(s,2),o=i[0],l=i[1],u=Ot(),p=function(){u(ft("")),l(void 0),c&&c()};if((null===n||void 0===n?void 0:n.isVoting)&&(null===n||void 0===n?void 0:n.voting)){for(var j=[],f=function(e){var t=n.voting[e-1];if(!t.text)return"continue";j.push(Object(x.jsx)(d.a.Check,{type:"radio",name:"voting",checked:o===e,onChange:function(){return function(e){l(e)}(e)},label:"".concat(e,". ").concat(t.text)},e))},b=1;b<=n.voting.length;b++)f(b);t=Object(x.jsxs)(Vt.a,{children:[Object(x.jsx)("legend",{children:Object(x.jsxs)("small",{children:["\u0412\u0430\u0448 \u0432\u044b\u0431\u043e\u0440:",Object(x.jsx)("span",{id:"voting_clear",style:{marginLeft:"5px",cursor:"pointer"},onClick:function(e){e.preventDefault(),l(void 0)},children:"\u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"})]})}),j,"\u041e\u0431\u043e\u0441\u043d\u0443\u0439\u0442\u0435 \u0441\u0432\u043e\u0439 \u0432\u044b\u0431\u043e\u0440!"]})}return Object(x.jsxs)("form",{style:{marginTop:"5px"},onSubmit:function(e){e.preventDefault(),e.stopPropagation();var t={text:a.text,topicId:String(null===n||void 0===n?void 0:n.id),onSuccess:p,voting_select:void 0};o&&(t.voting_select=o),u(function(e){return function(){var t=Object(y.a)(g.a.mark((function t(n){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(ht()),r={message_text:e.text,action:"new",topic_id:e.topicId,rnd:Math.round(1e10*Math.random())},e.voting_select&&(r.voting_select=e.voting_select),t.prev=3,t.next=6,pt(r);case 6:return t.next=8,n(jt());case 8:e.onSuccess&&e.onSuccess(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),console.error("Failed to post new message: "+t.t0);case 14:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}()}(t))},children:[Object(x.jsx)("div",{className:"bold",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0432 \u0442\u0435\u043c\u0443:"}),Object(x.jsxs)("div",{className:"new-message-container",children:[Object(x.jsx)("div",{className:"new-message-text",children:Object(x.jsx)(Ut,{isFetching:a.isFetching,text:a.text,placeholder:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",formName:"NEW_MESSAGE"})}),Object(x.jsx)("div",{className:"new-message-voting",children:t})]})]})})),wn=(n(144),Object(i.b)((function(e){var t=e.topic,n=t.isFetching,r=t.lastUpdated,a=t.info,c=t.item0,s=t.items,i=t.error;return{login:e.login,info:a,item0:c,items:s,isFetching:n,lastUpdated:r,error:i,options:e.options.items}}))((function(e){var t,n=e.login,a=e.items,c=e.item0,s=e.info,i=e.error,o=Ot(),l=Object(p.e)(),u=new URLSearchParams(l.search),d=+u.get("id"),h=(t=u.get("page"))?"last20"===t?"last20":isNaN(+t)?1:+t:1,j=I(s.count),f=Object(r.useCallback)((function(){var e=c;d!==s.id&&(e=null),o(ge(d,h,e))}),[o,d,h]),b=Object(r.useCallback)((function(){("last20"===h||h===j)&&o(ye())}),[o,h]);return Object(r.useEffect)((function(){var e;s.title&&(document.title=(e=s.title,(new DOMParser).parseFromString(e,"text/html").firstChild.innerText))}),[s.title]),Object(r.useEffect)((function(){f()}),[f,d,h]),Object(r.useEffect)((function(){var e=window.setInterval(b,6e4);return function(){o(be()),Jt=void 0,e&&clearInterval(e)}}),[o,b]),Object(r.useEffect)((function(){if(!Jt&&l.hash&&a.length>0){var e=document.getElementById(l.hash.slice(1));e&&setTimeout((function(){return window.scrollTo(0,e.offsetTop)}),1),Jt=!0}})),Object(x.jsxs)("div",{style:{marginBottom:"5px"},children:[Object(x.jsx)(xn,{}),i&&Object(x.jsx)(kt,{text:i}),Object(x.jsxs)("div",{className:"topic-table",children:[Object(x.jsx)(On,{}),Object(x.jsx)(vn,{data:c},"0"),a.map((function(e,t){return Object(x.jsx)(vn,{data:e},e.n)})),(j>1||"last20"===h)&&Object(x.jsx)("div",{className:"tf",children:Object(x.jsx)(At,{maxPage:j,last20:!0})})]}),Object(x.jsx)(gn,{page:h}),n.logged&&Object(x.jsx)(yn,{onSubmitSuccess:function(){b(),o(ft(""))}})]})}))),Nn=function(e){var t=e.name,n=e.label,r=e.value,a=e.values,c=e.oneLine,s=e.onChange,i=function(e){s(e,t,e.target.value)};return Object(x.jsxs)("span",{children:[Object(x.jsxs)("span",{style:{marginRight:"5px"},children:[" ",n," "]}),c&&Object(x.jsx)("br",{}),a.map((function(e,t){return Object(x.jsx)(d.a.Check,{type:"radio",id:e.name,label:e.descr,name:n,checked:e.name===r,value:e.name,inline:c,onChange:i},t)}))]})},kn=function(e){var t=e.name,n=e.value,r=e.label,a=e.postfix;return Object(x.jsxs)("label",{htmlFor:t,style:{marginRight:"5px"},children:[Object(x.jsx)("span",{style:{marginRight:"5px"},children:r}),Object(x.jsx)("input",{type:"string",name:t,value:n,onChange:function(t){var n=e.name;e.onChange(t,n,t.target.value)},className:"input"}),void 0!==a?Object(x.jsx)("span",{style:{marginLeft:"5px"},children:a}):null]})},Cn=[{tabName:"\u041e\u0431\u0449\u0438\u0435",rows:[["theme"],["topicsPerPage"],["autoRefreshTopicsList","autoRefreshTopicsListInterval"],["autoRefreshTopic","autoRefreshTopicInterval"]]},{tabName:"\u0422\u0443\u043b\u0442\u0438\u043f\u044b",rows:[["showTooltips","tooltipDelay"],["showTooltipOnPostLink"]]},{tabName:"\u0421\u0441\u044b\u043b\u043a\u0438",rows:[["showYoutubeVideoTitle"],["replaceCatalogMista"],["fixBrokenLinks"]]}],In={theme:{type:"radio",label:"\u0426\u0432\u0435\u0442\u043e\u0432\u0430\u044f \u043f\u0430\u043b\u0438\u0442\u0440\u0430:",oneLine:!0,values:[{name:"yellow",descr:"\u0417\u043e\u043b\u043e\u0442\u0430\u044f"},{name:"lightgray",descr:"\u0421\u0435\u0440\u0430\u044f"},{name:"dark",descr:"\u0422\u0435\u043c\u043d\u0430\u044f"}]},topicsPerPage:{type:"number",label:"\u0422\u0435\u043c \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 (max 99):",min:1,max:99},autoRefreshTopicsList:{type:"checkbox",label:"\u0410\u0432\u0442\u043e\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430 \u0442\u0435\u043c"},autoRefreshTopicsListInterval:{type:"number",label:"",min:60,max:1e6,postfix:"\u0441\u0435\u043a"},autoRefreshTopic:{type:"checkbox",label:"\u0410\u0432\u0442\u043e\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u0435\u043c\u044b"},autoRefreshTopicInterval:{type:"number",label:"",min:60,max:1e6,postfix:"\u0441\u0435\u043a"},showTooltips:{type:"checkbox",label:"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0442\u0443\u043b\u0442\u0438\u043f\u044b, \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430"},tooltipDelay:{type:"number",max:1e6,label:"",postfix:"\u043c\u0441"},showTooltipOnPostLink:{type:"checkbox",label:"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0442\u0443\u043b\u0442\u0438\u043f \u0441\u0441\u044b\u043a\u0438 \u043d\u0430 \u0434\u0440\u0443\u0433\u0443\u044e \u0432\u0435\u0442\u043a\u0443"},showYoutubeVideoTitle:{type:"checkbox",label:"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u044f \u0440\u043e\u043b\u0438\u043a\u043e\u0432 youtube"},replaceCatalogMista:{type:"checkbox",label:"\u041e\u0431\u0440\u0430\u0442\u043d\u043e \u0437\u0430\u043c\u0435\u043d\u044f\u0442\u044c catalog.mista.ru \u043d\u0430 infostart.ru"},fixBrokenLinks:{type:"checkbox",label:"\u0427\u0438\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u043e\u043c\u0430\u043d\u043d\u044b\u0435 \u0441\u0441\u044b\u043b\u043a\u0438 (\u0441 \u0440\u0443\u0441\u0441\u043a\u0438\u043c\u0438 \u0441\u0438\u043c\u0432\u043e\u043b\u0430\u043c\u0438)"}},Tn=function(e){var t=e.name,n=e.children;return Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"tab-header",children:t}),Object(x.jsx)("div",{className:"tab-content",children:n})]})},Sn=(n(145),Object(i.b)((function(e){return{options:e.options}}))((function(e){var t,n=Ot(),a=Object(p.f)(),c=Object(r.useState)({items:e.options.items}),s=Object(h.a)(c,2),i=s[0],o=s[1],l=function(){a("/#")},u=function(e,t,n){var r=Object.assign({},i.items);r[t]=n,o(Object(zt.a)(Object(zt.a)({},i),{},{items:r}))},j=[],b=Object($.a)(Cn);try{for(b.s();!(t=b.n()).done;){var m=t.value,O=[];for(var v in m.rows){var g,y=m.rows[v],w=[],N=Object($.a)(y);try{var k=function(){var e=g.value,t=In[e];if(!t)return"continue";var n=i.items[e];"radio"===t.type?w.push(Object(x.jsx)(Nn,{name:e,label:t.label,values:t.values,value:n,oneLine:t.oneLine,onChange:u},e)):"number"===t.type?(t.label&&w.push(Object(x.jsx)("label",{htmlFor:e,style:{fontWeight:"inherit"},children:t.label},e+"_label")),w.push(Object(x.jsxs)("div",{className:"options-number",children:[Object(x.jsx)(f.a,{type:"number",min:t.min,max:t.max,value:n,onChange:function(t){return u(0,e,t.target.value)},className:"input",size:"sm"}),t.postfix&&Object(x.jsx)("span",{style:{marginLeft:"5px",flex:"0 0 auto"},children:t.postfix},e+"_postfix")]},e))):"string"===t.type?w.push(Object(x.jsx)(kn,{name:e,label:t.label,postfix:t.postfix,value:n,onChange:u},e)):"checkbox"===t.type&&w.push(Object(x.jsx)(d.a.Check,{id:e,type:"checkbox",label:t.label,name:e,checked:"true"===String(n),onChange:function(t){return u(0,e,t.target.checked)},style:{flex:"0 0 auto",margin:"0px"}},e))};for(N.s();!(g=N.n()).done;)k()}catch(C){N.e(C)}finally{N.f()}O.push(Object(x.jsx)("div",{className:"options-row",children:w},v))}j.push(Object(x.jsx)(Tn,{name:m.tabName,children:O},m.tabName))}}catch(C){b.e(C)}finally{b.f()}return Object(x.jsxs)("div",{className:"options-form",children:[Object(x.jsx)("div",{className:"options-header",style:{cursor:"default"},children:Object(x.jsx)("b",{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})}),j,Object(x.jsxs)("div",{className:"button-row",children:[Object(x.jsx)(wt.a,{id:"applyOptions",size:"sm",variant:"light",style:{margin:"5px"},className:"button",onClick:function(){n(Fe(i.items)),l()},children:"OK"}),Object(x.jsx)(wt.a,{id:"cancelOptions",size:"sm",variant:"light",style:{margin:"5px",float:"left"},className:"button",onClick:l,children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(x.jsx)(wt.a,{id:"defaultOptions",size:"sm",variant:"light",style:{margin:"5px",float:"right"},className:"button",onClick:function(){o(Object(zt.a)(Object(zt.a)({},i),{},{items:Object.assign({},_e.items)}))},children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})]})]})}))),En=function(){var e=Ot();return Object(x.jsx)("div",{onClick:function(){e((function(e,t){t().tooltips.items.length>0&&e($e())}))},style:{flex:"auto"},children:Object(x.jsx)(Z.a,{children:Object(x.jsxs)(p.c,{children:[Object(x.jsx)(p.a,{path:"/",element:Object(x.jsx)(mn,{})}),Object(x.jsx)(p.a,{path:"/index.php",element:Object(x.jsx)(mn,{})}),Object(x.jsx)(p.a,{path:"/topic.php",element:Object(x.jsx)(wn,{})}),Object(x.jsx)(p.a,{path:"/options.php",element:Object(x.jsx)(Sn,{})})]})})})},_n=function(){return Object(x.jsxs)("footer",{className:"flex-row navbar-footer",children:[Object(x.jsx)("a",{href:"".concat(S,"/rules.php"),children:"\u041f\u0440\u0430\u0432\u0438\u043b\u0430"}),Object(x.jsx)("span",{className:"separator",children:"|"}),Object(x.jsx)("a",{href:"".concat(S,"/about.php"),children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(x.jsx)("span",{className:"separator",children:"|"}),Object(x.jsxs)("b",{children:[Object(x.jsx)("a",{href:"".concat(S,"/ad.php"),children:"\u0420\u0435\u043a\u043b\u0430\u043c\u0430 \u043d\u0430 \u0441\u0430\u0439\u0442\u0435"}),"  "]}),Object(x.jsx)("span",{className:"separator",children:"|"}),Object(x.jsx)("a",{href:"".concat(S,"/find.php"),children:"\u041f\u043e\u0438\u0441\u043a"}),Object(x.jsx)("span",{className:"separator",children:"|"}),Object(x.jsx)("a",{rel:"nofollow",href:"".concat(S,"/sections_list.php"),children:"\u0421\u0435\u043a\u0446\u0438\u0438"}),Object(x.jsx)("span",{className:"separator",children:"|"}),Object(x.jsx)("a",{rel:"nofollow",href:"".concat(S,"/rating.php"),children:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"}),Object(x.jsx)("span",{className:"separator",children:"|"}),Object(x.jsx)("a",{href:"http://kb.mista.ru",children:"\u041a\u043d\u0438\u0433\u0430 \u0437\u043d\u0430\u043d\u0438\u0439"}),Object(x.jsx)("span",{className:"separator",children:"|"}),Object(x.jsx)("a",{href:"http://wiki.mista.ru",children:"\u0412\u0438\u043a\u0438-\u043c\u0438\u0441\u0442\u0430 (\u041a\u04172)"}),Object(x.jsx)("span",{className:"separator",children:"|"}),Object(x.jsx)("a",{rel:"nofollow",href:"http://m.mista.ru/",children:"\u041c\u043e\u0431\u0438\u043b\u044c\u043d\u0430\u044f"}),Object(x.jsx)("span",{className:"separator",children:"|"}),Object(x.jsx)("a",{href:"".concat(S,"/archive.php"),children:"\u0410\u0440\u0445\u0438\u0432"}),Object(x.jsx)("span",{className:"separator",children:"|"}),Object(x.jsx)("a",{href:"".concat(S,"/moders.php"),children:"\u041c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440\u044b"}),Object(x.jsx)("span",{className:"separator",children:"|"}),Object(x.jsx)("a",{href:"".concat(S,"/users_gallery.php"),children:"\u0413\u0430\u043b\u0435\u0440\u0435\u044f"}),Object(x.jsx)("span",{className:"separator",children:"|"}),Object(x.jsx)("a",{href:"".concat(S,"/ban_list.php"),children:"\u0411\u0430\u043d\u044b"}),Object(x.jsx)("span",{className:"separator",children:"|"}),Object(x.jsx)("span",{children:"18+"})]})},Ln=n(96),Fn=n.n(Ln),Mn=function(e){var t=e.children,n=e.closeWindow;return Object(x.jsxs)("div",{className:"tooltip-header",children:[t,Object(x.jsxs)("div",{className:"tooltip-close",onClick:n,onTouchEnd:n,children:[Object(x.jsx)("i",{className:"fa fa-angle-right","aria-hidden":"true"}),Object(x.jsx)("i",{className:"fa fa-angle-left","aria-hidden":"true",style:{marginLeft:"-2px"}})]})]})},Pn=function(e){var t=e.children,n=e.onScroll,r=0;return Object(x.jsx)("div",{className:"tooltip-text",onTouchStart:function(e){r=e.nativeEvent.changedTouches[0].clientX},onTouchEnd:function(e){if(n){var t=e.nativeEvent.changedTouches[0].clientX;Math.abs(t-r)>100&&n(-t+r)}},children:t})},Rn=(n(89),function(e){var t,n,r=e.tooltip,c=e.zIndex,s=e.children,i=Ot(),o=r.coords;window.innerWidth<=768?(t="y",n={top:o.y,left:5}):(t="both",n={top:o.y,left:Math.min(o.x,window.innerWidth-670)});var l=a.a.Children.toArray(s),u=Object(h.a)(l,2),d=u[0],p=u[1];return Object(x.jsx)(Fn.a,{axis:t,handle:".tooltip-header",defaultClassNameDragging:"dragging",children:Object(x.jsxs)("div",{className:"tooltip-window",style:Object(zt.a)({},n),children:[Object(x.jsx)(Mn,{closeWindow:function(){i(Ze(r.keys))},children:d.props.children}),Object(x.jsx)(Pn,{children:p.props.children})]})},c)}),An=Object(i.b)((function(e){var t=e.topic;return{info:t.info,items:t.items,item0:t.item0}}))((function(e){var t,n,a,c=e.tooltip,s=e.info,i=e.items,o=e.item0,l=c.keys,u="";l.topicId===s.id&&(a=0===l.number?o:i.find((function(e){return e.n===l.number})))&&(u=a.text);var d,p=Object(r.useState)({data:a,text:u}),j=Object(h.a)(p,2),f=j[0],b=j[1],m=Object(r.useCallback)(Object(y.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.data){e.next=2;break}return e.abrupt("return");case 2:return n="",e.prev=3,e.next=6,de(l.topicId,l.number);case 6:t=e.sent,n=t?t.text:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e ".concat(l.number),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),n=e.t0.message;case 13:b({data:t,text:n});case 14:case"end":return e.stop()}}),e,null,[[3,10]])}))),[l.topicId,l.number,f.data]);return Object(r.useEffect)((function(){m()}),[m]),f.text?(d=f.data?Object(x.jsx)(jn,{data:f.data,isAuthor:!1,isYou:!1,isTooltip:!0}):Object(x.jsx)("b",{children:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"}),Object(x.jsxs)(Rn,{tooltip:e.tooltip,children:[Object(x.jsx)(Mn,{children:d}),Object(x.jsx)(Pn,{children:Object(x.jsx)(hn,{data:f.data,n:null===(t=f.data)||void 0===t?void 0:t.n,vote:null===(n=f.data)||void 0===n?void 0:n.vote,html:f.text,topicId:l.topicId,style:{maxHeight:"min(550px, 80vh)",overflowY:"auto"}})})]})):null})),Vn=Object(i.b)((function(e){return{items:e.tooltips.items}}))((function(e){var t=e.items;return Object(x.jsx)(x.Fragment,{children:t.map((function(e){return Object(x.jsx)(An,{tooltip:e},e.hash)}))})})),Dn=Object(i.b)((function(e){return{theme:e.options.items.theme}}))((function(e){var t=e.theme;return Object(r.useEffect)((function(){document.body.setAttribute("theme",t)}),[t]),Object(x.jsxs)(o.a,{children:[Object(x.jsx)(Q,{}),Object(x.jsx)(En,{}),Object(x.jsx)(_n,{}),Object(x.jsx)(Vn,{})]})})),Un=function(e){var t=e.store;return Object(x.jsx)(i.a,{store:t,children:Object(x.jsx)(Dn,{})})};s.a.render(Object(x.jsx)(Un,{store:vt}),document.getElementById("root"))},80:function(e,t,n){},89:function(e,t,n){}},[[152,1,2]]]);
//# sourceMappingURL=main.fe62d4fe.chunk.js.map