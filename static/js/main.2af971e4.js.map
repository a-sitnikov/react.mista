{"version":3,"file":"static/js/main.2af971e4.js","mappings":"gMA+DA,EAvDe,WAEb,IAAAA,GAAwCC,EAAAA,EAAAA,UAAS,wCAASC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAnDI,EAAYF,EAAA,GAAEG,EAAeH,EAAA,GACpCI,GAAwBL,EAAAA,EAAAA,UAAS,IAAGM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAA7BE,EAAID,EAAA,GAAEE,EAAOF,EAAA,GAQdG,EAAW,WAEf,IAAIC,EACiB,yCAAjBP,EACFO,EAAG,sCAAAC,OAAyCJ,EAAI,wBAExB,WAAjBJ,IACPO,EAAG,kCAAAC,OAAqCJ,EAAI,yBAE9CK,OAAOC,KAAKH,GACZF,EAAQ,GACV,EAEA,OACEM,EAAAA,EAAAA,MAACC,EAAAA,EAAU,CAACC,KAAK,KAAIC,SAAA,EACnBH,EAAAA,EAAAA,MAACI,EAAAA,EAAc,CACbC,GAAG,gBACHC,MAAM,GACNJ,KAAK,KACLK,MAAO,CAAEC,YAAa,OACtBC,UAAU,SACVC,QAAQ,QACRC,SAAU,SAAAC,GAAQ,OAAItB,EAAgBsB,EAAS,EAACT,SAAA,EAEhDU,EAAAA,EAAAA,KAACC,EAAAA,EAASC,KAAI,CAACH,SAAS,uCAAQT,SAAC,0CACjCU,EAAAA,EAAAA,KAACC,EAAAA,EAASC,KAAI,CAACH,SAAS,SAAQT,SAAC,eAEnCU,EAAAA,EAAAA,KAACG,EAAAA,EAAW,CACVC,KAAK,OACLC,YAAW,GAAArB,OAAKR,EAAY,oCAC5BkB,MAAO,CAAEC,YAAa,MAAOW,aAAc,QAC3CV,UAAU,QACVW,WAtCa,SAACC,GACJ,UAAVA,EAAEC,KACJ3B,GAEJ,EAmCM4B,SAAU,SAAAF,GAAC,OAAI3B,EAAQ2B,EAAEG,OAAOC,MAAM,EACtCA,MAAOhC,KAEToB,EAAAA,EAAAA,KAACZ,EAAAA,EAAWyB,KAAI,CAACnB,MAAO,CAAEoB,WAAY,QAASC,UAAW,OAAQC,aAAc,OAAQC,OAAQ,WAAaC,QAASpC,EAASQ,UAC7HU,EAAAA,EAAAA,KAAA,KAAGJ,UAAU,qBAAqBF,MAAO,CAAEyB,OAAQ,WAK3D,E,iDCvDO,IAQMC,EAAY,SAACxC,GAExB,IACE,OAAOyC,KAAKC,MAAM1C,EACpB,CAAE,MAAO4B,GAET,CAEA,IAaE,OAZA5B,EAAOA,EACJ2C,QAAQ,OAAQ,KAChBA,QAAQ,OAAQ,KAChBA,QAAQ,OAAQ,KAChBA,QAAQ,OAAQ,KAChBA,QAAQ,OAAQ,IAChBA,QAAQ,MAAO,QACfA,QAAQ,MAAO,QACfA,QAAQ,MAAO,OACfA,QAAQ,cAAe,SAGnBF,KAAKC,MAAM1C,EAGpB,CAAE,MAAO4B,GAIP,OAHAgB,QAAQC,MAAMjB,EAAEkB,SAChBF,QAAQG,IAAI/C,GAEL,CAAC,CACV,CACF,EAEagD,EAAa,SAACC,GACzB,OAAe,IAAXA,GAAsB,EACnBC,KAAKC,IAAID,KAAKE,KAAKH,EAAQ,KAAM,KAAO,CACjD,EAEaI,EAAiB,SAAC3C,GAE7B,OAAKA,EAEEA,EAAS4C,KAAI,SAAAtB,GAClB,MAAuB,kBAAXA,EACHA,EACiB,OAAfA,EAAMR,KACR,OAC6B,wBAA3BQ,EAAMR,KAAK+B,aAAoE,eAA3BvB,EAAMR,KAAK+B,YACjEvB,EAAMwB,MAAMC,QAEnBb,QAAQG,IAAIf,GACLA,EAEX,IAbsBtB,CAcxB,EC7BA,SAASgD,EAAgBC,GAEvB,IAAQC,EAAYD,EAAZC,QAER,MAAQ,CACNC,OAAQC,OAAc,OAAPF,QAAO,IAAPA,OAAO,EAAPA,EAASG,SACxBC,SAAiB,OAAPJ,QAAO,IAAPA,OAAO,EAAPA,EAASK,UACnBC,SAAiB,OAAPN,QAAO,IAAPA,OAAO,EAAPA,EAASO,UACnBC,UAAkB,OAAPR,QAAO,IAAPA,OAAO,EAAPA,EAASS,WAGxB,CAAC,SAEcC,IAAY,OAAAC,EAAAC,MAAC,KAADC,UAAA,UAAAF,IAK1B,OAL0BA,GAAAG,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAA3B,SAAAC,IAAA,IAAAlB,EAAA,OAAAgB,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAEyBC,GAAqBC,GAAY,KAAD,EAAzC,OAARxB,EAAQoB,EAAAK,KAAAL,EAAAM,OAAA,SACP3B,EAAgBC,IAAS,wBAAAoB,EAAAO,OAAA,GAAAT,EAAA,MAEjCL,MAAA,KAAAC,UAAA,CCjDM,IAAMc,EAAU,eAAAC,GAAAd,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAC,EAAOY,GAAqB,OAAAd,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAC9CS,MAAM,GAADtF,OAAIuF,EAAM,KAAAvF,OAAIwF,GAAY,CACnCC,OAAQ,OACRC,KAAMC,GAAe,GAAI,CAAC9B,UAAWwB,EAAOO,SAAUC,cAAeR,EAAOS,WAC5EC,KAAM,UACNC,YAAa,UACbC,QAAS,CACP,OAAU,kDACV,eAAgB,qCAElBC,SAAU,WACT,KAAD,mBAAAvB,EAAAO,OAAA,GAAAT,EAAA,KACH,gBAZsB0B,GAAA,OAAAf,EAAAhB,MAAA,KAAAC,UAAA,KAcV+B,EAAW,eAAAC,GAAA/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAA8B,IAAA,IAAAC,EAAA,OAAAhC,EAAAA,EAAAA,KAAAG,MAAA,SAAA8B,GAAA,cAAAA,EAAA5B,KAAA4B,EAAA3B,MAAA,OACa,OAAhC0B,EAAO,GAAAvG,OAAMuF,EAAM,KAAAvF,OAAIyG,GAASD,EAAA3B,KAAA,EAChCS,MAAMiB,EAAS,CACnBR,KAAM,UACNC,YAAa,YACZ,KAAD,mBAAAQ,EAAAtB,OAAA,GAAAoB,EAAA,KACH,kBANuB,OAAAD,EAAAjC,MAAA,KAAAC,UAAA,KCTXqC,EAAe,eAAAtB,GAAAd,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAC,EAAOY,GAA0B,IAAAtF,EAAA4G,EAAAC,EAAA,OAAArC,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAc7D,OAZK9E,EAAM8G,GAActE,QAAQ,MAAO8C,EAAOyB,UAE1CH,EAAuB,CAC3BlB,OAAQ,OACRC,KAAMC,GAAe,GAAIN,GACzBU,KAAM,UACNC,YAAa,UACbC,QAAS,CACP,OAAU,kDACV,eAAgB,qCAElBC,SAAU,UACXvB,EAAAE,KAAA,EAEoBS,MAAM,GAADtF,OAAIuF,EAAM,KAAAvF,OAAID,GAAO4G,GAAS,KAAD,EAA3C,OAANC,EAAMjC,EAAAK,KAAAL,EAAAM,OAAA,SACL2B,GAAM,wBAAAjC,EAAAO,OAAA,GAAAT,EAAA,KACd,gBAlB2B0B,GAAA,OAAAf,EAAAhB,MAAA,KAAAC,UAAA,KCUf0C,EAAa,eAAA3B,GAAAd,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAC,EAAOY,GAAwB,OAAAd,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAEpDS,MAAM,GAADtF,OAAIuF,EAAM,KAAAvF,OAAIgH,IAAe,CACtCvB,OAAQ,OACRC,KAAMC,GAAe,GAAIN,GACzBU,KAAM,UACNC,YAAa,UACbC,QAAS,CACP,eAAgB,uCAEjB,KAAD,mBAAAtB,EAAAO,OAAA,GAAAT,EAAA,KACH,gBAXyB0B,GAAA,OAAAf,EAAAhB,MAAA,KAAAC,UAAA,KCZ1B,SAASf,EAAgBC,GAEvB,MAAQ,CACN/C,GAAI+C,EAAS/C,GACbyG,MAAO1D,EAAS0D,MAChBC,KAAM3D,EAAS4D,OACfC,KAAM7D,EAAS8D,MAGnB,CAEO,IAAMC,EAAa,eAAAlC,GAAAd,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAC,IAAA,IAAA8C,EAAA,OAAAhD,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACRC,GAAqB0C,IAAa,KAAD,EAA1C,OAAJD,EAAI5C,EAAAK,KAAAL,EAAAM,OAAA,SACHsC,EAAKrE,IAAII,IAAgB,wBAAAqB,EAAAO,OAAA,GAAAT,EAAA,KACjC,kBAHyB,OAAAW,EAAAhB,MAAA,KAAAC,UAAA,KCG1B,SAASf,EAAgBC,GAEvB,IAAIkE,EAAS,GAOb,OANIlE,EAASkE,SACXA,EAASlE,EAASkE,OAAOvE,KAAI,SAAAwE,GAAC,MAAK,CACjC9H,KAAM8H,EAAEC,OACR9E,MAAO6E,EAAEd,OACV,KAEK,CACNpG,GAAIoH,SAASrE,EAAS/C,IACtBC,MAAO8C,EAAS3D,KAChBqH,MAAO1D,EAAS0D,MAChBY,UAAWtE,EAASuE,QACpBC,QAAsC,IAA7BH,SAASrE,EAASwE,SAC3BC,SAAUzE,EAASI,QACnBsE,OAAQ1E,EAASM,UACjBqE,QAAsC,IAA7BN,SAASrE,EAAS2E,SAC3BC,SAAU5E,EAAS6E,aACnBvF,MAAO+E,SAASrE,EAAS8E,eACzBC,KAAM/E,EAAS+E,KACfC,OAAQhF,EAASgF,OACjBC,QAASjF,EAASiF,QAClBC,SAAUlF,EAASmF,UACnBjB,OAAAA,EAGJ,CAAC,SAEckB,EAAcxC,GAAA,OAAAyC,EAAAxE,MAAC,KAADC,UAAA,UAAAuE,IAK5B,OAL4BA,GAAAtE,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAA7B,SAAAC,EAA8BjE,GAAU,IAAAqI,EAAA,OAAAtE,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAEnBiE,GAAgBC,EAAc,CAAEvI,GAAAA,IAAM,KAAD,EAA9C,OAAJqI,EAAIlE,EAAAK,KAAAL,EAAAM,OAAA,SACH3B,EAAgBuF,IAAK,wBAAAlE,EAAAO,OAAA,GAAAT,EAAA,MAE7BL,MAAA,KAAAC,UAAA,CCpCD,SAASf,EAAgBC,GAEvB,MAAQ,CACN/C,GAAIoH,SAASrE,EAAS/C,IACtBwI,EAAGpB,SAASrE,EAASyF,GACrBC,KAAM1F,EAAS0F,KACfxF,OAAQmE,SAASrE,EAASE,QAC1B7D,KAAM2D,EAAS3D,KACfsJ,KAAiC,IAA3BtB,SAASrE,EAAS4F,OACxBC,KAAM7F,EAAS6F,KAGnB,CAAC,SAEcC,EAAkBlD,GAAA,OAAAmD,EAAAlF,MAAC,KAADC,UAAA,UAAAiF,IAKhC,OALgCA,GAAAhF,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAjC,SAAAC,EAAkCY,GAA6B,IAAAkC,EAAA,OAAAhD,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAE1CiE,GAAgBS,EAAkBlE,GAAQ,KAAD,EAAlD,OAAJkC,EAAI5C,EAAAK,KAAAL,EAAAM,OAAA,SACHsC,EAAKrE,IAAII,IAAgB,wBAAAqB,EAAAO,OAAA,GAAAT,EAAA,MAEjCL,MAAA,KAAAC,UAAA,UAEcmF,EAAiBC,EAAAC,GAAA,OAAAC,EAAAvF,MAAC,KAADC,UAAA,UAAAsF,IAO/B,OAP+BA,GAAArF,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAhC,SAAA8B,EAAiC9F,EAAYwI,GAAS,IAAAY,EAAArC,EAAA,OAAAhD,EAAAA,EAAAA,KAAAG,MAAA,SAAA8B,GAAA,cAAAA,EAAA5B,KAAA4B,EAAA3B,MAAA,OAEtB,OAAxB+E,EAAY,IAANZ,EAAWA,EAAE,EAAIA,EAACxC,EAAA3B,KAAA,EAEXiE,GAAgBS,EAAkB,CAAC/I,GAAAA,EAAIqJ,KAAMb,EAAGY,GAAAA,IAAK,KAAD,EAA7D,OAAJrC,EAAIf,EAAAxB,KAAAwB,EAAAvB,OAAA,SACHsC,EAAKrE,IAAII,GAAiBwG,MAAK,SAACC,GAAmB,OAAKA,EAAKf,IAAMA,CAAC,KAAC,wBAAAxC,EAAAtB,OAAA,GAAAoB,EAAA,MAE7ElC,MAAA,KAAAC,UAAA,CCTD,SAAS2F,EAAeC,GAEtB,IAAMC,EAAOD,EAAQC,MAAQ,EACvBC,EAAaF,EAAQG,aAAeF,EAE1C,MAAO,CACLG,OAAQC,OAAOH,GACfI,mBAAoBN,EAAQnC,QAC5Bb,MAAOgD,EAAQhD,MACftD,QAASsG,EAAQxG,OACjB+G,SAAUP,EAAQQ,SAEtB,CAEA,SAASnH,EAAgBC,GAEvB,MAAQ,CACN/C,GAAI+C,EAAS/C,GACbyG,MAAO1D,EAAS0D,MAChBa,QAASvE,EAASmH,MAClBC,YAAapH,EAASqH,MACtB3C,OAAQ1E,EAASsH,MACjB1C,SAAU5E,EAAS0F,KACnBlB,QAA4B,IAAnBxE,EAASwE,QAClBG,QAA0B,IAAjB3E,EAAS4F,MAClBtG,MAAOU,EAASuH,KAChBlL,KAAM2D,EAAS3D,KACf2I,OAA4B,IAApBhF,EAASgF,OACjBD,KAAwB,IAAlB/E,EAAS+E,KACfyC,OAA2B,aAAnBxH,EAAS4F,MACjBV,SAAiC,IAAvBlF,EAASmF,UACnBsC,aAAa,EAGjB,CAAC,SAEcC,EAAe9E,GAAA,OAAA+E,EAAA9G,MAAC,KAADC,UAAA,UAAA6G,IAO7B,OAP6BA,GAAA5G,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAA9B,SAAAC,EAA+BY,GAA2B,IAAA4E,EAAA1C,EAAA,OAAAhD,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAElB,OAAhCoF,EAAUD,EAAe3E,GAAOV,EAAAE,KAAA,EAEnBiE,GAAgBqC,EAAelB,GAAS,KAAD,EAAhD,OAAJ1C,EAAI5C,EAAAK,KAAAL,EAAAM,OAAA,SACHsC,EAAKrE,IAAII,IAAgB,wBAAAqB,EAAAO,OAAA,GAAAT,EAAA,MAEjCL,MAAA,KAAAC,UAAA,CCjFM,IAAMkB,EAAiB6F,aAAaC,QAAQ,WAAa,yBAEnDF,EAAwBC,aAAaC,QAAQ,kBAAoB,gBACjEtC,EAAuBqC,aAAaC,QAAQ,iBAAmB,oBAC/D9B,EAA2B6B,aAAaC,QAAQ,qBAAuB,kBACvE7F,EAAmB4F,aAAaC,QAAQ,aAAe,4BACvD5E,EAAoB2E,aAAaC,QAAQ,cAAgB,wBACzDtG,EAAqBqG,aAAaC,QAAQ,eAAiB,kBAC3D7D,GAAsB4D,aAAaC,QAAQ,gBAAkB,2BAC7DxE,GAAwBuE,aAAaC,QAAQ,kBAAoB,0BACjErE,GAAsBoE,aAAaC,QAAQ,gBAAkB,YA4B7D1F,IA3ByByF,aAAaC,QAAQ,kBAC1BD,aAAaC,QAAQ,aA0BxB,SAACC,EAAsBjG,GACnD,IAAKA,EACH,MAAO,GAET,IAAIkG,EAAe,IAAIC,gBACvB,IAAK,IAAI/J,KAAO4D,EAAQ,CACtB,IAAMzD,EAAQ6J,QAAQC,IAAIrG,EAAQ5D,QACpBkK,IAAV/J,GACF2J,EAAaK,OAAOnK,EAAKG,EAC7B,CAEA,IAAIiK,EAAMN,EAAaO,WACvB,OAAID,EAAIE,OAAS,EACRT,EAAeO,EAEf,EACX,GAEa/G,GAAoB,eAAAuB,GAAA/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAA8B,EAAOvG,EAAasF,EAAasB,GAAY,IAAAJ,EAAAhD,EAAAyI,EAAAC,EAAA,OAAA1H,EAAAA,EAAAA,KAAAG,MAAA,SAAA8B,GAAA,cAAAA,EAAA5B,KAAA4B,EAAA3B,MAAA,OAEnB,OAAxD0B,EAAO,GAAAvG,OAAMuF,EAAM,KAAAvF,OAAID,GAAGC,OAAG2F,GAAe,IAAKN,IAAOmB,EAAA3B,KAAA,EACrCqH,IAAW3F,GAAS,KAAD,EAA5B,OAARhD,EAAQiD,EAAAxB,KAAAwB,EAAA3B,KAAA,EACWtB,EAAS0I,OAAO,KAAD,EAExC,GAA8B,kBAF1BD,EAAYxF,EAAAxB,MAId,IACEiH,EAAO5J,KAAKC,MAAM0J,EACpB,CAAE,MAAOxK,GACPyK,EAAOE,EAAgBH,EACzB,MAEAC,EAAOD,EACR,OAAAxF,EAAAvB,OAAA,SACMgH,GAAI,wBAAAzF,EAAAtB,OAAA,GAAAoB,EAAA,KACZ,gBAjBgCmD,EAAAC,EAAA0C,GAAA,OAAA/F,EAAAjC,MAAA,KAAAC,UAAA,KAmBpByE,GAAe,eAAAuD,GAAA/H,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAA8H,EAAOvM,EAAasF,EAAakH,GAAkB,IAAAhG,EAAAhD,EAAA,OAAAgB,EAAAA,EAAAA,KAAAG,MAAA,SAAA8H,GAAA,cAAAA,EAAA5H,KAAA4H,EAAA3H,MAAA,OAQ7E,OANC0B,EAAO,GAAAvG,OAAMuF,EAAM,KAAAvF,OAAID,GAAGC,OAAG2F,GAAe,IAAKN,IAEhDkH,IACHA,EAAO,CACLxG,KAAM,OACNC,YAAa,gBACdwG,EAAA3H,KAAA,EAEoBS,MAAMiB,EAASgG,GAAM,KAAD,EAA7B,OAARhJ,EAAQiJ,EAAAxH,KAAAwH,EAAA3H,KAAA,EACDtB,EAAS0I,OAAO,KAAD,SAAAO,EAAAvH,OAAA,SAAAuH,EAAAxH,MAAA,wBAAAwH,EAAAtH,OAAA,GAAAoH,EAAA,KAE7B,gBAb2BG,EAAAC,EAAAC,GAAA,OAAAN,EAAAjI,MAAA,KAAAC,UAAA,KC/CfuI,IAAaC,EAAAA,EAAAA,IACxB,eAAavI,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MACb,SAAAC,IAAA,OAAAF,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAEeX,IAAe,KAAD,SAAAS,EAAAM,OAAA,SAAAN,EAAAK,MAAA,wBAAAL,EAAAO,OAAA,GAAAT,EAAA,MAKlBqI,IAAUD,EAAAA,EAAAA,IACrB,cAAa,eAAAR,GAAA/H,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MACb,SAAA8B,EAAOjB,EAAqBgB,GAAA,OAAA9B,EAAAA,EAAAA,KAAAG,MAAA,SAAA8B,GAAA,cAAAA,EAAA5B,KAAA4B,EAAA3B,MAAA,OAAY,OAAAwB,EAAR0G,SAAQvG,EAAA3B,KAAA,EAEhCM,EAAWE,GAAQ,KAAD,SAAAmB,EAAAvB,OAAA,SACjBf,KAAc,wBAAAsC,EAAAtB,OAAA,GAAAoB,EAAA,KAEtB,gBAAAH,EAAAsD,GAAA,OAAA4C,EAAAjI,MAAA,KAAAC,UAAA,EANY,IASF2I,IAAWH,EAAAA,EAAAA,IACtB,gBAAcvI,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MACd,SAAA8H,IAAA,OAAA/H,EAAAA,EAAAA,KAAAG,MAAA,SAAA8H,GAAA,cAAAA,EAAA5H,KAAA4H,EAAA3H,MAAA,cAAA2H,EAAA3H,KAAA,EAEeuB,IAAc,KAAD,SAAAoG,EAAAvH,OAAA,SAAAuH,EAAAxH,MAAA,wBAAAwH,EAAAtH,OAAA,GAAAoH,EAAA,MAKxBW,GAAc,SAAHC,GAAuC,IAAjCC,EAAKD,EAALC,MAErB,OAAKA,GACgB,YAAjBA,EAAMC,MAGZ,EAcMC,IAAQC,EAAAA,EAAAA,IAAY,CACxBlG,KAAM,QACNmG,aAvDgC,CAChCH,OAAQ,OACRI,QAAQ,GAsDRC,SAAU,CACV,EACAC,cAAe,SAACC,GACdA,EACGC,QAAQd,GAAQe,SAAS,SAACC,GACzBA,EAAMV,OAAS,iBACRU,EAAMrL,KACf,IACCmL,QAAQd,GAAQiB,WAAW,SAACD,EAAKE,GAA0C,IAAtCC,EAAOD,EAAPC,QACpCH,EAAMV,OAAS,UACfU,EAAMrK,OAASwK,EAAQxK,OACvBqK,EAAMlK,SAAWqK,EAAQrK,SACzBkK,EAAMhK,SAAWmK,EAAQnK,SACzBgK,EAAMN,QAAS,SACRM,EAAMrL,KACf,IACCmL,QAAQd,GAAQoB,UAAU,SAACJ,EAAKK,GAAiB,IAAb1L,EAAK0L,EAAL1L,MACnCqL,EAAMV,OAAS,QACfU,EAAMrL,MAAa,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOC,OACvB,IAECkL,QAAQZ,GAASa,SAAS,SAACC,GAC1BA,EAAMV,OAAS,iBACRU,EAAMrL,KACf,IACCmL,QAAQZ,GAASe,WAAW,SAACD,GAC5BA,EAAMV,OAAS,UACfU,EAAMN,QAAS,SAERM,EAAMrK,cACNqK,EAAMlK,gBACNkK,EAAMhK,gBACNgK,EAAMrL,KACf,IACCmL,QAAQZ,GAASkB,UAAU,SAACJ,EAAKM,GAAiB,IAAb3L,EAAK2L,EAAL3L,MACpCqL,EAAMV,OAAS,QACfU,EAAMrL,MAAa,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOC,OACvB,GACJ,IAGsB2L,GAAiChB,GAA1CiB,QAAgCnB,GAAUE,GAAnBkB,QCxFzBC,IAAe3B,EAAAA,EAAAA,IAC1B,gBAAe,eAAAzH,GAAAd,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MACf,SAAAC,EAAOY,GAA0B,IAAAoJ,EAAAC,EAAA,OAAAnK,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAY/B,GAVI4J,EAAgC,CAClCE,aAActJ,EAAOzF,KACrBgP,WAAYvJ,EAAOwJ,QACnBC,eAAgBxE,OAAOjF,EAAOyC,SAC9BiH,aAAc1J,EAAO4B,MAAM+H,cAC3BC,OAAQ,MACRC,IAAKpM,KAAKqM,MAAsB,KAAhBrM,KAAKsM,UACrB3H,OAAQpC,EAAOoD,SAAW,EAAI,GAG5BpD,EAAOgK,YACT,IAASX,EAAI,EAAGA,EAAIrJ,EAAOgK,YAAYtD,OAAQ2C,IAC7CD,EAAY,UAADzO,OAAW0O,EAAI,IAAOrJ,EAAOgK,YAAYX,GACrD,OAAA/J,EAAAE,KAAA,EAEGkC,EAAc0H,GAAa,KAAD,mBAAA9J,EAAAO,OAAA,GAAAT,EAAA,KAGjC,gBAAA0B,GAAA,OAAAf,EAAAhB,MAAA,KAAAC,UAAA,EArBc,IAsCXiL,GAAQ,SAACxB,GACbA,EAAMV,OAAS,OACfU,EAAMlO,KAAO,GACbkO,EAAMe,QAAU,GAChBf,EAAM7G,MAAQ,GACd6G,EAAMrF,UAAW,CACnB,EAEM4E,IAAQC,EAAAA,EAAAA,IAAY,CACxBlG,KAAM,WACNmG,aApEkC,CAClCH,OAAQ,OACRtF,QAAS,KACTlI,KAAM,GACNiP,QAAS,GACT5H,MAAO,KACPwB,UAAU,GA+DVgF,SAAU,CACR6B,MAAAA,GACAC,cAAe,SAACzB,EAAKzB,GAA0C,IAAtC4B,EAAO5B,EAAP4B,QACvBH,EAAMe,QAAUZ,CAClB,EACAuB,WAAY,SAAC1B,EAAK2B,GAA0C,IAAtCxB,EAAOwB,EAAPxB,QACpBH,EAAMlO,KAAOqO,CACf,EACAyB,cAAe,SAAC5B,EAAKZ,GAAgD,IAA5Ce,EAAOf,EAAPe,QACvBH,EAAMhG,QAAUmG,EAChBH,EAAM7G,MAAe,OAAPgH,QAAO,IAAPA,OAAO,EAAPA,EAAShH,MAAM+H,aAC/B,EACAW,WAAY,SAAC7B,EAAKE,GAA2C,IAAvCC,EAAOD,EAAPC,QACpBH,EAAMrF,SAAWwF,CACnB,EACA2B,SAAU,SAAC9B,EAAKK,GAA0C,IAAtCF,EAAOE,EAAPF,QAClBH,EAAMrL,MAAQwL,CAChB,GAEFP,cAAe,SAACC,GACdA,EACGC,QAAQY,GAAaX,SAAS,SAACC,GAC9BA,EAAMV,OAAS,iBACRU,EAAMrL,KACf,IACCmL,QAAQY,GAAaT,WAAW,SAACD,GAChCwB,GAAMxB,UACCA,EAAMrL,KACf,IACCmL,QAAQY,GAAaN,UAAU,SAACJ,EAAKM,GAAiB,IAAb3L,EAAK2L,EAAL3L,MACxCqL,EAAMV,OAAS,QACfU,EAAMrL,MAAa,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOC,OACvB,GACJ,IAGsBmN,GAAuCxC,GAAhDiB,QAAmCwB,GAAazC,GAAtBkB,QClG5BwB,GAAqC,CAChDC,WAAY,CACV,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,MAAO,CACLC,MAAO,YACPC,cAAe,KACfC,sBAAuB,QACvBC,8BAA+B,KAC/BC,iBAAkB,OAClBC,yBAA0B,KAE1BC,aAAc,OACdC,aAAc,MACdC,sBAAuB,OAEvBC,sBAAuB,OACvBC,oBAAqB,OACrBC,eAAgB,SAIdC,GAAa,SAAC1J,EAAc2J,GAChC,OAAO9Q,OAAOmL,aAAaC,QAAQjE,IAAS2J,CAC9C,EAYM1D,IAAQC,EAAAA,EAAAA,IAAY,CACxBlG,KAAM,UACNmG,aAZqB,WAErB,IAAIO,EAAuBiC,GAC3B,IAAK,IAAItO,KAAOqM,EAAMmC,MACpBnC,EAAMmC,MAAMxO,GAAOqP,GAAWrP,EAAKqM,EAAMmC,MAAMxO,IAGjD,OAAOqM,CACT,CAIgBkD,GACdvD,SAAU,CACRwD,KAAM,SAACnD,GACL,IAAK,IAAIrM,KAAOsO,GAAoBE,MAClCnC,EAAMmC,MAAMxO,GAAOqP,GAAWrP,EAAKsO,GAAoBE,MAAMxO,GAEjE,EACAyP,KAAM,SAACpD,EAAK1I,GAAiD,IAA7C6I,EAAO7I,EAAP6I,QACd,IAAK,IAAIxM,KAAOwM,EAAS,CACvB,IAAMrM,EAAQ0I,OAAO2D,EAAQxM,IAC7BqM,EAAMmC,MAAMxO,GAAOG,EACnB3B,OAAOmL,aAAa+F,QAAQ1P,EAAKG,EACnC,CACF,KAIoBwP,GAAqC/D,GAA9CiB,QAAkC3H,GAAY0G,GAArBkB,QCrD3B8C,IAAcxE,EAAAA,EAAAA,IACzB,kBAAgBvI,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAChB,SAAAC,IAAA,OAAAF,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACeyC,IAAgB,KAAD,SAAA3C,EAAAM,OAAA,SAAAN,EAAAK,MAAA,wBAAAL,EAAAO,OAAA,GAAAT,EAAA,MAanB6M,GAAsB,WAAH,OAAc,SAACvE,EAAewE,GAC5D,GAVwB,SAAHlL,GAA0C,IAApCmL,EAAQnL,EAARmL,SAE3B,OAAKA,GACmB,YAApBA,EAASpE,UACToE,EAASvB,MAAMlE,OAAS,EAG9B,CAGM0F,CAAkBF,KACpB,OAAOxE,EAASsE,KAEpB,CAAC,EAEKhE,IAAQC,EAAAA,EAAAA,IAAY,CACxBlG,KAAM,WACNmG,aA9BuC,CACvCH,OAAQ,OACR6C,MAAO,GACPyB,KAAM,CAAC,GA4BPjE,SAAU,CACV,EACAC,cAAe,SAACC,GACdA,EACGC,QAAQyD,GAAYxD,SAAS,SAACC,GAC7BA,EAAMV,OAAS,iBACRU,EAAMrL,KACf,IACCmL,QAAQyD,GAAYtD,WAAW,SAACD,EAAKzB,GAAmB,Ib7Df9E,EAAWoK,Ea6DX1D,EAAO5B,EAAP4B,QACxCH,EAAMV,OAAS,UACfU,EAAMmC,MAAQhC,EACdH,EAAM4D,MbhEkCnK,EagEnBuG,EAAMmC,MbhEwB0B,EagEjB,SAAA5H,GAAI,OAAIA,EAAK9C,KAAK,Eb/D1DM,EAAKqK,QAAO,SAACC,EAAUC,GACrB,IAAMC,EAAQJ,EAAOG,GAGrB,OAFKD,EAASE,KAAQF,EAASE,GAAS,IACxCF,EAASE,GAAOC,KAAKF,GACdD,CACT,GAAG,CAAC,Wa2DS/D,EAAMrL,KACf,IACCmL,QAAQyD,GAAYnD,UAAU,SAACJ,EAAK2B,GAAiB,IAAbhN,EAAKgN,EAALhN,MACvCqL,EAAMV,OAAS,QACfU,EAAMrL,MAAc,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOC,OACxB,GACJ,IAGgD8O,IAAanE,GAAhDiB,QAAgDjB,GAAtBkB,SC/BnClB,IAAQC,EAAAA,EAAAA,IAAY,CACxBlG,KAAM,WACNmG,aAzBmC,CACnC0C,MAAO,IAyBPxC,SAAU,CACRwE,KAvBS,SAACnE,EAAqB1I,GAA0E,IAAtE6I,EAAO7I,EAAP6I,QAC/BiE,EAAO7P,KAAK8P,UAAUlE,EAAQmE,MAC9BC,EAAQvE,EAAMmC,MAAMqC,WAAU,SAAAvI,GAAI,OAAIA,EAAKmI,OAASA,CAAI,IAC1D/P,EAAS,EACT2L,EAAMmC,MAAMlE,SACd5J,EAAS2L,EAAMmC,MAAMnC,EAAMmC,MAAMlE,OAAS,GAAG5J,OAAS,IACxC,IAAZkQ,EACFvE,EAAMmC,MAAM+B,KAAK,CACfI,KAAMnE,EAAQmE,KACdG,OAAQtE,EAAQsE,OAChBL,KAAAA,EACA/P,OAAAA,IAIF2L,EAAMmC,MAAMnC,EAAMmC,MAAMlE,OAAS,GAAG5J,OAASA,CAEjD,EAOIqQ,MAAO,SAAC1E,EAAKzH,GAAgD,IAA5C4H,EAAO5H,EAAP4H,QACTiE,EAAO7P,KAAK8P,UAAUlE,GAC5BH,EAAMmC,MAAQnC,EAAMmC,MAAMwC,QAAO,SAAAC,GAAG,OAAIA,EAAIR,OAASA,CAAI,GAC3D,EACAS,SAAU,SAAC7E,GACTA,EAAMmC,MAAQ,EAChB,KAIoB2C,GAAuCvF,GAAhDiB,QAAmCuE,GAAaxF,GAAtBkB,QCf5BuE,GAA0B,CACrCtS,GAAI,EACJC,MAAO,GACPoC,OAAQ,GAGJ0K,GAA4B,CAChCH,OAAQ,OACR6C,MAAO,GACPpH,KAAMiK,IAGKC,IAAWlG,EAAAA,EAAAA,IACtB,eAAc,eAAAR,GAAA/H,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MACd,SAAAC,EAAAW,EAAAiB,GAAA,IAAA2M,EAAA9I,EAAA+I,EAAAC,EAAArK,EAAAsK,EAAAC,EAAAC,EAAApD,EAAAqD,EAAAC,EAAAC,EAAA,OAAAjP,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAIsB,OAJbmO,EAAO5N,EAAP4N,QAAS9I,EAAI9E,EAAJ8E,KAAM+I,EAAK7N,EAAL6N,MAIjBC,EAAe7M,EAAf6M,gBAAevO,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAIL8D,EAAeqK,GAAS,KAAD,EAApCnK,EAAIlE,EAAAK,KAAAL,EAAAE,KAAA,gBAAAF,EAAAC,KAAA,EAAAD,EAAA8O,GAAA9O,EAAA,SAEJnC,QAAQC,MAAKkC,EAAA8O,IACb5K,EAAO,CACLrI,GAAIwS,EACJvS,MAAO,GACPoC,OAAQ,GACR,QAIiB,GAJjB8B,EAAAC,KAAA,GAIEuO,EAASF,EAEA,WAAT/I,EAAiB,CAAAvF,EAAAE,KAAA,cAEfgE,EAAKhG,MAAQ,IAAE,CAAA8B,EAAAE,KAAA,YAEZsO,EAAO,CAADxO,EAAAE,KAAA,gBAAAF,EAAAE,KAAA,GACM2E,EAAkBwJ,EAAS,GAAG,KAAD,GAA5CG,EAAMxO,EAAAK,KAAA,QAGmB,OAAvBqO,EAAQxK,EAAKhG,MAAQ,GAAE8B,EAAAE,KAAA,GACZwE,EAAmB,CAChC7I,GAAIwS,EACJnJ,KAAMwJ,EACNzJ,GAAI,OACH,KAAD,GAJFwJ,EAAMzO,EAAAK,KAAAL,EAAAE,KAAA,wBAAAF,EAAAE,KAAA,GAOYwE,EAAmB,CACnC7I,GAAIwS,EACJnJ,KAAM,EACND,GAAI,OACH,KAAD,GAJEqG,EAAKtL,EAAAK,KAKTmO,EAASlD,EAAM,GACfmD,EAASnD,EAAM5C,MAAM,GAAG,QAAA1I,EAAAE,KAAA,iBAOA,GADtBwO,EAAQ,EACRE,EAAc,KAFlBrJ,GAAQA,GAEgB,IAEpBA,EAAO,GAAC,CAAAvF,EAAAE,KAAA,SAEe,GAAzBwO,EAAqB,KAAZnJ,EAAO,GACXiJ,EAAO,CAADxO,EAAAE,KAAA,gBAAAF,EAAAE,KAAA,GACM2E,EAAkBwJ,EAAS,GAAG,KAAD,GAA5CG,EAAMxO,EAAAK,KAAA,eAAAL,EAAAE,KAAA,GAGOwE,EAAmB,CAChC7I,GAAIwS,EACJnJ,KAAMwJ,EACNzJ,GAAI2J,IACH,KAAD,GAJFH,EAAMzO,EAAAK,KAAAL,EAAAE,KAAA,iBAUM,OAFVwO,EADEF,EACM,EAEA,EAAExO,EAAAE,KAAA,GAEMwE,EAAmB,CACnC7I,GAAIwS,EACJnJ,KAAMwJ,EACNzJ,GAAI2J,IACH,KAAD,GAJEtD,EAAKtL,EAAAK,KAMLmO,EACFC,EAASnD,GAETkD,EAASlD,EAAM,GACfmD,EAASnD,EAAM5C,MAAM,IACtB,QAUJ,OALkB,IAAfxE,EAAKhG,OAAeuQ,EAAOrH,OAAS,IACtClD,EAAKhG,MAAQuQ,EAAOA,EAAOrH,OAAS,GAAG/C,GAE5B,WAATkB,GAAqBkJ,EAAOrH,OAAS,KACvCqH,EAASA,EAAO/F,OAAO,KACxB1I,EAAAM,OAAA,SAEM,CACL4D,KAAAA,EACAoK,MAAOE,EACP5L,KAAM6L,IACP,QAAAzO,EAAAC,KAAA,GAAAD,EAAA+O,GAAA/O,EAAA,UAIDnC,QAAQC,MAAM,yBAAwBkC,EAAA+O,IACtCR,EAAevO,EAAA+O,IAAQ,yBAAA/O,EAAAO,OAAA,GAAAT,EAAA,0BAG1B,gBAAA0B,EAAAsD,GAAA,OAAA4C,EAAAjI,MAAA,KAAAC,UAAA,EA3Ga,IA8GHsP,IAAiB9G,EAAAA,EAAAA,IAC5B,uBAAsB,eAAAK,GAAA5I,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MACtB,SAAA8B,EAAAmJ,GAAA,IAAAjP,EAAAqC,EAAA,OAAA0B,EAAAA,EAAAA,KAAAG,MAAA,SAAA8B,GAAA,cAAAA,EAAA5B,KAAA4B,EAAA3B,MAAA,OAAkB,OAATrE,EAAEiP,EAAFjP,GAAIqC,EAAK4M,EAAL5M,MAAK2D,EAAA3B,KAAA,EAKHwE,EAAmB,CAC9B7I,GAAIA,EACJqJ,KAAMhH,EAAQ,EACd+G,GAAI,OACH,KAAD,SAAApD,EAAAvB,OAAA,SAAAuB,EAAAxB,MAAA,wBAAAwB,EAAAtB,OAAA,GAAAoB,EAAA,KAEH,gBAAAoD,GAAA,OAAAwD,EAAA9I,MAAA,KAAAC,UAAA,EAZqB,IAelBuP,GAAc,SAAH5F,GAA+B,IAAzB6F,EAAK7F,EAAL6F,MAErB,OAAKA,GACgB,YAAjBA,EAAMzG,MAGZ,EAaa0G,GAAyB,WAAH,OAAS,SAAC/G,EAAewE,GAC1D,IAAMzD,EAAQyD,IACdwC,EAAsBjG,EAAM+F,MAAMhL,KAA1BrI,EAAEuT,EAAFvT,GAAIqC,EAAKkR,EAALlR,MACZ,GAAI+Q,GAAY9F,GACd,OAAOf,EAAS4G,GAAe,CAAEnT,GAAAA,EAAIqC,MAAAA,IAEzC,CAAC,EAEKwK,IAAQC,EAAAA,EAAAA,IAAY,CACxBlG,KAAM,QACNmG,aAAAA,GACAE,SAAU,CACR6B,MAAO,SAACxB,GACNA,EAAMjF,KAAO0E,GAAa1E,KAC1BiF,EAAMmF,MAAQ1F,GAAa0F,MAC3BnF,EAAMmC,MAAQ1C,GAAa0C,MAC3BnC,EAAMV,OAASG,GAAaH,cACrBU,EAAMrL,KACf,GAEFiL,cAAe,SAACC,GACdA,EACGC,QAAQmF,GAASlF,SAAS,SAACC,GAC1BA,EAAMV,OAAS,iBACRU,EAAMrL,KACf,IACCmL,QAAQmF,GAAShF,WAAW,SAACD,EAAKK,GAAmB,IAAfF,EAAOE,EAAPF,QACrCH,EAAMV,OAAS,UACfU,EAAMmC,MAAQhC,EAAQ1G,KACtBuG,EAAMmF,MAAQhF,EAAQgF,MACtBnF,EAAMjF,KAAOoF,EAAQpF,YAEdiF,EAAMrL,KACf,IACCmL,QAAQmF,GAAS7E,UAAU,SAACJ,EAAKM,GAAiB,IAAb3L,EAAK2L,EAAL3L,MACpCqL,EAAMV,OAAS,QACfU,EAAMrL,MAAa,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOC,OACvB,IAECkL,QAAQ+F,GAAe9F,SAAS,SAACC,GAChCA,EAAMV,OAAS,iBACRU,EAAMrL,KACf,IACCmL,QAAQ+F,GAAe5F,WAAW,SAACD,EAAKkG,GAAmB,IAAf/F,EAAO+F,EAAP/F,QAC3CH,EAAMV,OAAS,UACXa,EAAQlC,OAAS,IACnB+B,EAAMmC,MAAQnC,EAAMmC,MAAMjQ,OAAOiO,GACjCH,EAAMjF,KAAKhG,MAAQiL,EAAMmC,MAAMnC,EAAMmC,MAAMlE,OAAS,GAAG/C,UAGlD8E,EAAMrL,KACf,IACCmL,QAAQ+F,GAAezF,UAAU,SAACJ,EAAKmG,GAAiB,IAAbxR,EAAKwR,EAALxR,MAC1CqL,EAAMV,OAAS,QACfU,EAAMrL,MAAa,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOC,OACvB,GACJ,IAGsBwR,GAAiC7G,GAA1CiB,QAAgCuF,GAAUxG,GAAnBkB,QCnOzB4F,IAAgBtH,EAAAA,EAAAA,IAC3B,mBAAkB,eAAAxG,GAAA/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAClB,SAAAC,EAAOY,EAA0BD,GAAA,IAAAmM,EAAAzD,EAAA1D,EAAA6B,EAAA,OAAA1H,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAMI,OANA0M,EAAQnM,EAARmM,SAE7BzD,EAAQyD,KAEVnH,GAAgB0D,EAAMnH,QAAQsJ,MAAME,eACrB,KAAI/F,EAAe,IACtC/E,EAAO+E,aAAeA,EAAazF,EAAAE,KAAA,EAEhBoG,EAAgB5F,GAAQ,KAAD,EAAhC,OAAJ4G,EAAItH,EAAAK,KAAAL,EAAAM,OAAA,SACHgH,EAAKoB,OAAOjD,IAAa,wBAAAzF,EAAAO,OAAA,GAAAT,EAAA,KAEjC,gBAAA0B,EAAAsD,GAAA,OAAApD,EAAAjC,MAAA,KAAAC,UAAA,EAZiB,IAuBP+P,GAAwB,SAAC/O,GAA0B,OAAU,SAAC0H,EAAewE,GACxF,GATkB,SAAHlF,GAAmC,IAA7BgI,EAAUhI,EAAVgI,WAErB,OAAKA,GACqB,YAAtBA,EAAWjH,MAGjB,CAGMwG,CAAYrC,KACd,OAAOxE,EAASoH,GAAc9O,GAElC,CAAC,EAEKgI,IAAQC,EAAAA,EAAAA,IAAY,CACxBlG,KAAM,aACNmG,aArC4C,CAC5CH,OAAQ,OACR6C,MAAO,IAoCPxC,SAAU,CACR6B,MAAO,SAACxB,GACNA,EAAMmC,MAAQ,GACdnC,EAAMV,OAAS,MACjB,EACAkH,cAAe,SAACxG,EAAK2B,GAAmB,IAAfxB,EAAOwB,EAAPxB,QACjBlE,EAAO+D,EAAMmC,MAAMnG,MAAK,SAAAC,GAAI,OAAIA,EAAKvJ,KAAOyN,EAAQ+E,OAAO,IACjEjJ,EAAKiB,aAAejB,EAAKiB,YACzBjB,EAAKwK,iBAAmBtG,EAAQuG,SAClC,GAEF9G,cAAe,SAACC,GACdA,EACGC,QAAQuG,GAActG,SAAS,SAACC,GAC/BA,EAAMV,OAAS,iBACRU,EAAMrL,KACf,IACCmL,QAAQuG,GAAcpG,WAAW,SAACD,EAAKZ,GAAmB,IAAfe,EAAOf,EAAPe,QAC1CH,EAAMV,OAAS,UACfU,EAAMmC,MAAQhC,SAEPH,EAAMrL,KACf,IACCmL,QAAQuG,GAAcjG,UAAU,SAACJ,EAAKE,GAAiB,IAAbvL,EAAKuL,EAALvL,MACzCqL,EAAMV,OAAS,QACfU,EAAMrL,MAAK,GAAAzC,OAAW,OAALyC,QAAK,IAALA,OAAK,EAALA,EAAOC,QAAO,KAAA1C,OAAIuF,EAAM,KAAAvF,OAAImL,EAC/C,GACJ,IAGsBsJ,GAA2CpH,GAApDiB,QAAqC+F,GAAehH,GAAxBkB,QCnG9BmG,IAAsBC,EAAAA,EAAAA,IAAa,0BACnCC,IAAyBD,EAAAA,EAAAA,IAAa,6BACtCE,IAAiBF,EAAAA,EAAAA,IAAa,oBAAoB,SAAA/U,GAAI,MAAK,CACtEqO,QAAS,CACPrO,KAAAA,GAEH,IACYkV,IAAiBH,EAAAA,EAAAA,IAAa,oBAAoB,SAAA/U,GAAI,MAAK,CACtEqO,QAAS,CACPrO,KAAAA,GAEH,ICRK2O,GAAU,CACd8F,WAAAA,GACAR,MAAAA,GACArC,SAAAA,GACA7K,QAAAA,GACAwG,MAAAA,GACA0F,SAAAA,GACA/C,SAAAA,GACAiF,YCVcC,EAAAA,EAAAA,ICE8B,CAC5CC,YAAY,EACZrV,KAAM,KDJoC,SAAC+N,GAC3CA,EACGC,QAAQ8G,IAAqB,SAAC5G,GAC7BA,EAAMmH,YAAa,CACrB,IACCrH,QAAQgH,IAAwB,SAAC9G,GAChCA,EAAMmH,YAAa,CACrB,IACCrH,QAAQiH,IAAgB,SAAC/G,EAAOmB,GAC/BnB,EAAMlO,KAAOqP,EAAOhB,QAAQrO,IAC9B,IACCgO,QAAQkH,IAAgB,SAAChH,EAAOmB,GAC/BnB,EAAMlO,MAAQqP,EAAOhB,QAAQrO,IAC/B,GAIF,KDJWsV,IAAQC,EAAAA,EAAAA,IAAe,CAClC5G,QAAAA,GAEA6G,UAAUC,I,WGfCC,GAAkB,WAAJ,OAAUC,EAAAA,EAAAA,KAA2B,EACnDC,GAAkDC,EAAAA,GAElDC,GAAoB,SAACpH,GAChC,IAAMvB,EAAWuI,KACjB,OAAOK,EAAAA,EAAAA,UAAQ,kBAAMC,EAAAA,GAAAA,IAAmBtH,EAASvB,EAAS,GAAE,CAACuB,EAASvB,GACxE,EC6DA,GA3De,WAEb,IAAM8I,GAAWC,EAAAA,EAAAA,MACX/I,GAAWwI,EAAAA,EAAAA,MAGXtO,EADiB,IAAIuE,gBAAgBqK,EAASE,QACvBrK,IAAI,SAmBjC,OACEvL,EAAAA,EAAAA,MAAC6V,EAAAA,EAAM,CAACC,GAAG,OAAOpV,QAAQ,OAAOqV,OAAO,KAAKC,MAAM,MAAK7V,SAAA,EACtDU,EAAAA,EAAAA,KAACgV,EAAAA,EAAOI,MAAK,CACXC,GAAIC,EAAAA,GACJ1M,GAAE,IACF1H,QAtBU,WACd6K,EAASqH,GAAsB,CAAC,GAClC,EAoBuB9T,SAAC,iBAGpBU,EAAAA,EAAAA,KAACgV,EAAAA,EAAOO,OAAM,CAAC,gBAAc,sBAC7BpW,EAAAA,EAAAA,MAAC6V,EAAAA,EAAOQ,SAAQ,CAAAlW,SAAA,EACdH,EAAAA,EAAAA,MAACsW,EAAAA,EAAG,CAAC7V,UAAU,UAASN,SAAA,CAvBR,CACpB,CAAE8G,KAAM,KAAMsP,KAAK,uBACnB,CAAEtP,KAAM,KAAMsP,KAAK,uBACnB,CAAEtP,KAAM,MAAOsP,KAAK,wBACpB,CAAEtP,KAAM,OAAQsP,KAAK,yBACrB,CAAEtP,KAAM,yDAAasP,KAAM,iBAmBNxT,KAAI,SAAC6G,EAAM2E,GAAC,OACzB1N,EAAAA,EAAAA,KAACyV,EAAAA,EAAIvV,KAAI,CAAAZ,UACPU,EAAAA,EAAAA,KAACyV,EAAAA,EAAIH,KAAI,CAAC1M,GAAIG,EAAK2M,KAAMC,OAAQ5M,EAAK3C,OAASH,EAAOoP,GAAIC,EAAAA,GAAKhW,SAC5DyJ,EAAK3C,QAFK,IAAKsH,EAIT,IArBC,CACpB,CAAEtH,KAAM,OAAQsP,KAAM,yBACtB,CAAEtP,KAAM,sEAAgBsP,KAAM,wBAqBTxT,KAAI,SAAC6G,EAAM2E,GAAC,OACzB1N,EAAAA,EAAAA,KAACyV,EAAAA,EAAIvV,KAAI,CAAAZ,UACPU,EAAAA,EAAAA,KAACyV,EAAAA,EAAIH,KAAI,CAACM,KAAM7M,EAAK2M,KAAKpW,SACvByJ,EAAK3C,QAFK,IAAKsH,EAIT,QAGf1N,EAAAA,EAAAA,KAAC6V,EAAAA,EAAI,CAACjW,UAAU,SAAQN,UACtBU,EAAAA,EAAAA,KAAC8V,EAAM,WAKjB,E,4CC1DMC,GAAeC,EAAAA,YAA6C,SAAA5R,EAAwB6R,GAAG,IAAxB3W,EAAQ8E,EAAR9E,SAAU4B,EAAOkD,EAAPlD,QAAO,OACpFlB,EAAAA,EAAAA,KAAA,QACEiW,IAAKA,EACLvW,MAAO,CAAEuB,OAAQ,WACjBrB,UAAU,OACVsB,QAAS,SAACV,GACRA,EAAE0V,iBACFhV,EAAQV,EACV,EAAElB,SAEDA,GACI,IAoCT,GAjC+B,SAAH+F,GAA4C,IAAtC5C,EAAM4C,EAAN5C,OAAQG,EAAQyC,EAARzC,SAElC0K,EAAUoH,GAAkBrH,IAalC,OACErN,EAAAA,EAAAA,KAAA,OAAKN,MAAO,CAAEyW,MAAO,QAAS7W,UAC5BH,EAAAA,EAAAA,MAACc,EAAAA,EAAQ,CAACT,GAAG,uBAAuBM,SARnB,SAACC,EAAeqW,GAClB,SAAbrW,GANW,SAACqW,GAChBA,EAAMF,iBACN5I,EAAQtB,UACV,CAIIqK,CAASD,EAEb,EAI+D9W,SAAA,EACzDU,EAAAA,EAAAA,KAAA,QAAAV,SAAM,4CACNH,EAAAA,EAAAA,MAACc,EAAAA,EAASsV,OAAM,CAACF,GAAIU,GAAazW,SAAA,CAAEsD,EAAS,cAC7CzD,EAAAA,EAAAA,MAACc,EAAAA,EAASqW,KAAI,CAAAhX,SAAA,EACZU,EAAAA,EAAAA,KAACC,EAAAA,EAASC,KAAI,CAACH,SAAS,UAAU6V,KAAI,GAAA5W,OAAKuF,EAAM,kBAAAvF,OAAiByD,GAASnD,SAAC,gDAC5EU,EAAAA,EAAAA,KAACC,EAAAA,EAASC,KAAI,CAACH,SAAS,WAAW6V,KAAI,uBAAA5W,OAAyByD,GAASnD,SAAC,iDAC1EU,EAAAA,EAAAA,KAACC,EAAAA,EAASsW,QAAO,KACjBvW,EAAAA,EAAAA,KAACC,EAAAA,EAASC,KAAI,CAACH,SAAS,UAAU6V,KAAI,gBAAkBtW,SAAC,4DACzDU,EAAAA,EAAAA,KAACC,EAAAA,EAASsW,QAAO,KACjBvW,EAAAA,EAAAA,KAACC,EAAAA,EAASC,KAAI,CAACH,SAAS,OAAMT,SAAC,0CAKzC,E,WCQA,IAtDkBkX,EAAAA,EAAAA,KAJD,SAAC1J,GAChB,OAAOA,EAAMX,KACf,GAwDA,EArDwD,SAAC/J,GAEvD,IAAM2J,EAAWuI,KAEjBlW,GAAgCC,EAAAA,EAAAA,UAAS,IAAGC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAArCwG,EAAQtG,EAAA,GAAEmY,EAAWnY,EAAA,GAC5BI,GAAgCL,EAAAA,EAAAA,UAAS,IAAGM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAArCoG,EAAQnG,EAAA,GAAE+X,EAAW/X,EAAA,GAO5B,OACEQ,EAAAA,EAAAA,MAAA,OAAAG,SAAA,EACEH,EAAAA,EAAAA,MAAA,QAAMiH,KAAK,YAAYxG,UAAU,WAAWF,MAAO,CAAEiX,SAAU,QAASrX,SAAA,EACtEU,EAAAA,EAAAA,KAACG,EAAAA,EAAW,CACVX,GAAG,WACHY,KAAK,OACLC,YAAY,qBACZO,MAAOgE,EACPlE,SAAU,SAAAF,GAAC,OAAIiW,EAAYjW,EAAEG,OAAOC,MAAM,EAC1CvB,KAAK,KACLO,UAAU,QACVF,MAAO,CAAEC,YAAa,MAAOiX,KAAM,gBAErC5W,EAAAA,EAAAA,KAACG,EAAAA,EAAW,CACVX,GAAG,WACHY,KAAK,WACLC,YAAY,uCACZwW,UAAW,GACXC,aAAa,MACblW,MAAOkE,EACPpE,SAAU,SAAAF,GAAC,OAAIkW,EAAYlW,EAAEG,OAAOC,MAAM,EAC1CvB,KAAK,KACLO,UAAU,QACVF,MAAO,CAAEC,YAAa,MAAOiX,KAAM,gBAErC5W,EAAAA,EAAAA,KAAC+W,GAAAA,EAAM,CACL1X,KAAK,KACLQ,QAAQ,QACRD,UAAU,SACVsB,QAlCQ,SAACkV,GACfA,EAAMF,iBACNnK,Ed8C2B,SAACnH,EAAkBE,GAAgB,OAAU,SAACiH,EAAewE,GAC1F,GAAItE,GAAYsE,KACd,OAAOxE,EAASD,GAAQ,CAAElH,SAAAA,EAAUE,SAAAA,IAExC,CAAC,CclDYkS,CAAgBpS,EAAUE,GACrC,EA+ByBxF,SAClB,uCAEHH,EAAAA,EAAAA,MAAA,KAAGO,MAAO,CAAEuX,OAAQ,OAAQ3X,SAAA,CAAC,8GAAqBU,EAAAA,EAAAA,KAAA,KAAG4V,KAAK,0BAAyBtW,SAAC,uBACpFU,EAAAA,EAAAA,KAAA,KAAGkX,IAAI,WAAWtB,KAAK,+CAA8CtW,SAAC,wEACtEU,EAAAA,EAAAA,KAAA,QAAMN,MAAO,CAAEuX,OAAQ,OAAQ3X,SAAC,OAChCU,EAAAA,EAAAA,KAAA,KAAGkX,IAAI,WAAWtB,KAAK,+CAA8CtW,SAAC,iFAI5E,IC9CA,GAT8B,SAAH8E,GAAuC,IAAjCxF,EAAIwF,EAAJxF,KAC/B,OAAKA,GAIHoB,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,QAAQuX,wBAAyB,CAAEC,OAAQxY,KAHnD,IAKX,ECuBA,IAzBkB4X,EAAAA,EAAAA,KAJD,SAAC1J,GAChB,OAAOA,EAAMX,KACf,GA2BA,EAxBoD,SAAH/H,GAA2D,IAQtGiT,EARiD7K,EAAMpI,EAANoI,OAAQ/J,EAAM2B,EAAN3B,OAAQG,EAAQwB,EAARxB,SAAUnB,EAAK2C,EAAL3C,MAEzEsK,EAAWuI,KAcjB,OAZAgD,EAAAA,EAAAA,YAAU,WACRvL,GhBsDyC,SAACA,EAAewE,GAC3D,GAAItE,GAAYsE,KACd,OAAOxE,EAASH,KAEpB,GgBzDE,GAAG,CAACG,IAIFsL,GADa,IAAX7K,GACKxM,EAAAA,EAAAA,KAACuX,GAAU,CAAC9U,OAAQA,EAAQG,SAAUA,KAC3B,IAAX4J,GACAxM,EAAAA,EAAAA,KAACwX,GAAS,IAEV,MAGPrY,EAAAA,EAAAA,MAAAsY,EAAAA,SAAA,CAAAnY,SAAA,CACG+X,EACA5V,IAASzB,EAAAA,EAAAA,KAAC0X,GAAS,CAAC9Y,KAAM6C,MAGjC,IC8CA,IAxDkB+U,EAAAA,EAAAA,KAVD,SAAC1J,GAEhB,IAAA6K,EAAwB7K,EAAM0D,SAE9B,MAAO,CACLvB,MAHW0I,EAAL1I,MAINyB,KAJiBiH,EAAJjH,KAMjB,GA0DA,EAvDgE,SAACtO,GAE/D,IAAM2J,EAAWuI,MAEjBgD,EAAAA,EAAAA,YAAU,WACRvL,EAASuE,KACX,GAAG,CAACvE,IAEJ,IAcQvM,EAAkD4C,EAAlD5C,GAAIkR,EAA8CtO,EAA9CsO,KAAMX,EAAwC3N,EAAxC2N,aAAc6H,EAA0BxV,EAA1BwV,SAAUlY,EAAgB0C,EAAhB1C,MAAOL,EAAS+C,EAAT/C,KAE7CwY,EAAe,GACnB,IAAK,IAAI5R,KAASyK,EAAM,CAEtB,IAAIK,GACF/Q,EAAAA,EAAAA,KAAA,YAAsB8X,MAAO7R,EAAM3G,SAChCoR,EAAKzK,GAAO/D,KAAI,SAAC6G,GAAI,OACpB/I,EAAAA,EAAAA,KAAA,UAAsBY,MAAOmI,EAAK7C,KAAK5G,SACpCyJ,EAAK3C,MADK2C,EAAKvJ,GAET,KAJEyG,GAQjB4R,EAAa7G,KAAKD,EACpB,CAEA,OACE5R,EAAAA,EAAAA,MAAC0W,EAAAA,EAAKkC,OAAM,CACVrX,SAjC0D,SAACF,GAE7D,IAAQyO,EAAoB7M,EAApB6M,MAAOvO,EAAa0B,EAAb1B,SAEf,GAAIA,EAAU,CACZ,IAAMwF,EAAO1F,EAAEwX,cAAcpX,MACvBqX,EAAMhJ,EAAMwC,QAAO,SAAA1I,GAAI,OAAIA,EAAK7C,OAASA,CAAI,IAC/C+R,EAAIlN,OAAS,EACfrK,EAASF,EAAGyX,EAAI,IAEhBvX,EAASF,EAAG,KAChB,CACF,EAsBII,MAAOgX,EACPlY,MAAOA,EACPE,UAAU,QACVP,KAAMA,EACNG,GAAIA,EAAGF,SAAA,EAEPU,EAAAA,EAAAA,KAAA,UAAQY,MAAM,GAAEtB,SAAEyQ,IACjB8H,IAGP,ICjCA,GArCe,WAEb,IAAM9L,GAAWwI,EAAAA,EAAAA,MACX2D,GAAWC,EAAAA,EAAAA,MACXtD,GAAWC,EAAAA,EAAAA,MACXzQ,EAAS+T,GAAAA,MAAkBvD,EAASE,SAE1CuC,EAAAA,EAAAA,YAAU,WACRvL,EAASuE,KACX,GAAG,CAACvE,IASJ,OACE5M,EAAAA,EAAAA,MAAA,OAAKS,UAAU,WAAUN,SAAA,EACvBU,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,cAAaN,UAC1BU,EAAAA,EAAAA,KAACqY,GAAK,OAERrY,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,eAAcN,UAC3BU,EAAAA,EAAAA,KAACsY,GAAQ,CACP9Y,GAAG,OACHuQ,aAAa,8DACb6H,SAAUtO,OAAOjF,EAAOyC,UAAY,GACpCpG,SAjBgB,SAACF,EAAGI,GAExBsX,EADEtX,EACO,sBAAD5B,OAAuB4B,EAAMsF,MAE5B,IACb,EAaQ7G,KAAK,WAMf,ECvBA,GAdgC,SAAH+E,GAAoD,IAA9CmU,EAASnU,EAATmU,UAAWC,EAAapU,EAAboU,cAE5C,OACErZ,EAAAA,EAAAA,MAAA,OAAKS,UAAU,KAAKF,MAAO,CAAE+Y,SAAU,SAAUC,IAAK,QAASpZ,SAAA,EAC7DU,EAAAA,EAAAA,KAAA,OAAKN,MAAO,CAAEiZ,cAAe,QAASrZ,SAAC,0CACvCU,EAAAA,EAAAA,KAAA,WACAA,EAAAA,EAAAA,KAAA,OAAAV,SAAK,8BACLU,EAAAA,EAAAA,KAAA,OAAAV,SAAK,QACLU,EAAAA,EAAAA,KAAA,OAAAV,SAAK,oCACLU,EAAAA,EAAAA,KAAA,OAAAV,UAAKU,EAAAA,EAAAA,KAAA,QAAMN,MAAO,CAAEuB,OAAQ,WAAaxB,MAAM,wFAAkByB,QAASsX,EAAclZ,SAAEiZ,EAAY,qEAAgB,+DAG5H,E,4CCmBA,GA5B0B,SAAHnU,GAA0C,IAApCvC,EAAKuC,EAALvC,MAAOmQ,EAAO5N,EAAP4N,QAE9B4G,EAAQ,GACZ,GAAI/W,EAAQ,IAEV,IADA,IAAIgX,EAAUjX,EAAWC,GAChB6L,EAAI,EAAGA,GAAKmL,EAASnL,IAAK,CACjC,IAAIkI,EAAI,iBAAA5W,OAAoBgT,EAAO,UAAAhT,OAAS0O,GACxC9O,OAAY,EAEdA,EADE8O,EAAI,GAAKA,EAAImL,EACR,SAEAvP,OAAOoE,GAChBkL,EAAM5H,MAAKhR,EAAAA,EAAAA,KAACsV,EAAAA,GAAI,CAAS1V,UAAU,MAAMF,MAAO,CAAEuX,OAAQ,OAASrO,GAAIgN,EAAKtW,SAAEV,GAAxD8O,GACxB,CAGF,GAAI7L,EAAQ,GAAI,CACd,IAAI+T,EAAI,iBAAA5W,OAAoBgT,EAAO,kBACnC4G,EAAM5H,MAAKhR,EAAAA,EAAAA,KAACsV,EAAAA,GAAI,CAAc1V,UAAU,MAAMF,MAAO,CAAEuX,OAAQ,OAASrO,GAAIgN,EAAKtW,SAAC,QAA7D,UACvB,CAEA,OACEU,EAAAA,EAAAA,KAAA,QAAMJ,UAAU,cAAaN,SAC1BsZ,GAGP,ECsCA,GAtCkC,SAACxW,GAEjC,IAUI0E,EAVEgS,EAAiBtE,IAAe,SAAA1H,GAAK,OAAIA,EAAMX,MAAMvJ,QAAQ,IAE/DgT,EAAI,iBAAA5W,OAAoBoD,EAAM5C,IAC9BuZ,EAAUC,KAAW,MAAO,MAAO,CACrC,KAAQ5W,EAAMP,OAAS,IACvB,SAAYO,EAAM6E,SAAW6R,EAC7B,OAAU1W,EAAM2H,SAGdkP,EAAW,sBAAAja,OAAyBoD,EAAMuH,aAE1CvH,EAAM0E,UACRA,GACE3H,EAAAA,EAAAA,MAAA,QAAMS,UAAU,gBAAeN,SAAA,EAC7BU,EAAAA,EAAAA,KAAA,QAAMJ,UAAU,MAAMF,MAAO,CAAEuX,OAAQ,WAAY3X,SAAC,OACpDU,EAAAA,EAAAA,KAACsV,EAAAA,GAAI,CAAS4B,IAAI,WAAWtX,UAAU,MAAMgJ,GAAIqQ,EAAY3Z,SAAG8C,EAAM0E,SAA5D,SAKhB,IAAIlI,EApCY,SAACA,EAAcqH,EAAe0D,GAE9C,MAAc,SAAV1D,GAAqBrH,EAAKsa,WAAW,OAGhB,QAAhBvP,GAA0B/K,EAAKsa,WAAW,OAG1B,OAAhBvP,GAAyB/K,EAAKsa,WAAW,MAG3Cta,EAFG,OAASA,EAHV,QAAUA,EAHV,QAAUA,CASrB,CAwBaua,CAAU/W,EAAMxD,KAAMwD,EAAM6D,MAAO7D,EAAMuH,aAEpD,OACExK,EAAAA,EAAAA,MAAA,OAAKS,UAAU,aAAYN,SAAA,CACxB8C,EAAM2H,SAAU/J,EAAAA,EAAAA,KAAA,KAAGJ,UAAU,uBAAuB,cAAY,OAAOF,MAAO,CAACC,YAAa,UAC7FK,EAAAA,EAAAA,KAACsV,EAAAA,GAAI,CAAC1M,GAAIgN,EAAMhW,UAAWmZ,EAAS5B,wBAAyB,CAAEC,OAAQxY,GAAQc,MAAO,CAAE0Z,aAAc,cACrGhX,EAAMqF,WAAYzH,EAAAA,EAAAA,KAAA,QAAMJ,UAAU,gBAAeN,SAAC,YACnDU,EAAAA,EAAAA,KAACqZ,GAAK,CAACxX,MAAOO,EAAMP,MAAOmQ,QAAS5P,EAAM5C,KACzC4C,EAAMmF,SAAUvH,EAAAA,EAAAA,KAAA,QAAMJ,UAAU,MAAKN,SAAC,SACtC8C,EAAMkF,OAAQtH,EAAAA,EAAAA,KAAA,QAAMJ,UAAU,MAAKN,SAAC,WACpCwH,IAIP,EC3CA,GAnBgC,SAAH1C,GAA6C,IAAvC4N,EAAO5N,EAAP4N,QAASsH,EAAQlV,EAARkV,SAEpChM,EAAUoH,GAAkBjB,IAM5B7U,EAAO0a,GACTtZ,EAAAA,EAAAA,KAAA,KAAGJ,UAAU,2BAA2B,cAAY,UACpDI,EAAAA,EAAAA,KAAA,KAAGJ,UAAU,0BAA0B,cAAY,SACvD,OACEI,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,oBAAoBsB,QARrB,WACdoM,EAAQgG,cAAc,CAACtB,QAAAA,EAASwB,UAAW,GAC7C,EAMsDlU,UAClDU,EAAAA,EAAAA,KAAA,QAAAV,SAAOV,KAIb,E,yBCRM2a,IAAY/C,EAAAA,EAAAA,KAND,SAAC1J,GAEhB,MAAO,CACLX,MAAOW,EAAMX,MAEjB,IAQMqN,GAAa,SAACtR,GAElB,OAAa,eAATA,EAA+B,GjC3B9B,SAAeuR,GACpB,IAAIC,EAAI,IAAIC,KACZ,OAAOF,EAAGG,YAAcF,EAAEE,WAAaH,EAAGI,aAAeH,EAAEG,YAAcJ,EAAGK,gBAAkBJ,EAAEI,aAClG,CiC2BMC,CADO,IAAIJ,KAAKzR,KAEX8R,EAAAA,GAAAA,IAAW9R,EAAM,UAEjB8R,EAAAA,GAAAA,IAAW9R,EAAM,WAE5B,EA2DA,GAAeqR,IAzD4C,SAAHnV,GAAqD,IAA/C4N,EAAO5N,EAAP4N,QAAS9K,EAAO9C,EAAP8C,QAAY+S,GAAIC,EAAAA,GAAAA,GAAA9V,EAAA+V,IAE/E7M,EAAUoH,GAAkBjB,IAElCrV,GAAwBC,EAAAA,EAAAA,UAAS6I,GAAQ5I,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAlC8J,EAAI5J,EAAA,GAAE8b,EAAO9b,EAAA,GACd+b,GAAaC,EAAAA,EAAAA,cAAWhX,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAC,SAAAC,IAAA,IAAA8W,EAAA,OAAAhX,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACX2E,EAAkBwJ,EAASiI,EAAKpY,OAAO,KAAD,EAAlD0Y,EAAG5W,EAAAK,KACToW,EAAQG,EAAIrS,MAAM,wBAAAvE,EAAAO,OAAA,GAAAT,EAAA,KACjB,CAACuO,EAASiI,EAAKpY,SAElByV,EAAAA,EAAAA,YAAU,WACJ2C,EAAKlQ,QACPsQ,GACJ,GAAG,CAACJ,EAAKlQ,OAAQsQ,KAEjB/C,EAAAA,EAAAA,YAAU,WACR8C,EAAQlT,EACV,GAAG,CAACA,IAEJ,IAAMsT,GAAeF,EAAAA,EAAAA,cAAY,WAC/BhN,EAAQgG,cAAc,CAACtB,QAAAA,EAASwB,UAAWyG,EAAKpY,OAClD,GAAG,CAACyL,EAAS0E,EAASiI,EAAKpY,QAE3B,OACE1C,EAAAA,EAAAA,MAAA,OAAKS,UAAU,kBAAiBN,SAAA,EAC9BU,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,aAAYN,SACxB2a,EAAKhU,SAERjG,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,eAAcN,SAC1B2a,EAAKnT,WAER3H,EAAAA,EAAAA,MAAA,OAAKS,UAAU,YAAYsB,QAASsZ,EAAalb,SAAA,EAC/CU,EAAAA,EAAAA,KAAA,KAAGJ,UAAU,mBAAmB,cAAY,OAAOF,MAAO,CAACC,YAAa,UACxEK,EAAAA,EAAAA,KAAA,QAAAV,SAAO2a,EAAKpY,YAEd7B,EAAAA,EAAAA,KAACya,GAAW,CAACzI,QAASiI,EAAKza,GAAI8Z,SAAUW,EAAKjQ,eAC9ChK,EAAAA,EAAAA,KAAC0a,IAAaC,EAAAA,GAAAA,GAAA,GAAKV,KACnB9a,EAAAA,EAAAA,MAAA,OAAKS,UAAU,cAAaN,SAAA,EAC1BU,EAAAA,EAAAA,KAAA,KAAG,cAAY,OAAOJ,UAAU,oBAAoBF,MAAO,CAACC,YAAa,SACxEsa,EAAKhT,WAERjH,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,gBAAeN,UAC5BH,EAAAA,EAAAA,MAAA,OAAKO,MAAO,CAAEkb,QAAS,QAAStb,SAAA,EAC9BU,EAAAA,EAAAA,KAAA,QAAMJ,UAAU,qBAAoBN,SAAEka,GAAWtR,MACjDlI,EAAAA,EAAAA,KAAA,QAAMJ,UAAU,qBAAoBN,SAAE2a,EAAK9S,iBAG/CnH,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,cAAaN,UAC1BU,EAAAA,EAAAA,KAACsV,EAAAA,GAAI,CAAC1M,GAAE,iBAAA5J,OAAmBib,EAAKza,GAAE,kBAAkBE,MAAO,CAAEmb,MAAO,UAAWD,QAAS,QAASE,MAAO,OAAQC,UAAW,UAAWzb,UACpIU,EAAAA,EAAAA,KAAA,KAAGJ,UAAU,oBAAoB,cAAY,eAMvD,I,WCvCA,GA3C0B,SAAHwE,GAA2C,IAArCyU,EAAOzU,EAAPyU,QAASmC,EAAM5W,EAAN4W,OAE9BnG,GAAWC,EAAAA,EAAAA,MACbmG,EAAWpG,EAASqG,SACP,MAAbD,IACFA,EAAW,cAEb,IAEIE,EAFEC,EAAiB,IAAI5Q,gBAAgBqK,EAASE,QAG9C7L,EAAOkS,EAAe1Q,IAAI,QAI9ByQ,EAHGjS,EAEa,WAATA,EACO,SAEAtC,SAASsC,EAAM,KAAO,EAJtB,EAOhB,IADA,IAAI0P,EAAQ,GACHlL,EAAI,EAAGA,GAAKmL,EAASnL,IAAK,CACjC0N,EAAeC,IAAI,OAAQ/R,OAAOoE,IAClC,IAAIkI,EAAO,IAAMqF,EAAW,IAAMG,EAAetQ,WAEjD8N,EAAM5H,MACJhR,EAAAA,EAAAA,KAACsb,GAAAA,EAAWpb,KAAI,CAACyV,OAAQwF,IAAgBzN,EAAWkI,KAAMA,EAAKtW,SAC5DoO,GAD8CA,GAGrD,CAEA,IAAe,IAAXsN,EAAiB,CACnBI,EAAeC,IAAI,OAAQ,UAC3B,IAAIzF,EAAO,IAAMqF,EAAW,IAAMG,EAAetQ,WACjD8N,EAAM5H,MAAKhR,EAAAA,EAAAA,KAACsb,GAAAA,EAAWpb,KAAI,CAACyV,OAAwB,WAAhBwF,EAAuCvF,KAAMA,EAAKtW,SAAC,QAArB,UACpE,CAEA,OACEU,EAAAA,EAAAA,KAACsb,GAAAA,EAAU,CAAC5b,MAAO,CAAEuX,OAAQ,OAAQ3X,SAClCsZ,GAIP,E,qBCuDA,GA3F+B,SAAHxU,GAAsH,IAAhH/D,EAAW+D,EAAX/D,YAAasO,EAAUvK,EAAVuK,WAAYlH,EAAQrD,EAARqD,SAAUwM,EAAU7P,EAAV6P,WAAYrV,EAAIwF,EAAJxF,KAAM2c,EAAOnX,EAAPmX,QAAS7a,EAAQ0D,EAAR1D,SAAU8a,EAAkBpX,EAAlBoX,mBAElGC,GAAcC,EAAAA,EAAAA,UAwBdC,GAAyBrB,EAAAA,EAAAA,cAAY,SAAC9Z,GACtCgb,GAAoBA,EAAmBhb,EAAEwX,cAAc4D,QAC7D,GAAG,CAACJ,IAEEK,GAAevB,EAAAA,EAAAA,cAAY,SAAC9Z,GAC5BE,GAAUA,EAASF,EAAEwX,cAAcpX,MACzC,GAAG,CAACF,IAYJ,OACEvB,EAAAA,EAAAA,MAAA,OAAAG,SAAA,EACEU,EAAAA,EAAAA,KAACG,EAAAA,EAAW,CACVkV,GAAG,WACHhV,YAAaA,EACbyb,KAAM,GAAIC,KAAM,EAChBnb,MAAOhC,EACP8B,SAAUmb,EACVG,QAlBc,SAACxb,GAEd+a,GACAA,EAAQU,SAEC,UAAVzb,EAAEC,KAAmBD,EAAE0b,SACzBX,EAAQU,QAAQE,cAAc,IAAIC,MAAM,SAAU,CAAEC,YAAY,EAAMC,SAAS,IAEnF,EAWMrG,IAAKwF,EACL7b,UAAU,oBACV,iBAAe,KAEjBT,EAAAA,EAAAA,MAAA,OAAKS,UAAU,WAAUN,SAAA,EACvBH,EAAAA,EAAAA,MAACod,GAAAA,EAAW,CAAAjd,SAAA,EACVU,EAAAA,EAAAA,KAAC+W,GAAAA,EAAM,CACL1X,KAAK,KACLQ,QAAQ,QACRqB,QA1Da,SAACV,GAEtBA,EAAE0V,iBAEF,IAGMsG,EAAef,EAAYQ,QAE3BQ,EAAQD,EAAaE,eACrBC,EAAMH,EAAaI,aAEnBC,EAAUL,EAAa5b,MACvBkc,EAAMD,EAAQ9R,OAEdgS,EAXU,SAUKF,EAAQG,UAAUP,EAAOE,GAT7B,UAWbM,EAAUJ,EAAQG,UAAU,EAAGP,GAASM,EAAcF,EAAQG,UAAUL,EAAKG,GAE7Epc,GAAUA,EAASuc,EAEzB,EAuCUvd,MAAO,CAAEC,YAAa,OACtBC,UAAU,SAAQN,SACnB,gCACDU,EAAAA,EAAAA,KAAC+W,GAAAA,EAAM,CACL1X,KAAK,KACLQ,QAAQ,QACRqd,SAAUjJ,EACV7T,KAAK,SACLR,UAAU,SAAQN,SAEjB2U,EAAa,2EAAiB,8DAGlCtF,IACC3O,EAAAA,EAAAA,KAAC6V,EAAAA,EAAKsH,MAAK,CACT3d,GAAG,cACHY,KAAK,WACLwb,QAASnU,EACT/G,SAAUib,EACV7D,MAAM,qEACNpY,MAAO,CAAEuX,OAAQ,6BAM7B,ECwFA,IAtKkBT,EAAAA,EAAAA,KARD,SAAC1J,GAEhB,MAAO,CACL0D,SAAU1D,EAAM0D,SAChB1B,SAAUhC,EAAMgC,SAEpB,GAwKA,EArKgE,SAAH1K,GAA+D,IAADgZ,EAAxD5M,EAAQpM,EAARoM,SAAU1B,EAAQ1K,EAAR0K,SAAUuO,EAAejZ,EAAfiZ,gBAErFjf,GAAqCC,EAAAA,EAAAA,UAAS,MAAKC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA5Ckf,EAAchf,EAAA,GAAEif,EAAUjf,EAAA,GACjCI,GAA0BL,EAAAA,EAAAA,UAASmf,MAAM,IAAIC,KAAK,KAAI9e,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAA/Cgf,EAAK/e,EAAA,GAAEgf,EAAQhf,EAAA,GAEhB4c,GAAUG,EAAAA,EAAAA,QAAO,MACjB3P,EAAWuI,KACXhH,EAAUoH,GAAkB7F,IAO5B+O,EAAmB,SAAClQ,GAAS,OAAK,SAAClN,GACvC,IAAIqd,EAAYH,EAAMrR,QACtBwR,EAAUnQ,GAAKlN,EAAEG,OAAOC,MACxB+c,EAASE,EACX,CAAC,EA6CKC,GAAkBxD,EAAAA,EAAAA,cAAY,SAAC9Z,GACnC8M,EAAQiB,cAAc/N,EAAEG,OAAOC,MACjC,GAAG,CAAC0M,IAEEyQ,GAAezD,EAAAA,EAAAA,cAAY,SAAC1b,GAChC0O,EAAQkB,WAAW5P,EACrB,GAAG,CAAC0O,IAEEkO,GAAqBlB,EAAAA,EAAAA,cAAY,SAACrJ,GACtC3D,EAAQqB,WAAWsC,EACrB,GAAG,CAAC3D,IAEE0Q,EAAuB,WAE3B1Q,EAAQgB,QAEJ+O,GACFA,GAEJ,EACIY,EAAa,GACjB,IAAK,IAAIhY,KAASuK,EAASE,KACzBuN,EAAWjN,MAAKhR,EAAAA,EAAAA,KAAA,UAAoBY,MAAOqF,EAAM+H,cAAc1O,SAAE2G,GAApCA,IAG/B,IAAIiY,EAAgB,GAEpB,GAAIpP,EAASrH,SAAU,CACrByW,EAAclN,MAAKhR,EAAAA,EAAAA,KAAA,OAAAV,SAAa,qDAAJ,MAC5B,IAAK,IAAIoO,EAAI,EAAGA,GAAK,GAAIA,IACvBwQ,EAAclN,MACZ7R,EAAAA,EAAAA,MAACC,EAAAA,EAAU,CAASC,KAAK,KAAKK,MAAO,CAAEsB,aAAc,MAAO8Z,MAAO,QAASxb,SAAA,EAC1EU,EAAAA,EAAAA,KAACZ,EAAAA,EAAWyB,KAAI,CACdnB,MAAO,CAAEob,MAAO,QAChBlb,UAAU,QAAON,SAAA,GAAAN,OAEb0O,EAAC,QAEP1N,EAAAA,EAAAA,KAAC6V,EAAAA,EAAKsI,QAAO,CACX/d,KAAK,OACLyW,UAAW,GACXjX,UAAU,QACVgB,MAAO8c,EAAMhQ,EAAI,GACjBhN,SAAUkd,EAAiBlQ,EAAI,OAZlBA,GAiBvB,CAEA,OACEvO,EAAAA,EAAAA,MAAA,QAAMS,UAAU,sBAAsBwe,SA9FvB,SAAC5d,GAIhB,GAFAA,EAAE0V,iBAEGoH,EAAL,CAKA,IAAIzP,EAAUiB,EAASjB,QACvB,GAAKA,EAKL,GAAKiB,EAASlQ,KAAd,CAKA,IAAIyF,EAAS,CACXwJ,QAAAA,EACAjP,KAAMkQ,EAASlQ,KACfkI,QAASwW,EAAe9d,GACxByG,MAAOqX,EAAerX,MACtBwB,SAAUqH,EAASrH,SACnB4G,YAAa,GACbgQ,UAAWL,GAGb,GAAIlP,EAASrH,SAAU,CACrBpD,EAAOgK,YAAc,GACrB,IAAK,IAAIX,EAAI,EAAGA,GAAK,GAAIA,IAAK,CAC5B,IAAIgE,EAAMgM,EAAMhQ,EAAI,GAChBgE,GACFrN,EAAOgK,YAAY2C,KAAKU,EAE5B,CACF,CAEA3F,EzBrBgC,SAAC1H,GAA0B,OAAK,SAAC0H,EAAewE,GAElF,GAVwB,SAAHlL,GAA0C,IAApCyJ,EAAQzJ,EAARyJ,SAE3B,QAAKA,GACmB,YAApBA,EAAS1C,MAGf,CAIMkS,CADU/N,KAEZ,OAAOxE,EAASyB,GAAanJ,GAEjC,CAAC,CyBgBYka,CAAqBla,GAtB9B,MAFEiJ,EAAQsB,SAAS,uHALjBtB,EAAQsB,SAAS,mFAJnB,MAFEtB,EAAQsB,SAAS,+FAoCrB,EAqD4DqH,IAAKsF,EAAQjc,SAAA,EACrEH,EAAAA,EAAAA,MAAA,OAAKK,GAAG,gBAAgBI,UAAU,iBAAgBN,SAAA,EAChDU,EAAAA,EAAAA,KAAA,OAAAV,UAAKU,EAAAA,EAAAA,KAAA,KAAAV,SAAG,+DACPwP,EAASrN,QAASzB,EAAAA,EAAAA,KAAC0X,GAAS,CAAC9Y,KAAMkQ,EAASrN,SAC7CtC,EAAAA,EAAAA,MAAA,OAAKS,UAAU,WAAWF,MAAO,CAAEsB,aAAc,OAAQ1B,SAAA,EACvDU,EAAAA,EAAAA,KAAC6V,EAAAA,EAAKkC,OAAM,CACVmF,UAAQ,EACR7d,KAAK,KACLuB,MAAOkO,EAAS7I,MAChBvG,MAAO,CAAEkX,KAAM,YACfhX,UAAU,QAAON,SAEhB2e,KAEHje,EAAAA,EAAAA,KAACsY,GAAQ,CACP9Y,GAAG,iBACHuQ,aAAa,uCACb6H,SAA0B,QAAlBwF,EAAEtO,EAAShI,eAAO,IAAAsW,OAAA,EAAhBA,EAAkBlX,KAC5B7G,KAAK,KACLK,MAAO,CAAEkX,KAAM,YACflW,SA7Hc,SAACF,EAAQsG,GAC/ByW,EAAWzW,GACXwG,EAAQoB,cAAc5H,EACxB,QA6HM9G,EAAAA,EAAAA,KAAC6V,EAAAA,EAAKsI,QAAO,CACX/d,KAAK,OACLf,KAAK,KACLuB,MAAOkO,EAASjB,QAChBnN,SAAUod,EACVpe,MAAO,CAAEsB,aAAc,OACvBpB,UAAU,QACVS,YAAY,2BACZwW,UAAW,MAEb7W,EAAAA,EAAAA,KAACwe,GAAU,CACTne,YAAY,yDACZsO,YAAY,EACZlH,SAAUqH,EAASrH,SACnB7I,KAAMkQ,EAASlQ,KACfqV,WAAgC,YAApBnF,EAAS1C,OACrB1L,SAAUqd,EACVvC,mBAAoBA,EACpBD,QAASA,QAGbvb,EAAAA,EAAAA,KAACye,GAAAA,EAAS,CAAC7e,UAAU,mBAAkBN,SACpC4e,MAIT,I,WC5IA,GApCmC,SAAH9Z,GAAoE,IAA9D4N,EAAO5N,EAAP4N,QAAS0M,EAAOta,EAAPsa,QAASC,EAAMva,EAANua,OAAQC,EAAMxa,EAANwa,OAAQC,EAAMza,EAANya,OAEhEvR,EAAUoH,GAAkBjB,IAMlC,OACEtU,EAAAA,EAAAA,MAAA,OAAKS,UAAU,uBAAsBN,SAAA,EACnCU,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,kCAAkCsB,QAASwd,EAASjf,MAAM,oDAAWH,UAClFU,EAAAA,EAAAA,KAAA,KAAGJ,UAAU,0BAA0B,cAAY,YAErDI,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,kCAAkCsB,QAASyd,EAAQlf,MAAM,4EAAeH,UACrFU,EAAAA,EAAAA,KAAA,KAAGJ,UAAU,mBAAmB,cAAY,YAE9CI,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,kCAAkCsB,QAAS0d,EAAQnf,MAAM,sEAAcH,UACpFU,EAAAA,EAAAA,KAAA,KAAGJ,UAAU,oBAAoB,cAAY,YAE/CI,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,kCAAkCsB,QAAS2d,EAAQpf,MAAM,sEAAcH,UACpFU,EAAAA,EAAAA,KAAA,KAAGJ,UAAU,2BAA2B,cAAY,YAEtDT,EAAAA,EAAAA,MAAA,OAAKS,UAAU,qCAAqCsB,QAlBnC,WACnBoM,EAAQgG,cAAc,CAACtB,QAAAA,EAASwB,UAAW,GAC7C,EAgB8ElU,SAAA,EACxEU,EAAAA,EAAAA,KAAA,KAAGJ,UAAU,oBAAoB,cAAY,UAC7CI,EAAAA,EAAAA,KAAA,KAAGJ,UAAU,mBAAmB,cAAY,OAAOF,MAAO,CAACoB,WAAY,cAEzEd,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,oCAAmCN,UAChDU,EAAAA,EAAAA,KAACsV,EAAAA,GAAI,CAAC1M,GAAE,iBAAA5J,OAAmBgT,EAAO,kBAAiB1S,UACjDU,EAAAA,EAAAA,KAAA,KAAGJ,UAAU,eAAe,cAAY,OAAOF,MAAO,CAACmb,MAAM,6BAMvE,E,WCwOA,ICtQIiE,GDsQJ,GAxRA,SAAmBlgB,GAEjB,IA0BImgB,EACAC,EACAC,EA5BEC,EAAW,IAAIC,IACnB,gvDAQGC,MAAM,MAGLC,EAAa,IAAIF,IAAI,oBAAoBC,MAAM,KAC/CE,EAAa,eACbC,EAAY,UAEZC,EAAY,MACZC,EAAa,OACbC,EAAc,OAKdC,EAAuB,OAOzBC,GAAU,EACVC,EAAQ,GAEZ,SAASC,EAAaC,GACpB,MAAyB,KAAlBA,EAAOC,MAChB,CAEA,SAASC,EAAKF,EAAgBG,EAAaC,GACzC,OAAOJ,EAAO/C,UAAUkD,EAAM,EAAGA,EAAK,EAAIC,EAC5C,CAEA,SAASC,EAAKL,EAAgBI,GAC5B,OAAOJ,EAAO/C,UAAU+C,EAAOhV,OAASoV,EAC1C,CAEA,SAASE,EAAUC,GACjB,OAAOpB,EAASqB,IAAID,EAAMtS,cAAcgS,OAC1C,CAEA,SAASQ,EAAsBC,EAAeC,GAE9B,MAAVD,GAAiBxB,IAAkByB,EACrC3B,GAAoC0B,GAEhCzB,IACFD,GAAoCQ,EACpCP,GAAiB,GAGnBD,EAAkBA,EAAkBO,EAAaoB,EAAOD,EACxDzB,GAAiB,EACjBC,EAAgByB,EAEpB,CAEA,SAASC,EAAkBC,GAGzB,IAAIC,GAAgB,EAChBC,GAAgB,EAChBC,EAAe,EACfC,GAAe,EAIfC,EAAM,EACV,IAAKA,EAAM,EAAGA,GAAOL,EAAW7V,OAAQkW,IAAO,CAE7C,IAAIC,EAAgBN,EAAWO,OAAOF,EAAM,GAC5C,GAAIrB,EAGoB,MAAlBsB,GAEFV,EAAsBP,EAAKW,EAAYG,EAAcE,EAAMF,EAAe,GAAIrB,GAC9EE,GAAU,EACVC,EAAQ,GACRmB,GAAe,GAEfnB,GAAgBqB,OAGb,GAAIL,EAGa,MAAlBK,GAEFV,EAAsBP,EAAKW,EAAYG,EAAcE,EAAMF,EAAe,GAAIrB,GAC9EmB,GAAgB,EAChBhB,EAAQ,GACRmB,GAAe,GAEfnB,GAAgBqB,OAGb,GAAsB,MAAlBA,EAEJpB,EAAaD,GAkBhBd,GAAoC,KAfhC+B,GACFN,EAAsBX,EAAQ,IAAKH,GACnCoB,GAAgB,GAEPT,EAAUR,EAAMG,QACzBQ,EAAsBX,EAAQ,IAAKF,GAEzByB,MAAMxa,SAASiZ,EAAO,KAIhCW,EAAsBX,EAAQ,IAAKL,GAHnCgB,EAAsBX,EAAQ,IAAKJ,GAKrCI,EAAQ,IAIVmB,GAAe,OAEV,GAAI3B,EAAWkB,IAAIW,GAAgB,CA6BxC,GA1BKpB,EAAaD,KAGZiB,GAEFN,EAAsBX,EAAOH,GAC7BoB,GAAgB,EAChBE,EAAkC,MAAlBE,GAEPF,GAAgBX,EAAUR,IACnCW,EAAsBX,EAAOF,GAC7BqB,EAAkC,MAAlBE,IAIXE,MAAMxa,SAASiZ,EAAO,KAIzBW,EAAsBX,EAAOL,GAH7BgB,EAAsBX,EAAOJ,GAK/BuB,EAAkC,MAAlBE,GAElBrB,EAAQ,IAGY,MAAlBqB,GAAyBjC,IAAkBQ,EAAY,CAEzDe,EAAsBU,EAAezB,GACrC,QAEF,CAAO,GAAsB,MAAlByB,GAA0D,MAAjCjB,EAAKW,EAAYK,EAAM,EAAG,GAE5DhC,OAAgBtU,OAEX,GAAsB,MAAlBuW,GAA0D,MAAjCjB,EAAKW,EAAYK,EAAM,EAAG,GAG5D,YADAT,EAAsBJ,EAAKQ,EAAYA,EAAW7V,OAASkW,EAAM,GArJhD,QAwJnBT,EAAsBU,EAvJH,MAyJrB,MAAO,GAAsB,MAAlBA,GAA2C,MAAlBA,EAI9BpB,EAAaD,IACfkB,EAAeE,EACfrB,GAAU,IAGVY,EAAsBX,EAAQqB,EAAexB,GAC7CG,EAAQ,IAEVmB,GAAe,OAEV,GAAsB,MAAlBE,EAILpB,EAAaD,IACfkB,EAAeE,EACfJ,GAAgB,IAGhBL,EAAsBX,EAAQqB,EAAexB,GAC7CG,EAAQ,IAEVmB,GAAe,MAEV,IAAsB,MAAlBE,GAA4C,MAAlBA,GAAyBpB,EAAaf,GAAmB,CAG5FyB,EAAsBJ,EAAKQ,EAAYA,EAAW7V,OAASkW,EAAM,GAvL5C,OAwLrBA,EAAML,EAAW7V,OACjB,KAEF,CAA6B,MAAlBmW,GACTrB,GAAgBqB,EAChBJ,GAAgB,GAGhBjB,GAAgBqB,CAClB,CACF,CAEItB,GAKOiB,EAFTL,EAAsBP,EAAKW,EAAYG,EAAcE,EAAMF,EAAe,GAAIrB,GAOpEI,EAAaD,KAGnBQ,EAAUR,GACZW,EAAsBX,EAAOF,GAEnByB,MAAMxa,SAASiZ,EAAO,KAIhCW,EAAsBX,EAAOL,GAH7BgB,EAAsBX,EAAOJ,GAQnC,CAEAG,GAAU,EACVC,EAAQ,GACRb,GAAiB,EACjBC,OAAgBtU,EAChBoU,EAAkB,GAElB,IAEuCsC,EAFnCzb,EAAS,GAAG0b,GAAAC,EAAAA,GAAAA,GAEO3iB,EAAKwgB,MAAM,OAAK,IAAvC,IAAAkC,EAAAE,MAAAH,EAAAC,EAAAtZ,KAAAyZ,MAAyC,CAAC,IAAjCb,EAAUS,EAAAzgB,MAEbkf,EAAac,GACfhb,EAAOoL,KAAK,KAId+N,EAAkB,GAClB4B,EAAkBC,GACd5B,IAAmBY,GACrBb,GAAmB,UACnBC,GAAiB,EACjBC,EAAgB,GAChBY,EAAQ,IACED,IACVX,EAAgB,GAChBY,EAAQ,IAGVja,EAAOoL,KAAK+N,GACd,CAAC,OAAA2C,GAAAJ,EAAA9gB,EAAAkhB,EAAA,SAAAJ,EAAAK,GAAA,CAED,OAAO/b,EAAOgc,KAAK,KACrB,EEnMA,GAzDiB,SAAHxd,GAAoC,IAA9B9E,EAAQ8E,EAAR9E,SAElBlB,GAA4BC,EAAAA,EAAAA,WAAS,GAAKC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAnCyjB,EAAMvjB,EAAA,GAAEwjB,EAASxjB,EAAA,GAEpBM,EAAe,GACfU,IAKFV,EAhCgB,SAACA,GAWnB,IARA,IAAImjB,EAAUnjB,EACX2C,QAAQ,UAAW,MACnBA,QAAQ,UAAW,MACnBA,QAAQ,UAAW,MACnBA,QAAQ,UAAW,MACnBA,QAAQ,QAAS,MAGE,OAAfwgB,EAAQ,IACbA,EAAUA,EAAQ/E,UAAU,GAG9B,KAAiD,OAA1C+E,EAAQ/E,UAAU+E,EAAQhX,OAAS,IACxCgX,EAAUA,EAAQ/E,UAAU,EAAG+E,EAAQhX,OAAS,GAGlD,OAAOiX,GAAUD,EACnB,CAYWE,CAFPrjB,EADgBqD,EAAe3C,GAChBsiB,KAAK,MAKtB,IAIIM,EACAC,EAAa,EACbvjB,IACFujB,EAAavjB,EAAKwgB,MAAM,MAAMrU,QAG9BmX,EADEL,EACQ,qDAAA7iB,OAAgBmjB,EAAU,mCAEvB,uCAEf,IAAIC,EAAkC,KAClCD,EAAa,IACfC,GACEpiB,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,oBAAmBN,UAChCU,EAAAA,EAAAA,KAAA,QAAMJ,UAAU,qBAAqBsB,QAlBvB,WAClB4gB,GAAWD,EACb,EAgBgEviB,SAAE4iB,OAIlE,IAAIG,EAAgC,CACpC,EAUA,OARIR,GAAUM,EAAa,GACzBE,EAASC,SAAW,SACpBD,EAASE,OAAS,UAElBF,EAASC,SAAW,OACpBD,EAASE,OAAS,SAIlBpjB,EAAAA,EAAAA,MAAA,OAAKO,MAAO,CAAEqB,UAAW,OAAQzB,SAAA,EAC/BU,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,WAAWF,MAAO2iB,EAAUlL,wBAAyB,CAAEC,OAAQxY,KAE7EwjB,IAKP,EC2BA,GAhG+B,SAAChgB,GAE9B,IAAMogB,GAAW9G,EAAAA,EAAAA,QAAO,MAClBpO,EAAUoH,GAAkB9C,IAE5B6Q,EAAiBjO,IAAe,SAAA1H,GAAK,IAAAiG,EAAA,OAAoB,QAApBA,EAAIjG,EAAM+F,MAAMhL,YAAI,IAAAkL,OAAA,EAAhBA,EAAkBvT,EAAE,IAC7DiQ,EAAe+E,IAAe,SAAA1H,GAAK,OAAKA,EAAMnH,QAAQsJ,MAAMQ,YAAY,IAE1EiT,EAAc,GAIhBA,EAHGtgB,EAAM9C,SAGK2C,EAAeG,EAAM9C,UAAUsiB,KAAK,IAFpCtY,OAAOlH,EAAMC,QAI7B,IAAAjE,GAAwBC,EAAAA,EAAAA,UAASqkB,GAAYpkB,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAtCQ,EAAIN,EAAA,GAAEO,EAAOP,EAAA,IAEpBgZ,EAAAA,EAAAA,YAAU,WAER,GAAKoL,EAAYxJ,WAAW,QAA5B,CAEA,IAAMyJ,EAAG,eAAAve,GAAAd,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAC,IAAA,IAAAmf,EAAA,OAAArf,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACc8D,EAAevF,EAAM4P,SAAS,KAAD,EAA/C4Q,EAASjf,EAAAK,KACfnF,EAAQ+jB,EAAUnjB,OAAM,wBAAAkE,EAAAO,OAAA,GAAAT,EAAA,KACzB,kBAHQ,OAAAW,EAAAhB,MAAA,KAAAC,UAAA,KAKTsf,GAP2C,CAS7C,GAAG,CAACD,EAAatgB,EAAM4P,UAEvB,IAAM6Q,EAAc,SAACriB,GACnBA,EAAEsiB,UACFN,EAASvG,QAAUhd,OAAO8jB,YAAW,kBAAMC,EAAYxiB,EAAE,GAAEiP,EAC7D,EAEMwT,EAAa,WACbT,EAASvG,SACXiH,aAAaV,EAASvG,QAC1B,EAEM/a,EAAU,SAACV,GACfA,EAAE2iB,kBACEX,EAASvG,SACXiH,aAAaV,EAASvG,SACxB+G,EAAYxiB,EACd,EAEMwiB,EAAc,SAACxiB,GAEnB,IAAQwR,EAAoB5P,EAApB4P,QAAS3P,EAAWD,EAAXC,OAEXkP,EAAS,CACb7K,EAAGlG,EAAE4iB,MACLC,EAAG7iB,EAAE8iB,MAAQ,IAGTlS,EAAqB,CACzBY,SAAUA,EACV3P,QAASA,GAGXiL,EAAQ2D,KAAK,CAAEG,KAAAA,EAAMG,OAAAA,GAEvB,EAEA,GAAKnP,EAAM4P,UAAYyQ,GAAoBrB,OAAOxiB,GAU7C,CACH,IAAMsK,EAAOtH,EAAWQ,EAAMC,QAE1BkhB,EAAY,GAIhB,OAHIra,EAAO,IACTqa,EAAS,SAAAvkB,OAAYkK,KAGrB/J,EAAAA,EAAAA,MAAA,QAAAG,SAAA,EACEU,EAAAA,EAAAA,KAAA,KAAG4V,KAAI,kBAAA5W,OAAoBoD,EAAM4P,SAAOhT,OAAGukB,EAAS,KAAAvkB,OAAIoD,EAAMC,QAC5D3C,OAAKib,EAAAA,GAAAA,GAAA,GAAOvY,EAAM1C,OAAQJ,SAC1BV,IAAU,IAAI,KACfoB,EAAAA,EAAAA,KAAA,QAAM6iB,YAAaA,EAClBI,WAAYA,EACZ/hB,QAASA,EACTtB,UAAU,OAAMN,SAChB8C,EAAMC,SAAc,MAG5B,CA5BE,OACErC,EAAAA,EAAAA,KAAA,QACE6iB,YAAaA,EACbI,WAAYA,EACZ/hB,QAASA,EACTtB,UAAU,OACVF,OAAKib,EAAAA,GAAAA,GAAA,GAAOvY,EAAM1C,OAAQJ,SAC1BV,GAsBR,E,sBCjGA,GAJ+B,SAAHwF,GAA0C,IAApCwR,EAAIxR,EAAJwR,KAAMtW,EAAQ8E,EAAR9E,SACtC,OAAOU,EAAAA,EAAAA,KAAA,KAAG4V,KAAMA,EAAMhW,UAAU,kBAAiBN,SAAEA,GACrD,ECFMkkB,GAAa,SAAC5N,GAElB,IAAI6N,EAAW7N,GACc,IAAzBA,EAAKb,OAAO,UAAgB0O,EAAW,UAAYA,GAEvD,IACE,IAAI1kB,EAAM,IAAI2kB,IAAID,EACpB,CAAE,MAAOjjB,GACP,OAAO,IACT,CAEA,OAAwC,IAApCzB,EAAI4kB,SAAS5O,OAAO,WACfhW,EAAIwL,aAAaG,IAAI,MAEmB,IAAtC3L,EAAI4kB,SAAS5O,OAAO,aACtBhW,EAAImc,SAAS8B,UAAU,GAGzB,IACT,EAQM4G,GAAc,eAAAxf,GAAAd,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAC,EAAOogB,GAAe,IAAAC,EAAAC,EAAAxhB,EAAA0I,EAAAxL,EAAAukB,EAAA,OAAAzgB,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAGoF,OADzHigB,EAAS1Z,aAAaC,QAAQ,kBAAoB,0CACpD0Z,EAAM,oDAAA/kB,OAAuD8kB,EAAM,kDAAA9kB,OAAiD6kB,GAAOlgB,EAAAE,KAAA,EACxGS,MAAMyf,GAAQ,KAAD,EAAtB,OAARxhB,EAAQoB,EAAAK,KAAAL,EAAAE,KAAA,EACKtB,EAAS0I,OAAO,KAAD,EAAxB,GAEgB,KAFpBA,EAAItH,EAAAK,MAEDiL,MAAMlE,OAAY,CAAApH,EAAAE,KAAA,gBAAAF,EAAAM,OAAA,SAClB,CACL+f,SAAU,GACVvkB,MAAO,GACPwkB,UAAU,IACX,QAOkD,OAL/CxkB,EAAQwL,EAAKgE,MAAM,GAAGiV,QAAQzkB,MAEhCukB,EAAWvkB,EACC,GACZA,EAAMsL,OAAS8L,KACjBmN,EAAWA,EAAShH,UAAU,EAFhB,IAEgC,OAAKrZ,EAAAM,OAAA,SAE9C,CACL+f,SAAAA,EACAvkB,MAAAA,EACAwkB,UAAU,IACX,yBAAAtgB,EAAAO,OAAA,GAAAT,EAAA,KACF,gBA1BmB0B,GAAA,OAAAf,EAAAhB,MAAA,KAAAC,UAAA,KAwEpB,GA5CgC,SAAHgC,GAAgC,IAA1BuQ,EAAIvQ,EAAJuQ,KAEjCxX,GAA8BC,EAAAA,EAAAA,UAASuX,GAAKtX,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAvC4lB,EAAQ1lB,EAAA,GAAE6lB,EAAW7lB,EAAA,GAC1BI,GAAwBL,EAAAA,EAAAA,UAAS,IAAGM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAA/Be,EAAKd,EAAA,GAAEylB,EAAQzlB,EAAA,IAEpB2Y,EAAAA,EAAAA,YAAU,WAER,IAAI+M,GAAY,EACV1B,EAAG,eAAAtX,GAAA/H,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAA8B,IAAA,IAAAue,EAAAxf,EAAA,OAAAd,EAAAA,EAAAA,KAAAG,MAAA,SAAA8B,GAAA,cAAAA,EAAA5B,KAAA4B,EAAA3B,MAAA,OAEuB,GAA3BggB,EAAUL,GAAW5N,GACd,CAADpQ,EAAA3B,KAAA,eAAA2B,EAAAvB,OAAA,wBAAAuB,EAAA5B,KAAA,EAAA4B,EAAA3B,KAAA,EAKW+f,GAAeC,GAAS,KAAD,EAAtCxf,EAAMmB,EAAAxB,KAERqgB,IACEhgB,EAAO4f,SACTE,EAAYvO,EAAO,8FAEnBuO,EAAY9f,EAAO2f,UACnBI,EAAS/f,EAAO5E,SAEnB+F,EAAA3B,KAAA,iBAAA2B,EAAA5B,KAAA,GAAA4B,EAAAiN,GAAAjN,EAAA,SAGDhE,QAAQC,MAAM,UAAWoiB,EAASre,EAAAiN,GAAE/Q,SAAS,yBAAA8D,EAAAtB,OAAA,GAAAoB,EAAA,mBAEhD,kBAtBQ,OAAA+F,EAAAjI,MAAA,KAAAC,UAAA,KA0BT,OAFAsf,IAEO,WAAO0B,GAAY,CAAK,CAEjC,GAAG,CAACzO,IAGJ,OACE5V,EAAAA,EAAAA,KAAA,KAAG4V,KAAMA,EAAMnW,MAAOA,EAAMH,SAAA,GAAAN,OAFf,UAE0B,MAAAA,OAAKglB,IAEhD,EC2DA,IAhFkBxN,EAAAA,EAAAA,KAfD,SAAC1J,GAEhB,IAAAwX,EAIIxX,EAAMnH,QAAQsJ,MAElB,MAAO,CACLU,sBANqB2U,EAArB3U,sBAOAC,oBANmB0U,EAAnB1U,oBAOAC,eANcyU,EAAdzU,eAQJ,GAkFA,EA/EkE,SAACzN,GAEjE,IAAQwT,EACyDxT,EADzDwT,KAAMtW,EACmD8C,EADnD9C,SAAUilB,EACyCniB,EADzCmiB,WACtB5U,EAA+DvN,EAA/DuN,sBAAuBC,EAAwCxN,EAAxCwN,oBAAqBC,EAAmBzN,EAAnByN,eAE9C,IACE,IAAI9Q,EAAM,IAAI2kB,KAAJ,CAAQ9N,GAAM,EAC1B,CAAE,MAAOpV,GAEP,OADAgB,QAAQC,MAAOjB,EAAYkB,QAASkU,IAC7B5V,EAAAA,EAAAA,KAAA,KAAG4V,KAAMA,EAAKtW,SAAEsW,GACzB,CAEA,IA3CiB+N,EA2Cba,EAAU5O,EAOd,GANI4O,EAAQtL,WAAW,OACrBna,EAAIsc,IAAI,WAAY,SACpBtc,EAAIsc,IAAI,WAAY,kBACpBmJ,EAAUzlB,EAAI6W,OAGgC,IAA5C7W,EAAI4kB,SAAS5O,OAAO,mBAA2B,CAEjD,GAAqB,eAAjBhW,EAAImc,SACN,OACElb,EAAAA,EAAAA,KAACykB,GAAU,CAACzS,QAASjT,EAAI2lB,MAAMllB,GAAI6C,OAAQtD,EAAImS,KAAK3P,QAAQ,IAAK,KAAO,IAAIjC,SACzE2C,EAAe3C,KAGf,GAAqB,eAAjBP,EAAImc,SACb,OACElb,EAAAA,EAAAA,KAAC2kB,GAAU,CAAC/O,KAAM7W,EAAI6W,KAAKtW,SACxBA,IAKP,GAAqB,yBAAjBP,EAAI4kB,UACW,kBAAjB5kB,EAAImc,UAEkC,IAAlC0J,OAAOxT,KAAKrS,EAAI2lB,OAAO3Z,QAGJ,4BADrBhM,EAAM,IAAI2kB,KAAJ,CAAQ9N,EAAKrU,QAAQ,MAAO,KAAK,IAC/B2Z,SACN,OACElb,EAAAA,EAAAA,KAACykB,GAAU,CAACzS,QAASjT,EAAI2lB,MAAMllB,GAAI6C,OAAQtD,EAAImS,KAAK3P,QAAQ,IAAK,KAAO,IAAIjC,SACzE2C,EAAe3C,IAK5B,CAEA,MAA8B,SAA1BqQ,IAjFgC,KADnBgU,EAmFD5kB,EAAI4kB,UAlFP5O,OAAO,aACmB,IAAlC4O,EAAS5O,OAAO,aAoFO,SAAxBnF,GA9EiB,SAAC+T,GACtB,OAA2C,IAAvCA,EAAS5O,OAAO,iBAItB,CA0EQ8P,CAAe9lB,EAAI4kB,WACrB5kB,EAAIsc,IAAI,WAAY,iBAGlBlc,EAAAA,EAAAA,MAAA,KAAGwB,OAAQyB,EAAMzB,OACff,UAAWwC,EAAM0iB,MACjB5N,IAAK9U,EAAM8U,IACXtB,KAAM7W,EAAI6W,KAAKtW,SAAA,CAAGP,EAAI6W,KAAK,SAIZ,SAAnB/F,GAA6B0U,IAC/BC,EAhIkB,SAAC5O,EAAc2O,GACnC,IAAIQ,EAAcnP,EACfrU,QAAQ,MAAO,OACfA,QAAQ,MAAO,OACfA,QAAQ,MAAO,OACfA,QAAQ,MAAO,KACfA,QAAQ,MAAO,OACfA,QAAQ,MAAO,OACfA,QAAQ,MAAO,OACfA,QAAQ,MAAO,OACfA,QAAQ,MAAO,OACfA,QAAQ,MAAO,OAElB,IACE,IAAIyjB,EAAS,IAAIC,OAAOF,EAAc,6EAClC9M,EAAMsM,EAAWW,MAAMF,GAC3B,GAAI/M,GAAOA,EAAIlN,OAAS,EACtB,MAAe,MAAXkN,EAAI,KAAsC,IAAxBrC,EAAKb,OAAO,OACzBa,EAETA,GAAcqC,EAAI,EAGtB,CAAE,MAAOzX,GACPgB,QAAQC,MAAMjB,EAChB,CACA,OAAOoV,CACT,CAqGcuP,CAAcX,EAASD,KAIjCvkB,EAAAA,EAAAA,KAAA,KAAGW,OAAQyB,EAAMzB,OACff,UAAWwC,EAAM0iB,MACjB5N,IAAK9U,EAAM8U,IACXtB,KAAM4O,EAAQllB,SAAGA,MAtBVU,EAAAA,EAAAA,KAAColB,GAAW,CAACxP,KAAMA,GAwBhC,I,WChHA,GAnC6B,SAAHxR,GAA2D,IAArD4N,EAAO5N,EAAP4N,QAASiI,EAAI7V,EAAJ6V,KAAMoL,EAAKjhB,EAALihB,MAAOrd,EAAC5D,EAAD4D,EAAGsd,EAAMlhB,EAANkhB,OAEjDC,EAAG,GAAAvmB,OAAMuF,EAAM,eAAAvF,OAAcgJ,EAAC,QAEhCwd,EAAU,EAEVH,IACFG,EAAU1jB,KAAKqM,MAAM,IAAM8L,EAAKpY,MAAQwjB,IAK1C,OACElmB,EAAAA,EAAAA,MAAA,OAAKS,UAAU,cAAaN,SAAA,EAC1BU,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,eAAcN,UAC3BU,EAAAA,EAAAA,KAAA,KAAGkX,IAAI,WAAWxX,MAAO,CAAE+lB,eAAgB,QAAU7P,KAAI,kBAAA5W,OAAoBgT,EAAO,SAAAhT,OAAQgJ,GAAI1I,UAC9FU,EAAAA,EAAAA,KAAA,KAAAV,UAAGU,EAAAA,EAAAA,KAAA,QAAMN,MAAO,CAAEmb,MAAOyK,EAAOtd,EAAI,IAAK1I,SAAA,GAAAN,OAAKgJ,EAAC,MAAAhJ,OAAKib,EAAKrb,eAG7DoB,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,oBAAmBN,UAEhCU,EAAAA,EAAAA,KAAA,KAAAV,UAAGU,EAAAA,EAAAA,KAAA,QAAMN,MAAO,CAAEmb,MAAOyK,EAAOtd,EAAI,IAAK1I,SAAA,GAAAN,OAAKwmB,EAAO,OAAAxmB,OAAMib,EAAKpY,MAAK,YAGvE7B,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,aAAYN,UACzBU,EAAAA,EAAAA,KAAA,OAAKN,MAAO,CAAEob,MAAM,GAAD9b,OAAKwmB,EAAO,MAAMlmB,UACnCU,EAAAA,EAAAA,KAAA,KAAG4V,KAAM2P,EAAIjmB,UACXU,EAAAA,EAAAA,KAAA,OAAK0lB,IAAKH,EAAK7lB,MAjBR,CAAEimB,UAAW,QAAS7K,MAAO,OAAQyH,OAAQ,QAiBpBqD,IAAG,SAAA5mB,OAAMgJ,aAMrD,ECzBA,GAX8B,SAAH5D,GAAkD,IAA5C6K,EAAK7K,EAAL6K,MAAO+C,EAAO5N,EAAP4N,QAASsT,EAAMlhB,EAANkhB,OAE3CD,EAAQvjB,KAAK+jB,IAAGziB,MAARtB,MAAIgkB,EAAAA,GAAAA,GAAQ7W,EAAM/M,KAAI,SAAA6G,GAAI,OAAIA,EAAKlH,KAAK,MAEpD,OACE7B,EAAAA,EAAAA,KAAA,OAAKN,MAAO,CAAEsB,aAAc,QAAS1B,SAClC2P,EAAMwC,QAAO,SAAA1I,GAAI,OAAIA,EAAKnK,IAAI,IAAEsD,KAAI,SAAC+X,EAAMvM,GAAC,OAAK1N,EAAAA,EAAAA,KAAC+lB,GAAQ,CAAS9L,KAAMA,EAAMoL,MAAOA,EAAOrd,EAAG0F,EAAI,EAAGsE,QAASA,EAASsT,OAAQA,GAAjE5X,EAA2E,KAGlJ,ECFA,GATyB,SAAHtJ,GAA2C,IAArCkhB,EAAMlhB,EAANkhB,OAAQtd,EAAC5D,EAAD4D,EAAGpJ,EAAIwF,EAAJxF,KAErC,OACEoB,EAAAA,EAAAA,KAAA,OAAKN,MAAO,CAAEqB,UAAW,OAAQzB,UAC/BU,EAAAA,EAAAA,KAAA,KAAAV,UAAGU,EAAAA,EAAAA,KAAA,QAAMN,MAAO,CAAEmb,MAAOyK,EAAOtd,EAAI,IAAK1I,SAAA,GAAAN,OAAKgJ,EAAC,MAAAhJ,OAAKJ,QAG1D,ECsGA,IAlDkB4X,EAAAA,EAAAA,KAVD,SAAC1J,GAIhB,MAAO,CACLjF,KAHeiF,EAAM+F,MAAfhL,KAINmH,WAAYlC,EAAMnH,QAAQqJ,WAC1BQ,aAAc1C,EAAMnH,QAAQsJ,MAAoB,aAEpD,GAmDA,EAhDE,SAD0D7K,GACc,IAArE4N,EAAO5N,EAAP4N,QAAShK,EAAC5D,EAAD4D,EAAGge,EAAI5hB,EAAJ4hB,KAAM5d,EAAIhE,EAAJgE,KAAMP,EAAIzD,EAAJyD,KAAMnI,EAAK0E,EAAL1E,MAAOsP,EAAU5K,EAAV4K,WAElCiX,EAA0B,KAC1B7d,GAAQP,EAAKpB,QAAUuL,IAAYnK,EAAKrI,KAC1CymB,EAAkBpe,EAAKpB,OAAO2B,EAAO,GAAGxJ,MAE1C,IAAAR,GAAgCC,EAAAA,EAAAA,UAAS4nB,GAAgB3nB,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAlD8nB,EAAQ5nB,EAAA,GAAE6nB,EAAW7nB,EAAA,GAEtB8nB,GAAc9L,EAAAA,EAAAA,cAAWhX,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAC,SAAAC,IAAA,IAAA4iB,EAAA,OAAA9iB,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAER8D,EAAeqK,GAAS,KAAD,EAArCqU,EAAK1iB,EAAAK,KACXmiB,EAAYE,EAAM5f,OAAO2B,EAAO,GAAGxJ,MAAM+E,EAAAE,KAAA,gBAAAF,EAAAC,KAAA,EAAAD,EAAA8O,GAAA9O,EAAA,SAEzCnC,QAAQC,MAAMkC,EAAA8O,GAAE/Q,SAAS,yBAAAiC,EAAAO,OAAA,GAAAT,EAAA,kBAE1B,CAACuO,EAAS5J,KAEbkP,EAAAA,EAAAA,YAAU,WACJlP,IAAS6d,GACXG,GAEJ,GAAG,CAAChe,EAAMge,EAAaH,IAEvB,IACIK,EADEC,EAAqB,IAATne,GAA6B,OAAb8d,EAExB,IAANle,GAAWH,EAAKJ,UAAYI,EAAKpB,SACnC6f,GAAYtmB,EAAAA,EAAAA,KAACwmB,GAAS,CAACvX,MAAOpH,EAAKpB,OAAQuL,QAASA,EAASsT,OAAQtW,KAGvE,IAAIyX,EArDY,SAAC7nB,EAAcoT,GAEjC,IAAKpT,EACH,OAAOA,EAET,IAAImjB,EAlBgB,SAACnjB,GAGrB,OAAOA,EAAK2C,QADG,qDACa,SAACmlB,GAC3B,IAAIC,EAAGtjB,UAAA0H,QAAA,OAAAJ,EAAAtH,UAAA,GAKP,MAFyB,SAArBsjB,EAAIC,OAAO,EAAG,KAChBD,EAAMA,EAAIC,OAAO,IACb,SAAN5nB,OAAgB2nB,EAAG,UACrB,GACF,CAOgBE,CAAcjoB,GAG5B,OAFAmjB,EA5B0B,SAACnjB,EAAcoT,GAGzC,OAAOpT,EAAK2C,QADG,mBACa,SAACmlB,GAC3B,IAAMrkB,EAAMgB,UAAA0H,QAAA,OAAAJ,EAAAtH,UAAA,GACZ,MAAM,wBAANrE,OAA+BgT,EAAO,mBAAAhT,OAAkBqD,EAAM,aAChE,GACF,CAqBYykB,CAAoB/E,EAAS/P,GAEhC+P,CACT,CA4CwBgF,CAAYf,EAAMhU,GAChCgV,EAAgB,CACpBtR,KAAM,SAACtT,GAAU,OAAKpC,EAAAA,EAAAA,KAACykB,GAAU,CAACzS,QAAS5P,EAAM,gBAAiBC,OAAQD,EAAM,gBAAqBA,EAAM3B,IAAO,EAClHyF,KAAM,SAAC9D,GAAU,OAAKpC,EAAAA,EAAAA,KAACinB,IAAItM,EAAAA,GAAAA,GAAA,GAAKvY,GAAS,EACzC8kB,EAAG,SAAC9kB,GAAU,OAAKpC,EAAAA,EAAAA,KAACmnB,IAAUxM,EAAAA,GAAAA,IAAAA,EAAAA,GAAAA,GAAA,GAAKvY,GAAK,IAAEmiB,WAAYkC,IAAiB,GAEnEW,GAAgBC,EAAAA,GAAAA,GAAWZ,EAAeO,GAEhD,OACE7nB,EAAAA,EAAAA,MAAA,OAAKS,UAAU,UAAUF,MAAOA,EAAMJ,SAAA,CACnCgnB,GACDtmB,EAAAA,EAAAA,KAAA,OAAAV,SACG8nB,IAEFb,IAAYvmB,EAAAA,EAAAA,KAACsnB,GAAI,CAAC1oB,KAAMsnB,EAAUle,EAAGI,EAAMkd,OAAQtW,MAG1D,ICvBF,GA5E6B,SAAC5M,GAE5B,IAAM2J,EAAWuI,KAEjBlW,GAAoCC,EAAAA,EAAAA,UAAS,QAAOC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA7CmpB,EAAUjpB,EAAA,GAAEkpB,EAAalpB,EAAA,GAmBxB2b,EAAqC7X,EAArC6X,KAAMwN,EAA+BrlB,EAA/BqlB,SAAUC,EAAqBtlB,EAArBslB,MAAOC,EAAcvlB,EAAdulB,WAC/BrQ,EAAAA,EAAAA,YAAU,WACRkQ,EAAc,OAChB,GAAG,CAACvN,EAAKjS,IAET,IACI4f,EADEhS,EAAI,GAAA5W,OAAMuF,EAAM,kBAAAvF,OAAiBib,EAAKxX,QAK1CmlB,EAHG3N,EAEiB,IAAXA,EAAKjS,GACJgS,EAAAA,GAAAA,IAAW,IAAIL,KAAKM,EAAK/R,MAAO,qBAGxC/I,EAAAA,EAAAA,MAAAsY,EAAAA,SAAA,CAAAnY,SAAA,EACEU,EAAAA,EAAAA,KAAA,QAAMJ,UAAU,iBAAgBN,SAAE2a,EAAKjS,IAAU,OAAQgS,EAAAA,GAAAA,IAAW,IAAIL,KAAKM,EAAK/R,MAAO,uBANnF,GAWZ,IAKI2f,EAQAC,EAbEC,EAAiB/O,KAAW,kBAAmB,CACnD,YAAayO,EACb,SAAUC,IAsBZ,OAlBIzoB,OAAO+oB,WAAa,QACtBH,GAAU7nB,EAAAA,EAAAA,KAAA,OAAK0lB,IAAG,GAAA1mB,OAAKuF,EAAM,oBAAAvF,OAAmBib,EAAKxX,OAAM,cACzDmjB,IAAI,WACJqC,OApCgB,WAClBT,EAAc,SAChB,EAmCIU,QAjCiB,WACnBV,EAAc,OAChB,EAgCI9nB,MAAO,CAAEkb,QAAS2M,EAAYvmB,aAAc,MAAOrB,YAAa,UAIlEmoB,EADEH,GACS3nB,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,KAAKF,MAAO,CAAEkb,QAAS,eAAgB9Z,WAAY,OAAQxB,SAAEsoB,KAGrFzoB,EAAAA,EAAAA,MAAA,OAAKS,UAAU,eAAcN,SAAA,EAC3BU,EAAAA,EAAAA,KAAA,QAAMJ,UAAU,KAAIN,SAAGsoB,KACvB5nB,EAAAA,EAAAA,KAAA,UAAQJ,UAAU,YAAYsB,QAxDpB,WACd,IAAQ+Y,EAAS7X,EAAT6X,KACRlO,EAAS+H,GAAe,IAAD9U,OAAKib,EAAKjS,EAAC,OAElC,IAAIqP,EAAO8Q,SAASC,eAAe,gBAC/B/Q,GACFpY,OAAOopB,SAAS,EAAGhR,EAAKiR,UAC5B,EAiDqDhpB,SAAEsoB,QAKrDzoB,EAAAA,EAAAA,MAAA,OAAKS,UAAU,YAAWN,SAAA,CACvBuoB,GACD7nB,EAAAA,EAAAA,KAAA,KAAGJ,UAAWmoB,EAAgBnS,KAAMA,EAAKtW,SAAE2a,EAAKhS,OAC/C6f,IAIP,EClBA,GArDmC,SAAH1jB,GAA0E,IAApE4N,EAAO5N,EAAP4N,QAAShK,EAAC5D,EAAD4D,EAAGf,EAAM7C,EAAN6C,OAAQshB,EAAYnkB,EAAZmkB,aAAcC,EAAYpkB,EAAZokB,aAEtEpqB,GAAwBC,EAAAA,EAAAA,UAA+B,MAAKC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAArD6b,EAAI3b,EAAA,GAAEmqB,EAAOnqB,EAAA,GACpBI,GAA0BL,EAAAA,EAAAA,UAAwB,MAAKM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAAhD+C,EAAK9C,EAAA,GAAEiQ,EAAQjQ,EAAA,GA0BtB,OAxBA2Y,EAAAA,EAAAA,YAAU,WAER,IAAMoR,EAAO,eAAArjB,GAAA/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAC,IAAA,IAAAklB,EAAA,OAAAplB,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAEQ2E,EAAkBwJ,EAAShK,GAAG,KAAD,GAA3C2gB,EAAKhlB,EAAAK,OAETykB,EAAQE,GACR/Z,EAAS,MACL4Z,GAAcA,MAElBC,EAAQ,MACR7Z,EAAS,kHAAD5P,OAAyBgJ,KAClCrE,EAAAE,KAAA,gBAAAF,EAAAC,KAAA,EAAAD,EAAA8O,GAAA9O,EAAA,SAED8kB,EAAQ,MACR7Z,EAASjL,EAAA8O,GAAa/Q,SAAS,yBAAAiC,EAAAO,OAAA,GAAAT,EAAA,kBAGlC,kBAhBY,OAAA4B,EAAAjC,MAAA,KAAAC,UAAA,KAkBbqlB,GAEF,GAAG,CAAC1W,EAAShK,EAAGwgB,IAEXvO,GAASxY,GAIZtC,EAAAA,EAAAA,MAAAsY,EAAAA,SAAA,CAAAnY,SAAA,CACG2a,IACC9a,EAAAA,EAAAA,MAAA,OAAKS,UAAU,kBAAiBN,SAAA,EAC9BU,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,yBAAwBN,UACrCU,EAAAA,EAAAA,KAAC4oB,GAAQ,CAAC3O,KAAMA,EAAMwN,SAAUxN,EAAKhS,OAAShB,EAAQygB,MAAOzN,EAAKxX,SAAW8lB,EAAcZ,WAAS,OAEtG3nB,EAAAA,EAAAA,KAAC6oB,GAAO,CACN7W,QAASA,EACThK,EAAGA,EACHiS,KAAMA,EACN+L,KAAM/L,EAAKrb,KACXwJ,KAAM6R,EAAK7R,KACX1I,MAAO,CAAEopB,UAAW,OAAQ1P,aAAc,mBAG/C3X,IAASzB,EAAAA,EAAAA,KAAA,QAAAV,SAAOmC,OAlBZ,IAqBX,ECmEA,GA1HiC,SAAH2C,GAA2E,IAArE4N,EAAO5N,EAAP4N,QAAS+W,EAAgB3kB,EAAhB2kB,iBAAkB9hB,EAAM7C,EAAN6C,OAAQshB,EAAYnkB,EAAZmkB,aAErEnqB,GAA4BC,EAAAA,EAAAA,UAAS,GAAEC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAhC4qB,EAAM1qB,EAAA,GAAE2qB,EAAS3qB,EAAA,GACxBI,GAA8BL,EAAAA,EAAAA,UAAS,QAAOM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAAvCkc,EAAOjc,EAAA,GAAEuqB,EAAUvqB,EAAA,GAC1BwqB,GAA0B9qB,EAAAA,EAAAA,UAAS,CACjCmV,UAAWuV,EACXtoB,IAAK,IACL2oB,GAAA7qB,EAAAA,EAAAA,GAAA4qB,EAAA,GAHKrc,EAAKsc,EAAA,GAAEC,EAAQD,EAAA,GA2BhBE,EAAW,eAAAjkB,GAAA/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAC,IAAA,IAAAoE,EAAA,OAAAtE,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACC8D,EAAeqK,GAAS,KAAD,EAApCnK,EAAIlE,EAAAK,KACVqlB,EAAS,CACP7V,UAAW3L,EAAKhG,MAChBpB,IAAKqM,EAAMrM,MACV,wBAAAkD,EAAAO,OAAA,GAAAT,EAAA,KACJ,kBANgB,OAAA4B,EAAAjC,MAAA,KAAAC,UAAA,KAiCXkmB,GAAYC,EAAAA,GAAAA,cAAa,CAC7BC,UA1BgB,SAACC,GACb5nB,KAAK6nB,IAAID,EAAUV,QAAU,GAC/BC,EAAU,GAEVA,EAAUS,EAAUV,OACxB,EAsBEY,SApBe,SAACF,GAEZ5nB,KAAK6nB,IAAID,EAAUV,QAAU,MACT,SAAlBU,EAAUG,IACZR,EAAS,CACP7V,UAAW1G,EAAM0G,UAAY,EAC7B/S,IAAKqM,EAAMrM,IAAM,IAEQ,UAAlBipB,EAAUG,KAAmB/c,EAAM0G,UAAY,GACxD6V,EAAS,CACP7V,UAAW1G,EAAM0G,UAAY,EAC7B/S,IAAKqM,EAAMrM,IAAM,KAIvBwoB,EAAU,EACZ,EAKEa,MAAO,KAGHC,GAAkBzP,EAAAA,EAAAA,cAAY,WAClC4O,EAAW,QACb,GAAG,IAECja,EAAQ,CAACnC,EAAM0G,WAEfwV,EAAS,EACX/Z,EAAM+B,KAAKlE,EAAM0G,UAAY,GACtBwV,EAAS,GAAKlc,EAAM0G,UAAY,GACvCvE,EAAM+B,KAAKlE,EAAM0G,UAAY,GAE/B,IAAM9T,EAA6B,CACjCsqB,UAAU,eAADhrB,OAAiBgqB,EAAM,iBAChCiB,cAAejB,EAAS,EAAI,cAAgB,OAG9C,OACEhpB,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,oBAAoBF,MAAO,CAAEkb,QAAAA,GAAUtb,UACpDH,EAAAA,EAAAA,MAAA,OAAKS,UAAU,gBAAeN,SAAA,EAC5BU,EAAAA,EAAAA,KAACkqB,GAAc,CACblY,QAASA,EACT0M,QAlFa,WACnB2K,EAAS,CACP7V,UAAW,EACX/S,IAAKqM,EAAMrM,KAEf,EA8EQoe,OAAQyK,EACR1K,OA7EY,WAClByK,EAAS,CACP7V,UAAW1G,EAAM0G,UAAY,EAC7B/S,IAAKqM,EAAMrM,KAEf,EAyEQke,OAvEY,WACd7R,EAAM0G,UAAY,GACpB6V,EAAS,CACP7V,UAAW1G,EAAM0G,UAAY,EAC7B/S,IAAKqM,EAAMrM,KAEjB,KAmEMtB,EAAAA,EAAAA,MAAA,OAAAwb,EAAAA,GAAAA,IAAAA,EAAAA,GAAAA,GAAA,CAAK/a,UAAU,oBAAuB2pB,GAAS,IAAE7pB,MAAOA,EAAMJ,SAAA,EAC5DU,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,wBAAwCF,MAAO,CAAEyqB,MAAO,GAAI7qB,UACzEU,EAAAA,EAAAA,KAACoqB,GAAc,CACbpY,QAASA,EACThK,EAAGiH,EAAM,GACTsZ,aAAcA,EACdthB,OAAQA,EACRuhB,aAAcuB,KAN0Bjd,EAAMrM,KASjDwO,EAAMlE,OAAS,IACd/K,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,wBAA4CF,MAAO,CAAEyqB,MAAO,GAAI7qB,UAC7EU,EAAAA,EAAAA,KAACoqB,GAAc,CACbpY,QAASA,EACThK,EAAGiH,EAAM,GACTsZ,aAAcA,EACdthB,OAAQA,KALgC6F,EAAMrM,IAAM,WAapE,EChDA,GArEmB,WAEjB,IAAMsL,EAAWuI,KACXrF,EAAQuF,IAAe,SAAA1H,GAAK,OAAIA,EAAMuG,WAAWpE,KAAK,IACtD7C,EAASoI,IAAe,SAAA1H,GAAK,OAAIA,EAAMuG,WAAWjH,MAAM,IACxD3K,EAAQ+S,IAAe,SAAA1H,GAAK,OAAIA,EAAMuG,WAAW5R,KAAK,IACtD8mB,EAAe/T,IAAe,SAAA1H,GAAK,OAAIA,EAAMX,MAAM1J,MAAM,IAEzDoS,GAAWC,EAAAA,EAAAA,MAEXuV,GAAmB/P,EAAAA,EAAAA,cAAY,SAACc,GACpCrP,EAASqH,GAAsBgI,GACjC,GAAG,CAACrP,KAEJuL,EAAAA,EAAAA,YAAU,WACR6Q,SAAS1oB,MAAQ,aACnB,GAAG,KAEH6X,EAAAA,EAAAA,YAAU,WACR,IAAM8D,EAAiBhD,GAAAA,MAAkBvD,EAASE,QAClDsV,EAAiBjP,EACnB,GAAG,CAACvG,EAASE,OAAQsV,IAErB,IACsBhJ,EADlBtF,EAAO,GAAGuF,GAAAC,EAAAA,GAAAA,GACGtS,GAAK,IAAtB,IAAAqS,EAAAE,MAAAH,EAAAC,EAAAtZ,KAAAyZ,MAAwB,CAAC,IAAhB1Y,EAAIsY,EAAAzgB,MAEXmb,EAAK/K,MACHhR,EAAAA,EAAAA,KAACsqB,IAAG3P,EAAAA,GAAAA,IAAAA,EAAAA,GAAAA,GAAA,GAEE5R,GAAI,IACRiJ,QAASjJ,EAAKvJ,KAFTuJ,EAAKvJ,KAMVuJ,EAAKiB,aACP+R,EAAK/K,MACHhR,EAAAA,EAAAA,KAACuqB,GAAY,CAEXvY,QAASjJ,EAAKvJ,GACdupB,iBAAkBhgB,EAAKwK,iBACvBtM,OAAQ8B,EAAK9B,OACbshB,aAAcA,GAAa,UAAAvpB,OAJZ+J,EAAKvJ,KAO5B,CAAC,OAAAkiB,GAAAJ,EAAA9gB,EAAAkhB,EAAA,SAAAJ,EAAAK,GAAA,CAED,OACExiB,EAAAA,EAAAA,MAAA,OAAAG,SAAA,EACEU,EAAAA,EAAAA,KAACwqB,GAAM,IACN/oB,IAAUzB,EAAAA,EAAAA,KAACyqB,GAAK,CAAC7rB,KAAM6C,KACxBtC,EAAAA,EAAAA,MAAA,OAAKS,UAAU,mBAAkBN,SAAA,EAC/BU,EAAAA,EAAAA,KAAC0qB,GAAW,CACVlS,cAAe6R,EACf9R,UAAsB,YAAXnM,IAEZ2P,GACD/b,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,KAAIN,UACjBU,EAAAA,EAAAA,KAACqZ,GAAK,CAACR,QAAS,WAGpB7Y,EAAAA,EAAAA,KAAA,OAAKR,GAAG,IAAII,UAAU,WAAWF,MAAO,CAAEsB,aAAc,OAAQD,UAAW,MAAO0X,SAAU,YAAanZ,UACvGU,EAAAA,EAAAA,KAAC2qB,GAAQ,CACPtN,gBAAiBgN,QAK3B,EC9CA,IA1BkB7T,EAAAA,EAAAA,KAND,SAAC1J,GAChB,MAAO,CACLjF,KAAMiF,EAAM+F,MAAMhL,KAClBsE,MAAOW,EAAMX,MAEjB,GA2BA,EAxBsD,SAAJ/H,GAAwC,IAAjCyD,EAAIzD,EAAJyD,KAAWzD,EAAL+H,MAS7D,OAEEhN,EAAAA,EAAAA,MAAA,OAAKS,UAAU,WAAUN,SAAA,EACvBU,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,cAAaN,UAC1BU,EAAAA,EAAAA,KAACqY,GAAK,OAERrY,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,eAAcN,UAC3BU,EAAAA,EAAAA,KAAA,QAAMR,GAAG,eAAeI,UAAU,UAASN,UACzCU,EAAAA,EAAAA,KAACsV,EAAAA,GAAI,CAAC1M,GAAE,oBAAA5J,OAAsB6I,EAAK5B,OAASvG,MAAO,CAAE+lB,eAAgB,QAASnmB,SAfvE,CACb,KAAM,6EACN,KAAQ,wCACR,GAAM,oJACN,IAAO,wCAWsFuI,EAAK5B,eAKtG,ICcA,IAlCkBuQ,EAAAA,EAAAA,KAVD,SAAC1J,GAMhB,MAAO,CACLjF,KAHEiF,EAAM+F,MADRhL,KAMJ,GAmCA,EAjCwD,SAAHzD,GAAgC,IAA1ByD,EAAIzD,EAAJyD,KAErD+iB,EAAY,sCAAwCC,mBAAmBhjB,EAAKpI,OAEhF,OACEN,EAAAA,EAAAA,MAAA,OAAKS,UAAU,YAAWN,SAAA,EACxBU,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,gBAAeN,UAC5BH,EAAAA,EAAAA,MAAA,OAAKS,UAAU,cAAaN,SAAA,EAC1BU,EAAAA,EAAAA,KAAA,KAAGP,MAAM,WAAWmW,KAAI,GAAA5W,OAAKuF,EAAM,KAAAvF,OAAI+I,EAAY,QAAA/I,OAAO6I,EAAKrI,IAAMI,UAAU,MAAMF,MAAO,CAAEkb,QAAS,QAASkQ,WAAY,OAAQxrB,SAAC,OACrIU,EAAAA,EAAAA,KAAA,KAAGP,MAAM,eAAemW,KAAI,GAAA5W,OAAKuF,EAAM,KAAAvF,OAAIuJ,EAAgB,QAAAvJ,OAAO6I,EAAKrI,GAAE,iBAAiBI,UAAU,MAAMF,MAAO,CAAEkb,QAAS,QAASkQ,WAAY,OAAQxrB,SAAC,YAI9JU,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,eAAcN,UAC3BH,EAAAA,EAAAA,MAAA,OAAKS,UAAU,WAAUN,SAAA,EACvBH,EAAAA,EAAAA,MAAA,OAAKO,MAAO,CAAEkX,KAAM,EAAGmE,UAAW,UAAWzb,SAAA,EAC3CU,EAAAA,EAAAA,KAAA,KAAG4V,KAAI,GAAA5W,OAAKuF,EAAM,kBAAAvF,OAAiB6I,EAAKrI,IAAKF,UAC3CU,EAAAA,EAAAA,KAAA,MAAIJ,UAAU,cAAcuX,wBAAyB,CAAEC,OAAQvP,EAAKpI,YAEtEO,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,qBAEjBI,EAAAA,EAAAA,KAAA,OAAKN,MAAO,CAAEkX,KAAM,WAAY6B,SAAU,YAAanZ,UACrDU,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,gBAAeN,UAC5BU,EAAAA,EAAAA,KAAA,KAAGkX,IAAI,sBAAsBtB,KAAMgV,EAAWnrB,MAAM,yFAAmBkB,OAAO,SAASf,UAAU,SAAQN,SAAC,sBAQxH,ICAA,IApBkBkX,EAAAA,EAAAA,KAjBD,SAAC1J,GAEhB,IAAA1I,EAGI0I,EAAM+F,OAAS,CACjBhL,KAAM,CAAC,EACPoK,MAAO,CAAC,GAJRpK,EAAIzD,EAAJyD,KACAoK,EAAK7N,EAAL6N,MAMF,MAAO,CACLD,QAASnK,EAAKrI,GACdyH,OAAQgL,EAAQA,EAAMhK,KAAO,GAC7BkE,MAAOW,EAAMX,MAEjB,GAsBA,EAnB2D,SAAC/J,GAExD,IAAQ6X,EAAiC7X,EAAjC6X,KAAMhT,EAA2B7E,EAA3B6E,OAAQ+K,EAAmB5P,EAAnB4P,QAAS7F,EAAU/J,EAAV+J,MAE/B,OAAK8N,GAIH9a,EAAAA,EAAAA,MAAA,OAAKS,UAAU,YAAYJ,GAAI8J,OAAO2Q,EAAKjS,GAAG1I,SAAA,EAC5CU,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,gBAAeN,UAC5BU,EAAAA,EAAAA,KAAC4oB,GAAQ,CAAC3O,KAAMA,EAAMwN,SAAUxN,EAAKhS,OAAShB,EAAQygB,MAAOzN,EAAKhS,OAASkE,EAAMvJ,cAEnF5C,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,eAAcN,UAC3BU,EAAAA,EAAAA,KAAC6oB,GAAO,CAAC5O,KAAMA,EAAM+L,KAAM/L,EAAKrb,KAAMoT,QAASA,EAAShK,EAAGiS,EAAKjS,EAAGI,KAAM6R,EAAK7R,YAR3E,IAYb,IC2BA,IAjDkBoO,EAAAA,EAAAA,KAjBD,SAAC1J,GAEhB,IAAA1I,EAII0I,EAAM+F,OAAS,CACjBoB,YAAY,EACZpM,KAAMiK,IALN1F,EAAMhI,EAANgI,OACA2e,EAAW3mB,EAAX2mB,YAOF,MAAO,CACLljB,KAPIzD,EAAJyD,KAQAuE,OAAAA,EACA2e,YAAAA,EAEJ,GAkDA,EA9C8D,SAAH1lB,GAA8C,IAAxCwC,EAAIxC,EAAJwC,KAAMuE,EAAM/G,EAAN+G,OAAQlD,EAAI7D,EAAJ6D,KAEvE6C,EAAWuI,KAUXuE,EAAUjX,EAAWiG,EAAKhG,OAE5BmpB,GAAmB,EAIvB,MAHa,WAAT9hB,GAAqBA,IAAS2P,IAChCmS,GAAmB,IAGnB7rB,EAAAA,EAAAA,MAAA,OAAKS,UAAU,WAAWJ,GAAG,IAAGF,SAAA,EAC9BU,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,iBAAiBF,MAAO,CAAEob,MAAO,OAAQxb,UACtDU,EAAAA,EAAAA,KAAC+W,GAAAA,EAAM,CACL7V,QAlBgB,WACtB,EAkBMgc,UAAU,EACV7d,KAAK,KACLO,UAAU,SACVC,QAAQ,QAAOP,SACd,wDAGLU,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,qBAAqBF,MAAO,CAAEoB,WAAY,QAASxB,SAC/D0rB,IACChrB,EAAAA,EAAAA,KAAC+W,GAAAA,EAAM,CACL7V,QAzBa,WACrB6K,EAAS+G,KACX,EAwBUoK,SAAqB,YAAX9Q,EACV/M,KAAK,KACLO,UAAU,SACVC,QAAQ,QAAOP,SACH,YAAX8M,EAAuB,qEAAgB,wFAMpD,IC6DA,IA9GkBoK,EAAAA,EAAAA,KATD,SAAC1J,GAEhB,MAAO,CACLjF,KAAMiF,EAAM+F,MAAMhL,KAClBkM,WAAYjH,EAAMiH,WAGtB,GAgHA,EA5GkE,SAAH3P,GAA6D,IAkDtH6mB,EAlD+DpjB,EAAIzD,EAAJyD,KAAMkM,EAAU3P,EAAV2P,WAAYsJ,EAAejZ,EAAfiZ,gBAErFjf,GAA4BC,EAAAA,EAAAA,YAA8BC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAnDqI,EAAMnI,EAAA,GAAE4sB,EAAS5sB,EAAA,GAClByN,EAAWuI,KAqBX6W,EAAc,WAElBpf,EAAS8H,GAAe,KAExBqX,OAAUvgB,GAEN0S,GACFA,GAEJ,EAaMU,GAAezD,EAAAA,EAAAA,cAAY,SAAC1b,GAChC,GACC,IAGH,GAAQ,OAAJiJ,QAAI,IAAJA,GAAAA,EAAMJ,UAAgB,OAAJI,QAAI,IAAJA,GAAAA,EAAMpB,OAAQ,CAGlC,IADA,IAAIyX,EAAgB,GAAGkN,EAAA,SAAA1d,GAGrB,IAAM3E,EAAOlB,EAAKpB,OAAOiH,EAAI,GAC7B,IAAK3E,EAAKnK,KAAK,MAAD,WAGdsf,EAAclN,MACZhR,EAAAA,EAAAA,KAAC6V,EAAAA,EAAKsH,MAAK,CACT/c,KAAK,QAELgG,KAAK,SACLwV,QAASnV,IAAWiH,EACpBhN,SAAU,kBAxBM,SAACgN,GACvBwd,EAAUxd,EACZ,CAsBwB2d,CAAgB3d,EAAE,EAClCoK,MAAK,GAAA9Y,OAAK0O,EAAC,MAAA1O,OAAK+J,EAAKnK,OAJhB8O,GAOX,EAhBSA,EAAI,EAAGA,GAAK7F,EAAKpB,OAAOsE,OAAQ2C,IAAG0d,EAAA1d,GAmB5Cud,GACE9rB,EAAAA,EAAAA,MAACsf,GAAAA,EAAS,CAAAnf,SAAA,EACRU,EAAAA,EAAAA,KAAA,UAAAV,UACEH,EAAAA,EAAAA,MAAA,SAAAG,SAAA,CAAO,sDACLU,EAAAA,EAAAA,KAAA,QAAMR,GAAG,eAAeE,MAAO,CAAEoB,WAAY,MAAOG,OAAQ,WAAaC,QA1C/D,SAACV,GAEnBA,EAAE0V,iBACFgV,OAAUvgB,EAEZ,EAqCwGrL,SAAC,0DAGlG4e,EAAc,oHAKrB,CAEA,OACE/e,EAAAA,EAAAA,MAAA,QAAMO,MAAO,CAAEqB,UAAW,OAASqd,SAnFpB,SAAC5d,GAEhBA,EAAE0V,iBACF1V,EAAE2iB,kBAEF,IAAI9e,EAA+B,CACjCzF,KAAMmV,EAAWnV,KACjBoT,QAAS1I,OAAW,OAAJzB,QAAI,IAAJA,OAAI,EAAJA,EAAMrI,IACtB6e,UAAW8M,EACXG,mBAAe3gB,GAGblE,IACFpC,EAAOinB,cAAgB7kB,GAGzBsF,ExCvB0B,SAAC1H,GAA4B,sBAAAD,GAAAd,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAU,SAAAC,EAAOsI,GAAa,IAAA0B,EAAA,OAAAlK,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAYpC,OAVnDkI,EAAS2H,MAELjG,EAAkC,CACpCE,aAActJ,EAAOzF,KACrBqP,OAAQ,MACRnI,SAAUzB,EAAO2N,QACjB9D,IAAKpM,KAAKqM,MAAsB,KAAhBrM,KAAKsM,WAGnB/J,EAAOinB,gBACT7d,EAAY6d,cAAgBjnB,EAAOinB,eAAc3nB,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAG3C6B,EAAgB+H,GAAa,KAAD,SAAA9J,EAAAE,KAAA,EAC5BkI,EAAS6H,MAA0B,KAAD,EACpCvP,EAAOga,WACTha,EAAOga,YAAY1a,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAA8O,GAAA9O,EAAA,SAGrBnC,QAAQC,MAAM,+BAA8BkC,EAAA8O,IAAQ,yBAAA9O,EAAAO,OAAA,GAAAT,EAAA,mBAEvD,gBAAA0B,GAAA,OAAAf,EAAAhB,MAAA,KAAAC,UAAA,EAvB0D,EAuB1D,CwCAYkoB,CAAelnB,GAC1B,EAkEwD/E,SAAA,EACpDU,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,OAAMN,SAAC,8IACtBH,EAAAA,EAAAA,MAAA,OAAKS,UAAU,wBAAuBN,SAAA,EACpCU,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,mBAAkBN,UAC/BU,EAAAA,EAAAA,KAACwe,GAAU,CACTvK,WAAYF,EAAWE,WACvBrV,KAAMmV,EAAWnV,KACjByB,YAAY,yDACZK,SAAUqd,OAGd/d,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,qBAAoBN,SAChC2rB,SAMX,IlBhFM1R,IAAY/C,EAAAA,EAAAA,KA9BD,SAAC1J,GAEhB,IAAA0e,EAOI1e,EAAM+F,MANRzG,EAAMof,EAANpf,OACA2e,EAAWS,EAAXT,YACAljB,EAAI2jB,EAAJ3jB,KACAoK,EAAKuZ,EAALvZ,MACAhD,EAAKuc,EAALvc,MACAxN,EAAK+pB,EAAL/pB,MAGF,MAAO,CACL0K,MAAOW,EAAMX,MACbtE,KAAAA,EACAoK,MAAAA,EACAhD,MAAAA,EACA7C,OAAAA,EACA2e,YAAAA,EACAtpB,MAAAA,EACAkE,QAASmH,EAAMnH,QAAQsJ,MAE3B,IA4FA,GAAesK,IAlFqC,SAAHnV,GAA4D,IARtFqnB,EAQgCtf,EAAK/H,EAAL+H,MAAO8C,EAAK7K,EAAL6K,MAAOgD,EAAK7N,EAAL6N,MAAOpK,EAAIzD,EAAJyD,KAAMpG,EAAK2C,EAAL3C,MAE1EsK,EAAWuI,KACXhH,EAAUoH,GAAkBxB,IAC5B2B,GAAWC,EAAAA,EAAAA,MAEbsG,EAAiB,IAAI5Q,gBAAgBqK,EAASE,QAC5C/C,GAAWoJ,EAAe1Q,IAAI,MAC9BxB,GAhBeuiB,EAgBMrQ,EAAe1Q,IAAI,SAdzB,WAAjB+gB,EAAkC,SAClCrK,OAAOqK,GAAsB,GACzBA,EAHkB,EAgBpB5S,EAAUjX,EAAWiG,EAAKhG,OAE1B6pB,GAAgBhQ,EAAAA,EAAAA,SAAO,GAC7BgQ,EAAczP,QAAoB,WAAT/S,GAAqBA,IAAS2P,EAEvD,IAAM8S,GAAoBrR,EAAAA,EAAAA,cAAY,WAChCoR,EAAczP,SAChBlQ,EAAS+G,KACb,GAAG,CAAC/G,IAwCJ,OAjCAuL,EAAAA,EAAAA,YAAU,WvCPuB,IAACsU,EuCQ5B/jB,EAAKpI,QACP0oB,SAAS1oB,OvCTqBmsB,EuCSO/jB,EAAKpI,OvCR/B,IAAIosB,WACYC,gBAAgBF,EAAU,aACjCG,WAA2BC,WuCOnD,GAAG,CAACnkB,EAAKpI,SAET6X,EAAAA,EAAAA,YAAU,WACRvL,ExBkH4B,SAACiG,EAAiB9I,GAAoB,OAAU,SAAC6C,EAAewE,GAE9F,IAAMzD,EAAQyD,IACd,GAAIqC,GAAY9F,GAAQ,CACtB,IAAImF,EAAuB,KAG3B,OAFID,IAAYlF,EAAM+F,MAAMhL,KAAKrI,KAC/ByS,EAAQnF,EAAM+F,MAAMZ,OACflG,EAASgG,GAAS,CAAEC,QAAAA,EAAS9I,KAAAA,EAAM+I,MAAAA,IAC5C,CACF,CAAC,CwB3HYga,CAAiBja,EAAS9I,GACrC,GAAG,CAAC6C,EAAUiG,EAAS9I,KAEvBoO,EAAAA,EAAAA,YAAU,WAER,IAAM4U,EAAQjtB,OAAOktB,YAAYR,EAAmB,KAOpD,OALmB,WACjBre,EAAQgB,QACRwQ,QAAiBnU,EACbuhB,GAAOE,cAAcF,EAC3B,CAGF,GAAG,CAAC5e,EAASqe,KAEbrU,EAAAA,EAAAA,YAAU,WACR,IAAKwH,IACHjK,EAAS3D,MACTjC,EAAMlE,OAAS,EAAG,CAClB,IAAMshB,EAAWlE,SAASC,eAAevT,EAAS3D,KAAK7E,MAAM,IACzDggB,GACFtJ,YAAW,kBAAM9jB,OAAOopB,SAAS,EAAGgE,EAAS/D,UAAU,GAAE,GAC3DxJ,IAAiB,CACnB,CACF,KAGE3f,EAAAA,EAAAA,MAAA,OAAKO,MAAO,CAAEsB,aAAc,OAAQ1B,SAAA,EAClCU,EAAAA,EAAAA,KAACwqB,GAAM,IACN/oB,IAASzB,EAAAA,EAAAA,KAACyqB,GAAK,CAAC7rB,KAAM6C,KACvBtC,EAAAA,EAAAA,MAAA,OAAKS,UAAU,cAAaN,SAAA,EAC1BU,EAAAA,EAAAA,KAACssB,GAAS,KACVtsB,EAAAA,EAAAA,KAACsqB,GAAG,CAASrQ,KAAMhI,GAAV,KACRhD,EAAM/M,KAAI,SAAC6G,EAAM2E,GAAC,OACjB1N,EAAAA,EAAAA,KAACsqB,GAAG,CAAcrQ,KAAMlR,GAAdA,EAAKf,EAAiB,KAEhC6Q,EAAU,GAAc,WAAT3P,KACflJ,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,KAAIN,UACjBU,EAAAA,EAAAA,KAACqZ,GAAK,CAACR,QAASA,EAASmC,QAAM,UAIrChb,EAAAA,EAAAA,KAACusB,GAAM,CAACrjB,KAAMA,IACbiD,EAAMK,SACLxM,EAAAA,EAAAA,KAACwsB,GAAU,CAACnP,gBAxDc,WAC9BsO,IACA5f,EAAS8H,GAAe,IAC1B,MA0DF,ImB7FA,GA3BgC,SAAHzP,GAAyE,IAAnEgC,EAAIhC,EAAJgC,KAAM0R,EAAK1T,EAAL0T,MAAOlX,EAAKwD,EAALxD,MAAO6rB,EAAMroB,EAANqoB,OAAQC,EAAOtoB,EAAPsoB,QAAShsB,EAAQ0D,EAAR1D,SAEhEisB,EAAgB,SAACnsB,GACrBE,EAASF,EAAG4F,EAAM5F,EAAEG,OAAOC,MAC7B,EAEA,OACEzB,EAAAA,EAAAA,MAAA,QAAAG,SAAA,EACEH,EAAAA,EAAAA,MAAA,QAAMO,MAAO,CAAEC,YAAa,OAAQL,SAAA,CAAC,IAAEwY,EAAM,OAC5C4U,IAAW1sB,EAAAA,EAAAA,KAAA,SACXysB,EAAOvqB,KAAI,SAAC6G,EAAM2E,GAAC,OAClB1N,EAAAA,EAAAA,KAAC6V,EAAAA,EAAKsH,MAAK,CACT/c,KAAK,QACLZ,GAAIuJ,EAAK3C,KACT0R,MAAO/O,EAAK6jB,MACZxmB,KAAM0R,EACN8D,QAAS7S,EAAK3C,OAASxF,EACvBA,MAAOmI,EAAK3C,KACZymB,OAAQH,EACRhsB,SAAUisB,GARKjf,EAUJ,MAIrB,ECPA,GApBiC,SAACtL,GAEhC,IAKQgE,EAAgChE,EAAhCgE,KAAMxF,EAA0BwB,EAA1BxB,MAAOkX,EAAmB1V,EAAnB0V,MAAOgV,EAAY1qB,EAAZ0qB,QAE5B,OACE3tB,EAAAA,EAAAA,MAAA,SAAO4tB,QAAS3mB,EAAM1G,MAAO,CAAEC,YAAa,OAAQL,SAAA,EAClDU,EAAAA,EAAAA,KAAA,QAAMN,MAAO,CAAEC,YAAa,OAAQL,SAAEwY,KACtC9X,EAAAA,EAAAA,KAAA,SAAOI,KAAK,SAASgG,KAAMA,EAAMxF,MAAOA,EAAOF,SAVlC,SAACF,GAChB,IAAQ4F,EAAShE,EAATgE,KACRhE,EAAM1B,SAASF,EAAG4F,EAAM5F,EAAEG,OAAOC,MACnC,EAOuEhB,UAAU,eAChE+K,IAAZmiB,GACC9sB,EAAAA,EAAAA,KAAA,QAAMN,MAAO,CAAEoB,WAAY,OAAQxB,SAAEwtB,IACnC,OAGV,EC5BaE,GAAW,CACtB,CACEC,QAAS,iCACTlR,KAAM,CACJ,CAAC,SACD,CAAC,iBACD,CAAC,wBAAyB,iCAC1B,CAAC,mBAAoB,8BAGzB,CACEkR,QAAS,6CACTlR,KAAM,CACJ,CAAC,eAAgB,gBACjB,CAAC,2BAGL,CACEkR,QAAS,uCACTlR,KAAM,CACJ,CAAC,yBACD,CAAC,uBACD,CAAC,qBAKMmR,GAAa,CACxB,MAAS,CACP9sB,KAAM,QACN0X,MAAO,+FACP4U,SAAS,EACTD,OAAQ,CACN,CAAErmB,KAAM,SAAUwmB,MAAO,8CACzB,CAAExmB,KAAM,YAAawmB,MAAO,kCAC5B,CAAExmB,KAAM,OAAQwmB,MAAO,0CAG3B,cAAiB,CACfxsB,KAAM,SACN0X,MAAO,6FACP/V,IAAK,EACL8jB,IAAK,IAEP,sBAAyB,CACvBzlB,KAAM,WACN0X,MAAO,gJAET,8BAAiC,CAC/B1X,KAAM,SACN0X,MAAO,GACP/V,IAAK,GACL8jB,IAAK,IACLiH,QAAS,sBAEX,iBAAoB,CAClB1sB,KAAM,WACN0X,MAAO,iHAET,yBAA4B,CAC1B1X,KAAM,SACN0X,MAAO,GACP/V,IAAK,GACL8jB,IAAK,IACLiH,QAAS,sBAGX,aAAgB,CACd1sB,KAAM,WACN0X,MAAO,4JACPoF,UAAU,GAEZ,aAAgB,CACd9c,KAAM,SACNylB,IAAK,IACL/N,MAAO,GACPgV,QAAS,eACT5P,UAAU,GAEZ,sBAAyB,CACvB9c,KAAM,WACN0X,MAAO,oNACPoF,UAAU,GAGZ,sBAAyB,CACvB9c,KAAM,WACN0X,MAAO,4LAET,oBAAuB,CACrB1X,KAAM,WACN0X,MAAO,0IAET,eAAkB,CAChB1X,KAAM,WACN0X,MAAO,4PC5EX,GAbwB,SAAH1T,GAA0C,IAApCgC,EAAIhC,EAAJgC,KAAM9G,EAAQ8E,EAAR9E,SAC/B,OACEH,EAAAA,EAAAA,MAAA,OAAAG,SAAA,EACEU,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,aAAYN,SACxB8G,KAEHpG,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,cAAaN,SACzBA,MAIT,ECsLA,IAjLkBkX,EAAAA,EAAAA,KAND,SAAC1J,GAChB,MAAO,CACLnH,QAASmH,EAAMnH,QAEnB,GAmLA,EAhLsD,SAACvD,GAErD,IAmCwBif,EAnClBtV,EAAWuI,KACX4D,GAAWC,EAAAA,EAAAA,MAEjB/Z,GAA0BC,EAAAA,EAAAA,UAAS,CACjC4Q,MAAO7M,EAAMuD,QAAQsJ,QACrB3Q,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAFK0O,EAAKxO,EAAA,GAAE+qB,EAAQ/qB,EAAA,GAIhB6uB,EAAY,WAChBjV,EAAS,KACX,EAeMxX,EAAW,SAACF,EAAiC4F,EAAcxF,GAE/D,IAAIqO,EAAQ2V,OAAOwI,OAAO,CAAC,EAAGtgB,EAAMmC,OACpCA,EAAM7I,GAAQxF,EACdyoB,GAAQ1O,EAAAA,GAAAA,IAAAA,EAAAA,GAAAA,GAAC,CAAC,EACL7N,GAAK,IACRmC,MAAAA,IAEJ,EAEIoe,EAAO,GAAG/L,GAAAC,EAAAA,GAAAA,GACEyL,IAAQ,IAAxB,IAAA1L,EAAAE,MAAAH,EAAAC,EAAAtZ,KAAAyZ,MAA0B,CAAC,IAAlB6L,EAAGjM,EAAAzgB,MAENmb,EAAO,GACX,IAAK,IAAIrO,KAAK4f,EAAIvR,KAAM,CAEtB,IAEoBwR,EAFdC,EAAMF,EAAIvR,KAAKrO,GACjB+f,EAAU,GAAGC,GAAAnM,EAAAA,GAAAA,GACAiM,GAAG,QAAApC,EAAA,WAAG,IAAdhlB,EAAImnB,EAAA3sB,MAELmI,EAAOmkB,GAAW9mB,GACxB,IAAK2C,EAAK,MAAD,WAET,IAAMnI,EAAQkM,EAAMmC,MAAM7I,GAER,UAAd2C,EAAK3I,KACPqtB,EAAQzc,MACNhR,EAAAA,EAAAA,KAAC2tB,GAAW,CAEVvnB,KAAMA,EACN0R,MAAO/O,EAAK+O,MACZ2U,OAAQ1jB,EAAK0jB,OACb7rB,MAAOA,EACP8rB,QAAS3jB,EAAK2jB,QACdhsB,SAAUA,GANL0F,IASc,WAAd2C,EAAK3I,MAEV2I,EAAK+O,OACP2V,EAAQzc,MACNhR,EAAAA,EAAAA,KAAA,SACE+sB,QAAS3mB,EAET1G,MAAO,CAAEkuB,WAAY,WAAYtuB,SAChCyJ,EAAK+O,OAFD1R,EAAO,WAMlBqnB,EAAQzc,MACN7R,EAAAA,EAAAA,MAAA,OAAKS,UAAU,iBAAgBN,SAAA,EAC7BU,EAAAA,EAAAA,KAACG,EAAAA,EAAW,CACVC,KAAK,SACL2B,IAAKgH,EAAKhH,IACV8jB,IAAK9c,EAAK8c,IACVjlB,MAAOA,EACPsc,SAAUnU,EAAKmU,SACfxc,SAAU,SAACF,GAAC,OAAKE,EAASF,EAAG4F,EAAM5F,EAAEG,OAAOC,MAAM,EAElDhB,UAAU,QACVP,KAAK,OAGN0J,EAAK+jB,UACJ9sB,EAAAA,EAAAA,KAAA,QAA8BN,MAAO,CAAEoB,WAAY,MAAO8V,KAAM,YAActX,SAAEyJ,EAAK+jB,SAA1E1mB,EAAO,cAdeA,KAkBhB,WAAd2C,EAAK3I,KACdqtB,EAAQzc,MACNhR,EAAAA,EAAAA,KAAC6tB,GAAY,CAEXznB,KAAMA,EACN0R,MAAO/O,EAAK+O,MACZgV,QAAS/jB,EAAK+jB,QACdlsB,MAAOA,EACPF,SAAUA,GALL0F,IAQc,aAAd2C,EAAK3I,MACdqtB,EAAQzc,MACNhR,EAAAA,EAAAA,KAAC6V,EAAAA,EAAKsH,MAAK,CACT3d,GAAI4G,EACJhG,KAAK,WACL0X,MAAO/O,EAAK+O,MAEZ1R,KAAMA,EACNwV,QAA2B,SAAlBtS,OAAO1I,GAChBsc,SAAUnU,EAAKmU,SACfxc,SAAU,SAACF,GAAC,OAAKE,EAASF,EAAG4F,EAAM5F,EAAEG,OAAOib,QAAQ,EACpDlc,MAAO,CAAEkX,KAAM,WAAYK,OAAQ,MAAO6W,SAAU,SAL/C1nB,GASb,EA5EA,IAAAsnB,EAAAlM,MAAA+L,EAAAG,EAAA1lB,KAAAyZ,MAAA2J,GA4EC,OAAA1J,GAAAgM,EAAAltB,EAAAkhB,EAAA,SAAAgM,EAAA/L,GAAA,CAED5F,EAAK/K,MACHhR,EAAAA,EAAAA,KAAA,OAAaJ,UAAU,cAAaN,SACjCmuB,GADO/f,GAKd,CAEA2f,EAAKrc,MACHhR,EAAAA,EAAAA,KAAC+tB,GAAG,CAAmB3nB,KAAMknB,EAAIL,QAAQ3tB,SACtCyc,GADOuR,EAAIL,SAIlB,CAAC,OAAAvL,GAAAJ,EAAA9gB,EAAAkhB,EAAA,SAAAJ,EAAAK,GAAA,CAED,OACExiB,EAAAA,EAAAA,MAAA,OAAKS,UAAU,eAAcN,SAAA,EAC3BU,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,iBAAiBF,MAAO,CAAEuB,OAAQ,WAAY3B,UAC3DU,EAAAA,EAAAA,KAAA,KAAAV,SAAG,6DAEJ+tB,GACDluB,EAAAA,EAAAA,MAAA,OAAKS,UAAU,aAAYN,SAAA,EACzBU,EAAAA,EAAAA,KAAC+W,GAAAA,EAAM,CACLvX,GAAG,eACHH,KAAK,KACLQ,QAAQ,QACRH,MAAO,CAAEuX,OAAQ,OACjBrX,UAAU,SACVsB,QAlIa,WAEnB6K,EAASqE,GAAeF,KAAKpD,EAAMmC,QACnCke,GACF,EA8H8B7tB,SAAC,QAGzBU,EAAAA,EAAAA,KAAC+W,GAAAA,EAAM,CACLvX,GAAG,gBACHH,KAAK,KACLQ,QAAQ,QACRH,MAAO,CAAEuX,OAAQ,MAAOd,MAAO,QAC/BvW,UAAU,SACVsB,QAASisB,EAAU7tB,SAAC,0CAGtBU,EAAAA,EAAAA,KAAC+W,GAAAA,EAAM,CACLvX,GAAG,iBACHH,KAAK,KACLQ,QAAQ,QACRH,MAAO,CAAEuX,OAAQ,MAAOd,MAAO,SAC/BvW,UAAU,SACVsB,QA3Ja,WACnBmoB,GAAQ1O,EAAAA,GAAAA,IAAAA,EAAAA,GAAAA,GAAC,CAAC,EACL7N,GAAK,IACRmC,MAAO2V,OAAOwI,OAAO,CAAC,EAAGre,GAAoBE,SAEjD,EAsJ8B3P,SAAC,iHAMjC,IC/KA,GAdkB,WAEhB,OACEU,EAAAA,EAAAA,KAACguB,GAAAA,EAAS,CAAA1uB,UACRH,EAAAA,EAAAA,MAAC8uB,EAAAA,GAAM,CAAA3uB,SAAA,EACLU,EAAAA,EAAAA,KAACkuB,EAAAA,GAAK,CAACC,KAAK,IAAIC,SAASpuB,EAAAA,EAAAA,KAACquB,GAAU,OACpCruB,EAAAA,EAAAA,KAACkuB,EAAAA,GAAK,CAACC,KAAK,aAAaC,SAASpuB,EAAAA,EAAAA,KAACquB,GAAU,OAC7CruB,EAAAA,EAAAA,KAACkuB,EAAAA,GAAK,CAACC,KAAK,aAAaC,SAASpuB,EAAAA,EAAAA,KAACsuB,GAAK,OACxCtuB,EAAAA,EAAAA,KAACkuB,EAAAA,GAAK,CAACC,KAAK,eAAeC,SAASpuB,EAAAA,EAAAA,KAACuuB,GAAO,UAIpD,ECkBA,GAnCqB,WAEjB,OACIpvB,EAAAA,EAAAA,MAAA,UAAQS,UAAU,yBAAwBN,SAAA,EACtCU,EAAAA,EAAAA,KAAA,KAAG4V,KAAI,GAAA5W,OAAKuF,EAAM,cAAajF,SAAC,gDAChCU,EAAAA,EAAAA,KAAA,QAAMJ,UAAU,YAAWN,SAAC,OAC5BU,EAAAA,EAAAA,KAAA,KAAG4V,KAAI,GAAA5W,OAAKuF,EAAM,cAAajF,SAAC,sDAChCU,EAAAA,EAAAA,KAAA,QAAMJ,UAAU,YAAWN,SAAC,OAC5BH,EAAAA,EAAAA,MAAA,KAAAG,SAAA,EAAGU,EAAAA,EAAAA,KAAA,KAAG4V,KAAI,GAAA5W,OAAKuF,EAAM,WAAUjF,SAAC,2FAAoB,SACpDU,EAAAA,EAAAA,KAAA,QAAMJ,UAAU,YAAWN,SAAC,OAC5BU,EAAAA,EAAAA,KAAA,KAAG4V,KAAI,GAAA5W,OAAKuF,EAAM,aAAYjF,SAAC,oCAC/BU,EAAAA,EAAAA,KAAA,QAAMJ,UAAU,YAAWN,SAAC,OAC5BU,EAAAA,EAAAA,KAAA,KAAGkX,IAAI,WAAWtB,KAAI,GAAA5W,OAAKuF,EAAM,sBAAqBjF,SAAC,0CACvDU,EAAAA,EAAAA,KAAA,QAAMJ,UAAU,YAAWN,SAAC,OAC5BU,EAAAA,EAAAA,KAAA,KAAGkX,IAAI,WAAWtB,KAAI,GAAA5W,OAAKuF,EAAM,eAAcjF,SAAC,gDAChDU,EAAAA,EAAAA,KAAA,QAAMJ,UAAU,YAAWN,SAAC,OAC5BU,EAAAA,EAAAA,KAAA,KAAG4V,KAAK,qBAAoBtW,SAAC,yEAC7BU,EAAAA,EAAAA,KAAA,QAAMJ,UAAU,YAAWN,SAAC,OAC5BU,EAAAA,EAAAA,KAAA,KAAG4V,KAAK,uBAAsBtW,SAAC,6EAC/BU,EAAAA,EAAAA,KAAA,QAAMJ,UAAU,YAAWN,SAAC,OAC5BU,EAAAA,EAAAA,KAAA,KAAGkX,IAAI,WAAWtB,KAAK,qBAAoBtW,SAAC,4DAC5CU,EAAAA,EAAAA,KAAA,QAAMJ,UAAU,YAAWN,SAAC,OAC5BU,EAAAA,EAAAA,KAAA,KAAG4V,KAAI,GAAA5W,OAAKuF,EAAM,gBAAejF,SAAC,oCAClCU,EAAAA,EAAAA,KAAA,QAAMJ,UAAU,YAAWN,SAAC,OAC5BU,EAAAA,EAAAA,KAAA,KAAG4V,KAAI,GAAA5W,OAAKuF,EAAM,eAAcjF,SAAC,kEACjCU,EAAAA,EAAAA,KAAA,QAAMJ,UAAU,YAAWN,SAAC,OAC5BU,EAAAA,EAAAA,KAAA,KAAG4V,KAAI,GAAA5W,OAAKuF,EAAM,sBAAqBjF,SAAC,gDACxCU,EAAAA,EAAAA,KAAA,QAAMJ,UAAU,YAAWN,SAAC,OAC5BU,EAAAA,EAAAA,KAAA,KAAG4V,KAAI,GAAA5W,OAAKuF,EAAM,iBAAgBjF,SAAC,8BACnCU,EAAAA,EAAAA,KAAA,QAAMJ,UAAU,YAAWN,SAAC,OAC5BU,EAAAA,EAAAA,KAAA,QAAAV,SAAM,UAGlB,E,iCClBA,GAZkC,SAAH8E,GAAiD,IAA3C9E,EAAQ8E,EAAR9E,SAAUkvB,EAAWpqB,EAAXoqB,YAC7C,OACErvB,EAAAA,EAAAA,MAAA,OAAKS,UAAU,iBAAgBN,SAAA,CAC5BA,GACDH,EAAAA,EAAAA,MAAA,OAAKS,UAAU,gBAAgBsB,QAASstB,EAAaC,WAAYD,EAAYlvB,SAAA,EAC3EU,EAAAA,EAAAA,KAAA,KAAGJ,UAAU,oBAAoB,cAAY,UAC7CI,EAAAA,EAAAA,KAAA,KAAGJ,UAAU,mBAAmB,cAAY,OAAOF,MAAO,CAAEoB,WAAY,eAIhF,ECcA,GAxBgC,SAAHsD,GAA8C,IAAxC9E,EAAQ8E,EAAR9E,SAAUovB,EAAQtqB,EAARsqB,SAEvCC,EAAS,EAeb,OACE3uB,EAAAA,EAAAA,KAAA,OAAKJ,UAAU,eAAegvB,aAdX,SAACpuB,GACpBmuB,EAASnuB,EAAEquB,YAAYC,eAAe,GAAGC,OAC3C,EAY4DN,WAVzC,SAACjuB,GAElB,GAAKkuB,EAAL,CAEA,IAAIM,EAAOxuB,EAAEquB,YAAYC,eAAe,GAAGC,QACvCjtB,KAAK6nB,IAAIqF,EAAOL,GAAU,KAC5BD,GAAUM,EAAOL,EAJE,CAKvB,EAGmFrvB,SAC9EA,GAGP,ECmCA,GA9CkC,SAAH8E,GAAqD,IAU9E6qB,EACAxW,EAX+ByW,EAAO9qB,EAAP8qB,QAAS/tB,EAAMiD,EAANjD,OAAQ7B,EAAQ8E,EAAR9E,SAE9CgO,EAAUoH,GAAkB9C,IAM1BL,EAAW2d,EAAX3d,OAQJtS,OAAO+oB,YAAc,KACvBiH,EAAO,IACPxW,EAAW,CAAEC,IAAKnH,EAAO8R,EAAG8L,KAAM,KAElCF,EAAO,OACPxW,EAAW,CAAEC,IAAKnH,EAAO8R,EAAG8L,KAAMrtB,KAAKC,IAAIwP,EAAO7K,EAAGzH,OAAO+oB,WAAa,OAG3E,IAAAoH,EAAqBpZ,EAAAA,SAAeqZ,QAAQ/vB,GAASgwB,GAAA/wB,EAAAA,EAAAA,GAAA6wB,EAAA,GAAhDG,EAAMD,EAAA,GAAE5qB,EAAI4qB,EAAA,GAEjB,OACEtvB,EAAAA,EAAAA,KAACwvB,KAAS,CACRP,KAAMA,EACNQ,OAAO,kBACPC,yBAAyB,WAAUpwB,UAGnCH,EAAAA,EAAAA,MAAA,OAAKS,UAAU,iBAAiBF,OAAKib,EAAAA,GAAAA,GAAA,GAAOlC,GAAWnZ,SAAA,EACrDU,EAAAA,EAAAA,KAAC2vB,GAAa,CAACnB,YA9BA,WACnBlhB,EAAQkE,MAAM0d,EAAQ9d,KACxB,EA4B+C9R,SACrCiwB,EAAwBntB,MAAM9C,YAElCU,EAAAA,EAAAA,KAAC4vB,GAAW,CAAAtwB,SACRoF,EAAsBtC,MAAM9C,eAP7B6B,EAaX,ECuDA,IA9EkBqV,EAAAA,EAAAA,KAfD,SAAC1J,GAEhB,IAAA0e,EAII1e,EAAM+F,MAEV,MAAO,CACLhL,KANI2jB,EAAJ3jB,KAOAoH,MANKuc,EAALvc,MAOAgD,MANKuZ,EAALvZ,MAQJ,GAgFA,EA7E+D,SAAC7P,GAAgC,IAADytB,EAAAC,EAMzF7V,EAJIiV,EAAgC9sB,EAAhC8sB,QAASrnB,EAAuBzF,EAAvByF,KAAMoH,EAAiB7M,EAAjB6M,MAAOgD,EAAU7P,EAAV6P,MACtBb,EAAS8d,EAAT9d,KAEJxS,EAAO,GAEPwS,EAAKY,UAAYnK,EAAKrI,KAEtBya,EADkB,IAAhB7I,EAAK/O,OACA4P,EAEAhD,EAAMnG,MAAK,SAACC,GAAmB,OAAKA,EAAKf,IAAMoJ,EAAK/O,MAAM,OAGjEzD,EAAOqb,EAAKrb,MAGhB,IAiCI2wB,EAjCJnxB,GAA0BC,EAAAA,EAAAA,UAAS,CACjC4b,KAAAA,EACArb,KAAAA,IACAN,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAHK0O,EAAKxO,EAAA,GAAE+qB,EAAQ/qB,EAAA,GAKhByxB,GAAYzV,EAAAA,EAAAA,cAAWhX,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAC,SAAAC,IAAA,IAAAwW,EAAArb,EAAA,OAAA2E,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,WAExBiJ,EAAMmN,KAAK,CAADtW,EAAAE,KAAA,eAAAF,EAAAM,OAAA,iBAGD,OAATrF,EAAO,GAAE+E,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAGE2E,EAAkB4I,EAAKY,QAASZ,EAAK/O,QAAQ,KAAD,EAAzD4X,EAAItW,EAAAK,KAEFpF,EADEqb,EACKA,EAAKrb,KAER,kHAAAI,OAA2BoS,EAAK/O,QAASsB,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAA8O,GAAA9O,EAAA,SAG/C/E,EAAO+E,EAAA8O,GAAa/Q,QAAQ,QAG9B2nB,EAAS,CAAEpP,KAAAA,EAAMrb,KAAAA,IAAQ,yBAAA+E,EAAAO,OAAA,GAAAT,EAAA,mBACxB,CAAC2N,EAAKY,QAASZ,EAAK/O,OAAQyK,EAAMmN,OAMrC,OAJA3C,EAAAA,EAAAA,YAAU,WACNyY,GACJ,GAAG,CAACA,IAECjjB,EAAMlO,MAOT2wB,EAHGziB,EAAMmN,MAGAja,EAAAA,EAAAA,KAAC4oB,GAAQ,CAAC3O,KAAMnN,EAAMmN,KAAMwN,UAAU,EAAOC,OAAO,EAAOC,WAAW,KAFtE3nB,EAAAA,EAAAA,KAAA,KAAAV,SAAG,4DAMZH,EAAAA,EAAAA,MAAC6wB,GAAa,CAACd,QAAS9sB,EAAM8sB,QAAQ5vB,SAAA,EACpCU,EAAAA,EAAAA,KAAC2vB,GAAa,CAAArwB,SACXiwB,KAEHvvB,EAAAA,EAAAA,KAAC4vB,GAAW,CAAAtwB,UACVU,EAAAA,EAAAA,KAAC6oB,GAAO,CACN5O,KAAMnN,EAAMmN,KACZjS,EAAa,QAAZ6nB,EAAE/iB,EAAMmN,YAAI,IAAA4V,OAAA,EAAVA,EAAY7nB,EACfI,KAAgB,QAAZ0nB,EAAEhjB,EAAMmN,YAAI,IAAA6V,OAAA,EAAVA,EAAY1nB,KAClB4d,KAAMlZ,EAAMlO,KACZoT,QAASZ,EAAKY,QACdtS,MAAO,CAAEuwB,UAAW,mBAAoBnH,UAAW,gBArBlD,IA2BX,ICjFA,GAzB0B,WAExB,IAAM7Z,EAAQuF,IAAe,SAAA1H,GAAK,OAAIA,EAAM+E,SAAS5C,KAAK,IACpD3B,EAAUoH,GAAkB9C,IAC5BqE,GAAMyF,EAAAA,EAAAA,QAAO,MAQnB,OAFAwU,EAAAA,GAAAA,IAAkBja,GAJS,WACzB3I,EAAQqE,UACV,KAKE3R,EAAAA,EAAAA,KAAA,OAAKiW,IAAKA,EAAI3W,SACX2P,EAAM/M,KAAI,SAAC6G,GACV,OACE/I,EAAAA,EAAAA,KAACmwB,GAAO,CAAiBjB,QAASnmB,GAApBA,EAAKmI,KAGvB,KAIN,ECHA,GAlBY,WAEV,IAAMhC,EAAQsF,IAAe,SAAA1H,GAAK,OAAIA,EAAMnH,QAAQsJ,MAAMC,KAAK,IAM/D,OAJAkhB,EAAAA,EAAAA,kBAAgB,WACdjI,SAASzjB,KAAK2rB,aAAa,QAASnhB,EACtC,GAAG,CAACA,KAGF/P,EAAAA,EAAAA,MAACmxB,EAAAA,GAAU,CAAAhxB,SAAA,EACTU,EAAAA,EAAAA,KAACuwB,GAAM,KACPvwB,EAAAA,EAAAA,KAACwwB,GAAS,KACVxwB,EAAAA,EAAAA,KAACywB,GAAY,KACbzwB,EAAAA,EAAAA,KAAC0wB,GAAiB,MAGxB,EClBMC,GAAO,SAAHvsB,GAAA,IAAM8P,EAAK9P,EAAL8P,MAAK,OACnBlU,EAAAA,EAAAA,KAAC4wB,EAAAA,GAAQ,CAAC1c,MAAOA,EAAM5U,UACrBU,EAAAA,EAAAA,KAAC6wB,GAAG,KACK,EAGbC,EAAAA,QAAgB9wB,EAAAA,EAAAA,KAAC2wB,GAAI,CAACzc,MAAOA,KAC3BiU,SAASC,eAAe,Q,GCdtB2I,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBtmB,IAAjBumB,EACH,OAAOA,EAAaC,QAGrB,IAAIC,EAASL,EAAyBE,GAAY,CAGjDE,QAAS,CAAC,GAOX,OAHAE,EAAoBJ,GAAUK,KAAKF,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAGpEI,EAAOD,OACf,CAGAH,EAAoBO,EAAIF,E,WCzBxB,IAAIG,EAAW,GACfR,EAAoBS,EAAI,SAAS7rB,EAAQ8rB,EAAUC,EAAIC,GACtD,IAAGF,EAAH,CAMA,IAAIG,EAAeC,IACnB,IAASpkB,EAAI,EAAGA,EAAI8jB,EAASzmB,OAAQ2C,IAAK,CACrCgkB,EAAWF,EAAS9jB,GAAG,GACvBikB,EAAKH,EAAS9jB,GAAG,GACjBkkB,EAAWJ,EAAS9jB,GAAG,GAE3B,IAJA,IAGIX,GAAY,EACPglB,EAAI,EAAGA,EAAIL,EAAS3mB,OAAQgnB,MACpB,EAAXH,GAAsBC,GAAgBD,IAAahN,OAAOxT,KAAK4f,EAAoBS,GAAGO,OAAM,SAASvxB,GAAO,OAAOuwB,EAAoBS,EAAEhxB,GAAKixB,EAASK,GAAK,IAChKL,EAASO,OAAOF,IAAK,IAErBhlB,GAAY,EACT6kB,EAAWC,IAAcA,EAAeD,IAG7C,GAAG7kB,EAAW,CACbykB,EAASS,OAAOvkB,IAAK,GACrB,IAAIwkB,EAAIP,SACEhnB,IAANunB,IAAiBtsB,EAASssB,EAC/B,CACD,CACA,OAAOtsB,CArBP,CAJCgsB,EAAWA,GAAY,EACvB,IAAI,IAAIlkB,EAAI8jB,EAASzmB,OAAQ2C,EAAI,GAAK8jB,EAAS9jB,EAAI,GAAG,GAAKkkB,EAAUlkB,IAAK8jB,EAAS9jB,GAAK8jB,EAAS9jB,EAAI,GACrG8jB,EAAS9jB,GAAK,CAACgkB,EAAUC,EAAIC,EAwB/B,C,IC5BAZ,EAAoBhpB,EAAI,SAASopB,GAChC,IAAIe,EAASf,GAAUA,EAAOgB,WAC7B,WAAa,OAAOhB,EAAgB,OAAG,EACvC,WAAa,OAAOA,CAAQ,EAE7B,OADAJ,EAAoBtX,EAAEyY,EAAQ,CAAEjL,EAAGiL,IAC5BA,CACR,E,WCPA,IACIE,EADAC,EAAW1N,OAAO2N,eAAiB,SAASC,GAAO,OAAO5N,OAAO2N,eAAeC,EAAM,EAAI,SAASA,GAAO,OAAOA,EAAIC,SAAW,EAQpIzB,EAAoB0B,EAAI,SAAS9xB,EAAOmE,GAEvC,GADU,EAAPA,IAAUnE,EAAQ+xB,KAAK/xB,IAChB,EAAPmE,EAAU,OAAOnE,EACpB,GAAoB,kBAAVA,GAAsBA,EAAO,CACtC,GAAW,EAAPmE,GAAanE,EAAMwxB,WAAY,OAAOxxB,EAC1C,GAAW,GAAPmE,GAAoC,oBAAfnE,EAAMgyB,KAAqB,OAAOhyB,CAC5D,CACA,IAAIiyB,EAAKjO,OAAOkO,OAAO,MACvB9B,EAAoBkB,EAAEW,GACtB,IAAIE,EAAM,CAAC,EACXV,EAAiBA,GAAkB,CAAC,KAAMC,EAAS,CAAC,GAAIA,EAAS,IAAKA,EAASA,IAC/E,IAAI,IAAIrW,EAAiB,EAAPlX,GAAYnE,EAAyB,iBAAXqb,KAAyBoW,EAAeW,QAAQ/W,GAAUA,EAAUqW,EAASrW,GACxH2I,OAAOqO,oBAAoBhX,GAASiX,SAAQ,SAASzyB,GAAOsyB,EAAItyB,GAAO,WAAa,OAAOG,EAAMH,EAAM,CAAG,IAI3G,OAFAsyB,EAAa,QAAI,WAAa,OAAOnyB,CAAO,EAC5CowB,EAAoBtX,EAAEmZ,EAAIE,GACnBF,CACR,C,ICxBA7B,EAAoBtX,EAAI,SAASyX,EAASgC,GACzC,IAAI,IAAI1yB,KAAO0yB,EACXnC,EAAoBoC,EAAED,EAAY1yB,KAASuwB,EAAoBoC,EAAEjC,EAAS1wB,IAC5EmkB,OAAOyO,eAAelC,EAAS1wB,EAAK,CAAE6yB,YAAY,EAAM5oB,IAAKyoB,EAAW1yB,IAG3E,ECPAuwB,EAAoBuC,EAAI,WACvB,GAA0B,kBAAfC,WAAyB,OAAOA,WAC3C,IACC,OAAOb,MAAQ,IAAIc,SAAS,cAAb,EAChB,CAAE,MAAOjzB,GACR,GAAsB,kBAAXvB,OAAqB,OAAOA,MACxC,CACA,CAPuB,GCAxB+xB,EAAoBoC,EAAI,SAASZ,EAAKkB,GAAQ,OAAO9O,OAAO+O,UAAUC,eAAetC,KAAKkB,EAAKkB,EAAO,ECCtG1C,EAAoBkB,EAAI,SAASf,GACX,qBAAX0C,QAA0BA,OAAOC,aAC1ClP,OAAOyO,eAAelC,EAAS0C,OAAOC,YAAa,CAAElzB,MAAO,WAE7DgkB,OAAOyO,eAAelC,EAAS,aAAc,CAAEvwB,OAAO,GACvD,E,WCDA,IAAImzB,EAAkB,CACrB,IAAK,GAaN/C,EAAoBS,EAAEM,EAAI,SAASiC,GAAW,OAAoC,IAA7BD,EAAgBC,EAAgB,EAGrF,IAAIC,EAAuB,SAASC,EAA4Bja,GAC/D,IAKIgX,EAAU+C,EALVtC,EAAWzX,EAAK,GAChBka,EAAcla,EAAK,GACnBma,EAAUna,EAAK,GAGIvM,EAAI,EAC3B,GAAGgkB,EAAS2C,MAAK,SAAS70B,GAAM,OAA+B,IAAxBu0B,EAAgBv0B,EAAW,IAAI,CACrE,IAAIyxB,KAAYkD,EACZnD,EAAoBoC,EAAEe,EAAalD,KACrCD,EAAoBO,EAAEN,GAAYkD,EAAYlD,IAGhD,GAAGmD,EAAS,IAAIxuB,EAASwuB,EAAQpD,EAClC,CAEA,IADGkD,GAA4BA,EAA2Bja,GACrDvM,EAAIgkB,EAAS3mB,OAAQ2C,IACzBsmB,EAAUtC,EAAShkB,GAChBsjB,EAAoBoC,EAAEW,EAAiBC,IAAYD,EAAgBC,IACrED,EAAgBC,GAAS,KAE1BD,EAAgBC,GAAW,EAE5B,OAAOhD,EAAoBS,EAAE7rB,EAC9B,EAEI0uB,EAAqBC,KAA8B,wBAAIA,KAA8B,yBAAK,GAC9FD,EAAmBpB,QAAQe,EAAqBO,KAAK,KAAM,IAC3DF,EAAmBtjB,KAAOijB,EAAqBO,KAAK,KAAMF,EAAmBtjB,KAAKwjB,KAAKF,G,IC/CvF,IAAIG,EAAsBzD,EAAoBS,OAAE9mB,EAAW,CAAC,MAAM,WAAa,OAAOqmB,EAAoB,KAAO,IACjHyD,EAAsBzD,EAAoBS,EAAEgD,E","sources":["components/common/search.tsx","utils.ts","api/cookies.ts","api/login.ts","api/newmessage.ts","api/newtopic.ts","api/sections.ts","api/topicinfo.ts","api/topicMessages.ts","api/topicslist.ts","api/index.ts","store/slices/login.ts","store/slices/new_topic.ts","store/slices/options.ts","store/slices/sections.ts","store/slices/tooltips.ts","store/slices/topic.ts","store/slices/topics_list.ts","data/newmessage/actions.ts","store/root.ts","data/newmessage/reducer.ts","data/newmessage/index.ts","store/hooks.ts","components/navigation/nav_bar.tsx","components/login/logged_user.tsx","components/login/login_form.tsx","components/common/error.tsx","components/login/index.tsx","pages/topics_list/sections.tsx","pages/topics_list/header.tsx","pages/topics_list/table_header.tsx","pages/topics_list/row/pages.tsx","pages/topics_list/row/topic_name_cell.tsx","pages/topics_list/row/preview_link.tsx","pages/topics_list/row/index.tsx","components/common/pages.tsx","components/common/text_editor.tsx","pages/topics_list/new_topic.tsx","components/preview/preview_buttons.tsx","components/extensions/code_highlight.ts","pages/topic/index.tsx","components/extensions/code1c.tsx","components/extensions/link_to_post.tsx","components/extensions/link_to_user.tsx","components/extensions/youtube_link.tsx","components/extensions/custom_link.tsx","pages/topic/row/vote_item.tsx","pages/topic/row/vote_chart.tsx","pages/topic/row/vote.tsx","pages/topic/row/msg_text.tsx","pages/topic/row/user_info.tsx","components/preview/preview_content.tsx","components/preview/topic_preview.tsx","pages/topics_list/index.tsx","pages/topic/header.tsx","pages/topic/topic_info.tsx","pages/topic/row/index.tsx","pages/topic/footer.tsx","pages/topic/new_message.tsx","pages/options/radio_option.tsx","pages/options/string_option.tsx","pages/options/formscheme.ts","pages/options/tab.tsx","pages/options/index.tsx","pages/approutes.tsx","components/navigation/nav_bar_footer.tsx","components/tooltips/tooltip_header.tsx","components/tooltips/tooltip_body.tsx","components/tooltips/tooltip_window.tsx","components/tooltips/tooltip.tsx","components/tooltips/tooltips_container.tsx","App.tsx","index.tsx","../webpack/bootstrap","../webpack/runtime/chunk loaded","../webpack/runtime/compat get default export","../webpack/runtime/create fake namespace object","../webpack/runtime/define property getters","../webpack/runtime/global","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object","../webpack/runtime/jsonp chunk loading","../webpack/startup"],"sourcesContent":["import { ReactElement, useState } from 'react'\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\nimport FormControl from 'react-bootstrap/FormControl'\r\nimport Dropdown from 'react-bootstrap/Dropdown'\r\nimport DropdownButton from 'react-bootstrap/DropdownButton'\r\n\r\nimport './search.css'\r\n\r\nconst Search = (): ReactElement => {\r\n\r\n  const [searchEngine, setSearchEngine] = useState('Яндекс');\r\n  const [text, setText] = useState('');\r\n\r\n  const onKeyPress = (e: any) => {\r\n    if (e.key === 'Enter') {\r\n      doSearch();\r\n    }\r\n  }\r\n\r\n  const doSearch = () => {\r\n\r\n    let url: string;\r\n    if (searchEngine === 'Яндекс') \r\n      url = `https://www.yandex.ru/search/?text=${text}&site=forum.mista.ru`;\r\n\r\n    else if (searchEngine === 'Google') \r\n      url = `https://www.google.ru/search?q=${text}+site:forum.mista.ru`\r\n\r\n    window.open(url);\r\n    setText('');\r\n  }\r\n\r\n  return (\r\n    <InputGroup size=\"sm\">\r\n      <DropdownButton \r\n        id=\"search-engine\" \r\n        title=\"\" \r\n        size=\"sm\" \r\n        style={{ marginRight: \"2px\" }} \r\n        className='button' \r\n        variant=\"light\"\r\n        onSelect={eventKey => setSearchEngine(eventKey)}\r\n        >\r\n        <Dropdown.Item eventKey=\"Яндекс\">Яндекс</Dropdown.Item>\r\n        <Dropdown.Item eventKey=\"Google\">Google</Dropdown.Item>\r\n      </DropdownButton>\r\n      <FormControl\r\n        type=\"text\"\r\n        placeholder={`${searchEngine}: поиск`}\r\n        style={{ marginRight: \"4px\", paddingRight: \"27px\" }}\r\n        className='input'\r\n        onKeyPress={onKeyPress}\r\n        onChange={e => setText(e.target.value)}\r\n        value={text}\r\n      />\r\n      <InputGroup.Text style={{ marginLeft: \"-35px\", marginTop: \"auto\", marginBottom: \"auto\", cursor: \"pointer\" }} onClick={doSearch}>\r\n        <i className=\"fa fa-search input\" style={{ zIndex: 1000 }} />\r\n      </InputGroup.Text>\r\n    </InputGroup>\r\n  )\r\n\r\n}\r\n\r\nexport default Search;","\r\nexport function today(td: Date): boolean {\r\n  var d = new Date();\r\n  return td.getDate() === d.getDate() && td.getMonth() === d.getMonth() && td.getFullYear() === d.getFullYear();\r\n}\r\n\r\nexport const groupBy = <T, K extends keyof any>(list: T[], getKey: (item: T) => K) =>\r\n  list.reduce((previous, currentItem) => {\r\n    const group = getKey(currentItem);\r\n    if (!previous[group]) previous[group] = [];\r\n    previous[group].push(currentItem);\r\n    return previous;\r\n  }, {} as Record<K, T[]>)\r\n\r\nexport const parseJSON = (text: string): {} => {\r\n\r\n  try {\r\n    return JSON.parse(text);\r\n  } catch (e) {\r\n\r\n  }\r\n\r\n  try {\r\n    text = text\r\n      .replace(/\\\\</g, '<')\r\n      .replace(/\\\\>/g, '>')\r\n      .replace(/\\\\&/g, '&')\r\n      .replace(/\\\\'/g, \"'\")\r\n      .replace(/\\\\\"/g, \"\")\r\n      .replace(/ \"/g, ' \\\\\"')\r\n      .replace(/\"\"/g, '\\\\\"\"')\r\n      .replace(/\\t/g, '\\\\t')\r\n      .replace(/\"(\\.| |\\?)/g, '\\\\\"$1')\r\n\r\n    //           console.log(text);\r\n    return JSON.parse(text);\r\n\r\n    //return eval(text);\r\n  } catch (e) {\r\n    console.error(e.message);\r\n    console.log(text);\r\n\r\n    return {};\r\n  }\r\n}\r\n\r\nexport const getMaxPage = (count: number): number => {\r\n  if (count === -1) return -1;\r\n  return Math.min(Math.ceil(count / 100), 10) || 1;\r\n}\r\n\r\nexport const childrenToText = (children: any): string[]=> {\r\n\r\n  if (!children) return children;\r\n\r\n  return children.map(value => {\r\n    if (typeof (value) === 'string') {\r\n      return value;\r\n    } else if (value.type === 'br') {\r\n      return '<br>'\r\n    } else if (value.type.displayName === 'Connect(LinkToPost)' || value.type.displayName === 'Connect(t)') {\r\n      return value.props.number;\r\n    } else {\r\n      console.log(value);\r\n      return value;\r\n    }\r\n  })\r\n}\r\n\r\nexport const extractTextFromHTML = (htmltext: string): string => {\r\n  const parser = new DOMParser();\r\n  const floatingElement = parser.parseFromString(htmltext, 'text/html');\r\n  return (floatingElement.firstChild as HTMLElement).innerText;\r\n}","import { fetchJsonpAndGetJson, urlCookies } from '.'\r\nimport { ILogin } from 'src/store';\r\n\r\ntype IAPIResponse = {\r\n  cookie: {\r\n    entr_id: string,\r\n    entr_key: string,\r\n    entr_hash: string,\r\n    musthave: string,\r\n    hotlog: string\r\n  },\r\n  session: {\r\n    entered: number,\r\n    user_id: string,\r\n    user_name: string,\r\n    user_hash: string,\r\n    is_moderator: number,\r\n    light_moderator: number,\r\n    section: string,\r\n    show_moderator_tools: number,\r\n    kb: string,\r\n    registered_unixtime: string,\r\n    guid: string,\r\n    last_error?: string,\r\n    user: {\r\n      id: string,\r\n      name: string,\r\n      is_moderator: boolean,\r\n      light_moderator: boolean,\r\n      kb: boolean,\r\n      section_owner: boolean,\r\n      section: string,\r\n      registered_unixtime: string,\r\n      balance: number\r\n    }\r\n  }\r\n}\r\n\r\nfunction convertResponse(response: IAPIResponse): ILogin {\r\n\r\n  const { session } = response;\r\n\r\n  return ({\r\n    userId: Number(session?.user_id),\r\n    userName: session?.user_name,\r\n    userHash: session?.user_hash,\r\n    lastError: session?.last_error\r\n  })\r\n\r\n}\r\n\r\nasync function fetchCookies(): Promise<ILogin| undefined>  {\r\n\r\n  const response = await fetchJsonpAndGetJson(urlCookies);\r\n  return convertResponse(response);\r\n\r\n}\r\n\r\nexport { fetchCookies }","import { domain, urlLogin, urlLogout, paramsToString } from '.'\r\n\r\nexport interface ILoginRequest {\r\n  username: string,\r\n  password: string,\r\n}\r\n\r\nexport const fetchLogin = async (params: ILoginRequest): Promise<void> => {\r\n  await fetch(`${domain}/${urlLogin}`, {\r\n    method: 'POST',\r\n    body: paramsToString('', {user_name: params.username, user_password: params.password}),\r\n    mode: 'no-cors',\r\n    credentials: 'include',\r\n    headers: {\r\n      'Accept': 'text/html,application/xhtml+xml,application/xml',\r\n      'Content-Type': 'application/x-www-form-urlencoded',\r\n    },\r\n    redirect: 'follow'\r\n  });\r\n}\r\n\r\nexport const fetchLogout = async (): Promise<void> => {\r\n  const fullUrl = `${domain}/${urlLogout}`;\r\n  await fetch(fullUrl, {\r\n    mode: 'no-cors',\r\n    credentials: 'include'\r\n  });\r\n}","import { domain, paramsToString, urlNewMessage } from \".\";\r\n\r\n// New message\r\nexport interface INewMessageRequest {\r\n  message_text: string,\r\n  action: \"new\",\r\n  topic_id: string,\r\n  rnd: number,\r\n  voting_select?: number,\r\n  as_admin?: boolean\r\n}\r\n\r\nexport const fetchNewMessage = async (params: INewMessageRequest): Promise<any> => {\r\n  \r\n  const url = urlNewMessage.replace(':id', params.topic_id);\r\n\r\n  const options: RequestInit = {\r\n    method: 'POST',\r\n    body: paramsToString('', params),\r\n    mode: 'no-cors',\r\n    credentials: 'include',\r\n    headers: {\r\n      'Accept': 'text/html,application/xhtml+xml,application/xml',\r\n      'Content-Type': 'application/x-www-form-urlencoded'  \r\n    },\r\n    redirect: 'follow'\r\n  }\r\n\r\n  const result = await fetch(`${domain}/${url}`, options);\r\n  return result;\r\n}","import { domain, paramsToString, urlNewTopic } from \".\";\r\n\r\nexport interface INewTopicRequest {\r\n  action: \"new\",\r\n  rnd: number,\r\n  topic_text: string,\r\n  message_text: string,\r\n  target_section: string,\r\n  target_forum: string,\r\n  voting: number,\r\n  select1?: string,\r\n  select2?: string,\r\n  select3?: string,\r\n  select4?: string,\r\n  select5?: string,\r\n  select6?: string,\r\n  select7?: string,\r\n  select8?: string,\r\n  select9?: string,\r\n  select10?: string\r\n}\r\n\r\nexport const fetchNewTopic = async (params: INewTopicRequest): Promise<any> => {\r\n\r\n  await fetch(`${domain}/${urlNewTopic}`, {\r\n    method: 'POST',\r\n    body: paramsToString('', params),\r\n    mode: 'no-cors',\r\n    credentials: 'include',\r\n    headers: {\r\n      'Content-Type': 'application/x-www-form-urlencoded'\r\n    }\r\n  });\r\n}","import { fetchJsonpAndGetJson, urlSections } from '.'\r\nimport type { ISectionsList, ISectionItem } from 'src/store'\r\n\r\ninterface IAPIResponse {\r\n  id: number,\r\n  forum: string,\r\n  shortn: string,\r\n  fulln: string\r\n}\r\n\r\nfunction convertResponse(response: IAPIResponse): ISectionItem {\r\n\r\n  return ({\r\n    id: response.id,\r\n    forum: response.forum,\r\n    code: response.shortn,\r\n    name: response.fulln,\r\n  })\r\n\r\n}\r\n\r\nexport const fetchSections = async (): Promise<ISectionsList> => {\r\n  const list = await fetchJsonpAndGetJson(urlSections);\r\n  return list.map(convertResponse);\r\n}\r\n","import { fetchAndGetJson, urlTopicInfo } from '.'\r\nimport type { ITopicInfo } from 'src/store'\r\n\r\ninterface IAPIResponse {\r\n  id: string,\r\n  text: string,\r\n  forum: string,\r\n  section: string,\r\n  created: string,\r\n  user_id: string,\r\n  user_name: string,\r\n  updated: string,\r\n  updated_name: string,\r\n  answers_count: string,\r\n  down: number,\r\n  closed: number,\r\n  deleted: number,\r\n  is_voting: number,\r\n  voting: {\r\n    select: string,\r\n    result: number\r\n  }[]\r\n}\r\n\r\nfunction convertResponse(response: IAPIResponse): ITopicInfo {\r\n\r\n  let voting = [];\r\n  if (response.voting)\r\n    voting = response.voting.map(x => ({\r\n      text: x.select,\r\n      count: x.result\r\n    }));\r\n    \r\n  return ({\r\n    id: parseInt(response.id),\r\n    title: response.text,\r\n    forum: response.forum,\r\n    sectionId: response.section,\r\n    created: parseInt(response.created) * 1000,\r\n    authorId: response.user_id,\r\n    author: response.user_name,\r\n    updated: parseInt(response.updated) * 1000,\r\n    lastUser: response.updated_name,\r\n    count: parseInt(response.answers_count),\r\n    down: response.down,\r\n    closed: response.closed,\r\n    deleted: response.deleted,\r\n    isVoting: response.is_voting,\r\n    voting\r\n  })\r\n\r\n}\r\n\r\nasync function fetchTopicInfo(id: number): Promise<ITopicInfo> {\r\n\r\n  const info = await fetchAndGetJson(urlTopicInfo, { id });\r\n  return convertResponse(info);\r\n\r\n}\r\n\r\nexport { fetchTopicInfo }","\r\nimport { fetchAndGetJson, urlTopicMessages } from '.'\r\nimport type { ITopicMessage, ITopicMessagesList } from 'src/store'\r\n\r\ninterface IAPIRequest {\r\n  id: number,\r\n  from?: number,\r\n  to?: number\r\n}\r\n\r\nexport interface ITopicMessageRequest extends IAPIRequest {}\r\n\r\ninterface IAPIResponse {\r\n  id: string,\r\n  n: string,\r\n  user: string,\r\n  userId: string,\r\n  text: string,\r\n  utime: string,\r\n  vote: number\r\n}  \r\n\r\nfunction convertResponse(response: IAPIResponse): ITopicMessage {\r\n\r\n  return ({\r\n    id: parseInt(response.id),\r\n    n: parseInt(response.n),\r\n    user: response.user,\r\n    userId: parseInt(response.userId),\r\n    text: response.text,\r\n    time: parseInt(response.utime) * 1000,\r\n    vote: response.vote\r\n  })\r\n\r\n}\r\n\r\nasync function fetchTopicMessages(params?: ITopicMessageRequest): Promise<ITopicMessagesList> {\r\n\r\n  const list = await fetchAndGetJson(urlTopicMessages, params);\r\n  return list.map(convertResponse);\r\n\r\n}\r\n\r\nasync function fetchTopicMessage(id: number, n: number): Promise<ITopicMessage> {\r\n\r\n  const to = (n === 0) ? n+1 : n;\r\n\r\n  const list = await fetchAndGetJson(urlTopicMessages, {id, from: n, to});\r\n  return list.map(convertResponse).find((item: ITopicMessage) => item.n === n);\r\n\r\n}\r\n\r\nexport { fetchTopicMessages, fetchTopicMessage }","import { fetchAndGetJson, urlTopicsList } from '.'\r\n\r\nimport type { ITopicsList, ITopicsListItem } from 'src/store'\r\n\r\nexport interface ITopicsListRequest {\r\n  itemsPerPage?: number | null,\r\n  page?: number | null,\r\n  beforeTime?: string | null,\r\n  forum?: string | null,\r\n  section?: string | null,\r\n  userId?: string | null,\r\n  myTopics?: string | null\r\n}\r\n\r\ninterface IAPIRequest {\r\n  topics?: string,\r\n  section_short_name?: string,\r\n  forum?: string,\r\n  user_id?: string,\r\n  mytopics?: string\r\n}\r\n\r\ninterface IAPIResponse {\r\n  id: number,\r\n  forum: string,\r\n  sect1: string,\r\n  sect2: string,\r\n  v8: string,\r\n  closed: number,\r\n  down: number,\r\n  paid: number,\r\n  text: string,\r\n  message: string,\r\n  created: number,\r\n  utime: number,\r\n  user: string,\r\n  user0: string,\r\n  is_voting: number,\r\n  answ: number\r\n}\r\n\r\nfunction convertRequest(request: ITopicsListRequest): IAPIRequest {\r\n\r\n  const page = request.page || 1;\r\n  const itemsCount = request.itemsPerPage * page;\r\n\r\n  return {\r\n    topics: String(itemsCount),\r\n    section_short_name: request.section,\r\n    forum: request.forum,\r\n    user_id: request.userId,\r\n    mytopics: request.myTopics,\r\n  }\r\n}\r\n\r\nfunction convertResponse(response: IAPIResponse): ITopicsListItem {\r\n\r\n  return ({\r\n    id: response.id,\r\n    forum: response.forum,\r\n    section: response.sect1,\r\n    sectionCode: response.sect2,\r\n    author: response.user0,\r\n    lastUser: response.user,\r\n    created: response.created * 1000,\r\n    updated: response.utime * 1000,\r\n    count: response.answ,\r\n    text: response.text,\r\n    closed: response.closed === 1,\r\n    down: response.down === 1,\r\n    pinned: response.utime === 2147483648,\r\n    isVoting: response.is_voting === 1,\r\n    showPreview: false\r\n  })\r\n\r\n}\r\n\r\nasync function fetchTopicsList(params?: ITopicsListRequest): Promise<ITopicsList> {\r\n\r\n  const request = convertRequest(params);\r\n\r\n  const list = await fetchAndGetJson(urlTopicsList, request);\r\n  return list.map(convertResponse);\r\n\r\n}\r\n\r\nexport { fetchTopicsList }","import fetchJsonp from 'fetch-jsonp'\r\nimport * as utils from 'src/utils'\r\n\r\nexport const domain: string = localStorage.getItem('domain') || 'https://forum.mista.ru';\r\n//export const domain = 'https://dev.mista.ru';\r\nexport const urlTopicsList: string = localStorage.getItem('urlTopicsList') || 'api/topic.php';\r\nexport const urlTopicInfo: string = localStorage.getItem('urlTopicInfo') || 'ajax_gettopic.php';\r\nexport const urlTopicMessages: string = localStorage.getItem('urlTopicMessages') || 'api/message.php';\r\nexport const urlLogin: string = localStorage.getItem('urlLogin') || 'users.php?action=do_enter';\r\nexport const urlLogout: string = localStorage.getItem('urlLogout') || 'users.php?action=exit';\r\nexport const urlCookies: string = localStorage.getItem('urlCookies') || 'ajax_cookie.php';\r\nexport const urlSections: string = localStorage.getItem('urlSections') || 'ajax_getsectionslist.php';\r\nexport const urlNewMessage: string = localStorage.getItem('urlNewMessage') || 'topic.php?id=:id&page=1';\r\nexport const urlNewTopic: string = localStorage.getItem('urlNewTopic') || 'index.php';\r\nexport const urlAddBookmark: string = localStorage.getItem('urlAddBookmark') || 'ajax_addbookmark.php';\r\nexport const urlSearch: string = localStorage.getItem('urlSearch') || 'ajax_find.php';\r\n\r\nexport * from './cookies'\r\nexport * from './login'\r\nexport * from './newmessage'\r\nexport * from './newtopic'\r\nexport * from './sections'\r\nexport * from './topicinfo'\r\nexport * from './topicMessages'\r\nexport * from './topicslist'\r\n\r\n//Bookmark\r\nexport type RequestBookmark = {\r\n  id: string\r\n}\r\n\r\nexport const postBookmark = async (params: RequestBookmark) => {\r\n\r\n  await fetch(`${domain}/${urlAddBookmark}`, {\r\n    method: 'POST',\r\n    body: paramsToString('', params),\r\n    mode: 'no-cors',\r\n    credentials: 'include',\r\n  });\r\n}\r\n\r\nexport const paramsToString = (paramsPrefix: string, params?: {}): string => {\r\n  if (!params)\r\n    return '';\r\n\r\n  let searchParams = new URLSearchParams();\r\n  for (let key in params) {\r\n    const value = Reflect.get(params, key)\r\n    if (value !== undefined)\r\n      searchParams.append(key, value)\r\n  }\r\n\r\n  let str = searchParams.toString();\r\n  if (str.length > 0)\r\n    return paramsPrefix + str;\r\n  else\r\n    return '';\r\n}\r\n\r\nexport const fetchJsonpAndGetJson = async (url: string, params?: {}, options?: {}): Promise<any> => {\r\n\r\n  let fullUrl = `${domain}/${url}${paramsToString('?', params)}`;\r\n  const response = await fetchJsonp(fullUrl);\r\n  let responseJson = await response.json();\r\n  let json;\r\n  if (typeof (responseJson) === 'string') {\r\n\r\n    try {\r\n      json = JSON.parse(responseJson)\r\n    } catch (e) {\r\n      json = utils.parseJSON(responseJson);\r\n    }\r\n  } else {\r\n    json = responseJson;\r\n  }\r\n  return json;\r\n}\r\n\r\nexport const fetchAndGetJson = async (url: string, params?: {}, init?: RequestInit): Promise<any> => {\r\n\r\n  let fullUrl = `${domain}/${url}${paramsToString('?', params)}`;\r\n\r\n  if (!init)\r\n    init = {\r\n      mode: 'cors',\r\n      credentials: 'same-origin'  \r\n    }\r\n\r\n  const response = await fetch(fullUrl, init);\r\n  return await response.json();\r\n  \r\n}","import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit'\r\n\r\nimport { fetchLogin, fetchLogout, ILoginRequest } from 'src/api'\r\nimport { fetchCookies } from 'src/api'\r\n\r\nimport { RootState } from '../types';\r\n\r\nexport interface ILogin {\r\n  userId?: number;\r\n  userName?: string,\r\n  userHash?: string,\r\n  lastError?: string,\r\n}\r\n\r\nexport interface ILoginState {\r\n  status: \"init\" | \"loading\" | \"success\" | \"error\",\r\n  logged: boolean,\r\n  userId?: number,\r\n  userName?: string,\r\n  userHash?: string,\r\n  lastError?: string,\r\n  error?: string,\r\n  lastUpdated?: number,\r\n  isFetching?: boolean,\r\n}\r\n\r\nconst initialState: ILoginState = {\r\n  status: \"init\",\r\n  logged: false\r\n}\r\n\r\nexport const checkLogin = createAsyncThunk(\r\n  'login/check',\r\n  async () => {\r\n\r\n    return await fetchCookies();\r\n\r\n  }\r\n)\r\n\r\nexport const doLogin = createAsyncThunk(\r\n  'login/login',\r\n  async (params: ILoginRequest, { dispatch }) => {\r\n\r\n    await fetchLogin(params);\r\n    return fetchCookies();\r\n\r\n  }\r\n)\r\n\r\nexport const doLogout = createAsyncThunk(\r\n  'login/logout',\r\n  async () => {\r\n\r\n    return await fetchLogout();\r\n\r\n  }\r\n)\r\n\r\nconst shouldLogin = ({ login }: RootState): boolean => {\r\n \r\n  if (!login) return true;\r\n  if (login.status === \"loading\") return false;\r\n  \r\n  return true;\r\n}\r\n\r\nexport const doLoginIfNeeded = (username: string, password: string): any => (dispatch: any, getState: any) => {\r\n  if (shouldLogin(getState())) {\r\n    return dispatch(doLogin({ username, password }))\r\n  }\r\n}\r\n\r\nexport const checkLoginIfNeeded = (): any => (dispatch: any, getState: any) => {\r\n  if (shouldLogin(getState())) {\r\n    return dispatch(checkLogin())\r\n  }\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'login',\r\n  initialState,\r\n  reducers: {\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(doLogin.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })    \r\n      .addCase(doLogin.fulfilled, (state, { payload }: PayloadAction<ILogin>) => {\r\n        state.status = \"success\";\r\n        state.userId = payload.userId;\r\n        state.userName = payload.userName;\r\n        state.userHash = payload.userHash;\r\n        state.logged = true;\r\n        delete state.error;\r\n      })   \r\n      .addCase(doLogin.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      })   \r\n      // logout\r\n      .addCase(doLogout.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })    \r\n      .addCase(doLogout.fulfilled, (state) => {\r\n        state.status = \"success\";\r\n        state.logged = false;\r\n\r\n        delete state.userId;\r\n        delete state.userName;\r\n        delete state.userHash;\r\n        delete state.error;\r\n      })   \r\n      .addCase(doLogout.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      }) \r\n  }\r\n})  \r\n\r\nexport const { actions: loginActions, reducer: login } = slice;","import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit'\r\n\r\nimport { ISectionItem } from \"./sections\";\r\nimport { fetchNewTopic, INewTopicRequest } from 'src/api';\r\nimport { RootState } from '../types';\r\n\r\nexport type NewTopicState = {\r\n  status: \"init\" | \"loading\" | \"success\" | \"error\",\r\n  section: ISectionItem,\r\n  text: string,\r\n  subject: string,\r\n  forum: string,\r\n  isVoting: boolean,\r\n  error?: string\r\n};\r\n\r\nconst initialState: NewTopicState = {\r\n  status: \"init\",\r\n  section: null,\r\n  text: '',\r\n  subject: '',\r\n  forum: '1C',\r\n  isVoting: false\r\n}\r\n\r\nexport type postNewTopicParams = {\r\n  subject: string,\r\n  text: string,\r\n  section: number,\r\n  forum: string,\r\n  isVoting: boolean,\r\n  votingItems?: Array<string>,\r\n  onSuccess?: () => void\r\n};\r\n\r\nexport const postNewTopic = createAsyncThunk(\r\n  'newTopic/post',\r\n  async (params: postNewTopicParams) => {\r\n\r\n    let fetchParams: INewTopicRequest = {\r\n      message_text: params.text,\r\n      topic_text: params.subject,\r\n      target_section: String(params.section),\r\n      target_forum: params.forum.toLowerCase(),\r\n      action: 'new',\r\n      rnd: Math.round(Math.random() * 10000000000),\r\n      voting: params.isVoting ? 1 : 0\r\n    };\r\n\r\n    if (params.votingItems)\r\n      for (let i = 0; i < params.votingItems.length; i++) {\r\n        fetchParams[`section${i + 1}`] = params.votingItems[i];\r\n      }\r\n\r\n    await fetchNewTopic(fetchParams);\r\n    // if (params.onSuccess)\r\n    // params.onSuccess();\r\n  })\r\n\r\nexport const shouldPost = ({ newTopic }: RootState): boolean => {\r\n\r\n  if (!newTopic) return false\r\n  if (newTopic.status === \"loading\") return false\r\n\r\n  return true\r\n}\r\n\r\nexport const postNewTopicIfNeeded = (params: postNewTopicParams) => (dispatch: any, getState: any) => {\r\n  const state = getState();\r\n  if (shouldPost(state)) {\r\n    return dispatch(postNewTopic(params));\r\n  }\r\n}\r\n\r\nconst clear = (state: NewTopicState) => {\r\n  state.status = \"init\";\r\n  state.text = '';\r\n  state.subject = '';\r\n  state.forum = '';\r\n  state.isVoting = false;\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'newTopic',\r\n  initialState,\r\n  reducers: {\r\n    clear,\r\n    changeSubject: (state, { payload }: PayloadAction<string>) => {\r\n      state.subject = payload;\r\n    },\r\n    changeText: (state, { payload }: PayloadAction<string>) => {\r\n      state.text = payload;\r\n    },\r\n    changeSection: (state, { payload }: PayloadAction<ISectionItem>) => {\r\n      state.section = payload;\r\n      state.forum = payload?.forum.toLowerCase();\r\n    },\r\n    showVoting: (state, { payload }: PayloadAction<boolean>) => {\r\n      state.isVoting = payload;\r\n    },\r\n    setError: (state, { payload }: PayloadAction<string>) => {\r\n      state.error = payload;\r\n    }\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(postNewTopic.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })\r\n      .addCase(postNewTopic.fulfilled, (state) => {\r\n        clear(state);\r\n        delete state.error;\r\n      })\r\n      .addCase(postNewTopic.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      })\r\n  }\r\n});\r\n\r\nexport const { actions: newTopicActions, reducer: newTopic } = slice;","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\r\n\r\nexport interface IOptionsItems {\r\n  theme: 'yellow' | 'lightgray' | 'dark',\r\n  topicsPerPage: string,\r\n  autoRefreshTopicsList: string,\r\n  autoRefreshTopicsListInterval: string,\r\n  autoRefreshTopic: string,\r\n  autoRefreshTopicInterval: string,\r\n  tooltipDelay: string,\r\n  showTooltips: string,\r\n  showTooltipOnPostLink: string,\r\n  showYoutubeVideoTitle: string,\r\n  replaceCatalogMista: string,\r\n  fixBrokenLinks: string\r\n}\r\n\r\nexport interface IOptionsState {\r\n  voteColors: Array<string>,\r\n  items: IOptionsItems,\r\n  show?: boolean\r\n};\r\n\r\nexport const defaultOptionsState: IOptionsState = {\r\n  voteColors: [\r\n    \"#FF1616\", //1\r\n    \"#1A861A\", //2\r\n    \"#0023FF\", //3\r\n    \"#FF6B18\", //4\r\n    \"#9B3A6E\", //5\r\n    \"#567655\", //6\r\n    \"#233345\", //7\r\n    \"#CC0000\", //8\r\n    \"#00CCCC\", //9\r\n    \"#0000CC\", //10\r\n  ],\r\n  items: {\r\n    theme: 'lightgray',\r\n    topicsPerPage: '20',\r\n    autoRefreshTopicsList: 'false',\r\n    autoRefreshTopicsListInterval: '60',\r\n    autoRefreshTopic: 'true',\r\n    autoRefreshTopicInterval: '60',\r\n    //tooltips\r\n    showTooltips: 'true',\r\n    tooltipDelay: '500',\r\n    showTooltipOnPostLink: 'true',\r\n    //links\r\n    showYoutubeVideoTitle: 'true',\r\n    replaceCatalogMista: 'true',\r\n    fixBrokenLinks: 'true',\r\n  }\r\n}\r\n\r\nconst readOption = (name: string, defaultValue: string): string => {\r\n  return window.localStorage.getItem(name) || defaultValue;\r\n}\r\n\r\nconst readAllOptions = (): IOptionsState => {\r\n  \r\n  let state: IOptionsState = defaultOptionsState;\r\n  for (let key in state.items) {\r\n    state.items[key] = readOption(key, state.items[key]);\r\n  }\r\n\r\n  return state;\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'options',\r\n  initialState: readAllOptions(),\r\n  reducers: {\r\n    read: (state) => {\r\n      for (let key in defaultOptionsState.items) {\r\n        state.items[key] = readOption(key, defaultOptionsState.items[key]);\r\n      }\r\n    },\r\n    save: (state, { payload }: PayloadAction<IOptionsItems>) => {\r\n      for (let key in payload) {\r\n        const value = String(payload[key]); \r\n        state.items[key] = value;\r\n        window.localStorage.setItem(key, value);\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nexport const { actions: optionsActions, reducer: options } = slice;","import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\r\n\r\nimport { groupBy } from 'src/utils'\r\n\r\nimport { fetchSections } from 'src/api'\r\nimport { RootState } from '../types';\r\n\r\nexport interface ISectionItem {\r\n  id: number;\r\n  forum: string,\r\n  code: string,\r\n  name: string,\r\n}\r\n\r\nexport interface ISectionsList extends Array<ISectionItem> {}\r\n\r\nexport interface ISectionsTree{\r\n  [key: string]: ISectionItem[]\r\n}\r\n\r\nexport interface ISectionsListState {\r\n  status: \"init\" | \"loading\" | \"success\" | \"error\";\r\n  items: ISectionsList,\r\n  tree?: {},\r\n  error?: string,\r\n  lastUpdated?: number\r\n}\r\n\r\nconst initialState: ISectionsListState = {\r\n  status: \"init\",\r\n  items: [],\r\n  tree: {}\r\n}\r\n\r\nexport const getSections = createAsyncThunk(\r\n  'sections/fetch',\r\n  async () => {\r\n    return await fetchSections();\r\n  }\r\n)\r\n\r\nconst shouldGetSections = ({ sections }: RootState): boolean => {\r\n\r\n  if (!sections) return true\r\n  if (sections.status === \"loading\") return false\r\n  if (sections.items.length > 0) return false;\r\n\r\n  return true;\r\n}\r\n\r\nexport const getSectionsIfNeeded = (): any => (dispatch: any, getState: any) => {\r\n  if (shouldGetSections(getState())) {\r\n    return dispatch(getSections());\r\n  }\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'sections',\r\n  initialState,\r\n  reducers: {\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(getSections.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;        \r\n      })\r\n      .addCase(getSections.fulfilled, (state, { payload }) => {\r\n        state.status = \"success\";\r\n        state.items = payload;\r\n        state.tree = groupBy(state.items, item => item.forum);\r\n        delete state.error;        \r\n      })\r\n      .addCase(getSections.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error  = error?.message;\r\n      })      \r\n  }\r\n});\r\n\r\nexport const { actions: sectionsActions, reducer: sections } = slice;","import { createSlice } from '@reduxjs/toolkit'\r\nimport type { PayloadAction } from '@reduxjs/toolkit'\r\n\r\nexport interface ITooltipKeys {\r\n  topicId: number,\r\n  number: number\r\n}\r\n\r\nexport interface ICoords {\r\n  x: number,\r\n  y: number\r\n}\r\n\r\nexport interface ITooltipItem {\r\n  hash: string,\r\n  keys: ITooltipKeys,\r\n  coords: ICoords,\r\n  zIndex: number\r\n}\r\n\r\nexport interface ITooltipsList extends Array<ITooltipItem> {}\r\n\r\nexport interface ITooltipsState {\r\n  items: ITooltipsList,\r\n}\r\n\r\nconst initialState: ITooltipsState = {\r\n  items: []\r\n}\r\n\r\nconst show = (state: ITooltipsState, { payload }: PayloadAction<{ keys: ITooltipKeys; coords: ICoords}>) => {\r\n  const hash = JSON.stringify(payload.keys);\r\n  const index = state.items.findIndex(item => item.hash === hash);\r\n  let zIndex = 0;\r\n  if (state.items.length)\r\n    zIndex = state.items[state.items.length - 1].zIndex + 1;\r\n  if (index === - 1)\r\n    state.items.push({\r\n      keys: payload.keys,\r\n      coords: payload.coords,\r\n      hash,\r\n      zIndex \r\n    })\r\n  else {\r\n    //state.list = moveToEnd(state.list, index);\r\n    state.items[state.items.length - 1].zIndex = zIndex;\r\n  }\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'tooltips',\r\n  initialState,\r\n  reducers: {\r\n    show,\r\n    close: (state, { payload }: PayloadAction<ITooltipKeys>) => {\r\n      const hash = JSON.stringify(payload);\r\n      state.items = state.items.filter(val => val.hash !== hash); \r\n    },\r\n    closeAll: (state) => {\r\n      state.items = [];\r\n    } \r\n  }\r\n});\r\n\r\nexport const { actions: tooltipsActions, reducer: tooltips } = slice;\r\n","import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\r\n\r\nimport { fetchTopicMessage, fetchTopicMessages, fetchTopicInfo } from 'src/api'\r\nimport { RootState } from '../types';\r\n\r\nexport interface IVotingItem {\r\n  text: string,\r\n  count: number\r\n}\r\n\r\nexport interface ITopicInfo {\r\n    id: number,\r\n    title: string,\r\n    forum?: string,\r\n    sectionId?: string,\r\n    created?: number,\r\n    authorId?: string,\r\n    author?: string,\r\n    updated?: number,\r\n    lastUser?: string,\r\n    count?: number,\r\n    down?: number,\r\n    closed?: number,\r\n    deleted?: number,\r\n    isVoting?: number,\r\n    voting?: IVotingItem[]\r\n  }\r\n\r\nexport interface ITopicMessage {\r\n  id: number,\r\n  n: number,\r\n  user: string,\r\n  userId: number,\r\n  text: string,\r\n  time: number,\r\n  vote: number\r\n}\r\n\r\nexport interface ITopicMessagesList extends Array<ITopicMessage> {}\r\n\r\nexport interface ITopicState {\r\n  status: \"init\" | \"loading\" | \"success\" | \"error\",\r\n  items: ITopicMessagesList,\r\n  item0?: ITopicMessage,\r\n  info?: ITopicInfo,\r\n  error?: string,\r\n  lastUpdated?: number\r\n}\r\n\r\nexport const defaultInfo: ITopicInfo = {\r\n  id: 0,\r\n  title: \"\",\r\n  count: -1\r\n}\r\n\r\nconst initialState: ITopicState = {\r\n  status: \"init\",\r\n  items: [],\r\n  info: defaultInfo\r\n}\r\n\r\nexport const getTopic = createAsyncThunk(\r\n  'topics/fetch',\r\n  async ({ topicId, page, item0 }: { \r\n      topicId: number, \r\n      page: number | string, \r\n      item0: ITopicMessage \r\n    }, { rejectWithValue }) => {\r\n\r\n    let info: ITopicInfo;\r\n    try {\r\n      info = await fetchTopicInfo(topicId);\r\n    } catch (e) {\r\n      console.error(e);\r\n      info = {\r\n        id: topicId,\r\n        title: '',\r\n        count: -1\r\n      };\r\n    }\r\n\r\n    try {\r\n      let _item0 = item0;\r\n      let _items;\r\n      if (page === 'last20') {\r\n\r\n        if (info.count > 21) {\r\n\r\n          if (!_item0) {\r\n            _item0 = await fetchTopicMessage(topicId, 0);\r\n          }\r\n\r\n          let first = info.count - 20;\r\n          _items = await fetchTopicMessages({\r\n            id: topicId,\r\n            from: first,\r\n            to: 1010\r\n          });\r\n\r\n        } else {\r\n          let items = await fetchTopicMessages({\r\n            id: topicId,\r\n            from: 0,\r\n            to: 1010\r\n          });\r\n          _item0 = items[0];\r\n          _items = items.slice(1);\r\n        }\r\n\r\n      } else {\r\n\r\n        page = +page;\r\n        let first = 0;\r\n        let last = page * 100 - 1;\r\n\r\n        if (page > 1) {\r\n\r\n          first = (page - 1) * 100;\r\n          if (!_item0) {\r\n            _item0 = await fetchTopicMessage(topicId, 0);\r\n          }\r\n\r\n          _items = await fetchTopicMessages({\r\n            id: topicId,\r\n            from: first,\r\n            to: last\r\n          });\r\n\r\n        } else {\r\n          if (_item0)\r\n            first = 1;\r\n          else\r\n            first = 0;\r\n\r\n          let items = await fetchTopicMessages({\r\n            id: topicId,\r\n            from: first,\r\n            to: last\r\n          });\r\n\r\n          if (_item0) {\r\n            _items = items;\r\n          } else {\r\n            _item0 = items[0];\r\n            _items = items.slice(1);\r\n          }\r\n        }\r\n\r\n      }\r\n\r\n      if (info.count === 0 && _items.length > 0)\r\n        info.count = _items[_items.length - 1].n;\r\n\r\n      if (page === 'last20' && _items.length > 20) {\r\n        _items = _items.slice(-20);\r\n      }\r\n\r\n      return {\r\n        info,\r\n        item0: _item0,\r\n        list: _items\r\n      }\r\n\r\n    } catch (error) {\r\n\r\n      console.error('Failed to fetch topic:', error);\r\n      rejectWithValue(error);\r\n\r\n    }\r\n  }\r\n)\r\n\r\nexport const getNewMessages = createAsyncThunk(\r\n  'topic/getNewMessages',\r\n  async ({ id, count }:  {\r\n      id: number, \r\n      count: number\r\n    }) => {\r\n\r\n    return await fetchTopicMessages({\r\n      id: id,\r\n      from: count + 1,\r\n      to: 1050\r\n    });\r\n\r\n  }\r\n)\r\n\r\nconst shouldFetch = ({ topic } : RootState) => {\r\n  \r\n  if (!topic) return true;\r\n  if (topic.status === \"loading\") return false;\r\n  \r\n  return true\r\n}\r\n\r\nexport const getTopicIfNeeded = (topicId: number, page: number |string): any => (dispatch: any, getState: any) => {\r\n \r\n  const state = getState();\r\n  if (shouldFetch(state)) {\r\n    let item0: ITopicMessage = null;\r\n    if (topicId === state.topic.info.id)\r\n      item0 = state.topic.item0;  \r\n    return dispatch(getTopic({ topicId, page, item0 }));\r\n  }\r\n}\r\n\r\nexport const getNewMessagesIfNeeded = () => (dispatch: any, getState: any) => {\r\n  const state = getState();\r\n  const { id, count } = state.topic.info;\r\n  if (shouldFetch(state)) {\r\n    return dispatch(getNewMessages({ id, count }));\r\n  }\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'topic',\r\n  initialState,\r\n  reducers: {\r\n    clear: (state) => {\r\n      state.info = initialState.info;\r\n      state.item0 = initialState.item0;\r\n      state.items = initialState.items;\r\n      state.status = initialState.status;\r\n      delete state.error;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(getTopic.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })\r\n      .addCase(getTopic.fulfilled, (state, { payload }) => {\r\n        state.status = \"success\";\r\n        state.items = payload.list;\r\n        state.item0 = payload.item0;\r\n        state.info = payload.info;\r\n\r\n        delete state.error;\r\n      })\r\n      .addCase(getTopic.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      })\r\n      // getNewMessages\r\n      .addCase(getNewMessages.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })\r\n      .addCase(getNewMessages.fulfilled, (state, { payload }) => {\r\n        state.status = \"success\";\r\n        if (payload.length > 0) {\r\n          state.items = state.items.concat(payload);\r\n          state.info.count = state.items[state.items.length - 1].n;\r\n        }\r\n\r\n        delete state.error;\r\n      })\r\n      .addCase(getNewMessages.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      })\r\n  }\r\n})\r\n\r\nexport const { actions: topicActions, reducer: topic } = slice;\r\n","import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\r\n\r\nimport { ITopicsListRequest, fetchTopicsList } from 'src/api'\r\nimport { domain, urlTopicsList } from 'src/api';\r\nimport { RootState } from '../types';\r\n\r\nexport interface ITopicsListItem {\r\n  id: number,\r\n  author: string,\r\n  lastUser: string,\r\n  forum: string,\r\n  sectionCode: string,\r\n  section: string,\r\n  count: number,\r\n  text: string,\r\n  created: number,\r\n  updated: number,\r\n  closed: boolean,\r\n  down: boolean,\r\n  pinned: boolean\r\n  isVoting: boolean,\r\n  showPreview: boolean,\r\n  previewMsgNumber?: number\r\n}\r\n\r\nexport interface ITopicsList extends Array<ITopicsListItem> { }\r\n\r\nexport interface ITopicsListState {\r\n  status: \"init\" | \"loading\" | \"success\" | \"error\",\r\n  items: ITopicsList,\r\n  error?: string,\r\n  lastUpdated?: number\r\n}\r\n\r\nexport const initialState: ITopicsListState = {\r\n  status: \"init\",\r\n  items: []\r\n}\r\n\r\nexport const getTopicsList = createAsyncThunk(\r\n  'topicsList/fetch',\r\n  async (params: ITopicsListRequest, { getState }) => {\r\n\r\n    const state = getState() as RootState;\r\n\r\n    let itemsPerPage = +state.options.items.topicsPerPage;\r\n    if (itemsPerPage > 99) itemsPerPage = 99;\r\n    params.itemsPerPage = itemsPerPage;\r\n\r\n    const json = await fetchTopicsList(params);\r\n    return json.slice(-itemsPerPage);\r\n\r\n  }\r\n)\r\n\r\nconst shouldFetch = ({ topicsList }: RootState) => {\r\n  \r\n  if (!topicsList) return true\r\n  if (topicsList.status === \"loading\") return false\r\n  \r\n  return true\r\n}\r\n\r\nexport const getTopicsListIfNeeded = (params: ITopicsListRequest): any => (dispatch: any, getState: any) => {\r\n  if (shouldFetch(getState())) {\r\n    return dispatch(getTopicsList(params));\r\n  }\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'topicsList',\r\n  initialState,\r\n  reducers: {\r\n    clear: (state) => {\r\n      state.items = [];\r\n      state.status = \"init\"; \r\n    },\r\n    togglePreview: (state, { payload }) => {\r\n      const item = state.items.find(item => item.id === payload.topicId); \r\n      item.showPreview = !item.showPreview; \r\n      item.previewMsgNumber = payload.msgNumber;\r\n    }\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(getTopicsList.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })\r\n      .addCase(getTopicsList.fulfilled, (state, { payload }) => {\r\n        state.status = \"success\";\r\n        state.items = payload;\r\n\r\n        delete state.error;\r\n      })\r\n      .addCase(getTopicsList.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = `${error?.message} ${domain}/${urlTopicsList}`;\r\n      })\r\n  }\r\n})\r\n\r\nexport const { actions: topicsListActions, reducer: topicsList } = slice;\r\n","import { createAction } from '@reduxjs/toolkit'\r\nimport { fetchNewMessage, INewMessageRequest } from 'src/api'\r\n\r\nexport const postNewMessageStart = createAction('POST_NEW_MESSAGE_START');\r\nexport const postNewMessageComplete = createAction('POST_NEW_MESSAGE_COMPLETE');\r\nexport const newMessageText = createAction('NEW_MESSAGE_TEXT', text => ({\r\n  payload: {\r\n    text,\r\n  }\r\n}));\r\nexport const addMessageText = createAction('ADD_MESSAGE_TEXT', text => ({\r\n  payload: {\r\n    text,\r\n  }\r\n}));\r\n\r\nexport type PostNewmessageParams = {\r\n  text: string,\r\n  topicId: string,\r\n  voting_select?: number,\r\n  onSuccess?: () => void\r\n}\r\n\r\nexport const postNewMessage = (params: PostNewmessageParams): any => async (dispatch: any) => {\r\n\r\n  dispatch(postNewMessageStart());\r\n\r\n  let fetchParams: INewMessageRequest = {\r\n    message_text: params.text,\r\n    action: \"new\",\r\n    topic_id: params.topicId,\r\n    rnd: Math.round(Math.random() * 10000000000)\r\n  };\r\n\r\n  if (params.voting_select)\r\n    fetchParams.voting_select = params.voting_select;\r\n\r\n  try {\r\n    await fetchNewMessage(fetchParams);\r\n    await dispatch(postNewMessageComplete());\r\n    if (params.onSuccess)\r\n      params.onSuccess();\r\n\r\n  } catch (err) {\r\n    console.error(\"Failed to post new message: \" + err);\r\n  }\r\n}\r\n","import { configureStore  } from '@reduxjs/toolkit'\r\nimport logger from 'redux-logger' // eslint-disable-line @typescript-eslint/no-unused-vars\r\n\r\nimport { topicsList, topic, sections, options, login, tooltips, newTopic } from './slices'\r\nimport newMessage from '../data/newmessage/reducer'\r\n\r\nconst reducer = {\r\n  topicsList,\r\n  topic,\r\n  sections,\r\n  options,\r\n  login,\r\n  tooltips,\r\n  newTopic,\r\n  newMessage\r\n}\r\n\r\nexport const store = configureStore({\r\n  reducer,\r\n  //middleware: (getDefaultMiddleware) => getDefaultMiddleware().concat(logger),\r\n  devTools: process.env.NODE_ENV !== 'production'\r\n})\r\n","import { createReducer } from '@reduxjs/toolkit'\r\nimport { initialState } from '.';\r\nimport { addMessageText, newMessageText, postNewMessageComplete, postNewMessageStart } from './actions'\r\n\r\nconst reducer = createReducer(initialState, (builder) => {\r\n  builder\r\n    .addCase(postNewMessageStart, (state) => {\r\n      state.isFetching = true;\r\n    })\r\n    .addCase(postNewMessageComplete, (state) => {\r\n      state.isFetching = false;\r\n    })  \r\n    .addCase(newMessageText, (state, action) => {\r\n      state.text = action.payload.text;\r\n    })  \r\n    .addCase(addMessageText, (state, action) => {\r\n      state.text += action.payload.text;\r\n    })  \r\n    // .addCase(clearTopicMessages, (state) => {\r\n    //   state.text = '';\r\n    // })              \r\n  })\r\n\r\nexport default reducer;","\r\nexport type INewMessageState = {\r\n  isFetching: boolean;\r\n  text: string\r\n};\r\n\r\nexport const initialState: INewMessageState = {\r\n  isFetching: false,\r\n  text: ''\r\n}","import { useMemo } from \"react\";\r\nimport { ActionCreatorsMapObject, bindActionCreators } from \"@reduxjs/toolkit\";\r\nimport { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\r\nimport { AppDispatch, RootState } from \"./types\";\r\n\r\nexport const useAppDispatch =  () => useDispatch<AppDispatch>();\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n\r\nexport const useActionCreators = (actions: ActionCreatorsMapObject) => {\r\n  const dispatch = useAppDispatch();\r\n  return useMemo(() => bindActionCreators(actions, dispatch), [actions, dispatch]);\r\n};","import { ReactElement } from 'react';\r\nimport { useDispatch } from 'react-redux'\r\n\r\nimport Navbar from 'react-bootstrap/Navbar'\r\nimport Nav from 'react-bootstrap/Nav'\r\nimport Form from 'react-bootstrap/Form'\r\nimport { Link, useLocation } from \"react-router-dom\";\r\n\r\nimport Search from 'src/components/common/search'\r\nimport { getTopicsListIfNeeded } from 'src/store'\r\n\r\nimport './nav_bar.css'\r\n\r\nconst NavBar = (): ReactElement => {\r\n\r\n  const location = useLocation();\r\n  const dispatch = useDispatch();\r\n\r\n  const locationParams = new URLSearchParams(location.search);\r\n  const forum = locationParams.get('forum');\r\n\r\n  const onClick = () => {\r\n    dispatch(getTopicsListIfNeeded({}));\r\n  }\r\n\r\n  const internalLinks = [\r\n    { name: '1C', link: `/index.php?forum=1C` },\r\n    { name: 'IT', link: `/index.php?forum=IT` },\r\n    { name: 'JOB', link: `/index.php?forum=JOB` },\r\n    { name: 'LIFE', link: `/index.php?forum=LIFE` },\r\n    { name: 'Настройки', link: '/options.php' },    \r\n  ];\r\n\r\n  const externalLinks = [\r\n    { name: 'Wiki', link: 'https://wiki.mista.ru' },\r\n    { name: 'Книга знаний', link: 'https://kb.mista.ru' },\r\n  ];\r\n\r\n  return (\r\n    <Navbar bg=\"dark\" variant=\"dark\" expand=\"md\" fixed=\"top\">\r\n      <Navbar.Brand\r\n        as={Link}\r\n        to={`/`}\r\n        onClick={onClick}>\r\n        React.Mista\r\n      </Navbar.Brand>\r\n      <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n      <Navbar.Collapse>\r\n        <Nav className=\"me-auto\">\r\n          {internalLinks.map((item, i) =>\r\n            <Nav.Item key={'i'+ i}>\r\n              <Nav.Link to={item.link} active={item.name === forum} as={Link}>\r\n                {item.name}\r\n              </Nav.Link>\r\n            </Nav.Item>\r\n          )}\r\n          {externalLinks.map((item, i) =>\r\n            <Nav.Item key={'e'+ i}>\r\n              <Nav.Link href={item.link}>\r\n                {item.name}\r\n              </Nav.Link>\r\n            </Nav.Item>\r\n          )}          \r\n        </Nav>\r\n        <Form className=\"d-flex\">\r\n          <Search />\r\n        </Form>\r\n      </Navbar.Collapse>\r\n    </Navbar>\r\n  )\r\n}\r\n\r\nexport default NavBar;","import React, { FC, ReactElement } from 'react'\r\nimport { Dropdown } from 'react-bootstrap'\r\n\r\nimport { loginActions, useActionCreators } from 'src/store'\r\nimport { domain } from 'src/api'\r\n\r\ntype IProps = {\r\n  userId: number,\r\n  userName: string\r\n}\r\n\r\ntype HTMLProps = React.HTMLProps<HTMLSpanElement>\r\nconst CustomToggle = React.forwardRef<HTMLSpanElement, HTMLProps>(({ children, onClick }, ref) => (\r\n  <span\r\n    ref={ref}\r\n    style={{ cursor: \"pointer\" }}\r\n    className='link'\r\n    onClick={(e) => {\r\n      e.preventDefault();\r\n      onClick(e);\r\n    }}\r\n  >\r\n    {children}\r\n  </span>\r\n));\r\n\r\nconst LoggedUser: FC<IProps> = ({ userId, userName }): ReactElement => {\r\n\r\n  const actions = useActionCreators(loginActions);\r\n\r\n  const onLogout = (event: any) => {\r\n    event.preventDefault();\r\n    actions.doLogout()\r\n  }\r\n\r\n  const onMenuSelect = (eventKey: any, event: any): any => {\r\n    if (eventKey === 'exit') {\r\n      onLogout(event);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div style={{ float: \"left\" }}>\r\n      <Dropdown id=\"dropdown-custom-menu\" onSelect={onMenuSelect}>\r\n        <span>Привет, </span>\r\n        <Dropdown.Toggle as={CustomToggle}>{userName} ▼</Dropdown.Toggle>\r\n        <Dropdown.Menu>\r\n          <Dropdown.Item eventKey=\"profile\" href={`${domain}/users.php?id=${userId}`}>Профиль</Dropdown.Item>\r\n          <Dropdown.Item eventKey=\"myTopics\" href={`#/index.php?user_id=${userId}`}>Мои темы</Dropdown.Item>\r\n          <Dropdown.Divider />\r\n          <Dropdown.Item eventKey=\"options\" href={`#/options.php`}>Настройки</Dropdown.Item>\r\n          <Dropdown.Divider />\r\n          <Dropdown.Item eventKey=\"exit\">Выход</Dropdown.Item>\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LoggedUser;","import { FormEvent, FC, ReactElement, useState } from 'react'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\nimport { FormControl, Button } from 'react-bootstrap'\r\n\r\nimport { RootState, useAppDispatch } from 'src/store'\r\nimport { doLoginIfNeeded } from 'src/store'\r\n\r\nconst mapState = (state: RootState) => {\r\n  return state.login;\r\n}\r\n\r\nconst connector = connect(mapState);\r\nconst LoginForm: FC<ConnectedProps<typeof connector>> = (props): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  const onLogin = (event: FormEvent) => {\r\n    event.preventDefault();\r\n    dispatch(doLoginIfNeeded(username, password));\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <form name=\"enterform\" className=\"flex-row\" style={{ flexWrap: \"wrap\" }}>\r\n        <FormControl\r\n          id=\"username\"\r\n          type=\"text\"\r\n          placeholder=\"Имя\"\r\n          value={username}\r\n          onChange={e => setUsername(e.target.value)}\r\n          size=\"sm\"\r\n          className='input'\r\n          style={{ marginRight: \"5px\", flex: \"0 1 300px\" }}\r\n        />\r\n        <FormControl\r\n          id=\"password\"\r\n          type=\"password\"\r\n          placeholder=\"Пароль\"\r\n          maxLength={20}\r\n          autoComplete=\"off\"\r\n          value={password}\r\n          onChange={e => setPassword(e.target.value)}\r\n          size=\"sm\"\r\n          className='input'\r\n          style={{ marginRight: \"5px\", flex: \"0 1 300px\" }}\r\n        />\r\n        <Button\r\n          size=\"sm\"\r\n          variant=\"light\"\r\n          className='button'\r\n          onClick={onLogin}\r\n        >Войти</Button>\r\n      </form>\r\n      <p style={{ margin: \"0px\" }}>Войти можно на сайте <a href=\"https://forum.mista.ru/\">forum.mista.ru</a></p>\r\n      <a rel=\"nofollow\" href=\"https://forum.mista.ru/user_registration.php\">Регистрация</a>\r\n      <span style={{ margin: \"5px\" }}>|</span>\r\n      <a rel=\"nofollow\" href=\"https://forum.mista.ru/remember_password.php\">Забыли пароль?</a>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default connector(LoginForm);","import { FC, ReactElement } from 'react'\r\n\r\nimport './error.css'\r\n\r\ntype IProps = {\r\n  text: string\r\n}\r\n\r\nconst ErrorElem: FC<IProps> = ({ text }): ReactElement | null => {\r\n  if (!text)\r\n    return null;\r\n\r\n  return (\r\n    <div className=\"error\" dangerouslySetInnerHTML={{ __html: text }}></div>\r\n  )\r\n}\r\n\r\nexport default ErrorElem;","import { FC, ReactElement, useEffect } from 'react'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\nimport LoggedUser from './logged_user'\r\nimport LoginForm from './login_form'\r\nimport ErrorElem from '../common/error'\r\n\r\nimport { RootState, useAppDispatch } from 'src/store'\r\nimport { checkLoginIfNeeded } from 'src/store'\r\n\r\nconst mapState = (state: RootState) => {\r\n  return state.login;\r\n}\r\n\r\nconst connector = connect(mapState);\r\nconst Login: FC<ConnectedProps<typeof connector>> = ({ logged, userId, userName, error }): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(checkLoginIfNeeded());\r\n  }, [dispatch]);\r\n\r\n  let elem: ReactElement;\r\n  if (logged === true)\r\n    elem = <LoggedUser userId={userId} userName={userName} />\r\n  else if (logged === false)\r\n    elem = <LoginForm />\r\n  else\r\n    elem = null;\r\n\r\n  return (\r\n    <>\r\n      {elem}\r\n      {error && <ErrorElem text={error} />}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default connector(Login);","import { FC, ReactElement, useEffect } from 'react'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\nimport Form from 'react-bootstrap/Form'\r\n\r\nimport { RootState, useAppDispatch } from 'src/store'\r\nimport { getSectionsIfNeeded, ISectionItem } from 'src/store'\r\n\r\ntype IProps = {\r\n  id: string,\r\n  defaultValue: string,\r\n  selected?: string,\r\n  style?: {},\r\n  size?: 'sm' | 'lg',\r\n  onChange: (e: any, value: ISectionItem) => void\r\n}\r\n\r\nconst mapState = (state: RootState) => {\r\n\r\n  const { items, tree } = state.sections;\r\n\r\n  return {\r\n    items,\r\n    tree\r\n  }\r\n}\r\n\r\nconst connector = connect(mapState);\r\nconst Sections: FC<ConnectedProps<typeof connector> & IProps> = (props): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(getSectionsIfNeeded());\r\n  }, [dispatch]);\r\n\r\n  const onSelect: (e: React.ChangeEvent<HTMLElement>) => void = (e: any) => {\r\n\r\n    const { items, onChange } = props;\r\n\r\n    if (onChange) {\r\n      const code = e.currentTarget.value;\r\n      const arr = items.filter(item => item.code === code);\r\n      if (arr.length > 0)\r\n        onChange(e, arr[0]);\r\n      else\r\n        onChange(e, null);\r\n    }\r\n  }\r\n\r\n  const { id, tree, defaultValue, selected, style, size } = props;\r\n\r\n  let sectionsElem = [];\r\n  for (let forum in tree) {\r\n\r\n    let group =\r\n      <optgroup key={forum} label={forum}>\r\n        {tree[forum].map((item) => (\r\n          <option key={item.id} value={item.code}>\r\n            {item.name}\r\n          </option>\r\n        ))}\r\n      </optgroup>\r\n\r\n    sectionsElem.push(group);\r\n  }\r\n\r\n  return (\r\n    <Form.Select\r\n      onChange={onSelect}\r\n      value={selected}\r\n      style={style}\r\n      className='input'\r\n      size={size}\r\n      id={id}\r\n    >\r\n      <option value=\"\">{defaultValue}</option>\r\n      {sectionsElem}\r\n    </Form.Select>\r\n  )\r\n}\r\n\r\nexport { Sections };\r\nexport default connector(Sections);","import { ReactElement, useEffect } from 'react'\r\nimport { useLocation, useNavigate } from 'react-router-dom'\r\nimport { useDispatch } from 'react-redux'\r\nimport queryString from 'query-string'\r\n\r\nimport Login from '../../components/login'\r\nimport Sections from './sections'\r\nimport { ISectionItem, getSectionsIfNeeded } from 'src/store'\r\n\r\nconst Header = (): ReactElement => {\r\n\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const params = queryString.parse(location.search);\r\n\r\n  useEffect(() => {\r\n    dispatch(getSectionsIfNeeded());\r\n  }, [dispatch]);  \r\n\r\n  const onSectionChange = (e, value: ISectionItem) => {\r\n    if (value)\r\n      navigate(`/index.php?section=${value.code}`);\r\n    else\r\n      navigate(`/`);\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex-row\">\r\n      <div className=\"header-left\">\r\n        <Login />\r\n      </div>\r\n      <div className=\"header-right\">\r\n        <Sections\r\n          id=\"sect\"\r\n          defaultValue=\"--Все секции--\"\r\n          selected={String(params.section) || \"\"}\r\n          onChange={onSectionChange}\r\n          size=\"sm\"\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default Header;","import { FC, ReactElement } from 'react'\r\n\r\ntype IProps = {\r\n  onUpdateClick: any,\r\n  isLoading: boolean\r\n}\r\n\r\nconst TableHeader: FC<IProps> = ({ isLoading, onUpdateClick }): ReactElement => {\r\n\r\n  return (\r\n    <div className=\"th\" style={{ position: \"sticky\", top: \"39px\" }}>\r\n      <div style={{ letterSpacing: \"-1px\" }}>Раздел</div>\r\n      <div></div>\r\n      <div>Тема</div>\r\n      <div>Re</div>\r\n      <div>Автор</div>\r\n      <div><span style={{ cursor: \"pointer\" }} title=\"Обновить список\" onClick={onUpdateClick}>{isLoading ? \"Обновляется\" : \"Обновлено\"}</span></div>\r\n    </div>\r\n  )  \r\n}\r\n\r\nexport default TableHeader;","import { FC, ReactElement } from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { getMaxPage } from 'src/utils'\r\n\r\ntype IProps = {\r\n  count: number,\r\n  topicId: number\r\n}\r\n\r\nconst Pages: FC<IProps> = ({ count, topicId }): ReactElement => {\r\n\r\n  let pages = [];\r\n  if (count > 100) {\r\n    let maxPage = getMaxPage(count);\r\n    for (let i = 1; i <= maxPage; i++) {\r\n      let href = `/topic.php?id=${topicId}&page=${i}`;\r\n      let text: string;\r\n      if (i > 3 && i < maxPage)\r\n        text = '•';\r\n      else\r\n        text = String(i);\r\n      pages.push(<Link key={i} className=\"agh\" style={{ margin: \"3px\" }} to={href}>{text}</Link>);\r\n    }\r\n  }\r\n\r\n  if (count > 20) {\r\n    let href = `/topic.php?id=${topicId}&page=last20#F`;\r\n    pages.push(<Link key=\"last20\" className=\"agh\" style={{ margin: \"3px\" }} to={href}>»</Link>);\r\n  }\r\n\r\n  return (\r\n    <span className=\"topic-pages\">\r\n      {pages}\r\n    </span>\r\n  )\r\n}\r\n\r\nexport default Pages;","import { FC, ReactElement } from 'react'\r\nimport classNames from 'classnames'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport Pages from './pages';\r\nimport { useAppSelector } from 'src/store';\r\n\r\ntype IProps = {\r\n  id: number,\r\n  count: number,\r\n  author: string,\r\n  pinned: boolean,\r\n  forum: string,\r\n  sectionCode: string,\r\n  section: string,\r\n  text: string,\r\n  isVoting: boolean\r\n  closed: boolean,\r\n  down: boolean,\r\n\r\n}\r\n\r\nconst addPrefix = (text: string, forum: string, sectionCode: string): string => {\r\n  \r\n  if (forum === 'life' && !text.startsWith('OFF'))\r\n    return 'OFF: ' + text;\r\n\r\n  else if (sectionCode === 'job' && !text.startsWith('JOB'))\r\n    return 'JOB: ' + text;\r\n\r\n  else if (sectionCode === 'v7' && !text.startsWith('v7'))\r\n    return  'v7: ' + text;\r\n\r\n  return text;  \r\n}\r\n\r\nconst TopicNameCell: FC<IProps> = (props): ReactElement => {\r\n\r\n  const loggedUserName = useAppSelector(state => state.login.userName);\r\n\r\n  let href = `/topic.php?id=${props.id}`;\r\n  let classes = classNames('agb', 'mr5', {\r\n    'bold': props.count >= 100,\r\n    'mytopics': props.author === loggedUserName,\r\n    'pinned': props.pinned\r\n  });\r\n\r\n  let sectionHref = `/index.php?section=${props.sectionCode}`;\r\n  let section: ReactElement;\r\n  if (props.section) {\r\n    section = (\r\n      <span className=\"topic-section\">\r\n        <span className=\"agh\" style={{ margin: \"0px 5px\" }}>/</span>\r\n        <Link key=\"1\" rel=\"nofollow\" className=\"agh\" to={sectionHref} >{props.section}</Link>\r\n      </span>\r\n    )\r\n  }\r\n\r\n  let text = addPrefix(props.text, props.forum, props.sectionCode);\r\n\r\n  return (\r\n    <div className=\"cell-title\">\r\n      {props.pinned && <i className=\"fa fa-thumb-tack agh\" aria-hidden=\"true\" style={{marginRight: \"5px\"}}></i>}\r\n      <Link to={href} className={classes} dangerouslySetInnerHTML={{ __html: text }} style={{ overflowWrap: \"anywhere\" }}></Link>\r\n      {props.isVoting && <span className=\"agh separator\">[±]</span>}\r\n      <Pages count={props.count} topicId={props.id} />\r\n      {props.closed && <span className=\"agh\">Ø</span>}\r\n      {props.down && <span className=\"agh\">↓</span>}\r\n      {section}\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default TopicNameCell;","import { FC, ReactElement } from 'react'\r\n\r\nimport { useActionCreators } from 'src/store';\r\nimport { topicsListActions } from 'src/store';\r\n\r\ntype IProps = {\r\n  topicId: number,\r\n  expanded: boolean\r\n};\r\n\r\nconst PreviewLink: FC<IProps> = ({ topicId, expanded }): ReactElement => {\r\n\r\n  const actions = useActionCreators(topicsListActions);\r\n\r\n  const onClick = () => {\r\n    actions.togglePreview({topicId, msgNumber: 0});\r\n  };\r\n\r\n  const text = expanded \r\n    ? <i className=\"fa fa-minus-square-o agh\" aria-hidden=\"true\"></i> \r\n    : <i className=\"fa fa-plus-square-o agh\" aria-hidden=\"true\"></i>;\r\n  return (\r\n    <div className=\"cell-preview-link\" onClick={onClick}>\r\n      <span>{text}</span>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default PreviewLink;","import { FC, ReactElement, useCallback, useEffect, useState } from 'react'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport dateFormat from 'dateformat'\r\n\r\nimport TopicNameCell from './topic_name_cell';\r\nimport PreviewLink from './preview_link'\r\n\r\nimport { today } from 'src/utils'\r\nimport { RootState, useActionCreators } from 'src/store';\r\nimport { ITopicsListItem, topicsListActions } from 'src/store';\r\nimport { fetchTopicMessage } from 'src/api';\r\n\r\nconst mapState = (state: RootState) => {\r\n\r\n  return {\r\n    login: state.login\r\n  }\r\n}\r\nconst connector = connect(mapState);\r\n\r\ninterface IProps extends ITopicsListItem {\r\n  updated: number,\r\n  topicId: number\r\n}\r\n\r\nconst formatTime = (time: number): string => {\r\n  \r\n  if (time === 2147483648000) return '';\r\n  \r\n  let date = new Date(time);\r\n  if (today(date)) {\r\n    return dateFormat(time, 'HH:MM')\r\n  } else {\r\n    return dateFormat(time, 'dd.mm.yy');\r\n  }  \r\n}\r\n\r\nconst Row: FC<ConnectedProps<typeof connector> & IProps> = ({ topicId, updated, ...data }): ReactElement => {\r\n\r\n  const actions = useActionCreators(topicsListActions);\r\n\r\n  const [time, setTime] = useState(updated);\r\n  const updateTime = useCallback(async () => {\r\n    const msg = await fetchTopicMessage(topicId, data.count);\r\n    setTime(msg.time);\r\n  }, [topicId, data.count])\r\n  \r\n  useEffect(() => {\r\n    if (data.pinned)\r\n      updateTime();\r\n  }, [data.pinned, updateTime])\r\n  \r\n  useEffect(() => {\r\n    setTime(updated);\r\n  }, [updated])\r\n\r\n  const countOnClick = useCallback(() => {\r\n    actions.togglePreview({topicId, msgNumber: data.count});\r\n  }, [actions, topicId, data.count]);\r\n  \r\n  return (\r\n    <div className=\"topics-list-row\">\r\n      <div className=\"cell-forum\">\r\n        {data.forum}\r\n      </div>\r\n      <div className=\"cell-section\">\r\n        {data.section}\r\n      </div>\r\n      <div className=\"cell-answ\" onClick={countOnClick}>\r\n        <i className=\"fa fa-comments-o\" aria-hidden=\"true\" style={{marginRight: \"3px\"}}></i>\r\n        <span>{data.count}</span>\r\n      </div>\r\n      <PreviewLink topicId={data.id} expanded={data.showPreview} />\r\n      <TopicNameCell {...data}/>\r\n      <div className=\"cell-author\">\r\n        <i aria-hidden=\"true\" className=\"fa fa-user-circle\" style={{marginRight: \"3px\"}}></i>\r\n        {data.author}\r\n      </div>\r\n      <div className=\"cell-lastuser\">\r\n        <div style={{ display: \"flex\" }}>\r\n          <span className=\"cell-lastuser-time\">{formatTime(time)}</span>\r\n          <span className=\"cell-lastuser-user\">{data.lastUser}</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"cell-last20\">\r\n        <Link to={`/topic.php?id=${data.id}&page=last20#F`} style={{ color: \"inherit\", display: \"block\", width: \"100%\", textAlign: \"center\" }}>\r\n          <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default connector(Row);","import { FC, ReactElement } from 'react'\r\nimport { Pagination } from 'react-bootstrap'\r\nimport { useLocation } from 'react-router-dom'\r\n\r\nimport './pages.css'\r\n\r\ntype IProps = {\r\n  maxPage: number,\r\n  last20?: boolean\r\n}\r\n\r\nconst Pages: FC<IProps> = ({ maxPage, last20 }): ReactElement => {\r\n\r\n  const location = useLocation();\r\n  let pathName = location.pathname;\r\n  if (pathName === '/')\r\n    pathName = '/index.php'\r\n\r\n  const locationParams = new URLSearchParams(location.search);\r\n\r\n  let currentPage: number | string;\r\n  const page = locationParams.get('page');\r\n  if (!page)\r\n    currentPage = 1;\r\n  else if (page === \"last20\")\r\n    currentPage = \"last20\";\r\n  else\r\n    currentPage = parseInt(page, 10) || 1;\r\n\r\n  let pages = [];\r\n  for (let i = 1; i <= maxPage; i++) {\r\n    locationParams.set('page', String(i));\r\n    let href = '#' + pathName + '?' + locationParams.toString();\r\n\r\n    pages.push(\r\n      <Pagination.Item active={currentPage === i} key={i} href={href}>\r\n        {i}\r\n      </Pagination.Item>);\r\n  }\r\n\r\n  if (last20 === true) {\r\n    locationParams.set(\"page\", \"last20\");\r\n    let href = '#' + pathName + '?' + locationParams.toString();\r\n    pages.push(<Pagination.Item active={currentPage === \"last20\"} key=\"last20\" href={href}>»</Pagination.Item>);\r\n  }\r\n\r\n  return (\r\n    <Pagination style={{ margin: \"0px\" }}>\r\n      {pages}\r\n    </Pagination>\r\n  )\r\n\r\n}\r\n\r\nexport default Pages;","import { FC, ReactElement, useRef, RefObject, useCallback } from 'react'\r\nimport { FormControl, Button, ButtonGroup, Form } from 'react-bootstrap'\r\n\r\nimport './text_editor.css'\r\n\r\ntype IProps = {\r\n  placeholder: string,\r\n  showVoting?: boolean,\r\n  isVoting?: boolean,\r\n  text: string,\r\n  isFetching: boolean,\r\n  formRef?: RefObject<HTMLFormElement>,\r\n  onChange?: (text: string) => void,\r\n  onShowVotingChange?: (show: boolean) => void\r\n}\r\n\r\nconst TextEditor: FC<IProps> = ({ placeholder, showVoting, isVoting, isFetching, text, formRef, onChange, onShowVotingChange }): ReactElement => {\r\n\r\n  const textAreaRef = useRef() as React.MutableRefObject<HTMLTextAreaElement>;\r\n\r\n  const onButtonCode1c = (e: React.MouseEvent<HTMLButtonElement>) => {\r\n\r\n    e.preventDefault();\r\n\r\n    const openTag = '[1C]\\n';\r\n    const closeTag = '\\n[/1C]';\r\n\r\n    const textAreaNode = textAreaRef.current;\r\n\r\n    const start = textAreaNode.selectionStart;\r\n    const end = textAreaNode.selectionEnd;\r\n\r\n    const oldText = textAreaNode.value;\r\n    const len = oldText.length;\r\n    const selectedText = oldText.substring(start, end);\r\n    const replacement = openTag + selectedText + closeTag;\r\n    let newText = oldText.substring(0, start) + replacement + oldText.substring(end, len);\r\n\r\n    if (onChange) onChange(newText);\r\n\r\n  }\r\n\r\n  const handleShowVotingChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (onShowVotingChange) onShowVotingChange(e.currentTarget.checked);\r\n  }, [onShowVotingChange]);\r\n\r\n  const handleChange = useCallback((e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n    if (onChange) onChange(e.currentTarget.value);\r\n  }, [onChange]);\r\n\r\n  const handleKeyUp = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\r\n\r\n    if (!formRef) return;\r\n    if (!formRef.current) return;\r\n\r\n    if (e.key === 'Enter' && e.ctrlKey) {\r\n      formRef.current.dispatchEvent(new Event(\"submit\", { cancelable: true, bubbles: true }));\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <FormControl\r\n        as=\"textarea\"\r\n        placeholder={placeholder}\r\n        cols={70} rows={3}\r\n        value={text}\r\n        onChange={handleChange}\r\n        onKeyUp={handleKeyUp}\r\n        ref={textAreaRef}\r\n        className=\"text-editor input\"\r\n        data-lpignore={true} \r\n      />\r\n      <div className=\"flex-row\">\r\n        <ButtonGroup>\r\n          <Button\r\n            size=\"sm\"\r\n            variant=\"light\"\r\n            onClick={onButtonCode1c}\r\n            style={{ marginRight: \"5px\" }}\r\n            className='button'\r\n          >Код 1С</Button>\r\n          <Button\r\n            size=\"sm\"\r\n            variant=\"light\"\r\n            disabled={isFetching}\r\n            type=\"submit\"\r\n            className='button'\r\n          >\r\n            {isFetching ? 'Отправляется' : 'Отправить'}\r\n          </Button>\r\n        </ButtonGroup>\r\n        {showVoting &&\r\n          <Form.Check\r\n            id=\"show_voting\"\r\n            type=\"checkbox\"\r\n            checked={isVoting}\r\n            onChange={handleShowVotingChange}\r\n            label=\"Голосование\"\r\n            style={{ margin: \"auto 0px auto auto\" }} />\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default TextEditor;","import { FC, ReactElement, useCallback, useState, useRef } from 'react'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\nimport Form from 'react-bootstrap/Form'\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\nimport { FormGroup } from 'react-bootstrap'\r\n\r\nimport { RootState, useActionCreators, useAppDispatch } from 'src/store'\r\n\r\nimport Sections from './sections'\r\nimport TextEditor from 'src/components/common/text_editor'\r\nimport ErrorElem from 'src/components/common/error'\r\n\r\nimport './new_topic.css'\r\nimport { ISectionItem, newTopicActions, postNewTopicIfNeeded } from 'src/store'\r\n\r\ntype IProps = {\r\n  onSubmitSuccess?: any\r\n};\r\n\r\nconst mapState = (state: RootState) => {\r\n\r\n  return {\r\n    sections: state.sections,\r\n    newTopic: state.newTopic\r\n  }\r\n}\r\n\r\nconst connector = connect(mapState);\r\nconst NewTopic: FC<ConnectedProps<typeof connector> & IProps> = ({ sections, newTopic, onSubmitSuccess }): ReactElement => {\r\n\r\n  const [currentSection, setSection] = useState(null);\r\n  const [votes, setVotes] = useState(Array(10).fill(\"\"));\r\n\r\n  const formRef = useRef(null);\r\n  const dispatch = useAppDispatch();\r\n  const actions = useActionCreators(newTopicActions);\r\n\r\n  const onSectionChange = (e: any, section: ISectionItem) => {\r\n    setSection(section);\r\n    actions.changeSection(section);\r\n  }\r\n\r\n  const onVoteTextChange = (i: number) => (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    let votesCopy = votes.slice();\r\n    votesCopy[i] = e.target.value;\r\n    setVotes(votesCopy);\r\n  }\r\n\r\n  const onSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n\r\n    e.preventDefault();\r\n\r\n    if (!currentSection) {\r\n      actions.setError('Не выбрана секция');\r\n      return;\r\n    }\r\n\r\n    let subject = newTopic.subject;\r\n    if (!subject) {\r\n      actions.setError('Не указана тема');\r\n      return;\r\n    }\r\n\r\n    if (!newTopic.text) {\r\n      actions.setError('Не указано сообщение');\r\n      return;\r\n    }\r\n\r\n    let params = {\r\n      subject,\r\n      text: newTopic.text,\r\n      section: currentSection.id,\r\n      forum: currentSection.forum,\r\n      isVoting: newTopic.isVoting,\r\n      votingItems: [],\r\n      onSuccess: this_onSubmitSuccess\r\n    };\r\n\r\n    if (newTopic.isVoting) {\r\n      params.votingItems = [];\r\n      for (let i = 1; i <= 10; i++) {\r\n        let val = votes[i - 1];\r\n        if (val) {\r\n          params.votingItems.push(val);\r\n        }\r\n      }\r\n    }\r\n\r\n    dispatch(postNewTopicIfNeeded(params));\r\n  }\r\n\r\n  const onSubjectChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    actions.changeSubject(e.target.value);\r\n  }, [actions]);\r\n  \r\n  const onTextChange = useCallback((text: string) => {\r\n    actions.changeText(text);\r\n  }, [actions]);\r\n\r\n  const onShowVotingChange = useCallback((show: boolean) => {\r\n    actions.showVoting(show);\r\n  }, [actions]);\r\n\r\n  const this_onSubmitSuccess = () => {\r\n\r\n    actions.clear();\r\n\r\n    if (onSubmitSuccess) {\r\n      onSubmitSuccess();\r\n    }\r\n  }\r\n  let groupsElem = [];\r\n  for (let forum in sections.tree) {\r\n    groupsElem.push(<option key={forum} value={forum.toLowerCase()}>{forum}</option>);\r\n  }\r\n\r\n  let votingOptions = [];\r\n\r\n  if (newTopic.isVoting) {\r\n    votingOptions.push(<div key=\"p\">Варианты:</div>);\r\n    for (let i = 1; i <= 10; i++) {\r\n      votingOptions.push(\r\n        <InputGroup key={i} size=\"sm\" style={{ marginBottom: \"3px\", width: \"100%\" }}>\r\n          <InputGroup.Text\r\n            style={{ width: \"40px\" }}\r\n            className='input'\r\n          >\r\n            {`${i}.`}\r\n          </InputGroup.Text>\r\n          <Form.Control\r\n            type=\"text\"\r\n            maxLength={50}\r\n            className='input'\r\n            value={votes[i - 1]}\r\n            onChange={onVoteTextChange(i - 1)}\r\n          />\r\n        </InputGroup>\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form className=\"new-topic-container\" onSubmit={onSubmit} ref={formRef}>\r\n      <div id=\"newtopic_form\" className=\"new-topic-text\">\r\n        <div><b>Новая тема:</b></div>\r\n        {newTopic.error && <ErrorElem text={newTopic.error} />}\r\n        <div className=\"flex-row\" style={{ marginBottom: \"3px\" }}>\r\n          <Form.Select\r\n            disabled\r\n            size=\"sm\"\r\n            value={newTopic.forum}\r\n            style={{ flex: \"0 1 90px\" }}\r\n            className='input'\r\n          >\r\n            {groupsElem}\r\n          </Form.Select>\r\n          <Sections\r\n            id=\"target_section\"\r\n            defaultValue=\"Секция\"\r\n            selected={newTopic.section?.code}\r\n            size=\"sm\"\r\n            style={{ flex: \"1 1 auto\" }}\r\n            onChange={onSectionChange}\r\n          />\r\n        </div>\r\n        <Form.Control\r\n          type=\"text\"\r\n          size=\"sm\"\r\n          value={newTopic.subject}\r\n          onChange={onSubjectChange}\r\n          style={{ marginBottom: \"3px\" }}\r\n          className='input'\r\n          placeholder=\"Тема\"\r\n          maxLength={90}\r\n        />\r\n        <TextEditor\r\n          placeholder=\"Сообщение\"\r\n          showVoting={true}\r\n          isVoting={newTopic.isVoting}\r\n          text={newTopic.text}\r\n          isFetching={newTopic.status === \"loading\"}\r\n          onChange={onTextChange}\r\n          onShowVotingChange={onShowVotingChange}\r\n          formRef={formRef}\r\n        />\r\n      </div>\r\n      <FormGroup className=\"new-topic-voting\">\r\n        {votingOptions}\r\n      </FormGroup>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default connector(NewTopic);","import { FC, ReactElement } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { useActionCreators } from 'src/store'\r\nimport { topicsListActions } from 'src/store'\r\n\r\nimport './topic_preview.css'\r\n\r\ntype IProps = {\r\n  topicId: number,\r\n  onFirst: any,\r\n  onLast: any,\r\n  onPrev: any,\r\n  onNext: any\r\n}\r\n\r\nconst PreviewButtons: FC<IProps> = ({ topicId, onFirst, onPrev, onNext, onLast }): ReactElement => {\r\n \r\n  const actions = useActionCreators(topicsListActions);\r\n\r\n  const closePreview = () => {\r\n    actions.togglePreview({topicId, msgNumber: 0});\r\n  }\r\n\r\n  return (\r\n    <div className=\"topic-preview-rewind\">\r\n      <div className=\"topic-preview-button flex-small\" onClick={onFirst} title=\"К первому\">\r\n        <i className=\"fa fa-angle-double-left\" aria-hidden=\"true\"></i>\r\n      </div>\r\n      <div className=\"topic-preview-button flex-large\" onClick={onPrev} title=\"К предыдущему\">\r\n        <i className=\"fa fa-angle-left\" aria-hidden=\"true\"></i>\r\n      </div>\r\n      <div className=\"topic-preview-button flex-large\" onClick={onNext} title=\"К следующему\">\r\n        <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i>\r\n      </div>\r\n      <div className=\"topic-preview-button flex-small\" onClick={onLast} title=\"К последнему\"> \r\n        <i className=\"fa fa-angle-double-right\" aria-hidden=\"true\"></i>\r\n      </div>\r\n      <div className=\"topic-preview-button close-preview\" onClick={closePreview}> \r\n        <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i>\r\n        <i className=\"fa fa-angle-left\" aria-hidden=\"true\" style={{marginLeft: \"-2px\"}}></i>\r\n      </div>\r\n      <div className=\"topic-preview-button edit-preview\"> \r\n        <Link to={`/topic.php?id=${topicId}&page=last20#F`}>\r\n          <i className=\"fa fa-pencil\" aria-hidden=\"true\" style={{color:\"var(--font-color)\"}}></i>\r\n        </Link>  \r\n      </div>      \r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default PreviewButtons;","\r\nfunction highlight(text: string): string {\r\n\r\n  const keywords = new Set(\r\n    (\"if|если|then|тогда|elsif|иначеесли|else|иначе|endif|конецесли\" +\r\n    \"|do|цикл|for|для|to|по|each|каждого|in|из|while|пока|enddo|конеццикла\" +\r\n    \"|procedure|процедура|endprocedure|конецпроцедуры|function|функция|endfunction\" +\r\n    \"|конецфункции|var|перем|export|экспорт|goto|перейти|and|и|or|или|not|не\" +\r\n    \"|val|знач|break|прервать|continue|продолжить|return|возврат|try|попытка|except|исключение\" +\r\n    \"|endtry|конецпопытки|raise|вызватьисключение|false|ложь|true|истина\" +\r\n    \"|undefined|неопределено|null|new|новый|execute|выполнить\" +\r\n    \"|асинх|async|ждать|wait\")\r\n      .split('|')\r\n  );\r\n\r\n  const Спецсиволы = new Set(\"():;.,=+-*<>?[]%/\".split(''));\r\n  const НачалоТега = \"<span class=\";\r\n  const КонецТега = \"</span>\";\r\n\r\n  const мЦветФона = \"bg>\";\r\n  const мЦветЧисла = \"num>\";\r\n  const мЦветСтроки = \"str>\";\r\n  //const мЦветПараметра = \"par>\";\r\n  const мЦветКомментария = \"com>\";\r\n  const мЦветСпецСимвола = \"sp>\";\r\n  const мЦветПрепроцессора = \"pr>\";\r\n  const мЦветКлючевогоСлова1 = \"key>\";\r\n\r\n\r\n  let СтрокаРезультат: string;\r\n  let УстановленЦвет: boolean;\r\n  let ПоследнийЦвет: string | undefined;\r\n\r\n  let ВСтроке = false;\r\n  let Токен = \"\";\r\n\r\n  function ПустаяСтрока(Строка: string) {\r\n    return Строка.trim() === '';\r\n  }\r\n\r\n  function Сред(Строка: string, Нач: number, Длина: number) {\r\n    return Строка.substring(Нач - 1, Нач -1 + Длина);\r\n  }\r\n\r\n  function Прав(Строка: string, Длина: number) {\r\n    return Строка.substring(Строка.length - Длина);\r\n  }\r\n\r\n  function isKeyword(token: string) {\r\n    return keywords.has(token.toLowerCase().trim());\r\n  }\r\n\r\n  function ДобавитьЧастьСтроки1С(Часть: string, Цвет: string) {\r\n\r\n    if (Часть === \" \" || ПоследнийЦвет === Цвет) {\r\n      СтрокаРезультат = СтрокаРезультат + Часть;\r\n    } else {\r\n      if (УстановленЦвет) {\r\n        СтрокаРезультат = СтрокаРезультат + КонецТега;\r\n        УстановленЦвет = false;\r\n      };\r\n\r\n      СтрокаРезультат = СтрокаРезультат + НачалоТега + Цвет + Часть;\r\n      УстановленЦвет = true;\r\n      ПоследнийЦвет = Цвет;\r\n    };\r\n  }\r\n\r\n  function РазукраситьСтроку(СтрокаКода: string) {\r\n\r\n    //  https://infostart.ru/profile/34707/public/\r\n    let ВСтрокеСкобка = false;\r\n    let ВСтрокеТильда = false;\r\n    let НачалоСтроки = 1;\r\n    let ТокенДоТочки = true;\r\n    // Заменяем 8 символьную табуляцию на 4 символьную пробелами\r\n\r\n    // Последовательно перебираются все символы строки кода\r\n    let Поз = 1;\r\n    for (Поз = 1; Поз <= СтрокаКода.length; Поз++) {\r\n\r\n      let ТекущийСимвол = СтрокаКода.charAt(Поз - 1);\r\n      if (ВСтроке) {\r\n\r\n        // Операции встрече символа \"кавычка\"\r\n        if (ТекущийСимвол === '\"') {\r\n          // Нашли парную кавычку - окрашиваем как строку\r\n          ДобавитьЧастьСтроки1С(Сред(СтрокаКода, НачалоСтроки, Поз - НачалоСтроки + 1), мЦветСтроки);\r\n          ВСтроке = false;\r\n          Токен = \"\";\r\n          ТокенДоТочки = true;\r\n        } else {\r\n          Токен = Токен + ТекущийСимвол;\r\n        };\r\n\r\n      } else if (ВСтрокеСкобка) {\r\n\r\n        // Операции встрече символа \"кавычка\" литерал\r\n        if (ТекущийСимвол === \"'\") {\r\n          // Нашли парную скобку - окрашиваем как комментарий\r\n          ДобавитьЧастьСтроки1С(Сред(СтрокаКода, НачалоСтроки, Поз - НачалоСтроки + 1), мЦветСтроки);\r\n          ВСтрокеСкобка = false;\r\n          Токен = \"\";\r\n          ТокенДоТочки = true;\r\n        } else {\r\n          Токен = Токен + ТекущийСимвол;\r\n        };\r\n\r\n      } else if (ТекущийСимвол === \" \") {\r\n        // Операции при встрече символа табуляции или пробела\r\n        if (!ПустаяСтрока(Токен)) {\r\n          // Пробел после токена, значит\r\n          // токен - ключевое слово...\r\n          if (ВСтрокеТильда) {\r\n            ДобавитьЧастьСтроки1С(Токен + \" \", мЦветСтроки);\r\n            ВСтрокеТильда = false;\r\n\r\n          } else if (isKeyword(Токен.trim())) {\r\n            ДобавитьЧастьСтроки1С(Токен + \" \", мЦветКлючевогоСлова1);\r\n\r\n          } else if (!isNaN(parseInt(Токен, 10))) {\r\n            ДобавитьЧастьСтроки1С(Токен + \" \", мЦветЧисла);\r\n\r\n          } else {\r\n            ДобавитьЧастьСтроки1С(Токен + \" \", мЦветФона);\r\n          };\r\n          Токен = \"\";\r\n        } else {\r\n          СтрокаРезультат = СтрокаРезультат + \" \";\r\n        };\r\n        ТокенДоТочки = true;\r\n\r\n      } else if (Спецсиволы.has(ТекущийСимвол)) {\r\n\r\n        // Встретился один из специальных символов\r\n        if (!ПустаяСтрока(Токен)) {\r\n          // Чтобы избежать окраски метода объекта с совпадающим именем\r\n          // с одним из ключевых слов, проверяем текущий символ на \".\"\r\n          if (ВСтрокеТильда) {\r\n\r\n            ДобавитьЧастьСтроки1С(Токен, мЦветСтроки);\r\n            ВСтрокеТильда = false;\r\n            ТокенДоТочки = (ТекущийСимвол !== \".\");\r\n\r\n          } else if (ТокенДоТочки && isKeyword(Токен)) {\r\n            ДобавитьЧастьСтроки1С(Токен, мЦветКлючевогоСлова1);\r\n            ТокенДоТочки = (ТекущийСимвол !== \".\");\r\n\r\n          } else {\r\n            // Не ключевое слово - значит число\r\n            if (!isNaN(parseInt(Токен, 10))) {\r\n              ДобавитьЧастьСтроки1С(Токен, мЦветЧисла);\r\n\r\n            } else {\r\n              ДобавитьЧастьСтроки1С(Токен, мЦветФона);\r\n            };\r\n            ТокенДоТочки = (ТекущийСимвол !== \".\");\r\n          };\r\n          Токен = \"\";\r\n        };\r\n        // Один из специальных символов\r\n        if (ТекущийСимвол === \".\" && ПоследнийЦвет === мЦветЧисла) {\r\n          // Продолжение числа\r\n          ДобавитьЧастьСтроки1С(ТекущийСимвол, мЦветЧисла);\r\n          continue;\r\n\r\n        } else if (ТекущийСимвол === \"=\" && Сред(СтрокаКода, Поз - 1, 1) === \"<\") {\r\n          // Знак \"меньше или равно\" - вторая ошибка движка Инфостарт\r\n          ПоследнийЦвет = undefined;\r\n\r\n        } else if (ТекущийСимвол === \"/\" && Сред(СтрокаКода, Поз + 1, 1) === \"/\") {\r\n          // Проверяется на комментарий\r\n          ДобавитьЧастьСтроки1С(Прав(СтрокаКода, СтрокаКода.length - Поз + 1), мЦветКомментария);\r\n          return;\r\n        };\r\n        ДобавитьЧастьСтроки1С(ТекущийСимвол, мЦветСпецСимвола);\r\n\r\n      } else if (ТекущийСимвол === '\"' || ТекущийСимвол === \"|\") {\r\n\r\n        // Операции встрече символа \"кавычка\"\r\n        // Первая кавычка, запоминаем позицию и взводим флаг нахождения в строке\r\n        if (ПустаяСтрока(Токен)) {\r\n          НачалоСтроки = Поз;\r\n          ВСтроке = true;\r\n        } else {\r\n          // Ошибка синтаксиса\r\n          ДобавитьЧастьСтроки1С(Токен + ТекущийСимвол, мЦветСтроки);\r\n          Токен = \"\";\r\n        };\r\n        ТокенДоТочки = true;\r\n\r\n      } else if (ТекущийСимвол === \"'\") {\r\n\r\n        // Операции встрече символа \"кавычка\" литерал\r\n        // Первая кавычка, запоминаем позицию и взводим флаг нахождения в строке\r\n        if (ПустаяСтрока(Токен)) {\r\n          НачалоСтроки = Поз;\r\n          ВСтрокеСкобка = true;\r\n        } else {\r\n          // Ошибка синтаксиса\r\n          ДобавитьЧастьСтроки1С(Токен + ТекущийСимвол, мЦветСтроки);\r\n          Токен = \"\";\r\n        };\r\n        ТокенДоТочки = true;\r\n\r\n      } else if (ТекущийСимвол === \"#\" || (ТекущийСимвол === \"&\" && ПустаяСтрока(СтрокаРезультат))) {\r\n\r\n        // Встретился символ препроцессора\r\n        ДобавитьЧастьСтроки1С(Прав(СтрокаКода, СтрокаКода.length - Поз + 1), мЦветПрепроцессора);\r\n        Поз = СтрокаКода.length;\r\n        break;\r\n\r\n      } else if (ТекущийСимвол === \"~\") {\r\n        Токен = Токен + ТекущийСимвол;\r\n        ВСтрокеТильда = true;\r\n      } else {\r\n        // Остальные символы\r\n        Токен = Токен + ТекущийСимвол;\r\n      }\r\n    }\r\n\r\n    if (ВСтроке) {\r\n\r\n      // Многострочная строка\r\n      ДобавитьЧастьСтроки1С(Сред(СтрокаКода, НачалоСтроки, Поз - НачалоСтроки + 1), мЦветСтроки);\r\n\r\n    } else if (ВСтрокеСкобка) {\r\n\r\n      // Незавершенный литерал\r\n      ДобавитьЧастьСтроки1С(Сред(СтрокаКода, НачалоСтроки, Поз - НачалоСтроки + 1), мЦветСтроки);\r\n\r\n    } else if (!ПустаяСтрока(Токен)) {\r\n\r\n      // Анализируем последний токен строки кода\r\n      if (isKeyword(Токен)) {\r\n        ДобавитьЧастьСтроки1С(Токен, мЦветКлючевогоСлова1);\r\n\r\n      } else if (!isNaN(parseInt(Токен, 10))) {\r\n        ДобавитьЧастьСтроки1С(Токен, мЦветЧисла);\r\n\r\n      } else {\r\n        ДобавитьЧастьСтроки1С(Токен, мЦветФона);\r\n      };\r\n\r\n    };\r\n\r\n  }\r\n\r\n  ВСтроке = false;\r\n  Токен = \"\";\r\n  УстановленЦвет = false;\r\n  ПоследнийЦвет = undefined;\r\n  СтрокаРезультат = '';\r\n\r\n  let result = [];\r\n\r\n  for (let СтрокаКода of text.split('\\n')) {\r\n\r\n    if (ПустаяСтрока(СтрокаКода)) {\r\n      result.push('');\r\n      continue;\r\n    }\r\n\r\n    СтрокаРезультат = '';\r\n    РазукраситьСтроку(СтрокаКода);\r\n    if (УстановленЦвет && !ВСтроке) {\r\n      СтрокаРезультат += '</span>';\r\n      УстановленЦвет = false;\r\n      ПоследнийЦвет = '';\r\n      Токен = '';\r\n    } else if (!ВСтроке) {\r\n      ПоследнийЦвет = '';\r\n      Токен = '';\r\n    }\r\n\r\n    result.push(СтрокаРезультат);\r\n  }\r\n\r\n  return result.join('\\n');\r\n}\r\n\r\nexport default highlight;","import { FC, ReactElement, useCallback, useEffect, useRef } from 'react'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\n\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { topicActions, getTopicIfNeeded, getNewMessagesIfNeeded } from 'src/store'\r\nimport { newMessageText } from 'src/data/newmessage/actions'\r\n\r\nimport Error from 'src/components/common/error'\r\nimport Pages from 'src/components/common/pages'\r\nimport Header from './header'\r\nimport TopicInfo from './topic_info'\r\nimport Row from '../../pages/topic/row'\r\nimport Footer from './footer'\r\nimport NewMessage from './new_message';\r\nimport { getMaxPage, extractTextFromHTML } from 'src/utils';\r\nimport { RootState, useActionCreators, useAppDispatch } from 'src/store';\r\n\r\nimport './topic.css'\r\n\r\nvar scrolledToHash: boolean;\r\n\r\nconst mapState = (state: RootState) => {\r\n\r\n  const {\r\n    status,\r\n    lastUpdated,\r\n    info,\r\n    item0,\r\n    items,\r\n    error\r\n  } = state.topic;\r\n\r\n  return {\r\n    login: state.login,\r\n    info,\r\n    item0,\r\n    items,\r\n    status,\r\n    lastUpdated,\r\n    error,\r\n    options: state.options.items\r\n  }\r\n}\r\n\r\nconst getPageNumber = (locationPage: string | string[]): number | \"last20\" => {\r\n  if (!locationPage) return 1;\r\n  if (locationPage === \"last20\") return \"last20\";\r\n  if (isNaN(+locationPage)) return 1;\r\n  return +locationPage;\r\n}\r\n\r\nconst connector = connect(mapState);\r\nconst Topic: FC<ConnectedProps<typeof connector>> = ({ login, items, item0, info, error }): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n  const actions = useActionCreators(topicActions);\r\n  const location = useLocation();\r\n\r\n  let locationParams = new URLSearchParams(location.search);\r\n  const topicId = +locationParams.get('id');\r\n  const page = getPageNumber(locationParams.get('page'));\r\n  const maxPage = getMaxPage(info.count);\r\n  \r\n  const isLastPageRef = useRef(false);\r\n  isLastPageRef.current = (page === 'last20' || page === maxPage);\r\n\r\n  const updateNewMessages = useCallback(() => {\r\n    if (isLastPageRef.current)\r\n      dispatch(getNewMessagesIfNeeded());\r\n  }, [dispatch])\r\n\r\n  const onPostNewMessageSuccess = () => {\r\n    updateNewMessages();\r\n    dispatch(newMessageText(''));\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (info.title)\r\n      document.title = extractTextFromHTML(info.title);\r\n  }, [info.title]);\r\n\r\n  useEffect(() => {\r\n    dispatch(getTopicIfNeeded(topicId, page));\r\n  }, [dispatch, topicId, page]);\r\n\r\n  useEffect(() => {\r\n\r\n    const timer = window.setInterval(updateNewMessages, 60 * 1000);\r\n\r\n    const clearStore = () => {\r\n      actions.clear();\r\n      scrolledToHash = undefined;\r\n      if (timer) clearInterval(timer);\r\n    }\r\n    return clearStore;\r\n\r\n  }, [actions, updateNewMessages]);\r\n\r\n  useEffect(() => {\r\n    if (!scrolledToHash &&\r\n      location.hash &&\r\n      items.length > 0) {\r\n      const nodeHash = document.getElementById(location.hash.slice(1));\r\n      if (nodeHash)\r\n        setTimeout(() => window.scrollTo(0, nodeHash.offsetTop), 1);\r\n      scrolledToHash = true;\r\n    }\r\n  });\r\n\r\n  return (\r\n    <div style={{ marginBottom: \"5px\" }}>\r\n      <Header />\r\n      {error && <Error text={error} />}\r\n      <div className=\"topic-table\">\r\n        <TopicInfo />\r\n        <Row key='0' data={item0} />\r\n        {items.map((item, i) => (\r\n          <Row key={item.n} data={item} />\r\n        ))}\r\n        {(maxPage > 1 || page === \"last20\") &&\r\n          <div className=\"tf\">\r\n            <Pages maxPage={maxPage} last20 />\r\n          </div>\r\n        }\r\n      </div>\r\n      <Footer page={page} />\r\n      {login.logged &&\r\n        <NewMessage onSubmitSuccess={onPostNewMessageSuccess} />\r\n      }\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default connector(Topic);","import { FC, ReactElement, useState } from 'react'\r\nimport { childrenToText } from 'src/utils'\r\nimport highlight from './code_highlight'\r\nimport './code1c.css'\r\n\r\nconst prepareText = (text: string): string => {\r\n\r\n  // replace double new-lines\r\n  let newtext = text\r\n    .replace(/\\n<br>/g, '\\n')\r\n    .replace(/<br>\\n/g, '\\n')\r\n    .replace(/\\r<br>/g, '\\n')\r\n    .replace(/<br>\\r/g, '\\n')\r\n    .replace(/<br>/g, '\\n');\r\n\r\n  // remove all leading|ending new-lines\r\n  while (newtext[0] === '\\n') {\r\n    newtext = newtext.substring(1);\r\n  }\r\n\r\n  while (newtext.substring(newtext.length - 1) === '\\n') {\r\n    newtext = newtext.substring(0, newtext.length - 1);\r\n  }\r\n\r\n  return highlight(newtext);\r\n}\r\n\r\nconst Code: FC = ({ children }): ReactElement => {\r\n\r\n  const [hidden, setHidden] = useState(true);\r\n\r\n  let text: string = \"\";\r\n  if (children) {\r\n\r\n    const textArr = childrenToText(children);\r\n    text = textArr.join('');\r\n\r\n    text = prepareText(text);\r\n  }\r\n\r\n  const onShowClick = () => {\r\n    setHidden(!hidden);\r\n  }\r\n\r\n  let buttonText: string;\r\n  let linesCount = 0;\r\n  if (text)\r\n    linesCount = text.split(\"\\n\").length;\r\n\r\n  if (hidden)\r\n    buttonText = `Показать: ${linesCount} строк`;\r\n  else\r\n    buttonText = 'Скрыть';\r\n\r\n  let buttonShow: ReactElement | null = null;\r\n  if (linesCount > 7)\r\n    buttonShow = (\r\n      <div className=\"expand-button-div\">\r\n        <span className=\"expand-button-span\" onClick={onShowClick}>{buttonText}</span>\r\n      </div>\r\n    );\r\n\r\n  let preStyle: React.CSSProperties = {\r\n  }\r\n\r\n  if (hidden && linesCount > 7) {\r\n    preStyle.overflow = \"hidden\";\r\n    preStyle.height = \"135px\";\r\n  } else {\r\n    preStyle.overflow = \"auto\";\r\n    preStyle.height = \"auto\";\r\n  }\r\n\r\n  return (\r\n    <div style={{ marginTop: \"5px\" }}>\r\n      <pre className=\"code-pre\" style={preStyle} dangerouslySetInnerHTML={{ __html: text }}>\r\n      </pre>\r\n      {buttonShow}\r\n    </div>\r\n  )\r\n\r\n\r\n}\r\n\r\nexport default Code;","import { FC, ReactElement, useRef, useState, useEffect } from 'react'\r\n\r\nimport { getMaxPage, childrenToText } from 'src/utils';\r\nimport { fetchTopicInfo } from 'src/api'\r\nimport { useActionCreators, useAppSelector } from 'src/store';\r\nimport { ITooltipKeys, tooltipsActions } from 'src/store';\r\n\r\ntype IProps = {\r\n  topicId: number,\r\n  number: number,\r\n  style?: {}\r\n}\r\n\r\nconst LinkToPost: FC<IProps> = (props): ReactElement => {\r\n\r\n  const timerRef = useRef(null);\r\n  const actions = useActionCreators(tooltipsActions);\r\n\r\n  const currentTopicId = useAppSelector(state => state.topic.info?.id);\r\n  const tooltipDelay = useAppSelector(state => +state.options.items.tooltipDelay);\r\n\r\n  let initialText = '';\r\n  if (!props.children)\r\n    initialText = String(props.number);\r\n  else  \r\n    initialText = childrenToText(props.children).join('');\r\n\r\n  const [text, setText] = useState(initialText);\r\n\r\n  useEffect(() => {\r\n\r\n    if (!initialText.startsWith(\"http\")) return;\r\n\r\n    const run = async () => {\r\n      const topicInfo = await fetchTopicInfo(props.topicId);\r\n      setText(topicInfo.title)\r\n    }\r\n\r\n    run();\r\n\r\n  }, [initialText, props.topicId]);\r\n\r\n  const onMouseOver = (e: React.MouseEvent<HTMLElement>) => {\r\n    e.persist();\r\n    timerRef.current = window.setTimeout(() => showToolTip(e), tooltipDelay);\r\n  }\r\n\r\n  const onMouseOut = () => {\r\n    if (timerRef.current)\r\n      clearTimeout(timerRef.current);\r\n  }\r\n\r\n  const onClick = (e: React.MouseEvent<HTMLElement>) => {\r\n    e.stopPropagation();\r\n    if (timerRef.current)\r\n      clearTimeout(timerRef.current);\r\n    showToolTip(e);\r\n  }\r\n\r\n  const showToolTip = (e: React.MouseEvent<HTMLElement>) => {\r\n\r\n    const { topicId, number } = props;\r\n\r\n    const coords = {\r\n      x: e.pageX,\r\n      y: e.pageY - 50 // remove navbar margin-top\r\n    }\r\n\r\n    const keys: ITooltipKeys = {\r\n      topicId: +topicId,\r\n      number: +number\r\n    }\r\n\r\n    actions.show({ keys, coords });\r\n\r\n  }\r\n\r\n  if ((props.topicId === currentTopicId) || !isNaN(+text))\r\n    return (\r\n      <span\r\n        onMouseOver={onMouseOver}\r\n        onMouseOut={onMouseOut}\r\n        onClick={onClick}\r\n        className='link'\r\n        style={{ ...props.style }}\r\n      >{text}</span>\r\n    )\r\n  else {\r\n    const page = getMaxPage(props.number);\r\n\r\n    let pageParam = '';\r\n    if (page > 1)\r\n      pageParam = `&page=${page}`;\r\n      \r\n    return (\r\n      <span>\r\n        <a href={`#/topic.php?id=${props.topicId}${pageParam}#${props.number}`}\r\n          style={{ ...props.style }}\r\n        >{text}</a>{' '}\r\n        (<span onMouseOver={onMouseOver}\r\n          onMouseOut={onMouseOut}\r\n          onClick={onClick}\r\n          className='link'\r\n        >{props.number}</span>)\r\n      </span>\r\n    )\r\n  }  \r\n}\r\n\r\nexport default LinkToPost;","import { FC, ReactElement } from 'react'\r\n\r\ntype IProps = {\r\n  href: string\r\n}\r\n\r\nconst LinkToUser: FC<IProps> = ({ href, children }): ReactElement => {\r\n  return <a href={href} className=\"registered-user\">{children}</a>\r\n}\r\n\r\nexport default LinkToUser;","import { FC, ReactElement, useEffect, useState } from 'react';\r\n\r\ntype IProps = {\r\n  href: string,\r\n}\r\n\r\nconst getVideoId = (href: string): string | null => {\r\n\r\n  let fullHref = href;\r\n  if (href.search(/http/) === -1) fullHref = 'http://' + fullHref;\r\n\r\n  try {\r\n    var url = new URL(fullHref);\r\n  } catch (e)  {\r\n    return null;\r\n  }\r\n\r\n  if (url.hostname.search(/youtube/) !== -1) {\r\n    return url.searchParams.get('v');\r\n\r\n  } else if (url.hostname.search(/youtu\\.be/) !== -1) {\r\n    return url.pathname.substring(1)\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\ntype HrefParams = {\r\n  hrefName: string\r\n  title: string,\r\n  notFound: boolean  \r\n}\r\n\r\nconst getVideoParams = async (videoId: string): Promise<HrefParams> => {\r\n\r\n  const apiKey = localStorage.getItem('youtubeApiKey') || 'AIzaSyCztN2QW4Fxw_1YuAHBTOZdYLbzigPz25g';\r\n  let apiUrl = `https://www.googleapis.com/youtube/v3/videos?key=${apiKey}&fields=items(snippet(title))&part=snippet&id=${videoId}`;\r\n  const response = await fetch(apiUrl);\r\n  const json = await response.json();\r\n\r\n  if (json.items.length === 0)\r\n    return {\r\n      hrefName: '',\r\n      title: '',\r\n      notFound: true  \r\n    };\r\n\r\n  const title = json.items[0].snippet.title;\r\n\r\n  let hrefName = title;\r\n  let maxLength = 50;\r\n  if (title.length > maxLength + 5)\r\n    hrefName = hrefName.substring(0, maxLength) + '...'\r\n\r\n  return {\r\n    hrefName,\r\n    title,\r\n    notFound: false\r\n  }\r\n}\r\n\r\nconst YoutubeLink: FC<IProps> = ({ href }): ReactElement => {\r\n\r\n  let [hrefName, setHrefName] = useState(href);\r\n  let [title, setTitle] = useState('');\r\n\r\n  useEffect(() => {\r\n\r\n    let isMounted = true;\r\n    const run = async () => {\r\n\r\n      const videoId = getVideoId(href);\r\n      if (!videoId)\r\n        return;\r\n\r\n      try {\r\n        \r\n        const params = await getVideoParams(videoId);\r\n\r\n        if (isMounted) {\r\n          if (params.notFound)\r\n            setHrefName(href + ' (видео не найдено)');\r\n          else {  \r\n            setHrefName(params.hrefName);\r\n            setTitle(params.title);\r\n          }  \r\n        }  \r\n\r\n      } catch (e) {\r\n        console.error('youtube', videoId, e.message);\r\n      }\r\n    }\r\n\r\n    run();\r\n\r\n    return () => {isMounted = false};\r\n\r\n  }, [href])\r\n\r\n  const prefix = 'youtube';\r\n  return (\r\n    <a href={href} title={title}>{`${prefix}: ${hrefName}`}</a>\r\n  )\r\n}\r\n\r\nexport default YoutubeLink;","import { FC, ReactElement } from 'react'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\nimport URL from 'url-parse'\r\n\r\nimport LinkToPost from './link_to_post'\r\nimport LinkToUser from './link_to_user'\r\nimport YoutubeLink from './youtube_link'\r\n\r\nimport { childrenToText } from 'src/utils'\r\nimport { RootState } from 'src/store'\r\n\r\ntype IProps = {\r\n  href: string,\r\n  parentText: string,\r\n  target: string,\r\n  class: string,\r\n  rel: string,\r\n  showTooltipOnPostLink: string,\r\n  showYoutubeVideoTitle: string,\r\n  replaceCatalogMista: string,\r\n  fixBrokenLinks: string,\r\n}\r\n\r\nconst fixBrokenLink = (href: string, parentText: string): string => {\r\n  let escapedHref = href\r\n    .replace(/\\[/g, '\\\\[')\r\n    .replace(/\\]/g, '\\\\]')\r\n    .replace(/\\./g, '\\\\.')\r\n    .replace(/\\./g, '.')\r\n    .replace(/\\*/g, '\\\\*')\r\n    .replace(/\\+/g, '\\\\+')\r\n    .replace(/\\(/g, '\\\\(')\r\n    .replace(/\\)/g, '\\\\)')\r\n    .replace(/\\?/g, '\\\\?')\r\n    .replace(/\\//g, '\\\\/');\r\n\r\n  try {\r\n    let regExp = new RegExp(escapedHref + '<\\\\/a>(\\\\)|[а-яёА-ЯЁ0-9#\\\\-\\\\+\\\\_\\\\%\\\\?=]*)');\r\n    let arr = parentText.match(regExp);\r\n    if (arr && arr.length > 1) {\r\n      if (arr[1] === ')' && href.search('\\\\(') === -1) {\r\n        return href;\r\n      }\r\n      href = href + arr[1];\r\n      return href;\r\n    }\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n  return href;\r\n}\r\n\r\nconst isYoutube = (hostname: string): boolean => {\r\n  if (hostname.search(/youtube/) !== -1\r\n    || hostname.search(/youtu\\.be/) !== -1)\r\n    return true;\r\n  else\r\n    return false\r\n}\r\n\r\nconst isMistaCatalog = (hostname: string): boolean => {\r\n  if (hostname.search(/catalog\\.mista/) !== -1)\r\n    return true;\r\n  else\r\n    return false\r\n}\r\n\r\nconst mapState = (state: RootState) => {\r\n\r\n  const {\r\n    showYoutubeVideoTitle,\r\n    replaceCatalogMista,\r\n    fixBrokenLinks\r\n  } = state.options.items;\r\n\r\n  return {\r\n    showYoutubeVideoTitle,\r\n    replaceCatalogMista,\r\n    fixBrokenLinks\r\n  }\r\n}\r\n\r\nconst connector = connect(mapState);\r\nconst CustomLink: FC<ConnectedProps<typeof connector> & IProps> = (props): ReactElement => {\r\n\r\n  const { href, children, parentText,\r\n    showYoutubeVideoTitle, replaceCatalogMista, fixBrokenLinks } = props;\r\n\r\n  try {\r\n    var url = new URL(href, true);\r\n  } catch (e) {\r\n    console.error((e as Error).message, href);\r\n    return <a href={href}>{href}</a>;\r\n  }\r\n\r\n  let newHref = href;\r\n  if (newHref.startsWith('/')) {\r\n    url.set('protocol', 'https')\r\n    url.set('hostname', 'forum.mista.ru')\r\n    newHref = url.href;\r\n  }\r\n\r\n  if (url.hostname.search(/forum\\.mista.ru/) !== -1) {\r\n\r\n    if (url.pathname === '/topic.php') {\r\n      return (\r\n        <LinkToPost topicId={url.query.id} number={url.hash.replace('#', '') || \"0\"}>\r\n          {childrenToText(children)}\r\n        </LinkToPost>\r\n      )\r\n    } else if (url.pathname === '/users.php') {\r\n      return (\r\n        <LinkToUser href={url.href} >\r\n          {children}\r\n        </LinkToUser>\r\n      )\r\n    }\r\n\r\n    if (url.hostname === 'a-sitnikov.github.io' &&\r\n      url.pathname === '/react.mista/') {\r\n\r\n      if (Object.keys(url.query).length === 0) {\r\n\r\n        url = new URL(href.replace(/#\\//, ''), true);\r\n        if (url.pathname === '/react.mista/topic.php')\r\n          return (\r\n            <LinkToPost topicId={url.query.id} number={url.hash.replace('#', '') || \"0\"}>\r\n              {childrenToText(children)}\r\n            </LinkToPost>\r\n          )\r\n      }\r\n    }\r\n  }\r\n\r\n  if (showYoutubeVideoTitle === 'true')\r\n    if (isYoutube(url.hostname)) \r\n      return <YoutubeLink href={href} />\r\n\r\n  if (replaceCatalogMista === 'true')\r\n    if (isMistaCatalog(url.hostname)) {\r\n      url.set('hostname', 'infostart.ru')\r\n\r\n      return (\r\n        <a target={props.target}\r\n          className={props.class}\r\n          rel={props.rel}\r\n          href={url.href} >{url.href} </a>\r\n      )\r\n    }\r\n\r\n  if (fixBrokenLinks === 'true' && parentText) {\r\n    newHref = fixBrokenLink(newHref, parentText);\r\n  }\r\n\r\n  return (\r\n    <a target={props.target}\r\n      className={props.class}\r\n      rel={props.rel}\r\n      href={newHref} >{children}</a>\r\n  )\r\n}\r\n\r\nexport default connector(CustomLink);","import { FC, ReactElement } from 'react'\r\nimport { domain } from 'src/api'\r\n\r\nimport { IVotingItem } from 'src/store'\r\n\r\ntype IProps = {\r\n  topicId: number,\r\n  data: IVotingItem,\r\n  colors: string[],\r\n  total: number,\r\n  n: number\r\n}\r\n\r\nconst VoteItem: FC<IProps> = ({ topicId, data, total, n, colors }): ReactElement => {\r\n\r\n  const img = `${domain}/css/voting${n}.png`;\r\n\r\n  let percent = 0;\r\n\r\n  if (total) {\r\n    percent = Math.round(100 * data.count / total);\r\n  }\r\n\r\n  const imgStyle = { maxWwidth: \"500px\", width: \"100%\", height: \"15px\" };\r\n\r\n  return (\r\n    <div className=\"voting-item\">\r\n      <div className=\"voting-title\">\r\n        <a rel=\"nofollow\" style={{ textDecoration: \"none\" }} href={`#/topic.php?id=${topicId}&sel=${n}`}>\r\n          <b><span style={{ color: colors[n - 1] }}>{`${n}. ${data.text}`}</span></b>\r\n        </a>\r\n      </div>\r\n      <div className=\"voting-percentage\">\r\n        {/*<div className=\"div-va-middle\">*/}\r\n        <b><span style={{ color: colors[n - 1] }}>{`${percent}% (${data.count})`}</span></b>\r\n        {/*</div>*/}\r\n      </div>\r\n      <div className=\"voting-bar\">\r\n        <div style={{ width: `${percent}%` }}>\r\n          <a href={img}>\r\n            <img src={img} style={imgStyle} alt={`п${n}`} />\r\n          </a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default VoteItem;","import { FC, ReactElement } from 'react'\r\nimport VoteItem from './vote_item'\r\nimport { IVotingItem } from 'src/store'\r\n\r\ntype IProps = {\r\n  items: IVotingItem[],\r\n  topicId: number,\r\n  colors: string[]\r\n}\r\n\r\nconst VoteChart: FC<IProps> = ({ items, topicId, colors }): ReactElement => {\r\n\r\n  let total = Math.max(...items.map(item => item.count));\r\n\r\n  return (\r\n    <div style={{ marginBottom: \"10px\" }}>\r\n      {items.filter(item => item.text).map((data, i) => <VoteItem key={i} data={data} total={total} n={i + 1} topicId={topicId} colors={colors} />)}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default VoteChart;","import { FC, ReactElement } from 'react'\r\n\r\ntype IProps = {\r\n  colors: string[],\r\n  n: number,\r\n  text: string\r\n}\r\n\r\nconst Vote: FC<IProps> = ({ colors, n, text }): ReactElement => {\r\n\r\n  return (\r\n    <div style={{ marginTop: \"5px\" }}>\r\n      <b><span style={{ color: colors[n - 1] }}>{`${n}. ${text}`}</span></b>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Vote;","import { FC, ReactElement, useEffect, useState, useCallback } from 'react'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\nimport activeHtml from 'react-active-html';\r\n\r\nimport Code from 'src/components/extensions/code1c'\r\nimport LinkToPost from 'src/components/extensions/link_to_post'\r\nimport CustomLink from 'src/components/extensions/custom_link'\r\n\r\nimport VoteChart from './vote_chart'\r\nimport Vote from './vote'\r\nimport { RootState } from 'src/store';\r\nimport { ITopicMessage } from 'src/store';\r\nimport { fetchTopicInfo } from 'src/api';\r\n\r\ntype IProps = {\r\n  topicId: number,\r\n  n: number,\r\n  html: string,\r\n  vote: number,\r\n  data: ITopicMessage,\r\n  style?: {}\r\n}\r\n\r\nconst processLinksToPosts = (text: string, topicId: number): string => {\r\n\r\n  const regexp = /(\\()(\\d+)(\\))/gi; // (12)\r\n  return text.replace(regexp, (res, ...segments) => {\r\n    const number = segments[1];\r\n    return `(<link data-topicid='${topicId}' data-number='${number}'></link>)`\r\n  });\r\n}\r\n\r\nconst processCode1C = (text: string): string => {\r\n\r\n  const regexp = /(\\[1[CС]\\])((.|\\n|\\r)*?)(\\[\\/1[CС]\\])/gi; // [1C] text [/1C]\r\n  return text.replace(regexp, (res, ...segments) => {\r\n    let txt = segments[1];\r\n\r\n    //remove first <br>\r\n    if (txt.substr(0, 4) === \"<br>\")\r\n      txt = txt.substr(4);\r\n    return `<code>${txt}</code>`\r\n  });\r\n}\r\n\r\nconst processText = (text: string, topicId: number): string | undefined => {\r\n\r\n  if (!text)\r\n    return text;\r\n\r\n  let newtext = processCode1C(text);\r\n  newtext = processLinksToPosts(newtext, topicId);\r\n\r\n  return newtext;\r\n}\r\n\r\n\r\nconst mapState = (state: RootState) => {\r\n\r\n  const { info } = state.topic;\r\n\r\n  return {\r\n    info,\r\n    voteColors: state.options.voteColors,\r\n    showTooltips: state.options.items['showTooltips']\r\n  }\r\n}\r\nconst connector = connect(mapState);\r\nconst MsgText: FC<ConnectedProps<typeof connector> & IProps> =\r\n  ({ topicId, n, html, vote, info, style, voteColors }): ReactElement => {\r\n\r\n    let initialVoteText: string = null;\r\n    if (vote && info.voting && topicId === info.id)\r\n      initialVoteText = info.voting[vote - 1].text;\r\n\r\n    const [voteText, setVoteText] = useState(initialVoteText);\r\n\r\n    const getVoteText = useCallback(async () => {\r\n      try {\r\n        const _info = await fetchTopicInfo(topicId);\r\n        setVoteText(_info.voting[vote - 1].text);\r\n      } catch (e) {\r\n        console.error(e.message);\r\n      }\r\n    }, [topicId, vote]);\r\n\r\n    useEffect(() => {\r\n      if (vote && !initialVoteText) {\r\n        getVoteText();\r\n      } \r\n    }, [vote, getVoteText, initialVoteText]);\r\n\r\n    const showVote = (vote !== 0) && (voteText !== null);\r\n    let voteChart: ReactElement;\r\n    if (n === 0 && info.isVoting && info.voting) {\r\n      voteChart = <VoteChart items={info.voting} topicId={topicId} colors={voteColors} />\r\n    }\r\n\r\n    let processedHtml = processText(html, topicId);\r\n    const componentsMap = {\r\n      link: (props: any) => <LinkToPost topicId={props['data-topicid']} number={props['data-number']} key={props.key} />,\r\n      code: (props: any) => <Code {...props} />,\r\n      a: (props: any) => <CustomLink {...props} parentText={processedHtml} />\r\n    };\r\n    const textComponent = activeHtml(processedHtml, componentsMap);\r\n\r\n    return (\r\n      <div className=\"message\" style={style}>\r\n        {voteChart}\r\n        <div>\r\n          {textComponent}\r\n        </div>\r\n        {showVote && <Vote text={voteText} n={vote} colors={voteColors} />}\r\n      </div>\r\n    )\r\n  }\r\n\r\nexport default connector(MsgText);","import { FC, ReactElement, useEffect, useState } from 'react'\r\nimport dateFormat from 'dateformat'\r\nimport classNames from 'classnames'\r\nimport { domain } from 'src/api'\r\n\r\nimport { addMessageText } from 'src/data/newmessage/actions'\r\nimport { useAppDispatch } from 'src/store'\r\nimport { ITopicMessage } from 'src/store'\r\n\r\ntype IProps = {\r\n  data: ITopicMessage,\r\n  isAuthor: boolean,\r\n  isYou: boolean,\r\n  isTooltip?: boolean\r\n}\r\n\r\nconst UserInfo: FC<IProps> = (props): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const [imgDisplay, setImgDisplay] = useState('none');\r\n\r\n  const onClick = () => {\r\n    const { data } = props;\r\n    dispatch(addMessageText(`(${data.n})`));\r\n\r\n    let elem = document.getElementById('message_text');\r\n    if (elem)\r\n      window.scrollTo(0, elem.offsetTop);\r\n  }\r\n\r\n  const onImageLoad = () => {\r\n    setImgDisplay('inline');\r\n  }\r\n\r\n  const onImageError = () => {\r\n    setImgDisplay('none');\r\n  }\r\n\r\n  const { data, isAuthor, isYou, isTooltip } = props;\r\n  useEffect(() => {\r\n    setImgDisplay('none');\r\n  }, [data.n]);\r\n\r\n  const href = `${domain}/users.php?id=${data.userId}`;\r\n  let dataStr;\r\n  if (!data) {\r\n    dataStr = '';\r\n  } else if (data.n === 0) {\r\n    dataStr = dateFormat(new Date(data.time), 'dd.mm.yy - HH:MM');\r\n  } else {\r\n    dataStr = (\r\n      <>\r\n        <span className=\"message-number\">{data.n}</span>{' - ' + dateFormat(new Date(data.time), 'dd.mm.yy - HH:MM')}\r\n      </>\r\n    )\r\n  }\r\n\r\n  const userClassNames = classNames(\"registered-user\", {\r\n    \"is-author\": isAuthor,\r\n    \"is-you\": isYou\r\n  });\r\n\r\n  let imgElem;\r\n  if (window.innerWidth > 7680000)\r\n    imgElem = <img src={`${domain}/css/user_icons/${data.userId}_16x16.png`}\r\n      alt=\"user ico\"\r\n      onLoad={onImageLoad}\r\n      onError={onImageError}\r\n      style={{ display: imgDisplay, marginBottom: \"4px\", marginRight: \"1px\" }} />\r\n\r\n  let timeElem;\r\n  if (isTooltip) {\r\n    timeElem = <div className=\"ah\" style={{ display: \"inline-block\", marginLeft: \"5px\" }}>{dataStr}</div>;\r\n  } else {\r\n    timeElem =\r\n      <div className=\"message-time\">\r\n        <span className=\"ah\" >{dataStr}</span>\r\n        <button className=\"button ah\" onClick={onClick}>{dataStr}</button>\r\n      </div>\r\n  }\r\n\r\n  return (\r\n    <div className=\"user-info\">\r\n      {imgElem}\r\n      <a className={userClassNames} href={href}>{data.user}</a>\r\n      {timeElem}\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default UserInfo;","import { FC, ReactElement, useState, useEffect } from 'react'\r\n\r\nimport { fetchTopicMessage } from 'src/api'\r\n\r\nimport MsgText from 'src/pages/topic/row/msg_text'\r\nimport UserInfo from 'src/pages/topic/row/user_info'\r\n\r\nimport { ITopicMessage } from 'src/store'\r\n\r\nimport './topic_preview.css'\r\n\r\ntype IProps = {\r\n  topicId: number,\r\n  n: number,\r\n  author: string,\r\n  loggedUserId: number,\r\n  onDataLoaded?: () => void\r\n}\r\n\r\nconst PreviewContent: FC<IProps> = ({ topicId, n, author, loggedUserId, onDataLoaded }): ReactElement => {\r\n\r\n  const [data, setData] = useState<ITopicMessage | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n\r\n    const getData = async () => {\r\n      try {\r\n        const _data = await fetchTopicMessage(topicId, n);\r\n        if (_data) {\r\n          setData(_data);\r\n          setError(null);\r\n          if (onDataLoaded) onDataLoaded();\r\n        } else {\r\n          setData(null);\r\n          setError(`Не найдено сообщение ${n}`);\r\n        }  \r\n      } catch (e) {\r\n        setData(null);\r\n        setError((e as Error).message);\r\n      }\r\n\r\n    }\r\n\r\n    getData();\r\n\r\n  }, [topicId, n, onDataLoaded])\r\n\r\n  if (!data && !error)\r\n    return null;\r\n\r\n  return (\r\n    <>\r\n      {data &&\r\n        <div className='preview-content'>\r\n          <div className='topic-preview-userinfo'>\r\n            <UserInfo data={data} isAuthor={data.user === author} isYou={data.userId === loggedUserId} isTooltip />\r\n          </div>\r\n          <MsgText\r\n            topicId={topicId}\r\n            n={n}\r\n            data={data}\r\n            html={data.text}\r\n            vote={data.vote}\r\n            style={{ overflowY: \"auto\", overflowWrap: \"break-word\" }}\r\n          />\r\n        </div>}\r\n      {error && <span>{error}</span>}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default PreviewContent;","import { FC, ReactElement, useCallback, useState } from 'react'\r\nimport { SwipeEventData, useSwipeable } from 'react-swipeable'\r\nimport { fetchTopicInfo } from 'src/api'\r\n\r\nimport PreviewButtons from './preview_buttons'\r\nimport PreviewContent from './preview_content'\r\nimport './topic_preview.css'\r\n\r\ntype IProps = {\r\n  topicId: number,\r\n  initialMsgNumber: number,\r\n  author: string,\r\n  loggedUserId: number\r\n}\r\n\r\nconst TopicPreview: FC<IProps> = ({ topicId, initialMsgNumber, author, loggedUserId }): ReactElement => {\r\n\r\n  const [deltaX, setDeltaX] = useState(0);\r\n  const [display, setDispaly] = useState('none');\r\n  const [state, setState] = useState({\r\n    msgNumber: initialMsgNumber,\r\n    key: 0\r\n  })\r\n\r\n  const onClickFirst = () => {\r\n    setState({\r\n      msgNumber: 0,\r\n      key: state.key\r\n    });\r\n  }\r\n\r\n  const onClickNext = () => {\r\n    setState({\r\n      msgNumber: state.msgNumber + 1,\r\n      key: state.key\r\n    });\r\n  }\r\n\r\n  const onClickPrev = () => {\r\n    if (state.msgNumber > 0)\r\n      setState({\r\n        msgNumber: state.msgNumber - 1,\r\n        key: state.key\r\n      });\r\n  }\r\n\r\n  const onClickLast = async () => {\r\n    const info = await fetchTopicInfo(topicId);\r\n    setState({\r\n      msgNumber: info.count,\r\n      key: state.key\r\n    });    \r\n  }\r\n\r\n  const onSwiping = (eventData: SwipeEventData) => {\r\n    if (Math.abs(eventData.deltaX) < 35)\r\n      setDeltaX(0);\r\n    else\r\n      setDeltaX(eventData.deltaX);\r\n  }\r\n\r\n  const onSwiped = (eventData: SwipeEventData) => {\r\n\r\n    if (Math.abs(eventData.deltaX) > 150) {\r\n      if (eventData.dir === \"Left\") {\r\n        setState({\r\n          msgNumber: state.msgNumber + 1,\r\n          key: state.key + 1\r\n        });         \r\n      } else if (eventData.dir === \"Right\" && state.msgNumber > 0) {\r\n        setState({\r\n          msgNumber: state.msgNumber - 1,\r\n          key: state.key + 1\r\n        });           \r\n      }\r\n    }\r\n    setDeltaX(0);\r\n  }\r\n\r\n  const swipeable = useSwipeable({\r\n    onSwiping,\r\n    onSwiped,\r\n    delta: 15\r\n  });\r\n\r\n  const onContentLoaded = useCallback(() => {\r\n    setDispaly('block');\r\n  }, []);\r\n\r\n  let items = [state.msgNumber];\r\n\r\n  if (deltaX < 0)\r\n    items.push(state.msgNumber + 1);\r\n  else if (deltaX > 0 && state.msgNumber > 0)\r\n    items.push(state.msgNumber - 1);\r\n\r\n  const style: React.CSSProperties = {\r\n    transform: `translate3d(${deltaX}px, 0px, 0px)`,\r\n    flexDirection: deltaX > 0 ? 'row-reverse' : 'row'\r\n  }\r\n\r\n  return (\r\n    <div className=\"preview-container\" style={{ display }}>\r\n      <div className=\"topic-preview\">\r\n        <PreviewButtons\r\n          topicId={topicId}\r\n          onFirst={onClickFirst}\r\n          onLast={onClickLast}\r\n          onNext={onClickNext}\r\n          onPrev={onClickPrev}\r\n        />\r\n        <div className='preview-carousel' {...swipeable} style={style}>\r\n          <div className='preview-carousel-item' key={state.key} style={{ order: 0 }}>\r\n            <PreviewContent\r\n              topicId={topicId}\r\n              n={items[0]}\r\n              loggedUserId={loggedUserId}\r\n              author={author}\r\n              onDataLoaded={onContentLoaded}\r\n            />\r\n          </div>\r\n          {items.length > 1 &&\r\n            <div className='preview-carousel-item' key={state.key + 1} style={{ order: 1 }}>\r\n              <PreviewContent\r\n                topicId={topicId}\r\n                n={items[1]}\r\n                loggedUserId={loggedUserId}\r\n                author={author}\r\n              />\r\n            </div>}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default TopicPreview;","import { ReactElement, useCallback, useEffect } from 'react'\r\nimport { useLocation } from 'react-router-dom'\r\nimport queryString from 'query-string'\r\n\r\nimport { useAppDispatch, useAppSelector } from 'src/store'\r\nimport { getTopicsListIfNeeded } from 'src/store'\r\n\r\nimport Header from './header'\r\nimport TableHeader from './table_header'\r\nimport Row from './row'\r\nimport Pages from 'src/components/common/pages'\r\nimport NewTopic from './new_topic'\r\nimport Error from 'src/components/common/error'\r\n\r\nimport TopicPreview from 'src/components/preview/topic_preview'\r\n\r\nimport './topics_list.css'\r\n\r\nconst TopicsList = (): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch()\r\n  const items = useAppSelector(state => state.topicsList.items);\r\n  const status = useAppSelector(state => state.topicsList.status);\r\n  const error = useAppSelector(state => state.topicsList.error);\r\n  const loggedUserId = useAppSelector(state => state.login.userId);\r\n\r\n  const location = useLocation();\r\n\r\n  const updateTopicsList = useCallback((locationParams) => {\r\n    dispatch(getTopicsListIfNeeded(locationParams));\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    document.title = 'React.Mista';\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const locationParams = queryString.parse(location.search);\r\n    updateTopicsList(locationParams);\r\n  }, [location.search, updateTopicsList]);\r\n\r\n  let rows = [];\r\n  for (let item of items) {\r\n\r\n    rows.push(\r\n      <Row \r\n        key={item.id} \r\n        {...item} \r\n        topicId={item.id}\r\n      />\r\n    );\r\n\r\n    if (item.showPreview)\r\n      rows.push(\r\n        <TopicPreview \r\n          key={`preview${item.id}`} \r\n          topicId={item.id} \r\n          initialMsgNumber={item.previewMsgNumber}\r\n          author={item.author}\r\n          loggedUserId={loggedUserId}\r\n          />\r\n      )\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Header />\r\n      {error && (<Error text={error} />)}\r\n      <div className=\"topic-list-table\">\r\n        <TableHeader\r\n          onUpdateClick={updateTopicsList}\r\n          isLoading={status === \"loading\"}\r\n        />\r\n        {rows}\r\n        <div className=\"tf\">\r\n          <Pages maxPage={10} />\r\n        </div>\r\n      </div>\r\n      <div id=\"F\" className=\"newtopic\" style={{ marginBottom: \"10px\", marginTop: \"5px\", position: 'relative' }}>\r\n        <NewTopic \r\n          onSubmitSuccess={updateTopicsList}\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TopicsList;","import { FC, ReactElement } from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux'\r\n\r\nimport { RootState } from 'src/store'\r\nimport Login from 'src/components/login'\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst mapState = (state: RootState) => {\r\n  return {\r\n    info: state.topic.info,\r\n    login: state.login\r\n  }  \r\n}\r\nconst connector = connect(mapState);\r\n\r\nconst Header: FC<ConnectedProps<typeof connector>> =  ({ info, login }): ReactElement => {\r\n\r\n  const forums = {\r\n    '1c': '1С:Предприятие',\r\n    'life': 'О жизни',\r\n    'it': 'Информационные технологии',\r\n    'job': 'Работа'\r\n  };\r\n\r\n  return (\r\n\r\n    <div className=\"flex-row\">\r\n      <div className=\"header-left\">\r\n        <Login/>\r\n      </div>\r\n      <div className=\"header-right\">\r\n        <span id=\"forum_string\" className=\"bold120\">\r\n          <Link to={`/index.php?forum=${info.forum}`} style={{ textDecoration: \"none\" }}>{forums[info.forum]}</Link>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connector(Header);","import { FC, ReactElement } from 'react'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\n\r\nimport { RootState } from 'src/store'\r\n\r\nimport { domain, urlTopicInfo, urlTopicMessages } from 'src/api'\r\n\r\nconst mapState = (state: RootState) => {\r\n\r\n  const {\r\n    info\r\n  } = state.topic;\r\n\r\n  return {\r\n    info\r\n  }\r\n}\r\nconst connector = connect(mapState);\r\nconst TopicInfo: FC<ConnectedProps<typeof connector>> = ({ info }): ReactElement => {\r\n\r\n  let yandexUrl = \"https://www.yandex.ru/search/?text=\" + encodeURIComponent(info.title);\r\n\r\n  return (\r\n    <div className=\"topic-row\">\r\n      <div className=\"cell-userinfo\">\r\n        <div className=\"topic-tools\">\r\n          <a title=\"API.info\" href={`${domain}/${urlTopicInfo}?id=${info.id}`} className=\"agh\" style={{ display: \"block\", lineHeight: \"1em\" }}>i</a>\r\n          <a title=\"API.messages\" href={`${domain}/${urlTopicMessages}?id=${info.id}&from=0&to=20`} className=\"agh\" style={{ display: \"block\", lineHeight: \"1em\" }}>m</a>\r\n          {/*<a href=\"add_voting.php?topic_id=815217\" title=\"Добавить голосование\">vote</a> &nbsp;&nbsp;*/}\r\n        </div>\r\n      </div>\r\n      <div className=\"cell-message\">\r\n        <div className=\"flex-row\">\r\n          <div style={{ flex: 1, textAlign: \"center\" }}>\r\n            <a href={`${domain}/topic.php?id=${info.id}`}>\r\n              <h1 className=\"topic-title\" dangerouslySetInnerHTML={{ __html: info.title }}></h1>\r\n            </a>\r\n            <div className=\"moder-action\"></div>\r\n          </div>\r\n          <div style={{ flex: \"0 0 20px\", position: \"relative\" }}>\r\n            <div className=\"div-va-middle\">\r\n              <a rel=\"noopener noreferrer\" href={yandexUrl} title=\"Искать в Яндексе\" target=\"_blank\" className=\"yandex\">Я</a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default connector(TopicInfo);","import { FC, ReactElement } from 'react'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\n\r\nimport UserInfo from './user_info'\r\nimport MsgText from './msg_text'\r\nimport { RootState } from 'src/store'\r\nimport { ITopicMessage } from 'src/store'\r\n\r\ntype IProps = {\r\n  data: ITopicMessage\r\n}\r\n\r\nconst mapState = (state: RootState) => {\r\n\r\n  const {\r\n    info,\r\n    item0,\r\n  } = state.topic || {\r\n    info: {},\r\n    item0: {},\r\n  }\r\n\r\n  return {\r\n    topicId: info.id,\r\n    author: item0 ? item0.user : '',\r\n    login: state.login\r\n  }\r\n}\r\n\r\nconst connector = connect(mapState);\r\nconst Row: FC<ConnectedProps<typeof connector> & IProps> = (props): ReactElement => {\r\n\r\n    const { data, author, topicId, login } = props;\r\n\r\n    if (!data)\r\n      return null;\r\n\r\n    return (\r\n      <div className=\"topic-row\" id={String(data.n)}>\r\n        <div className=\"cell-userinfo\">\r\n          <UserInfo data={data} isAuthor={data.user === author} isYou={data.user === login.userName} />\r\n        </div>\r\n        <div className=\"cell-message\">\r\n          <MsgText data={data} html={data.text} topicId={topicId} n={data.n} vote={data.vote} />\r\n        </div>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default connector(Row);","import { FC, ReactElement } from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux'\r\nimport { Button } from 'react-bootstrap'\r\n\r\nimport { getMaxPage } from 'src/utils'\r\nimport { RootState, useAppDispatch } from 'src/store'\r\nimport { defaultInfo, getNewMessagesIfNeeded } from 'src/store'\r\n\r\nconst mapState = (state: RootState) => {\r\n\r\n  const {\r\n    status,\r\n    lastUpdated,\r\n    info,\r\n  } = state.topic || {\r\n    isFetching: true,\r\n    info: defaultInfo,\r\n  }\r\n\r\n  return {\r\n    info,\r\n    status,\r\n    lastUpdated\r\n  }\r\n}\r\nconst connector = connect(mapState);\r\ntype IProps = { page?: number | string };\r\n\r\nconst Footer: FC<ConnectedProps<typeof connector> & IProps> = ({ info, status, page }): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const onBookmarkClick = () => {\r\n    //dispatch(addBookmark(info));\r\n  }\r\n\r\n  const onRefreshClick = () => {\r\n    dispatch(getNewMessagesIfNeeded());\r\n  }\r\n\r\n  const maxPage = getMaxPage(info.count);\r\n\r\n  let showUpdateButton = false;\r\n  if (page === 'last20' || page === maxPage)\r\n    showUpdateButton = true;\r\n\r\n  return (\r\n    <div className=\"flex-row\" id=\"F\">\r\n      <div className=\"ta-left va-top\" style={{ width: \"50%\" }}>\r\n        <Button\r\n          onClick={onBookmarkClick}\r\n          disabled={false}\r\n          size=\"sm\"\r\n          className='button'\r\n          variant=\"light\">\r\n          {'Закладка'}\r\n        </Button>\r\n      </div>\r\n      <div className=\"ta-right va-middle\" style={{ marginLeft: \"auto\" }}>\r\n        {showUpdateButton &&\r\n          <Button\r\n            onClick={onRefreshClick}\r\n            disabled={status === \"loading\"}\r\n            size=\"sm\"\r\n            className='button'\r\n            variant=\"light\">\r\n            {status === \"loading\" ? 'Обновляется' : 'Обновить ветку'}\r\n          </Button>\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connector(Footer);","import { FC, ReactElement, useState, useCallback } from 'react'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\nimport { FormGroup, Form } from 'react-bootstrap'\r\n\r\nimport TextEditor from 'src/components/common/text_editor'\r\nimport { newMessageText, postNewMessage } from 'src/data/newmessage/actions'\r\nimport { RootState, useAppDispatch } from 'src/store'\r\n\r\nimport { PostNewmessageParams } from 'src/data/newmessage/actions'\r\n\r\ntype IProps = {\r\n  onSubmitSuccess?: () => void\r\n}\r\n\r\nconst mapState = (state: RootState) => {\r\n\r\n  return {\r\n    info: state.topic.info,\r\n    newMessage: state.newMessage\r\n  };\r\n\r\n}\r\n\r\nconst connector = connect(mapState);\r\n\r\nconst NewMessage: FC<ConnectedProps<typeof connector> & IProps> = ({ info, newMessage, onSubmitSuccess }): ReactElement => {\r\n\r\n  const [voting, setVoting] = useState<number | undefined>();\r\n  const dispatch = useAppDispatch()\r\n\r\n  const onSubmit = (e: any) => {\r\n\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    let params: PostNewmessageParams = {\r\n      text: newMessage.text,\r\n      topicId: String(info?.id),\r\n      onSuccess: afterSubmit,\r\n      voting_select: undefined\r\n    };\r\n\r\n    if (voting) {\r\n      params.voting_select = voting;\r\n    }\r\n\r\n    dispatch(postNewMessage(params));\r\n  }\r\n\r\n  const afterSubmit = () => {\r\n\r\n    dispatch(newMessageText(''));\r\n\r\n    setVoting(undefined);\r\n\r\n    if (onSubmitSuccess) {\r\n      onSubmitSuccess();\r\n    }\r\n  }\r\n\r\n  const clearVoting = (e: React.MouseEvent<HTMLElement>) => {\r\n\r\n    e.preventDefault();\r\n    setVoting(undefined);\r\n\r\n  }\r\n\r\n  const setVotingOption = (i: number) => {\r\n    setVoting(i);\r\n  }\r\n\r\n  const onTextChange = useCallback((text: string) => {\r\n    //dispatch(newTopicActions.changeText(text));\r\n  }, []);\r\n\r\n  let votingElem: ReactElement;\r\n  if (info?.isVoting && info?.voting) {\r\n\r\n    let votingOptions = [];\r\n    for (let i = 1; i <= info.voting.length; i++) {\r\n\r\n      const item = info.voting[i - 1];\r\n      if (!item.text)\r\n        continue;\r\n\r\n      votingOptions.push(\r\n        <Form.Check\r\n          type=\"radio\"\r\n          key={i}\r\n          name=\"voting\"\r\n          checked={voting === i}\r\n          onChange={() => setVotingOption(i)}\r\n          label={`${i}. ${item.text}`}\r\n        />\r\n      );\r\n    }\r\n\r\n\r\n    votingElem = (\r\n      <FormGroup>\r\n        <legend>\r\n          <small>Ваш выбор:\r\n            <span id=\"voting_clear\" style={{ marginLeft: \"5px\", cursor: \"pointer\" }} onClick={clearVoting}>очистить</span>\r\n          </small>\r\n        </legend>\r\n        {votingOptions}\r\n        Обоснуйте свой выбор!\r\n      </FormGroup>\r\n    );\r\n\r\n  }\r\n\r\n  return (\r\n    <form style={{ marginTop: \"5px\" }} onSubmit={onSubmit}>\r\n      <div className=\"bold\">Добавить сообщение в тему:</div>\r\n      <div className=\"new-message-container\">\r\n        <div className=\"new-message-text\">\r\n          <TextEditor\r\n            isFetching={newMessage.isFetching}\r\n            text={newMessage.text}\r\n            placeholder=\"Сообщение\"\r\n            onChange={onTextChange}\r\n          />\r\n        </div>\r\n        <div className=\"new-message-voting\">\r\n          {votingElem}\r\n        </div>\r\n      </div>\r\n    </form>\r\n  )\r\n\r\n}\r\n\r\nexport default connector(NewMessage);","import { FC, ReactElement } from 'react'\r\nimport { Form } from 'react-bootstrap'\r\n\r\ntype IProps = {\r\n  name: string,\r\n  label: string,\r\n  value: string,\r\n  values: Array<{ name: string, descr: string }>,\r\n  onChange: any,\r\n  oneLine: boolean\r\n}\r\n\r\nconst RadioOption: FC<IProps> = ({ name, label, value, values, oneLine, onChange }): ReactElement => {\r\n\r\n  const onChangeValue = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    onChange(e, name, e.target.value);\r\n  }\r\n\r\n  return (\r\n    <span>\r\n      <span style={{ marginRight: \"5px\" }}> {label} </span>\r\n      {oneLine && <br/>}\r\n      {values.map((item, i) =>\r\n        <Form.Check key={i}\r\n          type=\"radio\"\r\n          id={item.name}\r\n          label={item.descr}\r\n          name={label}\r\n          checked={item.name === value}\r\n          value={item.name}\r\n          inline={oneLine}\r\n          onChange={onChangeValue}\r\n        >\r\n        </Form.Check>\r\n      )}\r\n    </span>\r\n  );\r\n}\r\n\r\nexport default RadioOption;","import { FC, ReactElement } from 'react'\r\n\r\ntype IProps = {\r\n  name: string,\r\n  label: string,\r\n  value: string,\r\n  onChange: any,\r\n  postfix?: string\r\n}\r\n\r\nconst StringOption: FC<IProps> = (props): ReactElement => {\r\n\r\n  const onChange = (e: any) => {\r\n    const { name } = props;\r\n    props.onChange(e, name, e.target.value);\r\n  }\r\n\r\n  const { name, value, label, postfix } = props;\r\n\r\n  return (\r\n    <label htmlFor={name} style={{ marginRight: \"5px\" }}>\r\n      <span style={{ marginRight: \"5px\" }}>{label}</span>\r\n      <input type=\"string\" name={name} value={value} onChange={onChange} className='input' />\r\n      {postfix !== undefined ?\r\n        <span style={{ marginLeft: \"5px\" }}>{postfix}</span>\r\n        : null}\r\n    </label>\r\n  );\r\n}\r\n\r\nexport default StringOption;","export const formTabs = [\r\n  {\r\n    tabName: 'Общие',\r\n    rows: [\r\n      ['theme'],\r\n      ['topicsPerPage'],\r\n      ['autoRefreshTopicsList', 'autoRefreshTopicsListInterval'],\r\n      ['autoRefreshTopic', 'autoRefreshTopicInterval'],\r\n    ]\r\n  },\r\n  {\r\n    tabName: 'Тултипы',\r\n    rows: [\r\n      ['showTooltips', 'tooltipDelay'],\r\n      ['showTooltipOnPostLink']\r\n    ]\r\n  },\r\n  {\r\n    tabName: 'Ссылки',\r\n    rows: [\r\n      ['showYoutubeVideoTitle'],\r\n      ['replaceCatalogMista'],\r\n      ['fixBrokenLinks'],\r\n    ]\r\n  }\r\n];\r\n\r\nexport const formParams = {\r\n  'theme': {\r\n    type: 'radio',\r\n    label: 'Цветовая палитра:',\r\n    oneLine: true,\r\n    values: [\r\n      { name: 'yellow', descr: 'Золотая' },\r\n      { name: 'lightgray', descr: 'Серая' },\r\n      { name: 'dark', descr: 'Темная' }\r\n    ]\r\n  },\r\n  'topicsPerPage': {\r\n    type: 'number',\r\n    label: 'Тем на странице (max 99):',\r\n    min: 1,\r\n    max: 99\r\n  },\r\n  'autoRefreshTopicsList': {\r\n    type: 'checkbox',\r\n    label: 'Автообновление списка тем'\r\n  },\r\n  'autoRefreshTopicsListInterval': {\r\n    type: 'number',\r\n    label: '',\r\n    min: 60,\r\n    max: 1000000,\r\n    postfix: 'сек'\r\n  },\r\n  'autoRefreshTopic': {\r\n    type: 'checkbox',\r\n    label: 'Автообновление темы'\r\n  },\r\n  'autoRefreshTopicInterval': {\r\n    type: 'number',\r\n    label: '',\r\n    min: 60,\r\n    max: 1000000,\r\n    postfix: 'сек'\r\n  },\r\n  //Tooltips   \r\n  'showTooltips': {\r\n    type: 'checkbox',\r\n    label: 'Показывать тултипы, задержка',\r\n    disabled: true\r\n  },\r\n  'tooltipDelay': {\r\n    type: 'number',\r\n    max: 1000000,\r\n    label: '',\r\n    postfix: 'мс',\r\n    disabled: true\r\n  },\r\n  'showTooltipOnPostLink': {\r\n    type: 'checkbox',\r\n    label: 'Показывать тултип ссыки на другую ветку',\r\n    disabled: true    \r\n  },\r\n  //links   \r\n  'showYoutubeVideoTitle': {\r\n    type: 'checkbox',\r\n    label: 'Показывать наименования роликов youtube'\r\n  },\r\n  'replaceCatalogMista': {\r\n    type: 'checkbox',\r\n    label: 'Обратно заменять catalog.mista.ru на infostart.ru'\r\n  },\r\n  'fixBrokenLinks': {\r\n    type: 'checkbox',\r\n    label: 'Чинить поломанные ссылки (с русскими символами)'\r\n  },\r\n}","import { FC, ReactElement } from \"react\";\r\n\r\ntype IProps = {\r\n  name: string\r\n}\r\n\r\nconst Tab: FC<IProps> = ({ name, children }): ReactElement => {\r\n  return (\r\n    <div>\r\n      <div className=\"tab-header\">\r\n        {name}\r\n      </div>\r\n      <div className=\"tab-content\">\r\n        {children}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Tab;","import { FC, ReactElement, useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\nimport { Form, FormControl, Button } from 'react-bootstrap'\r\n\r\nimport RadioOption from './radio_option'\r\nimport StringOption from './string_option'\r\n\r\nimport { formTabs, formParams } from './formscheme'\r\nimport Tab from './tab'\r\n\r\nimport { RootState, useAppDispatch } from 'src/store'\r\nimport { defaultOptionsState, optionsActions } from 'src/store'\r\n\r\nimport './options.css'\r\n\r\nconst mapState = (state: RootState) => {\r\n  return {\r\n    options: state.options\r\n  };\r\n}\r\n\r\nconst connector = connect(mapState);\r\nconst Options: FC<ConnectedProps<typeof connector>> = (props): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const [state, setState] = useState({\r\n    items: props.options.items\r\n  })\r\n\r\n  const closeForm = () => {\r\n    navigate('/#');\r\n  }\r\n\r\n  const resetOptions = () => {\r\n    setState({\r\n      ...state,\r\n      items: Object.assign({}, defaultOptionsState.items)\r\n    })\r\n  }\r\n\r\n  const applyOptions = () => {\r\n\r\n    dispatch(optionsActions.save(state.items));\r\n    closeForm();\r\n  }\r\n\r\n  const onChange = (e: React.FormEvent<HTMLElement>, name: string, value) => {\r\n\r\n    let items = Object.assign({}, state.items);\r\n    items[name] = value;\r\n    setState({\r\n      ...state,\r\n      items\r\n    })\r\n  }\r\n\r\n  let tabs = [];\r\n  for (let tab of formTabs) {\r\n\r\n    let rows = [];\r\n    for (let i in tab.rows) {\r\n\r\n      const row = tab.rows[i];\r\n      let rowElem = [];\r\n      for (let name of row) {\r\n\r\n        const item = formParams[name];\r\n        if (!item) continue;\r\n\r\n        const value = state.items[name];\r\n\r\n        if (item.type === 'radio') {\r\n          rowElem.push(\r\n            <RadioOption\r\n              key={name}\r\n              name={name}\r\n              label={item.label}\r\n              values={item.values}\r\n              value={value}\r\n              oneLine={item.oneLine}\r\n              onChange={onChange}\r\n            />\r\n          );\r\n        } else if (item.type === 'number') {\r\n\r\n          if (item.label)\r\n            rowElem.push(\r\n              <label\r\n                htmlFor={name}\r\n                key={name + '_label'}\r\n                style={{ fontWeight: \"inherit\" }}>\r\n                {item.label}\r\n              </label>\r\n            );\r\n\r\n          rowElem.push(\r\n            <div className='options-number' key={name}>\r\n              <FormControl\r\n                type=\"number\"\r\n                min={item.min}\r\n                max={item.max}\r\n                value={value}\r\n                disabled={item.disabled}\r\n                onChange={(e) => onChange(e, name, e.target.value)}\r\n                \r\n                className='input'\r\n                size=\"sm\"\r\n              >\r\n              </FormControl>\r\n              {item.postfix &&\r\n                <span key={name + '_postfix'} style={{ marginLeft: \"5px\", flex: \"0 0 auto\", }}>{item.postfix}</span>}\r\n            </div>\r\n          );\r\n\r\n        } else if (item.type === 'string') {\r\n          rowElem.push(\r\n            <StringOption\r\n              key={name}\r\n              name={name}\r\n              label={item.label}\r\n              postfix={item.postfix}\r\n              value={value}\r\n              onChange={onChange}\r\n            />\r\n          );\r\n        } else if (item.type === 'checkbox') {\r\n          rowElem.push(\r\n            <Form.Check\r\n              id={name}\r\n              type=\"checkbox\"\r\n              label={item.label}\r\n              key={name}\r\n              name={name}\r\n              checked={String(value) === 'true'}\r\n              disabled={item.disabled}              \r\n              onChange={(e) => onChange(e, name, e.target.checked)}\r\n              style={{ flex: \"0 0 auto\", margin: \"0px\", maxWidth: \"100%\" }}\r\n            />\r\n          );\r\n        }\r\n      }\r\n\r\n      rows.push(\r\n        <div key={i} className=\"options-row\">\r\n          {rowElem}\r\n        </div>\r\n      );\r\n\r\n    }\r\n\r\n    tabs.push(\r\n      <Tab key={tab.tabName} name={tab.tabName}>\r\n        {rows}\r\n      </Tab>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"options-form\">\r\n      <div className=\"options-header\" style={{ cursor: \"default\" }}>\r\n        <b>Настройки</b>\r\n      </div>\r\n      {tabs}\r\n      <div className=\"button-row\">\r\n        <Button\r\n          id=\"applyOptions\"\r\n          size=\"sm\"\r\n          variant=\"light\"\r\n          style={{ margin: \"5px\" }}\r\n          className='button'\r\n          onClick={applyOptions}>\r\n          OK\r\n        </Button>\r\n        <Button\r\n          id=\"cancelOptions\"\r\n          size=\"sm\"\r\n          variant=\"light\"\r\n          style={{ margin: \"5px\", float: \"left\" }}\r\n          className='button'\r\n          onClick={closeForm}>\r\n          Отмена\r\n        </Button>\r\n        <Button\r\n          id=\"defaultOptions\"\r\n          size=\"sm\"\r\n          variant=\"light\"\r\n          style={{ margin: \"5px\", float: \"right\" }}\r\n          className='button'\r\n          onClick={resetOptions}>\r\n          Сбросить настройки\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connector(Options);","import { ReactElement } from 'react';\r\nimport { Routes, Route } from 'react-router-dom'\r\nimport { Container } from 'react-bootstrap';\r\n\r\nimport TopicsList from './topics_list'\r\nimport Topic from './topic'\r\nimport Options from './options'\r\n\r\nconst AppRoutes = (): ReactElement => {\r\n\r\n  return (\r\n    <Container>\r\n      <Routes>\r\n        <Route path='/' element={<TopicsList />} />\r\n        <Route path='/index.php' element={<TopicsList />} />\r\n        <Route path='/topic.php' element={<Topic />} />\r\n        <Route path='/options.php' element={<Options />} />\r\n      </Routes>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default AppRoutes;","import{ ReactElement } from 'react'\r\nimport { domain } from 'src/api'\r\n\r\nconst NavBarFooter = (): ReactElement => {\r\n\r\n    return (\r\n        <footer className=\"flex-row navbar-footer\">\r\n            <a href={`${domain}/rules.php`}>Правила</a>\r\n            <span className=\"separator\">|</span>\r\n            <a href={`${domain}/about.php`}>Описание</a>\r\n            <span className=\"separator\">|</span>\r\n            <b><a href={`${domain}/ad.php`}>Реклама на сайте</a>  </b>\r\n            <span className=\"separator\">|</span>\r\n            <a href={`${domain}/find.php`}>Поиск</a>\r\n            <span className=\"separator\">|</span>\r\n            <a rel=\"nofollow\" href={`${domain}/sections_list.php`}>Секции</a>\r\n            <span className=\"separator\">|</span>\r\n            <a rel=\"nofollow\" href={`${domain}/rating.php`}>Рейтинг</a>\r\n            <span className=\"separator\">|</span>\r\n            <a href=\"http://kb.mista.ru\">Книга знаний</a>\r\n            <span className=\"separator\">|</span>\r\n            <a href=\"http://wiki.mista.ru\">Вики-миста (КЗ2)</a>\r\n            <span className=\"separator\">|</span>\r\n            <a rel=\"nofollow\" href=\"http://m.mista.ru/\">Мобильная</a>\r\n            <span className=\"separator\">|</span>\r\n            <a href={`${domain}/archive.php`}>Архив</a>\r\n            <span className=\"separator\">|</span>\r\n            <a href={`${domain}/moders.php`}>Модераторы</a>\r\n            <span className=\"separator\">|</span>\r\n            <a href={`${domain}/users_gallery.php`}>Галерея</a>\r\n            <span className=\"separator\">|</span>\r\n            <a href={`${domain}/ban_list.php`}>Баны</a>\r\n            <span className=\"separator\">|</span>\r\n            <span>18+</span>\r\n        </footer>\r\n    )\r\n}\r\n\r\nexport default NavBarFooter;","import { FC, ReactElement } from 'react'\r\n\r\ntype IProps = {\r\n  closeWindow?: (e: any) => any\r\n}\r\n\r\nconst TooltipHeader: FC<IProps> = ({ children, closeWindow }): ReactElement => {\r\n  return (\r\n    <div className=\"tooltip-header\">\r\n      {children}\r\n      <div className=\"tooltip-close\" onClick={closeWindow} onTouchEnd={closeWindow}>\r\n        <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i>\r\n        <i className=\"fa fa-angle-left\" aria-hidden=\"true\" style={{ marginLeft: \"-2px\" }}></i>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TooltipHeader;","import { FC, ReactElement } from 'react'\r\n\r\ntype IProps = {\r\n  onScroll?: (e: any) => any\r\n}\r\n\r\nconst TooltipBody: FC<IProps> = ({ children, onScroll }): ReactElement => {\r\n\r\n  let startX = 0;\r\n\r\n  const onTouchStart = (e: React.TouchEvent<HTMLElement>) => {\r\n    startX = e.nativeEvent.changedTouches[0].clientX;\r\n  }\r\n\r\n  const onTouchEnd = (e: React.TouchEvent<HTMLElement>) => {\r\n\r\n    if (!onScroll) return;\r\n\r\n    let endX = e.nativeEvent.changedTouches[0].clientX;\r\n    if (Math.abs(endX - startX) > 100)\r\n      onScroll(-endX + startX);\r\n  }\r\n\r\n  return (\r\n    <div className=\"tooltip-text\" onTouchStart={onTouchStart} onTouchEnd={onTouchEnd}>\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TooltipBody;","import React, { FC, ReactElement } from 'react'\r\n\r\nimport Draggable from 'react-draggable';\r\n\r\nimport TooltipHeader from './tooltip_header'\r\nimport TooltipBody from './tooltip_body'\r\n\r\nimport './tooltip.css'\r\n\r\nimport { useActionCreators } from 'src/store';\r\nimport { ITooltipItem, tooltipsActions } from 'src/store';\r\n\r\ntype IProps = {\r\n  tooltip: ITooltipItem,\r\n  zIndex?: number,\r\n}\r\n\r\nconst TooltipWindow: FC<IProps> = ({ tooltip, zIndex, children }): ReactElement => {\r\n\r\n  const actions = useActionCreators(tooltipsActions);\r\n\r\n  const onCloseClick = () => {\r\n    actions.close(tooltip.keys);\r\n  }\r\n\r\n  const { coords } = tooltip;\r\n\r\n  let axis: \"both\" | \"x\" | \"y\" | \"none\";;\r\n  let position: {\r\n    top: number,\r\n    left: number\r\n  };\r\n\r\n  if (window.innerWidth <= 768) {\r\n    axis = \"y\";\r\n    position = { top: coords.y, left: 5 };\r\n  } else {\r\n    axis = \"both\";\r\n    position = { top: coords.y, left: Math.min(coords.x, window.innerWidth - 670) }\r\n  }\r\n\r\n  let [header, body] = React.Children.toArray(children);\r\n\r\n  return (\r\n    <Draggable\r\n      axis={axis}\r\n      handle=\".tooltip-header\"\r\n      defaultClassNameDragging=\"dragging\"\r\n      key={zIndex}>\r\n\r\n      <div className=\"tooltip-window\" style={{ ...position }}>\r\n        <TooltipHeader closeWindow={onCloseClick}>\r\n          {(header as ReactElement).props.children}\r\n        </TooltipHeader>\r\n        <TooltipBody>\r\n          {(body as ReactElement).props.children}\r\n        </TooltipBody>\r\n      </div>\r\n    </Draggable>\r\n  )\r\n\r\n}\r\n\r\nexport default TooltipWindow;","import { FC, ReactElement, useCallback, useEffect, useState } from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux'\r\n\r\nimport { fetchTopicMessage } from 'src/api';\r\n\r\nimport MsgText from 'src/pages/topic/row/msg_text'\r\nimport UserInfo from 'src/pages/topic/row/user_info';\r\n\r\nimport TooltipWindow from './tooltip_window'\r\nimport TooltipHeader from './tooltip_header'\r\nimport TooltipBody from './tooltip_body'\r\n\r\nimport './tooltip.css'\r\nimport { RootState } from 'src/store';\r\nimport { ITopicMessage, ITooltipItem } from 'src/store';\r\n\r\ntype IProps = {\r\n  tooltip: ITooltipItem,\r\n  info: any,\r\n  items: any,\r\n  item0: any\r\n}\r\n\r\nconst mapState = (state: RootState) => {\r\n\r\n  const {\r\n    info,\r\n    items,\r\n    item0\r\n  } = state.topic;\r\n\r\n  return {\r\n    info,\r\n    items,\r\n    item0\r\n  }\r\n}\r\n\r\nconst connector = connect(mapState);\r\nconst Tooltip: FC<ConnectedProps<typeof connector> & IProps> = (props): ReactElement | null => {\r\n\r\n  const { tooltip, info, items, item0 } = props;\r\n  const { keys } = tooltip;\r\n\r\n  let text = '';\r\n  let data: ITopicMessage | undefined;\r\n  if (keys.topicId === info.id) {\r\n    if (keys.number === 0)\r\n      data = item0;\r\n    else\r\n      data = items.find((item: ITopicMessage) => item.n === keys.number);\r\n\r\n    if (data)\r\n      text = data.text;\r\n  }\r\n\r\n  const [state, setState] = useState({\r\n    data,\r\n    text\r\n  })\r\n\r\n  const fetchData = useCallback(async () => {\r\n\r\n    if (state.data) return;\r\n\r\n    let data: ITopicMessage;\r\n    let text = '';\r\n\r\n    try {\r\n      data = await fetchTopicMessage(keys.topicId, keys.number);\r\n      if (data)\r\n        text = data.text;\r\n      else\r\n        text = `Сообщение не найдено ${keys.number}`;\r\n\r\n    } catch (e) {\r\n      text = (e as Error).message;\r\n    }\r\n\r\n    setState({ data, text });\r\n  }, [keys.topicId, keys.number, state.data])\r\n\r\n  useEffect(() => {\r\n      fetchData();\r\n  }, [fetchData])\r\n\r\n  if (!state.text)\r\n    return null;\r\n\r\n  let header: ReactElement;\r\n  if (!state.data) {\r\n    header = <b>Заголовок</b>\r\n  } else {\r\n    header = <UserInfo data={state.data} isAuthor={false} isYou={false} isTooltip={true} />\r\n  }\r\n\r\n  return (\r\n    <TooltipWindow tooltip={props.tooltip}>\r\n      <TooltipHeader>\r\n        {header}\r\n      </TooltipHeader>\r\n      <TooltipBody>\r\n        <MsgText\r\n          data={state.data}\r\n          n={state.data?.n}\r\n          vote={state.data?.vote}\r\n          html={state.text}\r\n          topicId={keys.topicId}\r\n          style={{ maxHeight: \"min(550px, 80vh)\", overflowY: \"auto\" }}\r\n        />\r\n      </TooltipBody>\r\n    </TooltipWindow>\r\n  )\r\n\r\n}\r\n\r\nexport default connector(Tooltip);","import { ReactElement, useRef } from 'react'\r\nimport { useOnClickOutside } from 'usehooks-ts'\r\n\r\nimport { useActionCreators, useAppSelector } from 'src/store';\r\nimport { tooltipsActions } from 'src/store'\r\n\r\nimport Tooltip from './tooltip'\r\n\r\nconst TooltipsContainer = (): ReactElement => {\r\n\r\n  const items = useAppSelector(state => state.tooltips.items);\r\n  const actions = useActionCreators(tooltipsActions);\r\n  const ref = useRef(null);\r\n\r\n  const handleClickOutside = () => {\r\n    actions.closeAll();\r\n  };\r\n\r\n  useOnClickOutside(ref, handleClickOutside);\r\n  \r\n  return (\r\n    <div ref={ref}>\r\n      {items.map((item) => {\r\n        return (\r\n          <Tooltip key={item.hash} tooltip={item}>\r\n          </Tooltip>\r\n        )\r\n      }\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TooltipsContainer;","import { ReactElement, useLayoutEffect } from 'react';\r\nimport { HashRouter } from 'react-router-dom'\r\n\r\nimport NavBar from './components/navigation/nav_bar';\r\nimport AppRoutes from './pages/approutes';\r\nimport NavBarFooter from './components/navigation/nav_bar_footer';\r\nimport TooltipsContainer from './components/tooltips/tooltips_container';\r\nimport { useAppSelector } from './store';\r\n\r\n\r\nconst App = (): ReactElement => {\r\n\r\n  const theme = useAppSelector(state => state.options.items.theme);\r\n\r\n  useLayoutEffect(() => {\r\n    document.body.setAttribute('theme', theme);\r\n  }, [theme])\r\n\r\n  return (\r\n    <HashRouter>\r\n      <NavBar />\r\n      <AppRoutes />\r\n      <NavBarFooter />\r\n      <TooltipsContainer />\r\n    </HashRouter>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReactElement } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux'\r\n\r\nimport './index.css';\r\nimport App from './App';\r\nimport { store } from 'src/store'\r\n\r\nconst Root = ({ store }): ReactElement => (\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>\r\n)\r\n\r\nReactDOM.render(<Root store={store} />,\r\n  document.getElementById('root'));","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkreact_mista\"] = self[\"webpackChunkreact_mista\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [216], function() { return __webpack_require__(5474); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_useState","useState","_useState2","_slicedToArray","searchEngine","setSearchEngine","_useState3","_useState4","text","setText","doSearch","url","concat","window","open","_jsxs","InputGroup","size","children","DropdownButton","id","title","style","marginRight","className","variant","onSelect","eventKey","_jsx","Dropdown","Item","FormControl","type","placeholder","paddingRight","onKeyPress","e","key","onChange","target","value","Text","marginLeft","marginTop","marginBottom","cursor","onClick","zIndex","parseJSON","JSON","parse","replace","console","error","message","log","getMaxPage","count","Math","min","ceil","childrenToText","map","displayName","props","number","convertResponse","response","session","userId","Number","user_id","userName","user_name","userHash","user_hash","lastError","last_error","fetchCookies","_fetchCookies","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","fetchJsonpAndGetJson","urlCookies","sent","abrupt","stop","fetchLogin","_ref","params","fetch","domain","urlLogin","method","body","paramsToString","username","user_password","password","mode","credentials","headers","redirect","_x","fetchLogout","_ref2","_callee2","fullUrl","_context2","urlLogout","fetchNewMessage","options","result","urlNewMessage","topic_id","fetchNewTopic","urlNewTopic","forum","code","shortn","name","fulln","fetchSections","list","urlSections","voting","x","select","parseInt","sectionId","section","created","authorId","author","updated","lastUser","updated_name","answers_count","down","closed","deleted","isVoting","is_voting","fetchTopicInfo","_fetchTopicInfo","info","fetchAndGetJson","urlTopicInfo","n","user","time","utime","vote","fetchTopicMessages","_fetchTopicMessages","urlTopicMessages","fetchTopicMessage","_x2","_x3","_fetchTopicMessage","to","from","find","item","convertRequest","request","page","itemsCount","itemsPerPage","topics","String","section_short_name","mytopics","myTopics","sect1","sectionCode","sect2","user0","answ","pinned","showPreview","fetchTopicsList","_fetchTopicsList","urlTopicsList","localStorage","getItem","paramsPrefix","searchParams","URLSearchParams","Reflect","get","undefined","append","str","toString","length","responseJson","json","fetchJsonp","utils","_x4","_ref3","_callee3","init","_context3","_x5","_x6","_x7","checkLogin","createAsyncThunk","doLogin","dispatch","doLogout","shouldLogin","_ref5","login","status","slice","createSlice","initialState","logged","reducers","extraReducers","builder","addCase","pending","state","fulfilled","_ref6","payload","rejected","_ref7","_ref8","loginActions","actions","reducer","postNewTopic","fetchParams","i","message_text","topic_text","subject","target_section","target_forum","toLowerCase","action","rnd","round","random","votingItems","clear","changeSubject","changeText","_ref4","changeSection","showVoting","setError","newTopicActions","newTopic","defaultOptionsState","voteColors","items","theme","topicsPerPage","autoRefreshTopicsList","autoRefreshTopicsListInterval","autoRefreshTopic","autoRefreshTopicInterval","showTooltips","tooltipDelay","showTooltipOnPostLink","showYoutubeVideoTitle","replaceCatalogMista","fixBrokenLinks","readOption","defaultValue","readAllOptions","read","save","setItem","optionsActions","getSections","getSectionsIfNeeded","getState","sections","shouldGetSections","tree","getKey","reduce","previous","currentItem","group","push","show","hash","stringify","keys","index","findIndex","coords","close","filter","val","closeAll","tooltipsActions","tooltips","defaultInfo","getTopic","topicId","item0","rejectWithValue","_item0","_items","first","_first","last","_items2","t0","t1","getNewMessages","shouldFetch","topic","getNewMessagesIfNeeded","_state$topic$info","_ref9","_ref10","topicActions","getTopicsList","getTopicsListIfNeeded","topicsList","togglePreview","previewMsgNumber","msgNumber","topicsListActions","postNewMessageStart","createAction","postNewMessageComplete","newMessageText","addMessageText","newMessage","createReducer","isFetching","store","configureStore","devTools","process","useAppDispatch","useDispatch","useAppSelector","useSelector","useActionCreators","useMemo","bindActionCreators","location","useLocation","search","Navbar","bg","expand","fixed","Brand","as","Link","Toggle","Collapse","Nav","link","active","href","Form","Search","CustomToggle","React","ref","preventDefault","float","event","onLogout","Menu","Divider","connect","setUsername","setPassword","flexWrap","flex","maxLength","autoComplete","Button","doLoginIfNeeded","margin","rel","dangerouslySetInnerHTML","__html","elem","useEffect","LoggedUser","LoginForm","_Fragment","ErrorElem","_state$sections","selected","sectionsElem","label","Select","currentTarget","arr","navigate","useNavigate","queryString","Login","Sections","isLoading","onUpdateClick","position","top","letterSpacing","pages","maxPage","loggedUserName","classes","classNames","sectionHref","startsWith","addPrefix","overflowWrap","Pages","expanded","connector","formatTime","td","d","Date","getDate","getMonth","getFullYear","today","dateFormat","data","_objectWithoutProperties","_excluded","setTime","updateTime","useCallback","msg","countOnClick","PreviewLink","TopicNameCell","_objectSpread","display","color","width","textAlign","last20","pathName","pathname","currentPage","locationParams","set","Pagination","formRef","onShowVotingChange","textAreaRef","useRef","handleShowVotingChange","checked","handleChange","cols","rows","onKeyUp","current","ctrlKey","dispatchEvent","Event","cancelable","bubbles","ButtonGroup","textAreaNode","start","selectionStart","end","selectionEnd","oldText","len","replacement","substring","newText","disabled","Check","_newTopic$section","onSubmitSuccess","currentSection","setSection","Array","fill","votes","setVotes","onVoteTextChange","votesCopy","onSubjectChange","onTextChange","this_onSubmitSuccess","groupsElem","votingOptions","Control","onSubmit","onSuccess","shouldPost","postNewTopicIfNeeded","TextEditor","FormGroup","onFirst","onPrev","onNext","onLast","scrolledToHash","СтрокаРезультат","УстановленЦвет","ПоследнийЦвет","keywords","Set","split","Спецсиволы","НачалоТега","КонецТега","мЦветФона","мЦветЧисла","мЦветСтроки","мЦветКлючевогоСлова1","ВСтроке","Токен","ПустаяСтрока","Строка","trim","Сред","Нач","Длина","Прав","isKeyword","token","has","ДобавитьЧастьСтроки1С","Часть","Цвет","РазукраситьСтроку","СтрокаКода","ВСтрокеСкобка","ВСтрокеТильда","НачалоСтроки","ТокенДоТочки","Поз","ТекущийСимвол","charAt","isNaN","_step","_iterator","_createForOfIteratorHelper","s","done","err","f","join","hidden","setHidden","newtext","highlight","prepareText","buttonText","linesCount","buttonShow","preStyle","overflow","height","timerRef","currentTopicId","initialText","run","topicInfo","onMouseOver","persist","setTimeout","showToolTip","onMouseOut","clearTimeout","stopPropagation","pageX","y","pageY","pageParam","getVideoId","fullHref","URL","hostname","getVideoParams","videoId","apiKey","apiUrl","hrefName","notFound","snippet","setHrefName","setTitle","isMounted","_state$options$items","parentText","newHref","LinkToPost","query","LinkToUser","Object","isMistaCatalog","class","escapedHref","regExp","RegExp","match","fixBrokenLink","YoutubeLink","total","colors","img","percent","textDecoration","src","maxWwidth","alt","max","_toConsumableArray","VoteItem","html","initialVoteText","voteText","setVoteText","getVoteText","_info","voteChart","showVote","VoteChart","processedHtml","res","txt","substr","processCode1C","processLinksToPosts","processText","componentsMap","Code","a","CustomLink","textComponent","activeHtml","Vote","imgDisplay","setImgDisplay","isAuthor","isYou","isTooltip","dataStr","imgElem","timeElem","userClassNames","innerWidth","onLoad","onError","document","getElementById","scrollTo","offsetTop","loggedUserId","onDataLoaded","setData","getData","_data","UserInfo","MsgText","overflowY","initialMsgNumber","deltaX","setDeltaX","setDispaly","_useState5","_useState6","setState","onClickLast","swipeable","useSwipeable","onSwiping","eventData","abs","onSwiped","dir","delta","onContentLoaded","transform","flexDirection","PreviewButtons","order","PreviewContent","updateTopicsList","Row","TopicPreview","Header","Error","TableHeader","NewTopic","yandexUrl","encodeURIComponent","lineHeight","lastUpdated","showUpdateButton","votingElem","setVoting","afterSubmit","_loop","setVotingOption","voting_select","postNewMessage","_state$topic","locationPage","isLastPageRef","updateNewMessages","htmltext","DOMParser","parseFromString","firstChild","innerText","getTopicIfNeeded","timer","setInterval","clearInterval","nodeHash","TopicInfo","Footer","NewMessage","values","oneLine","onChangeValue","descr","inline","postfix","htmlFor","formTabs","tabName","formParams","closeForm","assign","tabs","tab","_step2","row","rowElem","_iterator2","RadioOption","fontWeight","StringOption","maxWidth","Tab","Container","Routes","Route","path","element","TopicsList","Topic","Options","closeWindow","onTouchEnd","onScroll","startX","onTouchStart","nativeEvent","changedTouches","clientX","endX","axis","tooltip","left","_React$Children$toArr","toArray","_React$Children$toArr2","header","Draggable","handle","defaultClassNameDragging","TooltipHeader","TooltipBody","_state$data","_state$data2","fetchData","TooltipWindow","maxHeight","useOnClickOutside","Tooltip","useLayoutEffect","setAttribute","HashRouter","NavBar","AppRoutes","NavBarFooter","TooltipsContainer","Root","Provider","App","ReactDOM","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","j","every","splice","r","getter","__esModule","leafPrototypes","getProto","getPrototypeOf","obj","__proto__","t","this","then","ns","create","def","indexOf","getOwnPropertyNames","forEach","definition","o","defineProperty","enumerable","g","globalThis","Function","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}