{"version":3,"file":"static/js/main.7a2f6628.js","mappings":"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","sources":["components/common/search.tsx","utils.ts","api/index.ts","api/topicslist.ts","store/topics_list.ts","components/navigation/nav_bar.tsx","api/topicMessages.ts","api/topicinfo.ts","store/topic.ts","api/sections.ts","store/sections.ts","store/options.ts","api/login.ts","api/cookies.ts","store/login.ts","store/tooltips.ts","api/newtopic.ts","store/new_topic.ts","api/newmessage.ts","data/newmessage/actions.ts","store/store.ts","data/newmessage/reducer.ts","data/newmessage/index.ts","components/login/logged_user.tsx","components/login/login_form.tsx","components/common/error.tsx","components/login/index.tsx","pages/topics_list/sections.tsx","pages/topics_list/header.tsx","pages/topics_list/row/pages.tsx","pages/topics_list/row/topic_name_cell.tsx","pages/topics_list/row/preview_link.tsx","pages/topics_list/row/index.tsx","components/common/pages.tsx","components/common/text_editor.tsx","pages/topics_list/new_topic.tsx","components/preview/preview_buttons.tsx","components/extensions/code_highlight.ts","pages/topic/index.tsx","components/extensions/code1c.tsx","components/extensions/link_to_post.tsx","components/extensions/link_to_user.tsx","components/extensions/youtube_link.tsx","components/extensions/custom_link.tsx","pages/topic/row/vote_item.tsx","pages/topic/row/vote_chart.tsx","pages/topic/row/vote.tsx","pages/topic/row/msg_text.tsx","pages/topic/row/user_info.tsx","components/preview/preview_content.tsx","components/preview/topic_preview.tsx","pages/topics_list/index.tsx","pages/topic/header.tsx","pages/topic/topic_info.tsx","pages/topic/row/index.tsx","pages/topic/footer.tsx","pages/topic/new_message.tsx","pages/options/radio_option.tsx","pages/options/string_option.tsx","pages/options/formscheme.ts","pages/options/tab.tsx","pages/options/index.tsx","pages/approutes.tsx","components/navigation/nav_bar_footer.tsx","components/tooltips/tooltip_header.tsx","components/tooltips/tooltip_body.tsx","components/tooltips/tooltip_window.tsx","components/tooltips/tooltip.tsx","components/tooltips/tooltips_container.tsx","App.tsx","index.tsx","../webpack/bootstrap","../webpack/runtime/chunk loaded","../webpack/runtime/compat get default export","../webpack/runtime/create fake namespace object","../webpack/runtime/define property getters","../webpack/runtime/global","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object","../webpack/runtime/jsonp chunk loading","../webpack/startup"],"sourcesContent":["import React, { ReactElement, useState } from 'react'\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\nimport FormControl from 'react-bootstrap/FormControl'\r\nimport Dropdown from 'react-bootstrap/Dropdown'\r\nimport DropdownButton from 'react-bootstrap/DropdownButton'\r\n\r\nimport './search.css'\r\n\r\nconst Search = (): ReactElement => {\r\n\r\n  const [searchEngine, setSearchEngine] = useState('');\r\n  const [text, setText] = useState('');\r\n\r\n  const onKeyPress = (e: any) => {\r\n    if (e.key === 'Enter') {\r\n      doSearch();\r\n    }\r\n  }\r\n\r\n  const doSearch = () => {\r\n\r\n    let url: string;\r\n    if (searchEngine === '') \r\n      url = `https://www.yandex.ru/search/?text=${text}&site=forum.mista.ru`;\r\n\r\n    else if (searchEngine === 'Google') \r\n      url = `https://www.google.ru/search?q=${text}+site:forum.mista.ru`\r\n\r\n    window.open(url);\r\n    setText('');\r\n  }\r\n\r\n  return (\r\n    <InputGroup size=\"sm\">\r\n      <DropdownButton \r\n        id=\"search-engine\" \r\n        title=\"\" \r\n        size=\"sm\" \r\n        style={{ marginRight: \"2px\" }} \r\n        className='button' \r\n        variant=\"light\"\r\n        onSelect={eventKey => setSearchEngine(eventKey)}\r\n        >\r\n        <Dropdown.Item eventKey=\"\"></Dropdown.Item>\r\n        <Dropdown.Item eventKey=\"Google\">Google</Dropdown.Item>\r\n      </DropdownButton>\r\n      <FormControl\r\n        type=\"text\"\r\n        placeholder={`${searchEngine}: `}\r\n        style={{ marginRight: \"4px\", paddingRight: \"27px\" }}\r\n        className='input'\r\n        onKeyPress={onKeyPress}\r\n        onChange={e => setText(e.target.value)}\r\n        value={text}\r\n      />\r\n      <InputGroup.Text style={{ marginLeft: \"-35px\", marginTop: \"auto\", marginBottom: \"auto\", cursor: \"pointer\" }} onClick={doSearch}>\r\n        <i className=\"fa fa-search input\" style={{ zIndex: 1000 }} />\r\n      </InputGroup.Text>\r\n    </InputGroup>\r\n  )\r\n\r\n}\r\n\r\nexport default Search;","\r\nexport function today(td: Date): boolean {\r\n  var d = new Date();\r\n  return td.getDate() === d.getDate() && td.getMonth() === d.getMonth() && td.getFullYear() === d.getFullYear();\r\n}\r\n\r\nexport const groupBy = <T, K extends keyof any>(list: T[], getKey: (item: T) => K) =>\r\n  list.reduce((previous, currentItem) => {\r\n    const group = getKey(currentItem);\r\n    if (!previous[group]) previous[group] = [];\r\n    previous[group].push(currentItem);\r\n    return previous;\r\n  }, {} as Record<K, T[]>)\r\n\r\nexport const parseJSON = (text: string): {} => {\r\n\r\n  try {\r\n    return JSON.parse(text);\r\n  } catch (e) {\r\n\r\n  }\r\n\r\n  try {\r\n    text = text\r\n      .replace(/\\\\</g, '<')\r\n      .replace(/\\\\>/g, '>')\r\n      .replace(/\\\\&/g, '&')\r\n      .replace(/\\\\'/g, \"'\")\r\n      .replace(/\\\\\"/g, \"\")\r\n      .replace(/ \"/g, ' \\\\\"')\r\n      .replace(/\"\"/g, '\\\\\"\"')\r\n      .replace(/\\t/g, '\\\\t')\r\n      .replace(/\"(\\.| |\\?)/g, '\\\\\"$1')\r\n\r\n    //           console.log(text);\r\n    return JSON.parse(text);\r\n\r\n    //return eval(text);\r\n  } catch (e) {\r\n    console.error(e.message);\r\n    console.log(text);\r\n\r\n    return {};\r\n  }\r\n}\r\n\r\nexport const getMaxPage = (count: number): number => {\r\n  if (count === -1) return -1;\r\n  return Math.min(Math.ceil(count / 100), 10) || 1;\r\n}\r\n\r\nexport const childrenToText = (children: any): string[]=> {\r\n\r\n  if (!children) return children;\r\n\r\n  return children.map(value => {\r\n    if (typeof (value) === 'string') {\r\n      return value;\r\n    } else if (value.type === 'br') {\r\n      return '<br>'\r\n    } else if (value.type.displayName === 'Connect(LinkToPost)' || value.type.displayName === 'Connect(t)') {\r\n      return value.props.number;\r\n    } else {\r\n      console.log(value);\r\n      return value;\r\n    }\r\n  })\r\n}\r\n\r\nexport const extractTextFromHTML = (htmltext: string): string => {\r\n  const parser = new DOMParser();\r\n  const floatingElement = parser.parseFromString(htmltext, 'text/html');\r\n  return (floatingElement.firstChild as HTMLElement).innerText;\r\n}","import fetchJsonp from 'fetch-jsonp'\r\nimport * as utils from 'src/utils'\r\n\r\nexport const domain: string = localStorage.getItem('domain') || 'https://forum.mista.ru';\r\n//export const domain = 'https://dev.mista.ru';\r\nexport const urlTopicsList: string = localStorage.getItem('urlTopicsList') || 'api/topic.php';\r\nexport const urlTopicInfo: string = localStorage.getItem('urlTopicInfo') || 'ajax_gettopic.php';\r\nexport const urlTopicMessages: string = localStorage.getItem('urlTopicMessages') || 'api/message.php';\r\nexport const urlLogin: string = localStorage.getItem('urlLogin') || 'users.php?action=do_enter';\r\nexport const urlLogout: string = localStorage.getItem('urlLogout') || 'users.php?action=exit';\r\nexport const urlCookies: string = localStorage.getItem('urlCookies') || 'ajax_cookie.php';\r\nexport const urlSections: string = localStorage.getItem('urlSections') || 'ajax_getsectionslist.php';\r\nexport const urlNewMessage: string = localStorage.getItem('urlNewMessage') || 'topic.php?id=:id&page=1';\r\nexport const urlNewTopic: string = localStorage.getItem('urlNewTopic') || 'index.php';\r\nexport const urlAddBookmark: string = localStorage.getItem('urlAddBookmark') || 'ajax_addbookmark.php';\r\nexport const urlSearch: string = localStorage.getItem('urlSearch') || 'ajax_find.php';\r\n\r\n//Bookmark\r\nexport type RequestBookmark = {\r\n  id: string\r\n}\r\n\r\nexport const postBookmark = async (params: RequestBookmark) => {\r\n\r\n  await fetch(`${domain}/${urlAddBookmark}`, {\r\n    method: 'POST',\r\n    body: paramsToString('', params),\r\n    mode: 'no-cors',\r\n    credentials: 'include',\r\n  });\r\n}\r\n\r\nexport const paramsToString = (paramsPrefix: string, params?: {}): string => {\r\n  if (!params)\r\n    return '';\r\n\r\n  let searchParams = new URLSearchParams();\r\n  for (let key in params) {\r\n    const value = Reflect.get(params, key)\r\n    if (value !== undefined)\r\n      searchParams.append(key, value)\r\n  }\r\n\r\n  let str = searchParams.toString();\r\n  if (str.length > 0)\r\n    return paramsPrefix + str;\r\n  else\r\n    return '';\r\n}\r\n\r\nexport const fetchJsonpAndGetJson = async (url: string, params?: {}, options?: {}): Promise<any> => {\r\n\r\n  let fullUrl = `${domain}/${url}${paramsToString('?', params)}`;\r\n  const response = await fetchJsonp(fullUrl);\r\n  let responseJson = await response.json();\r\n  let json;\r\n  if (typeof (responseJson) === 'string') {\r\n\r\n    try {\r\n      json = JSON.parse(responseJson)\r\n    } catch (e) {\r\n      json = utils.parseJSON(responseJson);\r\n    }\r\n  } else {\r\n    json = responseJson;\r\n  }\r\n  return json;\r\n}\r\n\r\nexport const fetchAndGetJson = async (url: string, params?: {}, init?: RequestInit): Promise<any> => {\r\n\r\n  let fullUrl = `${domain}/${url}${paramsToString('?', params)}`;\r\n\r\n  if (!init)\r\n    init = {\r\n      mode: 'cors',\r\n      credentials: 'same-origin'  \r\n    }\r\n\r\n  const response = await fetch(fullUrl, init);\r\n  return await response.json();\r\n  \r\n}","import { fetchAndGetJson, urlTopicsList } from '.'\r\n\r\nimport type { ITopicsList, ITopicsListItem } from 'src/store/topics_list'\r\n\r\nexport interface IRequest {\r\n  itemsPerPage?: number | null,\r\n  page?: number | null,\r\n  beforeTime?: string | null,\r\n  forum?: string | null,\r\n  section?: string | null,\r\n  userId?: string | null,\r\n  myTopics?: string | null\r\n}\r\n\r\ninterface IAPIRequest {\r\n  topics?: string,\r\n  section_short_name?: string,\r\n  forum?: string,\r\n  user_id?: string,\r\n  mytopics?: string\r\n}\r\n\r\ninterface IAPIResponse {\r\n  id: number,\r\n  forum: string,\r\n  sect1: string,\r\n  sect2: string,\r\n  v8: string,\r\n  closed: number,\r\n  down: number,\r\n  paid: number,\r\n  text: string,\r\n  message: string,\r\n  created: number,\r\n  utime: number,\r\n  user: string,\r\n  user0: string,\r\n  is_voting: number,\r\n  answ: number\r\n}\r\n\r\nfunction convertRequest(request: IRequest): IAPIRequest {\r\n\r\n  const page = request.page || 1;\r\n  const itemsCount = request.itemsPerPage * page;\r\n\r\n  return {\r\n    topics: String(itemsCount),\r\n    section_short_name: request.section,\r\n    forum: request.forum,\r\n    user_id: request.userId,\r\n    mytopics: request.myTopics,\r\n  }\r\n}\r\n\r\nfunction convertResponse(response: IAPIResponse): ITopicsListItem {\r\n\r\n  return ({\r\n    id: response.id,\r\n    forum: response.forum,\r\n    section: response.sect1,\r\n    sectionCode: response.sect2,\r\n    author: response.user0,\r\n    lastUser: response.user,\r\n    created: response.created * 1000,\r\n    updated: response.utime * 1000,\r\n    count: response.answ,\r\n    text: response.text,\r\n    closed: response.closed === 1,\r\n    down: response.down === 1,\r\n    pinned: response.utime === 2147483648,\r\n    isVoting: response.is_voting === 1,\r\n    showPreview: false\r\n  })\r\n\r\n}\r\n\r\nasync function fetchTopicsList(params?: IRequest): Promise<ITopicsList> {\r\n\r\n  const request = convertRequest(params);\r\n\r\n  const list = await fetchAndGetJson(urlTopicsList, request);\r\n  return list.map(convertResponse);\r\n\r\n}\r\n\r\nexport { fetchTopicsList }","import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\r\n\r\nimport * as API from 'src/api/topicslist'\r\nimport { domain, urlTopicsList } from 'src/api/index';\r\nimport { RootState } from './store';\r\n\r\nexport interface ITopicsListItem {\r\n  id: number,\r\n  author: string,\r\n  lastUser: string,\r\n  forum: string,\r\n  sectionCode: string,\r\n  section: string,\r\n  count: number,\r\n  text: string,\r\n  created: number,\r\n  updated: number,\r\n  closed: boolean,\r\n  down: boolean,\r\n  pinned: boolean\r\n  isVoting: boolean,\r\n  showPreview: boolean,\r\n  previewMsgNumber?: number\r\n}\r\n\r\nexport interface ITopicsList extends Array<ITopicsListItem> { }\r\n\r\nexport interface ITopicsListState {\r\n  status: \"init\" | \"loading\" | \"success\" | \"error\",\r\n  items: ITopicsList,\r\n  error?: string,\r\n  lastUpdated?: number\r\n}\r\n\r\nexport const initialState: ITopicsListState = {\r\n  status: \"init\",\r\n  items: []\r\n}\r\n\r\nexport const getTopicsList = createAsyncThunk(\r\n  'topicsList/fetch',\r\n  async (params: API.IRequest, { getState }) => {\r\n\r\n    const state = getState() as RootState;\r\n\r\n    let itemsPerPage = +state.options.items.topicsPerPage;\r\n    if (itemsPerPage > 99) itemsPerPage = 99;\r\n    params.itemsPerPage = itemsPerPage;\r\n\r\n    const json = await API.fetchTopicsList(params);\r\n    return json.slice(-itemsPerPage);\r\n\r\n  }\r\n)\r\n\r\nconst shouldFetch = ({ topicsList }: RootState) => {\r\n  \r\n  if (!topicsList) return true\r\n  if (topicsList.status === \"loading\") return false\r\n  \r\n  return true\r\n}\r\n\r\nexport const getTopicsListIfNeeded = (params: API.IRequest): any => (dispatch: any, getState: any) => {\r\n  if (shouldFetch(getState())) {\r\n    return dispatch(getTopicsList(params));\r\n  }\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'topicsList',\r\n  initialState,\r\n  reducers: {\r\n    clear: (state) => {\r\n      state.items = [];\r\n      state.status = \"init\"; \r\n    },\r\n    togglePreview: (state, { payload }) => {\r\n      const item = state.items.find(item => item.id === payload.topicId); \r\n      item.showPreview = !item.showPreview; \r\n      item.previewMsgNumber = payload.msgNumber;\r\n    }\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(getTopicsList.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })\r\n      .addCase(getTopicsList.fulfilled, (state, { payload }) => {\r\n        state.status = \"success\";\r\n        state.items = payload;\r\n\r\n        delete state.error;\r\n      })\r\n      .addCase(getTopicsList.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = `${error?.message} ${domain}/${urlTopicsList}`;\r\n      })\r\n  }\r\n})\r\n\r\nexport const { actions: topicsListActions, reducer: topicsList } = slice;\r\n","import React, { ReactElement } from 'react';\r\nimport { useDispatch } from 'react-redux'\r\n\r\nimport Navbar from 'react-bootstrap/Navbar'\r\nimport Nav from 'react-bootstrap/Nav'\r\nimport Form from 'react-bootstrap/Form'\r\nimport { Link, useLocation } from \"react-router-dom\";\r\n\r\nimport Search from 'src/components/common/search'\r\nimport { getTopicsListIfNeeded } from 'src/store/topics_list'\r\n\r\nimport './nav_bar.css'\r\n\r\nconst NavBar = (): ReactElement => {\r\n\r\n  const location = useLocation();\r\n  const dispatch = useDispatch();\r\n\r\n  const locationParams = new URLSearchParams(location.search);\r\n  const forum = locationParams.get('forum');\r\n\r\n  const onClick = () => {\r\n    dispatch(getTopicsListIfNeeded({}));\r\n  }\r\n\r\n  const internalLinks = [\r\n    { name: '1C', link: `/index.php?forum=1C` },\r\n    { name: 'IT', link: `/index.php?forum=IT` },\r\n    { name: 'JOB', link: `/index.php?forum=JOB` },\r\n    { name: 'LIFE', link: `/index.php?forum=LIFE` },\r\n    { name: '', link: '/options.php' },    \r\n  ];\r\n\r\n  const externalLinks = [\r\n    { name: 'Wiki', link: 'https://wiki.mista.ru' },\r\n    { name: ' ', link: 'https://kb.mista.ru' },\r\n  ];\r\n\r\n  return (\r\n    <Navbar bg=\"dark\" variant=\"dark\" expand=\"md\" fixed=\"top\">\r\n      <Navbar.Brand\r\n        as={Link}\r\n        to={`/`}\r\n        onClick={onClick}>\r\n        React.Mista\r\n      </Navbar.Brand>\r\n      <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n      <Navbar.Collapse>\r\n        <Nav className=\"me-auto\">\r\n          {internalLinks.map((item, i) =>\r\n            <Nav.Item key={'i'+ i}>\r\n              <Nav.Link to={item.link} active={item.name === forum} as={Link}>\r\n                {item.name}\r\n              </Nav.Link>\r\n            </Nav.Item>\r\n          )}\r\n          {externalLinks.map((item, i) =>\r\n            <Nav.Item key={'e'+ i}>\r\n              <Nav.Link href={item.link}>\r\n                {item.name}\r\n              </Nav.Link>\r\n            </Nav.Item>\r\n          )}          \r\n        </Nav>\r\n        <Form className=\"d-flex\">\r\n          <Search />\r\n        </Form>\r\n      </Navbar.Collapse>\r\n    </Navbar>\r\n  )\r\n}\r\n\r\nexport default NavBar;","\r\nimport { fetchAndGetJson, urlTopicMessages } from '.'\r\nimport type { ITopicMessage, ITopicMessagesList } from 'src/store/topic'\r\n\r\ninterface IAPIRequest {\r\n  id: number,\r\n  from?: number,\r\n  to?: number\r\n}\r\n\r\nexport interface IRequest extends IAPIRequest {}\r\n\r\ninterface IAPIResponse {\r\n  id: string,\r\n  n: string,\r\n  user: string,\r\n  userId: string,\r\n  text: string,\r\n  utime: string,\r\n  vote: number\r\n}  \r\n\r\nfunction convertResponse(response: IAPIResponse): ITopicMessage {\r\n\r\n  return ({\r\n    id: parseInt(response.id),\r\n    n: parseInt(response.n),\r\n    user: response.user,\r\n    userId: parseInt(response.userId),\r\n    text: response.text,\r\n    time: parseInt(response.utime) * 1000,\r\n    vote: response.vote\r\n  })\r\n\r\n}\r\n\r\nasync function fetchTopicMessages(params?: IRequest): Promise<ITopicMessagesList> {\r\n\r\n  const list = await fetchAndGetJson(urlTopicMessages, params);\r\n  return list.map(convertResponse);\r\n\r\n}\r\n\r\nasync function fetchTopicMessage(id: number, n: number): Promise<ITopicMessage> {\r\n\r\n  const to = (n === 0) ? n+1 : n;\r\n\r\n  const list = await fetchAndGetJson(urlTopicMessages, {id, from: n, to});\r\n  return list.map(convertResponse).find((item: ITopicMessage) => item.n === n);\r\n\r\n}\r\n\r\nexport { fetchTopicMessages, fetchTopicMessage }","import { fetchAndGetJson, urlTopicInfo } from '.'\r\nimport type { ITopicInfo } from 'src/store/topic'\r\n\r\ninterface IAPIResponse {\r\n  id: string,\r\n  text: string,\r\n  forum: string,\r\n  section: string,\r\n  created: string,\r\n  user_id: string,\r\n  user_name: string,\r\n  updated: string,\r\n  updated_name: string,\r\n  answers_count: string,\r\n  down: number,\r\n  closed: number,\r\n  deleted: number,\r\n  is_voting: number,\r\n  voting: {\r\n    select: string,\r\n    result: number\r\n  }[]\r\n}\r\n\r\nfunction convertResponse(response: IAPIResponse): ITopicInfo {\r\n\r\n  let voting = [];\r\n  if (response.voting)\r\n    voting = response.voting.map(x => ({\r\n      text: x.select,\r\n      count: x.result\r\n    }));\r\n    \r\n  return ({\r\n    id: parseInt(response.id),\r\n    title: response.text,\r\n    forum: response.forum,\r\n    sectionId: response.section,\r\n    created: parseInt(response.created) * 1000,\r\n    authorId: response.user_id,\r\n    author: response.user_name,\r\n    updated: parseInt(response.updated) * 1000,\r\n    lastUser: response.updated_name,\r\n    count: parseInt(response.answers_count),\r\n    down: response.down,\r\n    closed: response.closed,\r\n    deleted: response.deleted,\r\n    isVoting: response.is_voting,\r\n    voting\r\n  })\r\n\r\n}\r\n\r\nasync function fetchTopicInfo(id: number): Promise<ITopicInfo> {\r\n\r\n  const info = await fetchAndGetJson(urlTopicInfo, { id });\r\n  return convertResponse(info);\r\n\r\n}\r\n\r\nexport { fetchTopicInfo }","import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\r\n\r\nimport { fetchTopicMessage, fetchTopicMessages } from 'src/api/topicMessages'\r\nimport { fetchTopicInfo } from 'src/api/topicinfo'\r\nimport { RootState } from './store';\r\n\r\nexport interface IVotingItem {\r\n  text: string,\r\n  count: number\r\n}\r\n\r\nexport interface ITopicInfo {\r\n    id: number,\r\n    title: string,\r\n    forum?: string,\r\n    sectionId?: string,\r\n    created?: number,\r\n    authorId?: string,\r\n    author?: string,\r\n    updated?: number,\r\n    lastUser?: string,\r\n    count?: number,\r\n    down?: number,\r\n    closed?: number,\r\n    deleted?: number,\r\n    isVoting?: number,\r\n    voting?: IVotingItem[]\r\n  }\r\n\r\nexport interface ITopicMessage {\r\n  id: number,\r\n  n: number,\r\n  user: string,\r\n  userId: number,\r\n  text: string,\r\n  time: number,\r\n  vote: number\r\n}\r\n\r\nexport interface ITopicMessagesList extends Array<ITopicMessage> {}\r\n\r\nexport interface ITopicState {\r\n  status: \"init\" | \"loading\" | \"success\" | \"error\",\r\n  items: ITopicMessagesList,\r\n  item0?: ITopicMessage,\r\n  info?: ITopicInfo,\r\n  error?: string,\r\n  lastUpdated?: number\r\n}\r\n\r\nexport const defaultInfo: ITopicInfo = {\r\n  id: 0,\r\n  title: \"\",\r\n  count: -1\r\n}\r\n\r\nexport const initialState: ITopicState = {\r\n  status: \"init\",\r\n  items: [],\r\n  info: defaultInfo\r\n}\r\n\r\nexport const getTopic = createAsyncThunk(\r\n  'topics/fetch',\r\n  async ({ topicId, page, item0 }: { \r\n      topicId: number, \r\n      page: number | string, \r\n      item0: ITopicMessage \r\n    }, { rejectWithValue }) => {\r\n\r\n    let info: ITopicInfo;\r\n    try {\r\n      info = await fetchTopicInfo(topicId);\r\n    } catch (e) {\r\n      console.error(e);\r\n      info = {\r\n        id: topicId,\r\n        title: '',\r\n        count: -1\r\n      };\r\n    }\r\n\r\n    try {\r\n      let _item0 = item0;\r\n      let _items;\r\n      if (page === 'last20') {\r\n\r\n        if (info.count > 21) {\r\n\r\n          if (!_item0) {\r\n            _item0 = await fetchTopicMessage(topicId, 0);\r\n          }\r\n\r\n          let first = info.count - 20;\r\n          _items = await fetchTopicMessages({\r\n            id: topicId,\r\n            from: first,\r\n            to: 1010\r\n          });\r\n\r\n        } else {\r\n          let items = await fetchTopicMessages({\r\n            id: topicId,\r\n            from: 0,\r\n            to: 1010\r\n          });\r\n          _item0 = items[0];\r\n          _items = items.slice(1);\r\n        }\r\n\r\n      } else {\r\n\r\n        page = +page;\r\n        let first = 0;\r\n        let last = page * 100 - 1;\r\n\r\n        if (page > 1) {\r\n\r\n          first = (page - 1) * 100;\r\n          if (!_item0) {\r\n            _item0 = await fetchTopicMessage(topicId, 0);\r\n          }\r\n\r\n          _items = await fetchTopicMessages({\r\n            id: topicId,\r\n            from: first,\r\n            to: last\r\n          });\r\n\r\n        } else {\r\n          if (_item0)\r\n            first = 1;\r\n          else\r\n            first = 0;\r\n\r\n          let items = await fetchTopicMessages({\r\n            id: topicId,\r\n            from: first,\r\n            to: last\r\n          });\r\n\r\n          if (_item0) {\r\n            _items = items;\r\n          } else {\r\n            _item0 = items[0];\r\n            _items = items.slice(1);\r\n          }\r\n        }\r\n\r\n      }\r\n\r\n      if (info.count === 0 && _items.length > 0)\r\n        info.count = _items[_items.length - 1].n;\r\n\r\n      if (page === 'last20' && _items.length > 20) {\r\n        _items = _items.slice(-20);\r\n      }\r\n\r\n      return {\r\n        info,\r\n        item0: _item0,\r\n        list: _items\r\n      }\r\n\r\n    } catch (error) {\r\n\r\n      console.error('Failed to fetch topic:', error);\r\n      rejectWithValue(error);\r\n\r\n    }\r\n  }\r\n)\r\n\r\nexport const getNewMessages = createAsyncThunk(\r\n  'topic/getNewMessages',\r\n  async ({ id, count }:  {\r\n      id: number, \r\n      count: number\r\n    }) => {\r\n\r\n    return await fetchTopicMessages({\r\n      id: id,\r\n      from: count + 1,\r\n      to: 1050\r\n    });\r\n\r\n  }\r\n)\r\n\r\nconst shouldFetch = ({ topic } : RootState) => {\r\n  \r\n  if (!topic) return true;\r\n  if (topic.status === \"loading\") return false;\r\n  \r\n  return true\r\n}\r\n\r\nexport const getTopicIfNeeded = (topicId: number, page: number |string): any => (dispatch: any, getState: any) => {\r\n \r\n  const state = getState();\r\n  if (shouldFetch(state)) {\r\n    let item0: ITopicMessage = null;\r\n    if (topicId === state.topic.info.id)\r\n      item0 = state.topic.item0;  \r\n    return dispatch(getTopic({ topicId, page, item0 }));\r\n  }\r\n}\r\n\r\nexport const getNewMessagesIfNeeded = () => (dispatch: any, getState: any) => {\r\n  const state = getState();\r\n  const { id, count } = state.topic.info;\r\n  if (shouldFetch(state)) {\r\n    return dispatch(getNewMessages({ id, count }));\r\n  }\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'topic',\r\n  initialState,\r\n  reducers: {\r\n    clear: (state) => {\r\n      state.info = initialState.info;\r\n      state.item0 = initialState.item0;\r\n      state.items = initialState.items;\r\n      state.status = initialState.status;\r\n      delete state.error;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(getTopic.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })\r\n      .addCase(getTopic.fulfilled, (state, { payload }) => {\r\n        state.status = \"success\";\r\n        state.items = payload.list;\r\n        state.item0 = payload.item0;\r\n        state.info = payload.info;\r\n\r\n        delete state.error;\r\n      })\r\n      .addCase(getTopic.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      })\r\n      // getNewMessages\r\n      .addCase(getNewMessages.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })\r\n      .addCase(getNewMessages.fulfilled, (state, { payload }) => {\r\n        state.status = \"success\";\r\n        if (payload.length > 0) {\r\n          state.items = state.items.concat(payload);\r\n          state.info.count = state.items[state.items.length - 1].n;\r\n        }\r\n\r\n        delete state.error;\r\n      })\r\n      .addCase(getNewMessages.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      })\r\n  }\r\n})\r\n\r\nexport const { actions: topicActions, reducer: topic } = slice;\r\n","import { fetchJsonpAndGetJson, urlSections } from '.'\r\nimport type { ISectionsList, ISectionItem } from 'src/store/sections'\r\n\r\ninterface IAPIResponse {\r\n  id: number,\r\n  forum: string,\r\n  shortn: string,\r\n  fulln: string\r\n}\r\n\r\nfunction convertResponse(response: IAPIResponse): ISectionItem {\r\n\r\n  return ({\r\n    id: response.id,\r\n    forum: response.forum,\r\n    code: response.shortn,\r\n    name: response.fulln,\r\n  })\r\n\r\n}\r\n\r\nexport const fetchSections = async (): Promise<ISectionsList> => {\r\n  const list = await fetchJsonpAndGetJson(urlSections);\r\n  return list.map(convertResponse);\r\n}\r\n","import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\r\n\r\nimport { groupBy } from 'src/utils'\r\n\r\nimport { fetchSections } from 'src/api/sections'\r\nimport type { RootState } from './store'\r\n\r\nexport interface ISectionItem {\r\n  id: number;\r\n  forum: string,\r\n  code: string,\r\n  name: string,\r\n}\r\n\r\nexport interface ISectionsList extends Array<ISectionItem> {}\r\n\r\nexport interface ISectionsTree{\r\n  [key: string]: ISectionItem[]\r\n}\r\n\r\nexport interface ISectionsListState {\r\n  status: \"init\" | \"loading\" | \"success\" | \"error\";\r\n  items: ISectionsList,\r\n  tree?: {},\r\n  error?: string,\r\n  lastUpdated?: number\r\n}\r\n\r\nexport const initialState: ISectionsListState = {\r\n  status: \"init\",\r\n  items: [],\r\n  tree: {}\r\n}\r\n\r\nexport const getSections = createAsyncThunk(\r\n  'sections/fetch',\r\n  async () => {\r\n    return await fetchSections();\r\n  }\r\n)\r\n\r\nconst shouldGetSections = ({ sections }: RootState): boolean => {\r\n\r\n  if (!sections) return true\r\n  if (sections.status === \"loading\") return false\r\n  if (sections.items.length > 0) return false;\r\n\r\n  return true;\r\n}\r\n\r\nexport const getSectionsIfNeeded = (): any => (dispatch: any, getState: any) => {\r\n  if (shouldGetSections(getState())) {\r\n    return dispatch(getSections());\r\n  }\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'sections',\r\n  initialState,\r\n  reducers: {\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(getSections.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;        \r\n      })\r\n      .addCase(getSections.fulfilled, (state, { payload }) => {\r\n        state.status = \"success\";\r\n        state.items = payload;\r\n        state.tree = groupBy(state.items, item => item.forum);\r\n        delete state.error;        \r\n      })\r\n      .addCase(getSections.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error  = error?.message;\r\n      })      \r\n  }\r\n});\r\n\r\nexport const { actions: sectionsActions, reducer: sections } = slice;","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\r\n\r\nexport interface IOptionsItems {\r\n  theme: 'yellow' | 'lightgray' | 'dark',\r\n  topicsPerPage: string,\r\n  autoRefreshTopicsList: string,\r\n  autoRefreshTopicsListInterval: string,\r\n  autoRefreshTopic: string,\r\n  autoRefreshTopicInterval: string,\r\n  tooltipDelay: string,\r\n  showTooltips: string,\r\n  showTooltipOnPostLink: string,\r\n  showYoutubeVideoTitle: string,\r\n  replaceCatalogMista: string,\r\n  fixBrokenLinks: string\r\n}\r\n\r\nexport interface IOptionsState {\r\n  voteColors: Array<string>,\r\n  items: IOptionsItems,\r\n  show?: boolean\r\n};\r\n\r\nexport const defaultOptionsState: IOptionsState = {\r\n  voteColors: [\r\n    \"#FF1616\", //1\r\n    \"#1A861A\", //2\r\n    \"#0023FF\", //3\r\n    \"#FF6B18\", //4\r\n    \"#9B3A6E\", //5\r\n    \"#567655\", //6\r\n    \"#233345\", //7\r\n    \"#CC0000\", //8\r\n    \"#00CCCC\", //9\r\n    \"#0000CC\", //10\r\n  ],\r\n  items: {\r\n    theme: 'lightgray',\r\n    topicsPerPage: '20',\r\n    autoRefreshTopicsList: 'false',\r\n    autoRefreshTopicsListInterval: '60',\r\n    autoRefreshTopic: 'true',\r\n    autoRefreshTopicInterval: '60',\r\n    //tooltips\r\n    showTooltips: 'true',\r\n    tooltipDelay: '500',\r\n    showTooltipOnPostLink: 'true',\r\n    //links\r\n    showYoutubeVideoTitle: 'true',\r\n    replaceCatalogMista: 'true',\r\n    fixBrokenLinks: 'true',\r\n  }\r\n}\r\n\r\nconst readOption = (name: string, defaultValue: string): string => {\r\n  return window.localStorage.getItem(name) || defaultValue;\r\n}\r\n\r\nconst readAllOptions = (): IOptionsState => {\r\n  \r\n  let state: IOptionsState = defaultOptionsState;\r\n  for (let key in state.items) {\r\n    state.items[key] = readOption(key, state.items[key]);\r\n  }\r\n\r\n  return state;\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'options',\r\n  initialState: readAllOptions(),\r\n  reducers: {\r\n    read: (state) => {\r\n      for (let key in defaultOptionsState.items) {\r\n        state.items[key] = readOption(key, defaultOptionsState.items[key]);\r\n      }\r\n    },\r\n    save: (state, { payload }: PayloadAction<IOptionsItems>) => {\r\n      for (let key in payload) {\r\n        const value = String(payload[key]); \r\n        state.items[key] = value;\r\n        window.localStorage.setItem(key, value);\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nexport const { actions: optionsActions, reducer: options } = slice;","import { domain, urlLogin, urlLogout, paramsToString } from '.'\r\n\r\nexport interface IRequest {\r\n  username: string,\r\n  password: string,\r\n}\r\n\r\nexport const fetchLogin = async (params: IRequest): Promise<void> => {\r\n  await fetch(`${domain}/${urlLogin}`, {\r\n    method: 'POST',\r\n    body: paramsToString('', {user_name: params.username, user_password: params.password}),\r\n    mode: 'no-cors',\r\n    credentials: 'include',\r\n    headers: {\r\n      'Accept': 'text/html,application/xhtml+xml,application/xml',\r\n      'Content-Type': 'application/x-www-form-urlencoded',\r\n    },\r\n    redirect: 'follow'\r\n  });\r\n}\r\n\r\nexport const fetchLogout = async (): Promise<void> => {\r\n  const fullUrl = `${domain}/${urlLogout}`;\r\n  await fetch(fullUrl, {\r\n    mode: 'no-cors',\r\n    credentials: 'include'\r\n  });\r\n}","import { fetchJsonpAndGetJson, urlCookies } from '.'\r\nimport { ILogin } from 'src/store/login';\r\n\r\nexport type IAPIResponse = {\r\n  cookie: {\r\n    entr_id: string,\r\n    entr_key: string,\r\n    entr_hash: string,\r\n    musthave: string,\r\n    hotlog: string\r\n  },\r\n  session: {\r\n    entered: number,\r\n    user_id: string,\r\n    user_name: string,\r\n    user_hash: string,\r\n    is_moderator: number,\r\n    light_moderator: number,\r\n    section: string,\r\n    show_moderator_tools: number,\r\n    kb: string,\r\n    registered_unixtime: string,\r\n    guid: string,\r\n    last_error?: string,\r\n    user: {\r\n      id: string,\r\n      name: string,\r\n      is_moderator: boolean,\r\n      light_moderator: boolean,\r\n      kb: boolean,\r\n      section_owner: boolean,\r\n      section: string,\r\n      registered_unixtime: string,\r\n      balance: number\r\n    }\r\n  }\r\n}\r\n\r\nfunction convertResponse(response: IAPIResponse): ILogin {\r\n\r\n  const { session } = response;\r\n\r\n  return ({\r\n    userId: Number(session?.user_id),\r\n    userName: session?.user_name,\r\n    userHash: session?.user_hash,\r\n    lastError: session?.last_error\r\n  })\r\n\r\n}\r\n\r\nasync function fetchCookies(): Promise<ILogin| undefined>  {\r\n\r\n  const response = await fetchJsonpAndGetJson(urlCookies);\r\n  return convertResponse(response);\r\n\r\n}\r\n\r\nexport { fetchCookies }","import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit'\r\n\r\nimport { fetchLogin, fetchLogout, IRequest } from 'src/api/login'\r\nimport { fetchCookies } from 'src/api/cookies'\r\n\r\nimport { RootState } from './store';\r\n\r\nexport interface ILogin {\r\n  userId?: number;\r\n  userName?: string,\r\n  userHash?: string,\r\n  lastError?: string,\r\n}\r\n\r\nexport interface ILoginState {\r\n  status: \"init\" | \"loading\" | \"success\" | \"error\",\r\n  logged: boolean,\r\n  userId?: number,\r\n  userName?: string,\r\n  userHash?: string,\r\n  lastError?: string,\r\n  error?: string,\r\n  lastUpdated?: number,\r\n  isFetching?: boolean,\r\n}\r\n\r\nexport const initialState: ILoginState = {\r\n  status: \"init\",\r\n  logged: false\r\n}\r\n\r\nexport const checkLogin = createAsyncThunk(\r\n  'login/check',\r\n  async () => {\r\n\r\n    return await fetchCookies();\r\n\r\n  }\r\n)\r\n\r\nexport const doLogin = createAsyncThunk(\r\n  'login/login',\r\n  async (params: IRequest, { dispatch }) => {\r\n\r\n    await fetchLogin(params);\r\n    return fetchCookies();\r\n\r\n  }\r\n)\r\n\r\nexport const doLogout = createAsyncThunk(\r\n  'login/logout',\r\n  async () => {\r\n\r\n    return await fetchLogout();\r\n\r\n  }\r\n)\r\n\r\nconst shouldLogin = ({ login }: RootState): boolean => {\r\n \r\n  if (!login) return true;\r\n  if (login.status === \"loading\") return false;\r\n  \r\n  return true;\r\n}\r\n\r\nexport const doLoginIfNeeded = (username: string, password: string): any => (dispatch: any, getState: any) => {\r\n  if (shouldLogin(getState())) {\r\n    return dispatch(doLogin({ username, password }))\r\n  }\r\n}\r\n\r\nexport const checkLoginIfNeeded = (): any => (dispatch: any, getState: any) => {\r\n  if (shouldLogin(getState())) {\r\n    return dispatch(checkLogin())\r\n  }\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'login',\r\n  initialState,\r\n  reducers: {\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(doLogin.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })    \r\n      .addCase(doLogin.fulfilled, (state, { payload }: PayloadAction<ILogin>) => {\r\n        state.status = \"success\";\r\n        state.userId = payload.userId;\r\n        state.userName = payload.userName;\r\n        state.userHash = payload.userHash;\r\n        state.logged = true;\r\n        delete state.error;\r\n      })   \r\n      .addCase(doLogin.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      })   \r\n      // logout\r\n      .addCase(doLogout.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })    \r\n      .addCase(doLogout.fulfilled, (state) => {\r\n        state.status = \"success\";\r\n        state.logged = false;\r\n\r\n        delete state.userId;\r\n        delete state.userName;\r\n        delete state.userHash;\r\n        delete state.error;\r\n      })   \r\n      .addCase(doLogout.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      }) \r\n  }\r\n})  \r\n\r\nexport const { actions: loginActions, reducer: login } = slice;","import { createSlice } from '@reduxjs/toolkit'\r\nimport type { PayloadAction } from '@reduxjs/toolkit'\r\n\r\nexport interface ITooltipKeys {\r\n  topicId: number,\r\n  number: number\r\n}\r\n\r\nexport interface ICoords {\r\n  x: number,\r\n  y: number\r\n}\r\n\r\nexport interface ITooltipItem {\r\n  hash: string,\r\n  keys: ITooltipKeys,\r\n  coords: ICoords,\r\n  zIndex: number\r\n}\r\n\r\nexport interface ITooltipsList extends Array<ITooltipItem> {}\r\n\r\nexport interface ITooltipsState {\r\n  items: ITooltipsList,\r\n}\r\n\r\nexport const initialState: ITooltipsState = {\r\n  items: []\r\n}\r\n\r\nconst show = (state: ITooltipsState, { payload }: PayloadAction<{ keys: ITooltipKeys; coords: ICoords}>) => {\r\n  const hash = JSON.stringify(payload.keys);\r\n  const index = state.items.findIndex(item => item.hash === hash);\r\n  let zIndex = 0;\r\n  if (state.items.length)\r\n    zIndex = state.items[state.items.length - 1].zIndex + 1;\r\n  if (index === - 1)\r\n    state.items.push({\r\n      keys: payload.keys,\r\n      coords: payload.coords,\r\n      hash,\r\n      zIndex \r\n    })\r\n  else {\r\n    //state.list = moveToEnd(state.list, index);\r\n    state.items[state.items.length - 1].zIndex = zIndex;\r\n  }\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'tooltips',\r\n  initialState,\r\n  reducers: {\r\n    show,\r\n    close: (state, { payload }: PayloadAction<ITooltipKeys>) => {\r\n      const hash = JSON.stringify(payload);\r\n      state.items = state.items.filter(val => val.hash !== hash); \r\n    },\r\n    closeAll: (state) => {\r\n      state.items = [];\r\n    } \r\n  }\r\n});\r\n\r\nexport const { actions: tooltipsActions, reducer: tooltips } = slice;\r\n","import { domain, paramsToString, urlNewTopic } from \".\";\r\n\r\nexport interface IRequest {\r\n  action: \"new\",\r\n  rnd: number,\r\n  topic_text: string,\r\n  message_text: string,\r\n  target_section: string,\r\n  target_forum: string,\r\n  voting: number,\r\n  select1?: string,\r\n  select2?: string,\r\n  select3?: string,\r\n  select4?: string,\r\n  select5?: string,\r\n  select6?: string,\r\n  select7?: string,\r\n  select8?: string,\r\n  select9?: string,\r\n  select10?: string\r\n}\r\n\r\nexport const fetchNewTopic = async (params: IRequest): Promise<any> => {\r\n\r\n  await fetch(`${domain}/${urlNewTopic}`, {\r\n    method: 'POST',\r\n    body: paramsToString('', params),\r\n    mode: 'no-cors',\r\n    credentials: 'include',\r\n    headers: {\r\n      'Content-Type': 'application/x-www-form-urlencoded'\r\n    }\r\n  });\r\n}","import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit'\r\n\r\nimport { ISectionItem } from \"./sections\";\r\nimport { fetchNewTopic, IRequest } from 'src/api/newtopic';\r\nimport type { RootState } from './store'\r\n\r\nexport type NewTopicState = {\r\n  status: \"init\" | \"loading\" | \"success\" | \"error\",\r\n  section: ISectionItem,\r\n  text: string,\r\n  subject: string,\r\n  forum: string,\r\n  isVoting: boolean,\r\n  error?: string\r\n};\r\n\r\nexport const initialState: NewTopicState = {\r\n  status: \"init\",\r\n  section: null,\r\n  text: '',\r\n  subject: '',\r\n  forum: '1C',\r\n  isVoting: false\r\n}\r\n\r\nexport type postNewTopicParams = {\r\n  subject: string,\r\n  text: string,\r\n  section: number,\r\n  forum: string,\r\n  isVoting: boolean,\r\n  votingItems?: Array<string>,\r\n  onSuccess?: () => void\r\n};\r\n\r\nexport const postNewTopic = createAsyncThunk(\r\n  'newTopic/post',\r\n  async (params: postNewTopicParams) => {\r\n\r\n    let fetchParams: IRequest = {\r\n      message_text: params.text,\r\n      topic_text: params.subject,\r\n      target_section: String(params.section),\r\n      target_forum: params.forum.toLowerCase(),\r\n      action: 'new',\r\n      rnd: Math.round(Math.random() * 10000000000),\r\n      voting: params.isVoting ? 1 : 0\r\n    };\r\n\r\n    if (params.votingItems)\r\n      for (let i = 0; i < params.votingItems.length; i++) {\r\n        fetchParams[`section${i + 1}`] = params.votingItems[i];\r\n      }\r\n\r\n    await fetchNewTopic(fetchParams);\r\n    // if (params.onSuccess)\r\n    // params.onSuccess();\r\n  })\r\n\r\nexport const shouldPost = ({ newTopic }: RootState): boolean => {\r\n\r\n  if (!newTopic) return false\r\n  if (newTopic.status === \"loading\") return false\r\n\r\n  return true\r\n}\r\n\r\nexport const postNewTopicIfNeeded = (params: postNewTopicParams) => (dispatch: any, getState: any) => {\r\n  const state = getState();\r\n  if (shouldPost(state)) {\r\n    return dispatch(postNewTopic(params));\r\n  }\r\n}\r\n\r\nconst clear = (state: NewTopicState) => {\r\n  state.status = \"init\";\r\n  state.text = '';\r\n  state.subject = '';\r\n  state.forum = '';\r\n  state.isVoting = false;\r\n}\r\n\r\nconst slice = createSlice({\r\n  name: 'newTopic',\r\n  initialState,\r\n  reducers: {\r\n    clear,\r\n    changeSubject: (state, { payload }: PayloadAction<string>) => {\r\n      state.subject = payload;\r\n    },\r\n    changeText: (state, { payload }: PayloadAction<string>) => {\r\n      state.text = payload;\r\n    },\r\n    changeSection: (state, { payload }: PayloadAction<ISectionItem>) => {\r\n      state.section = payload;\r\n      state.forum = payload?.forum.toLowerCase();\r\n    },\r\n    showVoting: (state, { payload }: PayloadAction<boolean>) => {\r\n      state.isVoting = payload;\r\n    },\r\n    setError: (state, { payload }: PayloadAction<string>) => {\r\n      state.error = payload;\r\n    }\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(postNewTopic.pending, (state) => {\r\n        state.status = \"loading\";\r\n        delete state.error;\r\n      })\r\n      .addCase(postNewTopic.fulfilled, (state) => {\r\n        clear(state);\r\n        delete state.error;\r\n      })\r\n      .addCase(postNewTopic.rejected, (state, { error }) => {\r\n        state.status = \"error\";\r\n        state.error = error?.message;\r\n      })\r\n  }\r\n});\r\n\r\nexport const { actions: newTopicActions, reducer: newTopic } = slice;","import { domain, paramsToString, urlNewMessage } from \".\";\r\n\r\n// New message\r\nexport interface IRequest {\r\n  message_text: string,\r\n  action: \"new\",\r\n  topic_id: string,\r\n  rnd: number,\r\n  voting_select?: number,\r\n  as_admin?: boolean\r\n}\r\n\r\nexport const fetchNewMessage = async (params: IRequest): Promise<any> => {\r\n  \r\n  const url = urlNewMessage.replace(':id', params.topic_id);\r\n\r\n  const options: RequestInit = {\r\n    method: 'POST',\r\n    body: paramsToString('', params),\r\n    mode: 'no-cors',\r\n    credentials: 'include',\r\n    headers: {\r\n      'Accept': 'text/html,application/xhtml+xml,application/xml',\r\n      'Content-Type': 'application/x-www-form-urlencoded'  \r\n    },\r\n    redirect: 'follow'\r\n  }\r\n\r\n  const result = await fetch(`${domain}/${url}`, options);\r\n  return result;\r\n}","import { createAction } from '@reduxjs/toolkit'\r\nimport { fetchNewMessage, IRequest } from 'src/api/newmessage'\r\n\r\nexport const postNewMessageStart = createAction('POST_NEW_MESSAGE_START');\r\nexport const postNewMessageComplete = createAction('POST_NEW_MESSAGE_COMPLETE');\r\nexport const newMessageText = createAction('NEW_MESSAGE_TEXT', text => ({\r\n  payload: {\r\n    text,\r\n  }\r\n}));\r\nexport const addMessageText = createAction('ADD_MESSAGE_TEXT', text => ({\r\n  payload: {\r\n    text,\r\n  }\r\n}));\r\n\r\nexport type PostNewmessageParams = {\r\n  text: string,\r\n  topicId: string,\r\n  voting_select?: number,\r\n  onSuccess?: () => void\r\n}\r\n\r\nexport const postNewMessage = (params: PostNewmessageParams): any => async (dispatch: any) => {\r\n\r\n  dispatch(postNewMessageStart());\r\n\r\n  let fetchParams: IRequest = {\r\n    message_text: params.text,\r\n    action: \"new\",\r\n    topic_id: params.topicId,\r\n    rnd: Math.round(Math.random() * 10000000000)\r\n  };\r\n\r\n  if (params.voting_select)\r\n    fetchParams.voting_select = params.voting_select;\r\n\r\n  try {\r\n    await fetchNewMessage(fetchParams);\r\n    await dispatch(postNewMessageComplete());\r\n    if (params.onSuccess)\r\n      params.onSuccess();\r\n\r\n  } catch (err) {\r\n    console.error(\"Failed to post new message: \" + err);\r\n  }\r\n}\r\n","import { configureStore  } from '@reduxjs/toolkit'\r\nimport { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux'\r\nimport logger from 'redux-logger' // eslint-disable-line @typescript-eslint/no-unused-vars\r\n\r\nimport { topicsList } from './topics_list'\r\nimport { topic } from './topic'\r\nimport { sections } from './sections'\r\nimport { options } from './options'\r\nimport { login } from './login'\r\nimport { tooltips } from './tooltips'\r\nimport { newTopic } from './new_topic'\r\nimport newMessage from '../data/newmessage/reducer'\r\n\r\nconst reducer = {\r\n  topicsList,\r\n  topic,\r\n  sections,\r\n  options,\r\n  login,\r\n  tooltips,\r\n  newTopic,\r\n  newMessage\r\n}\r\n\r\nconst store = configureStore({\r\n  reducer,\r\n  //middleware: (getDefaultMiddleware) => getDefaultMiddleware().concat(logger),\r\n  devTools: process.env.NODE_ENV !== 'production'\r\n})\r\n\r\nexport type RootState = ReturnType<typeof store.getState>\r\nexport type AppDispatch = typeof store.dispatch\r\n\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>()\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector\r\n\r\nexport default store","import { createReducer } from '@reduxjs/toolkit'\r\nimport { initialState } from '.';\r\nimport { addMessageText, newMessageText, postNewMessageComplete, postNewMessageStart } from './actions'\r\n\r\nconst reducer = createReducer(initialState, (builder) => {\r\n  builder\r\n    .addCase(postNewMessageStart, (state) => {\r\n      state.isFetching = true;\r\n    })\r\n    .addCase(postNewMessageComplete, (state) => {\r\n      state.isFetching = false;\r\n    })  \r\n    .addCase(newMessageText, (state, action) => {\r\n      state.text = action.payload.text;\r\n    })  \r\n    .addCase(addMessageText, (state, action) => {\r\n      state.text += action.payload.text;\r\n    })  \r\n    // .addCase(clearTopicMessages, (state) => {\r\n    //   state.text = '';\r\n    // })              \r\n  })\r\n\r\nexport default reducer;","\r\nexport type INewMessageState = {\r\n  isFetching: boolean;\r\n  text: string\r\n};\r\n\r\nexport const initialState: INewMessageState = {\r\n  isFetching: false,\r\n  text: ''\r\n}","import React, { FC, ReactElement } from 'react'\r\nimport { Dropdown } from 'react-bootstrap'\r\n\r\nimport { doLogout } from 'src/store/login'\r\nimport { domain } from 'src/api'\r\n\r\nimport { useAppDispatch } from 'src/store/store'\r\n\r\ntype IProps = {\r\n  userId: number,\r\n  userName: string\r\n}\r\n\r\ntype HTMLProps = React.HTMLProps<HTMLSpanElement>\r\nconst CustomToggle = React.forwardRef<HTMLSpanElement, HTMLProps>(({ children, onClick }, ref) => (\r\n  <span\r\n    ref={ref}\r\n    style={{ cursor: \"pointer\" }}\r\n    className='link'\r\n    onClick={(e) => {\r\n      e.preventDefault();\r\n      onClick(e);\r\n    }}\r\n  >\r\n    {children}\r\n  </span>\r\n));\r\n\r\nconst LoggedUser: FC<IProps> = ({ userId, userName }): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const onLogout = (event: any) => {\r\n    event.preventDefault();\r\n    dispatch(doLogout());\r\n  }\r\n\r\n  const onMenuSelect = (eventKey: any, event: any): any => {\r\n    if (eventKey === 'exit') {\r\n      onLogout(event);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div style={{ float: \"left\" }}>\r\n      <Dropdown id=\"dropdown-custom-menu\" onSelect={onMenuSelect}>\r\n        <span>, </span>\r\n        <Dropdown.Toggle as={CustomToggle}>{userName} </Dropdown.Toggle>\r\n        <Dropdown.Menu>\r\n          <Dropdown.Item eventKey=\"profile\" href={`${domain}/users.php?id=${userId}`}></Dropdown.Item>\r\n          <Dropdown.Item eventKey=\"myTopics\" href={`#/index.php?user_id=${userId}`}> </Dropdown.Item>\r\n          <Dropdown.Divider />\r\n          <Dropdown.Item eventKey=\"options\" href={`#/options.php`}></Dropdown.Item>\r\n          <Dropdown.Divider />\r\n          <Dropdown.Item eventKey=\"exit\"></Dropdown.Item>\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LoggedUser;","import { FormEvent, FC, ReactElement, useState } from 'react'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\nimport { FormControl, Button } from 'react-bootstrap'\r\n\r\nimport { doLoginIfNeeded } from 'src/store/login'\r\nimport { RootState, useAppDispatch } from 'src/store/store'\r\n\r\nconst mapState = (state: RootState) => {\r\n  return state.login;\r\n}\r\n\r\nconst connector = connect(mapState);\r\nconst LoginForm: FC<ConnectedProps<typeof connector>> = (props): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  const onLogin = (event: FormEvent) => {\r\n    event.preventDefault();\r\n    dispatch(doLoginIfNeeded(username, password));\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <form name=\"enterform\" className=\"flex-row\" style={{ flexWrap: \"wrap\" }}>\r\n        <FormControl\r\n          id=\"username\"\r\n          type=\"text\"\r\n          placeholder=\"\"\r\n          value={username}\r\n          onChange={e => setUsername(e.target.value)}\r\n          size=\"sm\"\r\n          className='input'\r\n          style={{ marginRight: \"5px\", flex: \"0 1 300px\" }}\r\n        />\r\n        <FormControl\r\n          id=\"password\"\r\n          type=\"password\"\r\n          placeholder=\"\"\r\n          maxLength={20}\r\n          autoComplete=\"off\"\r\n          value={password}\r\n          onChange={e => setPassword(e.target.value)}\r\n          size=\"sm\"\r\n          className='input'\r\n          style={{ marginRight: \"5px\", flex: \"0 1 300px\" }}\r\n        />\r\n        <Button\r\n          size=\"sm\"\r\n          variant=\"light\"\r\n          className='button'\r\n          onClick={onLogin}\r\n        ></Button>\r\n      </form>\r\n      <p style={{ margin: \"0px\" }}>    <a href=\"https://forum.mista.ru/\">forum.mista.ru</a></p>\r\n      <a rel=\"nofollow\" href=\"https://forum.mista.ru/user_registration.php\"></a>\r\n      <span style={{ margin: \"5px\" }}>|</span>\r\n      <a rel=\"nofollow\" href=\"https://forum.mista.ru/remember_password.php\"> ?</a>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default connector(LoginForm);","import React, { FC, ReactElement } from 'react'\r\n\r\nimport './error.css'\r\n\r\ntype IProps = {\r\n  text: string\r\n}\r\n\r\nconst ErrorElem: FC<IProps> = ({ text }): ReactElement | null => {\r\n  if (!text)\r\n    return null;\r\n\r\n  return (\r\n    <div className=\"error\" dangerouslySetInnerHTML={{ __html: text }}></div>\r\n  )\r\n}\r\n\r\nexport default ErrorElem;","import React, { FC, ReactElement, useEffect } from 'react'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\nimport LoggedUser from './logged_user'\r\nimport LoginForm from './login_form'\r\nimport ErrorElem from '../common/error'\r\n\r\nimport { checkLoginIfNeeded } from 'src/store/login'\r\nimport { RootState, useAppDispatch } from 'src/store/store'\r\n\r\nconst mapState = (state: RootState) => {\r\n  return state.login;\r\n}\r\n\r\nconst connector = connect(mapState);\r\nconst Login: FC<ConnectedProps<typeof connector>> = ({ logged, userId, userName, error }): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(checkLoginIfNeeded());\r\n  }, [dispatch]);\r\n\r\n  let elem: ReactElement;\r\n  if (logged === true)\r\n    elem = <LoggedUser userId={userId} userName={userName} />\r\n  else if (logged === false)\r\n    elem = <LoginForm />\r\n  else\r\n    elem = null;\r\n\r\n  return (\r\n    <>\r\n      {elem}\r\n      {error && <ErrorElem text={error} />}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default connector(Login);","import React, { FC, ReactElement, useEffect } from 'react'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\nimport Form from 'react-bootstrap/Form'\r\n\r\nimport { getSectionsIfNeeded, ISectionItem } from 'src/store/sections'\r\nimport { RootState, useAppDispatch } from 'src/store/store'\r\n\r\ntype IProps = {\r\n  id: string,\r\n  defaultValue: string,\r\n  selected?: string,\r\n  style?: {},\r\n  size?: 'sm' | 'lg',\r\n  onChange: (e: any, value: ISectionItem) => void\r\n}\r\n\r\nconst mapState = (state: RootState) => {\r\n\r\n  const { items, tree } = state.sections;\r\n\r\n  return {\r\n    items,\r\n    tree\r\n  }\r\n}\r\n\r\nconst connector = connect(mapState);\r\nconst Sections: FC<ConnectedProps<typeof connector> & IProps> = (props): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(getSectionsIfNeeded());\r\n  }, [dispatch]);\r\n\r\n  const onSelect: (e: React.ChangeEvent<HTMLElement>) => void = (e: any) => {\r\n\r\n    const { items, onChange } = props;\r\n\r\n    if (onChange) {\r\n      const code = e.currentTarget.value;\r\n      const arr = items.filter(item => item.code === code);\r\n      if (arr.length > 0)\r\n        onChange(e, arr[0]);\r\n      else\r\n        onChange(e, null);\r\n    }\r\n  }\r\n\r\n  const { id, tree, defaultValue, selected, style, size } = props;\r\n\r\n  let sectionsElem = [];\r\n  for (let forum in tree) {\r\n\r\n    let group =\r\n      <optgroup key={forum} label={forum}>\r\n        {tree[forum].map((item) => (\r\n          <option key={item.id} value={item.code}>\r\n            {item.name}\r\n          </option>\r\n        ))}\r\n      </optgroup>\r\n\r\n    sectionsElem.push(group);\r\n  }\r\n\r\n  return (\r\n    <Form.Select\r\n      onChange={onSelect}\r\n      value={selected}\r\n      style={style}\r\n      className='input'\r\n      size={size}\r\n      id={id}\r\n    >\r\n      <option value=\"\">{defaultValue}</option>\r\n      {sectionsElem}\r\n    </Form.Select>\r\n  )\r\n}\r\n\r\nexport { Sections };\r\nexport default connector(Sections);","import React, { ReactElement, useEffect } from 'react'\r\nimport { useLocation, useNavigate } from 'react-router-dom'\r\nimport { useDispatch } from 'react-redux'\r\nimport queryString from 'query-string'\r\n\r\nimport Login from '../../components/login'\r\nimport Sections from './sections'\r\nimport { ISectionItem, getSectionsIfNeeded } from 'src/store/sections'\r\n\r\nconst Header = (): ReactElement => {\r\n\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const params = queryString.parse(location.search);\r\n\r\n  useEffect(() => {\r\n    dispatch(getSectionsIfNeeded());\r\n  }, [dispatch]);  \r\n\r\n  const onSectionChange = (e, value: ISectionItem) => {\r\n    if (value)\r\n      navigate(`/index.php?section=${value.code}`);\r\n    else\r\n      navigate(`/`);\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex-row\">\r\n      <div className=\"header-left\">\r\n        <Login />\r\n      </div>\r\n      <div className=\"header-right\">\r\n        <Sections\r\n          id=\"sect\"\r\n          defaultValue=\"-- --\"\r\n          selected={String(params.section) || \"\"}\r\n          onChange={onSectionChange}\r\n          size=\"sm\"\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default Header;","import React, { FC, ReactElement } from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { getMaxPage } from 'src/utils'\r\n\r\ntype IProps = {\r\n  count: number,\r\n  topicId: number\r\n}\r\n\r\nconst Pages: FC<IProps> = ({ count, topicId }): ReactElement => {\r\n\r\n  let pages = [];\r\n  if (count > 100) {\r\n    let maxPage = getMaxPage(count);\r\n    for (let i = 1; i <= maxPage; i++) {\r\n      let href = `/topic.php?id=${topicId}&page=${i}`;\r\n      let text: string;\r\n      if (i > 3 && i < maxPage)\r\n        text = '';\r\n      else\r\n        text = String(i);\r\n      pages.push(<Link key={i} className=\"agh\" style={{ margin: \"3px\" }} to={href}>{text}</Link>);\r\n    }\r\n  }\r\n\r\n  if (count > 20) {\r\n    let href = `/topic.php?id=${topicId}&page=last20#F`;\r\n    pages.push(<Link key=\"last20\" className=\"agh\" style={{ margin: \"3px\" }} to={href}></Link>);\r\n  }\r\n\r\n  return (\r\n    <span className=\"topic-pages\">\r\n      {pages}\r\n    </span>\r\n  )\r\n}\r\n\r\nexport default Pages;","import React, { FC, ReactElement } from 'react'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\nimport classNames from 'classnames'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport Pages from './pages';\r\nimport { ITopicsListItem } from 'src/store/topics_list';\r\nimport { RootState } from 'src/store/store';\r\n\r\ntype IProps = {\r\n  data: ITopicsListItem\r\n};\r\n\r\nconst mapState = (state: RootState) => {\r\n  return {\r\n    login: state.login\r\n  }\r\n}\r\n\r\nconst connector = connect(mapState);\r\nconst TopicNameCell: FC<ConnectedProps<typeof connector> & IProps> = ({ data, login }): ReactElement => {\r\n\r\n  let href = `/topic.php?id=${data.id}`;\r\n  let classes = classNames('agb', 'mr5', {\r\n    'bold': data.count >= 100,\r\n    'mytopics': data.author === login.userName,\r\n    'pinned': data.pinned\r\n  });\r\n\r\n  let isVoting;\r\n  if (data.isVoting) {\r\n    isVoting = <span className=\"agh separator\">[]</span>\r\n  }\r\n\r\n  let sectionHref = `/index.php?section=${data.sectionCode}`;\r\n  let section;\r\n\r\n  if (data.section) {\r\n    section = (\r\n      <span className=\"topic-section\">\r\n        <span className=\"agh\" style={{ margin: \"0px 5px\" }}>/</span>\r\n        <Link key=\"1\" rel=\"nofollow\" className=\"agh\" to={sectionHref} >{data.section}</Link>\r\n      </span>\r\n    )\r\n  }\r\n\r\n  let closed: ReactElement;\r\n  let down: ReactElement;\r\n  let text = data.text;\r\n  if (data.closed)\r\n    closed = <span className=\"agh\"></span>\r\n\r\n  if (data.down)\r\n    down = <span className=\"agh\"></span>\r\n\r\n  if (data.sectionCode === 'job' && text.substring(0, 3) !== 'JOB')\r\n    text = 'JOB: ' + text;\r\n\r\n  else if (data.forum === 'life' && text.substring(0, 3) !== 'OFF')\r\n    text = 'OFF: ' + text;\r\n\r\n  else if (data.sectionCode === 'v7' && text.substring(0, 2) !== 'v7')\r\n    text = 'v7: ' + text;\r\n\r\n  return (\r\n    <div className=\"cell-title\">\r\n      {data.pinned && <i className=\"fa fa-thumb-tack agh\" aria-hidden=\"true\" style={{marginRight: \"5px\"}}></i>}\r\n      <Link to={href} className={classes} dangerouslySetInnerHTML={{ __html: text }} style={{ overflowWrap: \"anywhere\" }}></Link>\r\n      {isVoting}\r\n      <Pages count={data.count} topicId={data.id} />\r\n      {closed}\r\n      {down}\r\n      {section}\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default connector(TopicNameCell);","import React, { FC, ReactElement } from 'react'\r\n\r\nimport { useAppDispatch } from 'src/store/store';\r\nimport { topicsListActions } from 'src/store/topics_list';\r\n\r\ntype IProps = {\r\n  topicId: number,\r\n  expanded: boolean\r\n};\r\n\r\nconst PreviewLink: FC<IProps> = ({ topicId, expanded }): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const onClick = () => {\r\n    dispatch(topicsListActions.togglePreview({topicId, msgNumber: 0}));\r\n  };\r\n\r\n  const text = expanded \r\n    ? <i className=\"fa fa-minus-square-o agh\" aria-hidden=\"true\"></i> \r\n    : <i className=\"fa fa-plus-square-o agh\" aria-hidden=\"true\"></i>;\r\n  return (\r\n    <div className=\"cell-preview-link\" onClick={onClick}>\r\n      <span>{text}</span>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default PreviewLink;","import { FC, ReactElement, useCallback, useEffect, useState } from 'react'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport dateFormat from 'dateformat'\r\n\r\nimport TopicNameCell from './topic_name_cell';\r\nimport PreviewLink from './preview_link'\r\n\r\nimport { today } from 'src/utils'\r\nimport { RootState, useAppDispatch } from 'src/store/store';\r\nimport { ITopicsListItem, topicsListActions } from 'src/store/topics_list';\r\nimport { fetchTopicMessage } from 'src/api/topicMessages';\r\n\r\nconst mapState = (state: RootState) => {\r\n\r\n  return {\r\n    login: state.login\r\n  }\r\n}\r\nconst connector = connect(mapState);\r\n\r\ntype IProps = {\r\n  data: ITopicsListItem,\r\n  updated: number,\r\n  topicId: number\r\n}\r\n\r\nconst formatTime = (time: number): string => {\r\n  \r\n  if (time === 2147483648000) return '';\r\n  \r\n  let date = new Date(time);\r\n  if (today(date)) {\r\n    return dateFormat(time, 'HH:MM')\r\n  } else {\r\n    return dateFormat(time, 'dd.mm.yy');\r\n  }  \r\n}\r\n\r\nconst Row: FC<ConnectedProps<typeof connector> & IProps> = ({ data, updated, topicId }): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const [time, setTime] = useState(updated);\r\n  const updateTime = useCallback(async () => {\r\n    const msg = await fetchTopicMessage(topicId, data.count);\r\n    setTime(msg.time);\r\n  }, [topicId, data.count])\r\n  \r\n  useEffect(() => {\r\n    if (data.pinned)\r\n      updateTime();\r\n  }, [data.pinned, updateTime])\r\n  \r\n  useEffect(() => {\r\n    setTime(updated);\r\n  }, [updated])\r\n\r\n  const countOnClick = useCallback(() => {\r\n    dispatch(topicsListActions.togglePreview({topicId, msgNumber: data.count}));\r\n  }, [dispatch, topicId, data.count]);\r\n  \r\n  return (\r\n    <div className=\"topics-list-row\">\r\n      <div className=\"cell-forum\">\r\n        {data.forum}\r\n      </div>\r\n      <div className=\"cell-section\">\r\n        {data.section}\r\n      </div>\r\n      <div className=\"cell-answ\" onClick={countOnClick}>\r\n        <i className=\"fa fa-comments-o\" aria-hidden=\"true\" style={{marginRight: \"3px\"}}></i>\r\n        <span>{data.count}</span>\r\n      </div>\r\n      <PreviewLink topicId={data.id} expanded={data.showPreview} />\r\n      <TopicNameCell data={data}/>\r\n      <div className=\"cell-author\">\r\n        <i aria-hidden=\"true\" className=\"fa fa-user-circle\" style={{marginRight: \"3px\"}}></i>\r\n        {data.author}\r\n      </div>\r\n      <div className=\"cell-lastuser\">\r\n        <div style={{ display: \"flex\" }}>\r\n          <span className=\"cell-lastuser-time\">{formatTime(time)}</span>\r\n          <span className=\"cell-lastuser-user\">{data.lastUser}</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"cell-last20\">\r\n        <Link to={`/topic.php?id=${data.id}&page=last20#F`} style={{ color: \"inherit\", display: \"block\", width: \"100%\", textAlign: \"center\" }}>\r\n          <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default connector(Row);","import { FC, ReactElement } from 'react'\r\nimport { Pagination } from 'react-bootstrap'\r\nimport { useLocation } from 'react-router-dom'\r\n\r\nimport './pages.css'\r\n\r\ntype IProps = {\r\n  maxPage: number,\r\n  last20?: boolean\r\n}\r\n\r\nconst Pages: FC<IProps> = ({ maxPage, last20 }): ReactElement => {\r\n\r\n  const location = useLocation();\r\n  let pathName = location.pathname;\r\n  if (pathName === '/')\r\n    pathName = '/index.php'\r\n\r\n  const locationParams = new URLSearchParams(location.search);\r\n\r\n  let currentPage: number | string;\r\n  const page = locationParams.get('page');\r\n  if (!page)\r\n    currentPage = 1;\r\n  else if (page === \"last20\")\r\n    currentPage = \"last20\";\r\n  else\r\n    currentPage = parseInt(page, 10) || 1;\r\n\r\n  let pages = [];\r\n  for (let i = 1; i <= maxPage; i++) {\r\n    locationParams.set('page', String(i));\r\n    let href = '#' + pathName + '?' + locationParams.toString();\r\n\r\n    pages.push(\r\n      <Pagination.Item active={currentPage === i} key={i} href={href}>\r\n        {i}\r\n      </Pagination.Item>);\r\n  }\r\n\r\n  if (last20 === true) {\r\n    locationParams.set(\"page\", \"last20\");\r\n    let href = '#' + pathName + '?' + locationParams.toString();\r\n    pages.push(<Pagination.Item active={currentPage === \"last20\"} key=\"last20\" href={href}></Pagination.Item>);\r\n  }\r\n\r\n  return (\r\n    <Pagination style={{ margin: \"0px\" }}>\r\n      {pages}\r\n    </Pagination>\r\n  )\r\n\r\n}\r\n\r\nexport default Pages;","import React, { FC, ReactElement, useRef, RefObject, useCallback } from 'react'\r\nimport { FormControl, Button, ButtonGroup, Form } from 'react-bootstrap'\r\n\r\nimport './text_editor.css'\r\n\r\ntype IProps = {\r\n  placeholder: string,\r\n  showVoting?: boolean,\r\n  isVoting?: boolean,\r\n  text: string,\r\n  isFetching: boolean,\r\n  formRef?: RefObject<HTMLFormElement>,\r\n  onChange?: (text: string) => void,\r\n  onShowVotingChange?: (show: boolean) => void\r\n}\r\n\r\nconst TextEditor: FC<IProps> = ({ placeholder, showVoting, isVoting, isFetching, text, formRef, onChange, onShowVotingChange }): ReactElement => {\r\n\r\n  const textAreaRef = useRef() as React.MutableRefObject<HTMLTextAreaElement>;\r\n\r\n  const onButtonCode1c = (e: React.MouseEvent<HTMLButtonElement>) => {\r\n\r\n    e.preventDefault();\r\n\r\n    const openTag = '[1C]\\n';\r\n    const closeTag = '\\n[/1C]';\r\n\r\n    const textAreaNode = textAreaRef.current;\r\n\r\n    const start = textAreaNode.selectionStart;\r\n    const end = textAreaNode.selectionEnd;\r\n\r\n    const oldText = textAreaNode.value;\r\n    const len = oldText.length;\r\n    const selectedText = oldText.substring(start, end);\r\n    const replacement = openTag + selectedText + closeTag;\r\n    let newText = oldText.substring(0, start) + replacement + oldText.substring(end, len);\r\n\r\n    if (onChange) onChange(newText);\r\n\r\n  }\r\n\r\n  const handleShowVotingChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (onShowVotingChange) onShowVotingChange(e.currentTarget.checked);\r\n  }, [onShowVotingChange]);\r\n\r\n  const handleChange = useCallback((e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n    if (onChange) onChange(e.currentTarget.value);\r\n  }, [onChange]);\r\n\r\n  const handleKeyUp = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\r\n\r\n    if (!formRef) return;\r\n    if (!formRef.current) return;\r\n\r\n    if (e.key === 'Enter' && e.ctrlKey) {\r\n      formRef.current.dispatchEvent(new Event(\"submit\", { cancelable: true, bubbles: true }));\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <FormControl\r\n        as=\"textarea\"\r\n        placeholder={placeholder}\r\n        cols={70} rows={3}\r\n        value={text}\r\n        onChange={handleChange}\r\n        onKeyUp={handleKeyUp}\r\n        ref={textAreaRef}\r\n        className=\"text-editor input\"\r\n        data-lpignore={true} \r\n      />\r\n      <div className=\"flex-row\">\r\n        <ButtonGroup>\r\n          <Button\r\n            size=\"sm\"\r\n            variant=\"light\"\r\n            onClick={onButtonCode1c}\r\n            style={{ marginRight: \"5px\" }}\r\n            className='button'\r\n          > 1</Button>\r\n          <Button\r\n            size=\"sm\"\r\n            variant=\"light\"\r\n            disabled={isFetching}\r\n            type=\"submit\"\r\n            className='button'\r\n          >\r\n            {isFetching ? '' : ''}\r\n          </Button>\r\n        </ButtonGroup>\r\n        {showVoting &&\r\n          <Form.Check\r\n            id=\"show_voting\"\r\n            type=\"checkbox\"\r\n            checked={isVoting}\r\n            onChange={handleShowVotingChange}\r\n            label=\"\"\r\n            style={{ margin: \"auto 0px auto auto\" }} />\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default TextEditor;","import React, { FC, ReactElement, useCallback, useState, useRef } from 'react'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\nimport Form from 'react-bootstrap/Form'\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\nimport { FormGroup } from 'react-bootstrap'\r\n\r\nimport { RootState, useAppDispatch } from 'src/store/store'\r\n\r\nimport Sections from './sections'\r\nimport TextEditor from 'src/components/common/text_editor'\r\nimport ErrorElem from 'src/components/common/error'\r\n\r\nimport './new_topic.css'\r\nimport { ISectionItem } from 'src/store/sections'\r\nimport { newTopicActions, postNewTopicIfNeeded } from 'src/store/new_topic'\r\n\r\ntype IProps = {\r\n  onSubmitSuccess?: any\r\n};\r\n\r\nconst mapState = (state: RootState) => {\r\n\r\n  return {\r\n    sections: state.sections,\r\n    newTopic: state.newTopic\r\n  }\r\n}\r\n\r\nconst connector = connect(mapState);\r\nconst NewTopic: FC<ConnectedProps<typeof connector> & IProps> = ({ sections, newTopic, onSubmitSuccess }): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n  const [currentSection, setSection] = useState(null);\r\n  const [votes, setVotes] = useState(Array(10).fill(\"\"));\r\n\r\n  const formRef = useRef(null);\r\n\r\n  const onSectionChange = (e: any, section: ISectionItem) => {\r\n    setSection(section);\r\n    dispatch(newTopicActions.changeSection(section));\r\n  }\r\n\r\n  const onVoteTextChange = (i: number) => (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    let votesCopy = votes.slice();\r\n    votesCopy[i] = e.target.value;\r\n    setVotes(votesCopy);\r\n  }\r\n\r\n  const onSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n\r\n    e.preventDefault();\r\n\r\n    if (!currentSection) {\r\n      dispatch(newTopicActions.setError('  '));\r\n      return;\r\n    }\r\n\r\n    let subject = newTopic.subject;\r\n    if (!subject) {\r\n      dispatch(newTopicActions.setError('  '));\r\n      return;\r\n    }\r\n\r\n    if (!newTopic.text) {\r\n      dispatch(newTopicActions.setError('  '));\r\n      return;\r\n\r\n    }\r\n\r\n    let params = {\r\n      subject,\r\n      text: newTopic.text,\r\n      section: currentSection.id,\r\n      forum: currentSection.forum,\r\n      isVoting: newTopic.isVoting,\r\n      votingItems: [],\r\n      onSuccess: this_onSubmitSuccess\r\n    };\r\n\r\n    if (newTopic.isVoting) {\r\n      params.votingItems = [];\r\n      for (let i = 1; i <= 10; i++) {\r\n        let val = votes[i - 1];\r\n        if (val) {\r\n          params.votingItems.push(val);\r\n        }\r\n      }\r\n    }\r\n\r\n    dispatch(postNewTopicIfNeeded(params));\r\n  }\r\n\r\n  const onSubjectChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    dispatch(newTopicActions.changeSubject(e.target.value));\r\n  }, [dispatch]);\r\n  \r\n  const onTextChange = useCallback((text: string) => {\r\n    dispatch(newTopicActions.changeText(text));\r\n  }, [dispatch]);\r\n\r\n  const onShowVotingChange = useCallback((show: boolean) => {\r\n    dispatch(newTopicActions.showVoting(show));\r\n  }, [dispatch]);\r\n\r\n  const this_onSubmitSuccess = () => {\r\n\r\n    dispatch(newTopicActions.clear());\r\n\r\n    if (onSubmitSuccess) {\r\n      onSubmitSuccess();\r\n    }\r\n  }\r\n  let groupsElem = [];\r\n  for (let forum in sections.tree) {\r\n    groupsElem.push(<option key={forum} value={forum.toLowerCase()}>{forum}</option>);\r\n  }\r\n\r\n  let votingOptions = [];\r\n\r\n  if (newTopic.isVoting) {\r\n    votingOptions.push(<div key=\"p\">:</div>);\r\n    for (let i = 1; i <= 10; i++) {\r\n      votingOptions.push(\r\n        <InputGroup key={i} size=\"sm\" style={{ marginBottom: \"3px\", width: \"100%\" }}>\r\n          <InputGroup.Text\r\n            style={{ width: \"40px\" }}\r\n            className='input'\r\n          >\r\n            {`${i}.`}\r\n          </InputGroup.Text>\r\n          <Form.Control\r\n            type=\"text\"\r\n            maxLength={50}\r\n            className='input'\r\n            value={votes[i - 1]}\r\n            onChange={onVoteTextChange(i - 1)}\r\n          />\r\n        </InputGroup>\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form className=\"new-topic-container\" onSubmit={onSubmit} ref={formRef}>\r\n      <div id=\"newtopic_form\" className=\"new-topic-text\">\r\n        <div><b> :</b></div>\r\n        {newTopic.error && <ErrorElem text={newTopic.error} />}\r\n        <div className=\"flex-row\" style={{ marginBottom: \"3px\" }}>\r\n          <Form.Select\r\n            disabled\r\n            size=\"sm\"\r\n            value={newTopic.forum}\r\n            style={{ flex: \"0 1 90px\" }}\r\n            className='input'\r\n          >\r\n            {groupsElem}\r\n          </Form.Select>\r\n          <Sections\r\n            id=\"target_section\"\r\n            defaultValue=\"\"\r\n            selected={newTopic.section?.code}\r\n            size=\"sm\"\r\n            style={{ flex: \"1 1 auto\" }}\r\n            onChange={onSectionChange}\r\n          />\r\n        </div>\r\n        <Form.Control\r\n          type=\"text\"\r\n          size=\"sm\"\r\n          value={newTopic.subject}\r\n          onChange={onSubjectChange}\r\n          style={{ marginBottom: \"3px\" }}\r\n          className='input'\r\n          placeholder=\"\"\r\n          maxLength={90}\r\n        />\r\n        <TextEditor\r\n          placeholder=\"\"\r\n          showVoting={true}\r\n          isVoting={newTopic.isVoting}\r\n          text={newTopic.text}\r\n          isFetching={newTopic.status === \"loading\"}\r\n          onChange={onTextChange}\r\n          onShowVotingChange={onShowVotingChange}\r\n          formRef={formRef}\r\n        />\r\n      </div>\r\n      <FormGroup className=\"new-topic-voting\">\r\n        {votingOptions}\r\n      </FormGroup>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default connector(NewTopic);","import { FC, ReactElement } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { useAppDispatch } from 'src/store/store'\r\nimport { topicsListActions } from 'src/store/topics_list'\r\n\r\nimport './topic_preview.css'\r\n\r\ntype IProps = {\r\n  topicId: number,\r\n  onFirst: any,\r\n  onLast: any,\r\n  onPrev: any,\r\n  onNext: any\r\n}\r\n\r\nconst PreviewButtons: FC<IProps> = ({ topicId, onFirst, onPrev, onNext, onLast }): ReactElement => {\r\n \r\n  const dispatch = useAppDispatch()\r\n  const closePreview = () => {\r\n    dispatch(topicsListActions.togglePreview({topicId, msgNumber: 0}));\r\n  }\r\n\r\n  return (\r\n    <div className=\"topic-preview-rewind\">\r\n      <div className=\"topic-preview-button flex-small\" onClick={onFirst} title=\" \">\r\n        <i className=\"fa fa-angle-double-left\" aria-hidden=\"true\"></i>\r\n      </div>\r\n      <div className=\"topic-preview-button flex-large\" onClick={onPrev} title=\" \">\r\n        <i className=\"fa fa-angle-left\" aria-hidden=\"true\"></i>\r\n      </div>\r\n      <div className=\"topic-preview-button flex-large\" onClick={onNext} title=\" \">\r\n        <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i>\r\n      </div>\r\n      <div className=\"topic-preview-button flex-small\" onClick={onLast} title=\" \"> \r\n        <i className=\"fa fa-angle-double-right\" aria-hidden=\"true\"></i>\r\n      </div>\r\n      <div className=\"topic-preview-button close-preview\" onClick={closePreview}> \r\n        <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i>\r\n        <i className=\"fa fa-angle-left\" aria-hidden=\"true\" style={{marginLeft: \"-2px\"}}></i>\r\n      </div>\r\n      <div className=\"topic-preview-button edit-preview\"> \r\n        <Link to={`/topic.php?id=${topicId}&page=last20#F`}>\r\n          <i className=\"fa fa-pencil\" aria-hidden=\"true\" style={{color:\"var(--font-color)\"}}></i>\r\n        </Link>  \r\n      </div>      \r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default PreviewButtons;","\r\nfunction highlight(text: string): string {\r\n\r\n  const keywords = new Set(\r\n    (\"if||then||elsif||else||endif|\" +\r\n    \"|do||for||to||each||in||while||enddo|\" +\r\n    \"|procedure||endprocedure||function||endfunction\" +\r\n    \"||var||export||goto||and||or||not|\" +\r\n    \"|val||break||continue||return||try||except|\" +\r\n    \"|endtry||raise||false||true|\" +\r\n    \"|undefined||null|new||execute|\" +\r\n    \"||async||wait\")\r\n      .split('|')\r\n  );\r\n\r\n  const  = new Set(\"():;.,=+-*<>?[]%/\".split(''));\r\n  const  = \"<span class=\";\r\n  const  = \"</span>\";\r\n\r\n  const  = \"bg>\";\r\n  const  = \"num>\";\r\n  const  = \"str>\";\r\n  //const  = \"par>\";\r\n  const  = \"com>\";\r\n  const  = \"sp>\";\r\n  const  = \"pr>\";\r\n  const 1 = \"key>\";\r\n\r\n\r\n  let : string;\r\n  let : boolean;\r\n  let : string | undefined;\r\n\r\n  let  = false;\r\n  let  = \"\";\r\n\r\n  function (: string) {\r\n    return .trim() === '';\r\n  }\r\n\r\n  function (: string, : number, : number) {\r\n    return .substring( - 1,  -1 + );\r\n  }\r\n\r\n  function (: string, : number) {\r\n    return .substring(.length - );\r\n  }\r\n\r\n  function isKeyword(token: string) {\r\n    return keywords.has(token.toLowerCase().trim());\r\n  }\r\n\r\n  function 1(: string, : string) {\r\n\r\n    if ( === \" \" ||  === ) {\r\n       =  + ;\r\n    } else {\r\n      if () {\r\n         =  + ;\r\n         = false;\r\n      };\r\n\r\n       =  +  +  + ;\r\n       = true;\r\n       = ;\r\n    };\r\n  }\r\n\r\n  function (: string) {\r\n\r\n    //  https://infostart.ru/profile/34707/public/\r\n    let  = false;\r\n    let  = false;\r\n    let  = 1;\r\n    let  = true;\r\n    //  8    4  \r\n\r\n    //      \r\n    let  = 1;\r\n    for ( = 1;  <= .length; ++) {\r\n\r\n      let  = .charAt( - 1);\r\n      if () {\r\n\r\n        //    \"\"\r\n        if ( === '\"') {\r\n          //    -   \r\n          1((, ,  -  + 1), );\r\n           = false;\r\n           = \"\";\r\n           = true;\r\n        } else {\r\n           =  + ;\r\n        };\r\n\r\n      } else if () {\r\n\r\n        //    \"\" \r\n        if ( === \"'\") {\r\n          //    -   \r\n          1((, ,  -  + 1), );\r\n           = false;\r\n           = \"\";\r\n           = true;\r\n        } else {\r\n           =  + ;\r\n        };\r\n\r\n      } else if ( === \" \") {\r\n        //       \r\n        if (!()) {\r\n          //   , \r\n          //  -  ...\r\n          if () {\r\n            1( + \" \", );\r\n             = false;\r\n\r\n          } else if (isKeyword(.trim())) {\r\n            1( + \" \", 1);\r\n\r\n          } else if (!isNaN(parseInt(, 10))) {\r\n            1( + \" \", );\r\n\r\n          } else {\r\n            1( + \" \", );\r\n          };\r\n           = \"\";\r\n        } else {\r\n           =  + \" \";\r\n        };\r\n         = true;\r\n\r\n      } else if (.has()) {\r\n\r\n        //     \r\n        if (!()) {\r\n          //        \r\n          //     ,     \".\"\r\n          if () {\r\n\r\n            1(, );\r\n             = false;\r\n             = ( !== \".\");\r\n\r\n          } else if ( && isKeyword()) {\r\n            1(, 1);\r\n             = ( !== \".\");\r\n\r\n          } else {\r\n            //    -  \r\n            if (!isNaN(parseInt(, 10))) {\r\n              1(, );\r\n\r\n            } else {\r\n              1(, );\r\n            };\r\n             = ( !== \".\");\r\n          };\r\n           = \"\";\r\n        };\r\n        //    \r\n        if ( === \".\" &&  === ) {\r\n          //  \r\n          1(, );\r\n          continue;\r\n\r\n        } else if ( === \"=\" && (,  - 1, 1) === \"<\") {\r\n          //  \"  \" -    \r\n           = undefined;\r\n\r\n        } else if ( === \"/\" && (,  + 1, 1) === \"/\") {\r\n          //   \r\n          1((, .length -  + 1), );\r\n          return;\r\n        };\r\n        1(, );\r\n\r\n      } else if ( === '\"' ||  === \"|\") {\r\n\r\n        //    \"\"\r\n        //  ,        \r\n        if (()) {\r\n           = ;\r\n           = true;\r\n        } else {\r\n          //  \r\n          1( + , );\r\n           = \"\";\r\n        };\r\n         = true;\r\n\r\n      } else if ( === \"'\") {\r\n\r\n        //    \"\" \r\n        //  ,        \r\n        if (()) {\r\n           = ;\r\n           = true;\r\n        } else {\r\n          //  \r\n          1( + , );\r\n           = \"\";\r\n        };\r\n         = true;\r\n\r\n      } else if ( === \"#\" || ( === \"&\" && ())) {\r\n\r\n        //   \r\n        1((, .length -  + 1), );\r\n         = .length;\r\n        break;\r\n\r\n      } else if ( === \"~\") {\r\n         =  + ;\r\n         = true;\r\n      } else {\r\n        //  \r\n         =  + ;\r\n      }\r\n    }\r\n\r\n    if () {\r\n\r\n      //  \r\n      1((, ,  -  + 1), );\r\n\r\n    } else if () {\r\n\r\n      //  \r\n      1((, ,  -  + 1), );\r\n\r\n    } else if (!()) {\r\n\r\n      //     \r\n      if (isKeyword()) {\r\n        1(, 1);\r\n\r\n      } else if (!isNaN(parseInt(, 10))) {\r\n        1(, );\r\n\r\n      } else {\r\n        1(, );\r\n      };\r\n\r\n    };\r\n\r\n  }\r\n\r\n   = false;\r\n   = \"\";\r\n   = false;\r\n   = undefined;\r\n   = '';\r\n\r\n  let result = [];\r\n\r\n  for (let  of text.split('\\n')) {\r\n\r\n    if (()) {\r\n      result.push('');\r\n      continue;\r\n    }\r\n\r\n     = '';\r\n    ();\r\n    if ( && !) {\r\n       += '</span>';\r\n       = false;\r\n       = '';\r\n       = '';\r\n    } else if (!) {\r\n       = '';\r\n       = '';\r\n    }\r\n\r\n    result.push();\r\n  }\r\n\r\n  return result.join('\\n');\r\n}\r\n\r\nexport default highlight;","import React, { FC, ReactElement, useCallback, useEffect, useRef } from 'react'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\n\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { topicActions, getTopicIfNeeded, getNewMessagesIfNeeded } from 'src/store/topic'\r\nimport { newMessageText } from 'src/data/newmessage/actions'\r\n\r\nimport Error from 'src/components/common/error'\r\nimport Pages from 'src/components/common/pages'\r\nimport Header from './header'\r\nimport TopicInfo from './topic_info'\r\nimport Row from '../../pages/topic/row'\r\nimport Footer from './footer'\r\nimport NewMessage from './new_message';\r\nimport { getMaxPage, extractTextFromHTML } from 'src/utils';\r\nimport { RootState, useAppDispatch } from 'src/store/store';\r\n\r\nimport './topic.css'\r\n\r\nvar scrolledToHash: boolean;\r\n\r\nconst mapState = (state: RootState) => {\r\n\r\n  const {\r\n    status,\r\n    lastUpdated,\r\n    info,\r\n    item0,\r\n    items,\r\n    error\r\n  } = state.topic;\r\n\r\n  return {\r\n    login: state.login,\r\n    info,\r\n    item0,\r\n    items,\r\n    status,\r\n    lastUpdated,\r\n    error,\r\n    options: state.options.items\r\n  }\r\n}\r\n\r\nconst getPageNumber = (locationPage: string | string[]): number | \"last20\" => {\r\n  if (!locationPage) return 1;\r\n  if (locationPage === \"last20\") return \"last20\";\r\n  if (isNaN(+locationPage)) return 1;\r\n  return +locationPage;\r\n}\r\n\r\nconst connector = connect(mapState);\r\nconst Topic: FC<ConnectedProps<typeof connector>> = ({ login, items, item0, info, error }): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch()\r\n  const location = useLocation();\r\n\r\n  let locationParams = new URLSearchParams(location.search);\r\n  const topicId = +locationParams.get('id');\r\n  const page = getPageNumber(locationParams.get('page'));\r\n  const maxPage = getMaxPage(info.count);\r\n  \r\n  const isLastPageRef = useRef(false);\r\n  isLastPageRef.current = (page === 'last20' || page === maxPage);\r\n\r\n  const updateNewMessages = useCallback(() => {\r\n    if (isLastPageRef.current)\r\n      dispatch(getNewMessagesIfNeeded());\r\n  }, [dispatch])\r\n\r\n  const onPostNewMessageSuccess = () => {\r\n    updateNewMessages();\r\n    dispatch(newMessageText(''));\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (info.title)\r\n      document.title = extractTextFromHTML(info.title);\r\n  }, [info.title]);\r\n\r\n  useEffect(() => {\r\n    dispatch(getTopicIfNeeded(topicId, page));\r\n  }, [dispatch, topicId, page]);\r\n\r\n  useEffect(() => {\r\n\r\n    const timer = window.setInterval(updateNewMessages, 60 * 1000);\r\n\r\n    const clearStore = () => {\r\n      dispatch(topicActions.clear());\r\n      scrolledToHash = undefined;\r\n      if (timer) clearInterval(timer);\r\n    }\r\n    return clearStore;\r\n\r\n  }, [dispatch, updateNewMessages]);\r\n\r\n  useEffect(() => {\r\n    if (!scrolledToHash &&\r\n      location.hash &&\r\n      items.length > 0) {\r\n      const nodeHash = document.getElementById(location.hash.slice(1));\r\n      if (nodeHash)\r\n        setTimeout(() => window.scrollTo(0, nodeHash.offsetTop), 1);\r\n      scrolledToHash = true;\r\n    }\r\n  });\r\n\r\n  return (\r\n    <div style={{ marginBottom: \"5px\" }}>\r\n      <Header />\r\n      {error && <Error text={error} />}\r\n      <div className=\"topic-table\">\r\n        <TopicInfo />\r\n        <Row key='0' data={item0} />\r\n        {items.map((item, i) => (\r\n          <Row key={item.n} data={item} />\r\n        ))}\r\n        {(maxPage > 1 || page === \"last20\") &&\r\n          <div className=\"tf\">\r\n            <Pages maxPage={maxPage} last20 />\r\n          </div>\r\n        }\r\n      </div>\r\n      <Footer page={page} />\r\n      {login.logged &&\r\n        <NewMessage onSubmitSuccess={onPostNewMessageSuccess} />\r\n      }\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default connector(Topic);","import { FC, ReactElement, useState } from 'react'\r\nimport { childrenToText } from 'src/utils'\r\nimport highlight from './code_highlight'\r\nimport './code1c.css'\r\n\r\nconst prepareText = (text: string): string => {\r\n\r\n  // replace double new-lines\r\n  let newtext = text\r\n    .replace(/\\n<br>/g, '\\n')\r\n    .replace(/<br>\\n/g, '\\n')\r\n    .replace(/\\r<br>/g, '\\n')\r\n    .replace(/<br>\\r/g, '\\n')\r\n    .replace(/<br>/g, '\\n');\r\n\r\n  // remove all leading|ending new-lines\r\n  while (newtext[0] === '\\n') {\r\n    newtext = newtext.substring(1);\r\n  }\r\n\r\n  while (newtext.substring(newtext.length - 1) === '\\n') {\r\n    newtext = newtext.substring(0, newtext.length - 1);\r\n  }\r\n\r\n  return highlight(newtext);\r\n}\r\n\r\nconst Code: FC = ({ children }): ReactElement => {\r\n\r\n  const [hidden, setHidden] = useState(true);\r\n\r\n  let text: string = \"\";\r\n  if (children) {\r\n\r\n    const textArr = childrenToText(children);\r\n    text = textArr.join('');\r\n\r\n    text = prepareText(text);\r\n  }\r\n\r\n  const onShowClick = () => {\r\n    setHidden(!hidden);\r\n  }\r\n\r\n  let buttonText: string;\r\n  let linesCount = 0;\r\n  if (text)\r\n    linesCount = text.split(\"\\n\").length;\r\n\r\n  if (hidden)\r\n    buttonText = `: ${linesCount} `;\r\n  else\r\n    buttonText = '';\r\n\r\n  let buttonShow: ReactElement | null = null;\r\n  if (linesCount > 7)\r\n    buttonShow = (\r\n      <div className=\"expand-button-div\">\r\n        <span className=\"expand-button-span\" onClick={onShowClick}>{buttonText}</span>\r\n      </div>\r\n    );\r\n\r\n  let preStyle: React.CSSProperties = {\r\n  }\r\n\r\n  if (hidden && linesCount > 7) {\r\n    preStyle.overflow = \"hidden\";\r\n    preStyle.height = \"135px\";\r\n  } else {\r\n    preStyle.overflow = \"auto\";\r\n    preStyle.height = \"auto\";\r\n  }\r\n\r\n  return (\r\n    <div style={{ marginTop: \"5px\" }}>\r\n      <pre className=\"code-pre\" style={preStyle} dangerouslySetInnerHTML={{ __html: text }}>\r\n      </pre>\r\n      {buttonShow}\r\n    </div>\r\n  )\r\n\r\n\r\n}\r\n\r\nexport default Code;","//TODO: Refactor\r\nimport React, { Component } from 'react'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\n\r\nimport { getMaxPage, childrenToText } from 'src/utils';\r\nimport { fetchTopicInfo } from 'src/api/topicinfo'\r\nimport { RootState } from 'src/store/store';\r\nimport { ITooltipKeys, tooltipsActions } from 'src/store/tooltips';\r\n\r\ntype IProps = {\r\n  topicId: string,\r\n  number: number,\r\n  style: {}\r\n}\r\n\r\nconst mapState = (state: RootState) => {\r\n\r\n  const {\r\n    items, info\r\n  } = state.topic;\r\n\r\n  return {\r\n    items,\r\n    info,\r\n    tooltipDelay: state.options.items['tooltipDelay']\r\n  }\r\n}\r\n\r\nconst connector = connect(mapState);\r\nclass LinkToPost extends Component<ConnectedProps<typeof connector> & IProps, { text: string }> {\r\n\r\n  timer: number;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const { children, number } = this.props;\r\n    if (children)\r\n      this.state = { text: childrenToText(children).join('') };\r\n    else\r\n      this.state = { text: String(number) };\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps(props) {\r\n    if (!props.children) {\r\n      this.setState({ text: String(props.number) });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    if (this.state.text.startsWith(\"http\")) {\r\n\r\n      const { topicId } = this.props;\r\n      fetchTopicInfo(+topicId)\r\n        .then(response => {\r\n          this.setState({\r\n            text: response.title\r\n          })\r\n        });\r\n\r\n    }\r\n  }\r\n\r\n  onMouseOver = (e: React.MouseEvent<HTMLElement>) => {\r\n    e.persist();\r\n    const { tooltipDelay } = this.props;\r\n    this.timer = window.setTimeout(() => this.showToolTip(e), +tooltipDelay);\r\n  }\r\n\r\n  onClick = (e: React.MouseEvent<HTMLElement>) => {\r\n    e.stopPropagation();\r\n    clearTimeout(this.timer);\r\n    this.showToolTip(e);\r\n  }\r\n\r\n  onMouseOut = () => {\r\n    clearTimeout(this.timer);\r\n  }\r\n\r\n  showToolTip = (e: React.MouseEvent<HTMLElement>) => {\r\n    const { topicId, number, dispatch } = this.props;\r\n\r\n    const coords = {\r\n      x: e.pageX,\r\n      y: e.pageY - 50 // remove navbar margin-top\r\n    }\r\n\r\n    const keys: ITooltipKeys = {\r\n      topicId: +topicId,\r\n      number: +number\r\n    }\r\n    dispatch(tooltipsActions.show({keys, coords}));    \r\n    // dispatch(showTooltip(\r\n    //   keys,\r\n    //   coords\r\n    // ));\r\n  }\r\n\r\n  render() {\r\n\r\n    const { topicId, number, style, info } = this.props;\r\n    const page = getMaxPage(number);\r\n\r\n    let pageParam = '';\r\n    if (page > 1)\r\n      pageParam = `&page=${page}`;\r\n\r\n    let a;\r\n    if ((info && (+topicId === info.id)) || !isNaN(+this.state.text))\r\n      a = (\r\n        <span\r\n          onMouseOver={this.onMouseOver}\r\n          onMouseOut={this.onMouseOut}\r\n          onClick={this.onClick}\r\n          className='link'\r\n          style={{ ...style }}\r\n        >{this.state.text}</span>\r\n      )\r\n    else\r\n      a = (\r\n        <span>\r\n          <a href={`#/topic.php?id=${topicId}${pageParam}#${number}`}\r\n            style={{ ...style }}\r\n          >{this.state.text}</a>{' '}\r\n                    (<span onMouseOver={this.onMouseOver}\r\n            onMouseOut={this.onMouseOut}\r\n            onClick={this.onClick}\r\n            className='link'\r\n          >{number}</span>)\r\n        </span>\r\n      )\r\n\r\n    return a;\r\n  }\r\n}\r\n\r\nexport default connector(LinkToPost);","import React, { FC, ReactElement } from 'react'\r\n\r\ntype IProps = {\r\n  href: string\r\n}\r\n\r\nconst LinkToUser: FC<IProps> = ({ href, children }): ReactElement => {\r\n  return <a href={href} className=\"registered-user\">{children}</a>\r\n}\r\n\r\nexport default LinkToUser;","import React, { FC, ReactElement, useEffect, useState } from 'react';\r\n\r\ntype IProps = {\r\n  href: string,\r\n}\r\n\r\nconst getVideoId = (href: string): string | null => {\r\n\r\n  let fullHref = href;\r\n  if (href.search(/http/) === -1) fullHref = 'http://' + fullHref;\r\n\r\n  try {\r\n    var url = new URL(fullHref);\r\n  } catch (e)  {\r\n    return null;\r\n  }\r\n\r\n  if (url.hostname.search(/youtube/) !== -1) {\r\n    return url.searchParams.get('v');\r\n\r\n  } else if (url.hostname.search(/youtu\\.be/) !== -1) {\r\n    return url.pathname.substring(1)\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nconst getVideoParams = async (videoId: string): Promise<{ hrefName: string, title: string }> => {\r\n\r\n  const apiKey = localStorage.getItem('youtubeApiKey') || 'AIzaSyCztN2QW4Fxw_1YuAHBTOZdYLbzigPz25g';\r\n  let apiUrl = `https://www.googleapis.com/youtube/v3/videos?key=${apiKey}&fields=items(snippet(title))&part=snippet&id=${videoId}`;\r\n  const response = await fetch(apiUrl);\r\n  const json = await response.json();\r\n\r\n  let title = json.items[0].snippet.title;\r\n  let hrefName = title;\r\n  let maxLength = 50;\r\n  if (title.length > maxLength + 5)\r\n    hrefName = hrefName.substring(0, maxLength) + '...'\r\n\r\n  return {\r\n    hrefName,\r\n    title\r\n  }\r\n}\r\n\r\nconst YoutubeLink: FC<IProps> = ({ href }): ReactElement => {\r\n\r\n  let [hrefName, setHrefName] = useState(href);\r\n  let [title, setTitle] = useState('');\r\n\r\n  useEffect(() => {\r\n\r\n    let isMounted = true;\r\n    const run = async () => {\r\n\r\n      const videoId = getVideoId(href);\r\n      if (!videoId)\r\n        return;\r\n\r\n      try {\r\n        const params = await getVideoParams(videoId);\r\n        if (isMounted) {\r\n          setHrefName(params.hrefName);\r\n          setTitle(params.title);\r\n        }  \r\n\r\n      } catch (e) {\r\n        console.error('youtube', e.message);\r\n      }\r\n    }\r\n\r\n    run();\r\n\r\n    return () => {isMounted = false};\r\n\r\n  }, [href])\r\n\r\n  const prefix = 'youtube';\r\n  return (\r\n    <a href={href} title={title}>{`${prefix}: ${hrefName}`}</a>\r\n  )\r\n}\r\n\r\nexport default YoutubeLink;","import { FC, ReactElement } from 'react'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\nimport URL from 'url-parse'\r\n\r\nimport LinkToPost from './link_to_post'\r\nimport LinkToUser from './link_to_user'\r\nimport YoutubeLink from './youtube_link'\r\n\r\nimport { childrenToText } from 'src/utils'\r\nimport { RootState } from 'src/store/store'\r\n\r\ntype IProps = {\r\n  href: string,\r\n  parentText: string,\r\n  target: string,\r\n  class: string,\r\n  rel: string,\r\n  showTooltipOnPostLink: string,\r\n  showYoutubeVideoTitle: string,\r\n  replaceCatalogMista: string,\r\n  fixBrokenLinks: string,\r\n}\r\n\r\nconst fixBrokenLink = (href: string, parentText: string): string => {\r\n  let escapedHref = href\r\n    .replace(/\\[/g, '\\\\[')\r\n    .replace(/\\]/g, '\\\\]')\r\n    .replace(/\\./g, '\\\\.')\r\n    .replace(/\\./g, '.')\r\n    .replace(/\\*/g, '\\\\*')\r\n    .replace(/\\+/g, '\\\\+')\r\n    .replace(/\\(/g, '\\\\(')\r\n    .replace(/\\)/g, '\\\\)')\r\n    .replace(/\\?/g, '\\\\?')\r\n    .replace(/\\//g, '\\\\/');\r\n\r\n  try {\r\n    let regExp = new RegExp(escapedHref + '<\\\\/a>(\\\\)|[--0-9#\\\\-\\\\+\\\\_\\\\%\\\\?=]*)');\r\n    let arr = parentText.match(regExp);\r\n    if (arr && arr.length > 1) {\r\n      if (arr[1] === ')' && href.search('\\\\(') === -1) {\r\n        return href;\r\n      }\r\n      href = href + arr[1];\r\n      return href;\r\n    }\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n  return href;\r\n}\r\n\r\nconst isYoutube = (hostname: string): boolean => {\r\n  if (hostname.search(/youtube/) !== -1\r\n    || hostname.search(/youtu\\.be/) !== -1)\r\n    return true;\r\n  else\r\n    return false\r\n}\r\n\r\nconst isMistaCatalog = (hostname: string): boolean => {\r\n  if (hostname.search(/catalog\\.mista/) !== -1)\r\n    return true;\r\n  else\r\n    return false\r\n}\r\n\r\nconst mapState = (state: RootState) => {\r\n\r\n  const {\r\n    showYoutubeVideoTitle,\r\n    replaceCatalogMista,\r\n    fixBrokenLinks\r\n  } = state.options.items;\r\n\r\n  return {\r\n    showYoutubeVideoTitle,\r\n    replaceCatalogMista,\r\n    fixBrokenLinks\r\n  }\r\n}\r\n\r\nconst connector = connect(mapState);\r\nconst CustomLink: FC<ConnectedProps<typeof connector> & IProps> = (props): ReactElement => {\r\n\r\n  const { href, children, parentText,\r\n    showYoutubeVideoTitle, replaceCatalogMista, fixBrokenLinks } = props;\r\n\r\n  try {\r\n    var url = new URL(href, true);\r\n  } catch (e) {\r\n    console.error((e as Error).message, href);\r\n    return <a href={href}>{href}</a>;\r\n  }\r\n\r\n  let newHref = href;\r\n  if (newHref.startsWith('/')) {\r\n    url.set('protocol', 'https')\r\n    url.set('hostname', 'forum.mista.ru')\r\n    newHref = url.href;\r\n  }\r\n\r\n  if (url.hostname.search(/forum\\.mista.ru/) !== -1) {\r\n\r\n    if (url.pathname === '/topic.php') {\r\n      return (\r\n        <LinkToPost topicId={url.query.id} number={url.hash.replace('#', '') || \"0\"}>\r\n          {childrenToText(children)}\r\n        </LinkToPost>\r\n      )\r\n    } else if (url.pathname === '/users.php') {\r\n      return (\r\n        <LinkToUser href={url.href} >\r\n          {children}\r\n        </LinkToUser>\r\n      )\r\n    }\r\n\r\n    if (url.hostname === 'a-sitnikov.github.io' &&\r\n      url.pathname === '/react.mista/') {\r\n\r\n      if (Object.keys(url.query).length === 0) {\r\n\r\n        url = new URL(href.replace(/#\\//, ''), true);\r\n        if (url.pathname === '/react.mista/topic.php')\r\n          return (\r\n            <LinkToPost topicId={url.query.id} number={url.hash.replace('#', '') || \"0\"}>\r\n              {childrenToText(children)}\r\n            </LinkToPost>\r\n          )\r\n      }\r\n    }\r\n  }\r\n\r\n  if (showYoutubeVideoTitle === 'true')\r\n    if (isYoutube(url.hostname)) \r\n      return <YoutubeLink href={href} />\r\n\r\n  if (replaceCatalogMista === 'true')\r\n    if (isMistaCatalog(url.hostname)) {\r\n      url.set('hostname', 'infostart.ru')\r\n\r\n      return (\r\n        <a target={props.target}\r\n          className={props.class}\r\n          rel={props.rel}\r\n          href={url.href} >{url.href} </a>\r\n      )\r\n    }\r\n\r\n  if (fixBrokenLinks === 'true' && parentText) {\r\n    newHref = fixBrokenLink(newHref, parentText);\r\n  }\r\n\r\n  return (\r\n    <a target={props.target}\r\n      className={props.class}\r\n      rel={props.rel}\r\n      href={newHref} >{children}</a>\r\n  )\r\n}\r\n\r\nexport default connector(CustomLink);","import React, { FC, ReactElement } from 'react'\r\nimport { domain } from 'src/api'\r\n\r\nimport { IVotingItem } from 'src/store/topic'\r\n\r\ntype IProps = {\r\n  topicId: number,\r\n  data: IVotingItem,\r\n  colors: string[],\r\n  total: number,\r\n  n: number\r\n}\r\n\r\nconst VoteItem: FC<IProps> = ({ topicId, data, total, n, colors }): ReactElement => {\r\n\r\n  const img = `${domain}/css/voting${n}.png`;\r\n\r\n  let percent = 0;\r\n\r\n  if (total) {\r\n    percent = Math.round(100 * data.count / total);\r\n  }\r\n\r\n  const imgStyle = { maxWwidth: \"500px\", width: \"100%\", height: \"15px\" };\r\n\r\n  return (\r\n    <div className=\"voting-item\">\r\n      <div className=\"voting-title\">\r\n        <a rel=\"nofollow\" style={{ textDecoration: \"none\" }} href={`#/topic.php?id=${topicId}&sel=${n}`}>\r\n          <b><span style={{ color: colors[n - 1] }}>{`${n}. ${data.text}`}</span></b>\r\n        </a>\r\n      </div>\r\n      <div className=\"voting-percentage\">\r\n        {/*<div className=\"div-va-middle\">*/}\r\n        <b><span style={{ color: colors[n - 1] }}>{`${percent}% (${data.count})`}</span></b>\r\n        {/*</div>*/}\r\n      </div>\r\n      <div className=\"voting-bar\">\r\n        <div style={{ width: `${percent}%` }}>\r\n          <a href={img}>\r\n            <img src={img} style={imgStyle} alt={`${n}`} />\r\n          </a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default VoteItem;","import { FC, ReactElement } from 'react'\r\nimport VoteItem from './vote_item'\r\nimport { IVotingItem } from 'src/store/topic'\r\n\r\ntype IProps = {\r\n  items: IVotingItem[],\r\n  topicId: number,\r\n  colors: string[]\r\n}\r\n\r\nconst VoteChart: FC<IProps> = ({ items, topicId, colors }): ReactElement => {\r\n\r\n  let total = Math.max(...items.map(item => item.count));\r\n\r\n  return (\r\n    <div style={{ marginBottom: \"10px\" }}>\r\n      {items.filter(item => item.text).map((data, i) => <VoteItem key={i} data={data} total={total} n={i + 1} topicId={topicId} colors={colors} />)}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default VoteChart;","import React, { FC, ReactElement } from 'react'\r\n\r\ntype IProps = {\r\n  colors: string[],\r\n  n: number,\r\n  text: string\r\n}\r\n\r\nconst Vote: FC<IProps> = ({ colors, n, text }): ReactElement => {\r\n\r\n  return (\r\n    <div style={{ marginTop: \"5px\" }}>\r\n      <b><span style={{ color: colors[n - 1] }}>{`${n}. ${text}`}</span></b>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Vote;","import { FC, ReactElement, useEffect, useState, useCallback } from 'react'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\nimport activeHtml from 'react-active-html';\r\n\r\nimport Code from 'src/components/extensions/code1c'\r\nimport LinkToPost from 'src/components/extensions/link_to_post'\r\nimport CustomLink from 'src/components/extensions/custom_link'\r\n\r\nimport VoteChart from './vote_chart'\r\nimport Vote from './vote'\r\nimport { ITopicMessage } from 'src/store/topic';\r\nimport { RootState } from 'src/store/store';\r\nimport { fetchTopicInfo } from 'src/api/topicinfo';\r\n\r\ntype IProps = {\r\n  topicId: number,\r\n  n: number,\r\n  html: string,\r\n  vote: number,\r\n  data: ITopicMessage,\r\n  style?: {}\r\n}\r\n\r\nconst processLinksToPosts = (text: string, topicId: number): string => {\r\n\r\n  const regexp = /(\\()(\\d+)(\\))/gi; // (12)\r\n  return text.replace(regexp, (res, ...segments) => {\r\n    const number = segments[1];\r\n    return `(<link data-topicid='${topicId}' data-number='${number}' ></link>)`\r\n  });\r\n}\r\n\r\nconst processCode1C = (text: string): string => {\r\n\r\n  const regexp = /(\\[1[C]\\])((.|\\n|\\r)*?)(\\[\\/1[C]\\])/gi; // [1C] text [/1C]\r\n  return text.replace(regexp, (res, ...segments) => {\r\n    let txt = segments[1];\r\n\r\n    //remove first <br>\r\n    if (txt.substr(0, 4) === \"<br>\")\r\n      txt = txt.substr(4);\r\n    return `<code>${txt}</code>`\r\n  });\r\n}\r\n\r\nconst processText = (text: string, topicId: number): string | undefined => {\r\n\r\n  if (!text)\r\n    return text;\r\n\r\n  let newtext = processCode1C(text);\r\n  newtext = processLinksToPosts(newtext, topicId);\r\n\r\n  return newtext;\r\n}\r\n\r\n\r\nconst mapState = (state: RootState) => {\r\n\r\n  const { info } = state.topic;\r\n\r\n  return {\r\n    info,\r\n    voteColors: state.options.voteColors,\r\n    showTooltips: state.options.items['showTooltips']\r\n  }\r\n}\r\nconst connector = connect(mapState);\r\nconst MsgText: FC<ConnectedProps<typeof connector> & IProps> =\r\n  ({ topicId, n, html, vote, info, style, voteColors }): ReactElement => {\r\n\r\n    let initialVoteText: string = null;\r\n    if (vote && info.voting && topicId === info.id)\r\n      initialVoteText = info.voting[vote - 1].text;\r\n\r\n    const [voteText, setVoteText] = useState(initialVoteText);\r\n\r\n    const getVoteText = useCallback(async () => {\r\n      try {\r\n        const _info = await fetchTopicInfo(topicId);\r\n        setVoteText(_info.voting[vote - 1].text);\r\n      } catch (e) {\r\n        console.error(e.message);\r\n      }\r\n    }, [topicId, vote]);\r\n\r\n    useEffect(() => {\r\n      if (vote && !initialVoteText) {\r\n        getVoteText();\r\n      } \r\n    }, [vote, getVoteText, initialVoteText]);\r\n\r\n    const showVote = (vote !== 0) && (voteText !== null);\r\n    let voteChart: ReactElement;\r\n    if (n === 0 && info.isVoting && info.voting) {\r\n      voteChart = <VoteChart items={info.voting} topicId={topicId} colors={voteColors} />\r\n    }\r\n\r\n    let processedHtml = processText(html, topicId);\r\n    const componentsMap = {\r\n      link: (props: any) => <LinkToPost topicId={props['data-topicid']} number={props['data-number']} key={props.key} />,\r\n      code: (props: any) => <Code {...props} />,\r\n      a: (props: any) => <CustomLink {...props} parentText={processedHtml} />\r\n    };\r\n    const textComponent = activeHtml(processedHtml, componentsMap);\r\n\r\n    return (\r\n      <div className=\"message\" style={style}>\r\n        {voteChart}\r\n        <div>\r\n          {textComponent}\r\n        </div>\r\n        {showVote && <Vote text={voteText} n={vote} colors={voteColors} />}\r\n      </div>\r\n    )\r\n  }\r\n\r\nexport default connector(MsgText);","import React, { FC, ReactElement, useEffect, useState } from 'react'\r\nimport dateFormat from 'dateformat'\r\nimport classNames from 'classnames'\r\nimport { domain } from 'src/api'\r\n\r\nimport { addMessageText } from 'src/data/newmessage/actions'\r\nimport { useAppDispatch } from 'src/store/store'\r\nimport { ITopicMessage } from 'src/store/topic'\r\n\r\ntype IProps = {\r\n  data: ITopicMessage,\r\n  isAuthor: boolean,\r\n  isYou: boolean,\r\n  isTooltip?: boolean\r\n}\r\n\r\nconst UserInfo: FC<IProps> = (props): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const [imgDisplay, setImgDisplay] = useState('none');\r\n\r\n  const onClick = () => {\r\n    const { data } = props;\r\n    dispatch(addMessageText(`(${data.n})`));\r\n\r\n    let elem = document.getElementById('message_text');\r\n    if (elem)\r\n      window.scrollTo(0, elem.offsetTop);\r\n  }\r\n\r\n  const onImageLoad = () => {\r\n    setImgDisplay('inline');\r\n  }\r\n\r\n  const onImageError = () => {\r\n    setImgDisplay('none');\r\n  }\r\n\r\n  const { data, isAuthor, isYou, isTooltip } = props;\r\n  useEffect(() => {\r\n    setImgDisplay('none');\r\n  }, [data.n]);\r\n\r\n  const href = `${domain}/users.php?id=${data.userId}`;\r\n  let dataStr;\r\n  if (!data) {\r\n    dataStr = '';\r\n  } else if (data.n === 0) {\r\n    dataStr = dateFormat(new Date(data.time), 'dd.mm.yy - HH:MM');\r\n  } else {\r\n    dataStr = (\r\n      <>\r\n        <span className=\"message-number\">{data.n}</span>{' - ' + dateFormat(new Date(data.time), 'dd.mm.yy - HH:MM')}\r\n      </>\r\n    )\r\n  }\r\n\r\n  const userClassNames = classNames(\"registered-user\", {\r\n    \"is-author\": isAuthor,\r\n    \"is-you\": isYou\r\n  });\r\n\r\n  let imgElem;\r\n  if (window.innerWidth > 7680000)\r\n    imgElem = <img src={`${domain}/css/user_icons/${data.userId}_16x16.png`}\r\n      alt=\"user ico\"\r\n      onLoad={onImageLoad}\r\n      onError={onImageError}\r\n      style={{ display: imgDisplay, marginBottom: \"4px\", marginRight: \"1px\" }} />\r\n\r\n  let timeElem;\r\n  if (isTooltip) {\r\n    timeElem = <div className=\"ah\" style={{ display: \"inline-block\", marginLeft: \"5px\" }}>{dataStr}</div>;\r\n  } else {\r\n    timeElem =\r\n      <div className=\"message-time\">\r\n        <span className=\"ah\" >{dataStr}</span>\r\n        <button className=\"button ah\" onClick={onClick}>{dataStr}</button>\r\n      </div>\r\n  }\r\n\r\n  return (\r\n    <div className=\"user-info\">\r\n      {imgElem}\r\n      <a className={userClassNames} href={href}>{data.user}</a>\r\n      {timeElem}\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default UserInfo;","import { FC, ReactElement, useState, useEffect } from 'react'\r\n\r\nimport { fetchTopicMessage } from 'src/api/topicMessages'\r\n\r\nimport MsgText from 'src/pages/topic/row/msg_text'\r\nimport UserInfo from 'src/pages/topic/row/user_info'\r\n\r\nimport { ITopicMessage } from 'src/store/topic'\r\n\r\nimport './topic_preview.css'\r\n\r\ntype IProps = {\r\n  topicId: number,\r\n  n: number,\r\n  author: string,\r\n  loggedUserId: number,\r\n  onDataLoaded?: () => void\r\n}\r\n\r\nconst PreviewContent: FC<IProps> = ({ topicId, n, author, loggedUserId, onDataLoaded }): ReactElement => {\r\n\r\n  const [data, setData] = useState<ITopicMessage | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n\r\n    const getData = async () => {\r\n      try {\r\n        const _data = await fetchTopicMessage(topicId, n);\r\n        if (_data) {\r\n          setData(_data);\r\n          setError(null);\r\n          if (onDataLoaded) onDataLoaded();\r\n        } else {\r\n          setData(null);\r\n          setError(`   ${n}`);\r\n        }  \r\n      } catch (e) {\r\n        setData(null);\r\n        setError((e as Error).message);\r\n      }\r\n\r\n    }\r\n\r\n    getData();\r\n\r\n  }, [topicId, n, onDataLoaded])\r\n\r\n  if (!data && !error)\r\n    return null;\r\n\r\n  return (\r\n    <>\r\n      {data &&\r\n        <div className='preview-content'>\r\n          <div className='topic-preview-userinfo'>\r\n            <UserInfo data={data} isAuthor={data.user === author} isYou={data.userId === loggedUserId} isTooltip />\r\n          </div>\r\n          <MsgText\r\n            topicId={topicId}\r\n            n={n}\r\n            data={data}\r\n            html={data.text}\r\n            vote={data.vote}\r\n            style={{ overflowY: \"auto\", overflowWrap: \"break-word\" }}\r\n          />\r\n        </div>}\r\n      {error && <span>{error}</span>}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default PreviewContent;","import React, { FC, ReactElement, useCallback, useState } from 'react'\r\nimport { SwipeEventData, useSwipeable } from 'react-swipeable'\r\nimport { fetchTopicInfo } from 'src/api/topicinfo'\r\n\r\nimport PreviewButtons from './preview_buttons'\r\nimport PreviewContent from './preview_content'\r\nimport './topic_preview.css'\r\n\r\ntype IProps = {\r\n  topicId: number,\r\n  initialMsgNumber: number,\r\n  author: string,\r\n  loggedUserId: number\r\n}\r\n\r\nconst TopicPreview: FC<IProps> = ({ topicId, initialMsgNumber, author, loggedUserId }): ReactElement => {\r\n\r\n  const [deltaX, setDeltaX] = useState(0);\r\n  const [display, setDispaly] = useState('none');\r\n  const [state, setState] = useState({\r\n    msgNumber: initialMsgNumber,\r\n    key: 0\r\n  })\r\n\r\n  const onClickFirst = () => {\r\n    setState({\r\n      msgNumber: 0,\r\n      key: state.key\r\n    });\r\n  }\r\n\r\n  const onClickNext = () => {\r\n    setState({\r\n      msgNumber: state.msgNumber + 1,\r\n      key: state.key\r\n    });\r\n  }\r\n\r\n  const onClickPrev = () => {\r\n    if (state.msgNumber > 0)\r\n      setState({\r\n        msgNumber: state.msgNumber - 1,\r\n        key: state.key\r\n      });\r\n  }\r\n\r\n  const onClickLast = async () => {\r\n    const info = await fetchTopicInfo(topicId);\r\n    setState({\r\n      msgNumber: info.count,\r\n      key: state.key\r\n    });    \r\n  }\r\n\r\n  const onSwiping = (eventData: SwipeEventData) => {\r\n    if (Math.abs(eventData.deltaX) < 35)\r\n      setDeltaX(0);\r\n    else\r\n      setDeltaX(eventData.deltaX);\r\n  }\r\n\r\n  const onSwiped = (eventData: SwipeEventData) => {\r\n\r\n    if (Math.abs(eventData.deltaX) > 150) {\r\n      if (eventData.dir === \"Left\") {\r\n        setState({\r\n          msgNumber: state.msgNumber + 1,\r\n          key: state.key + 1\r\n        });         \r\n      } else if (eventData.dir === \"Right\" && state.msgNumber > 0) {\r\n        setState({\r\n          msgNumber: state.msgNumber - 1,\r\n          key: state.key + 1\r\n        });           \r\n      }\r\n    }\r\n    setDeltaX(0);\r\n  }\r\n\r\n  const swipeable = useSwipeable({\r\n    onSwiping,\r\n    onSwiped,\r\n    delta: 15\r\n  });\r\n\r\n  const onContentLoaded = useCallback(() => {\r\n    setDispaly('block');\r\n  }, []);\r\n\r\n  let items = [state.msgNumber];\r\n\r\n  if (deltaX < 0)\r\n    items.push(state.msgNumber + 1);\r\n  else if (deltaX > 0 && state.msgNumber > 0)\r\n    items.push(state.msgNumber - 1);\r\n\r\n  const style: React.CSSProperties = {\r\n    transform: `translate3d(${deltaX}px, 0px, 0px)`,\r\n    flexDirection: deltaX > 0 ? 'row-reverse' : 'row'\r\n  }\r\n\r\n  return (\r\n    <div className=\"preview-container\" style={{ display }}>\r\n      <div className=\"topic-preview\">\r\n        <PreviewButtons\r\n          topicId={topicId}\r\n          onFirst={onClickFirst}\r\n          onLast={onClickLast}\r\n          onNext={onClickNext}\r\n          onPrev={onClickPrev}\r\n        />\r\n        <div className='preview-carousel' {...swipeable} style={style}>\r\n          <div className='preview-carousel-item' key={state.key} style={{ order: 0 }}>\r\n            <PreviewContent\r\n              topicId={topicId}\r\n              n={items[0]}\r\n              loggedUserId={loggedUserId}\r\n              author={author}\r\n              onDataLoaded={onContentLoaded}\r\n            />\r\n          </div>\r\n          {items.length > 1 &&\r\n            <div className='preview-carousel-item' key={state.key + 1} style={{ order: 1 }}>\r\n              <PreviewContent\r\n                topicId={topicId}\r\n                n={items[1]}\r\n                loggedUserId={loggedUserId}\r\n                author={author}\r\n              />\r\n            </div>}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default TopicPreview;","import React, { FC, ReactElement, useCallback, useEffect } from 'react'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\nimport { useLocation } from 'react-router-dom'\r\nimport queryString from 'query-string'\r\n\r\nimport { RootState, useAppDispatch } from 'src/store/store'\r\nimport { getTopicsListIfNeeded } from 'src/store/topics_list'\r\n\r\nimport Header from './header'\r\nimport Row from './row'\r\nimport Pages from 'src/components/common/pages'\r\nimport NewTopic from './new_topic'\r\nimport Error from 'src/components/common/error'\r\n\r\nimport TopicPreview from 'src/components/preview/topic_preview'\r\n\r\nimport './topics_list.css'\r\n\r\nconst mapState = (state: RootState) => {\r\n\r\n  return {\r\n    topicsList: state.topicsList,\r\n    sections: state.sections,\r\n    login: state.login,\r\n    options: state.options\r\n  }\r\n}\r\n\r\nconst connector = connect(mapState);\r\nconst TopicsList: FC<ConnectedProps<typeof connector>> = ({ topicsList, login }): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch()\r\n  const location = useLocation();\r\n\r\n  const updateTopicsList = useCallback((locationParams) => {\r\n    dispatch(getTopicsListIfNeeded(locationParams));\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    document.title = 'React.Mista';\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const locationParams = queryString.parse(location.search);\r\n    updateTopicsList(locationParams);\r\n  }, [location.search, updateTopicsList]);\r\n\r\n  let rows = [];\r\n  for (let item of topicsList.items) {\r\n\r\n    rows.push(<Row key={item.id} data={item} updated={item.updated} topicId={item.id}/>);\r\n    if (item.showPreview)\r\n      rows.push(\r\n        <TopicPreview \r\n          key={`preview${item.id}`} \r\n          topicId={item.id} \r\n          initialMsgNumber={item.previewMsgNumber}\r\n          author={item.author}\r\n          loggedUserId={login.userId}\r\n          />\r\n      )\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Header />\r\n      {topicsList.error && (<Error text={topicsList.error} />)}\r\n      <div className=\"topic-list-table\">\r\n        <div className=\"th\" style={{ position: \"sticky\", top: \"39px\" }}>\r\n          <div style={{ letterSpacing: \"-1px\" }}></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div>Re</div>\r\n          <div></div>\r\n          <div><span style={{ cursor: \"pointer\" }} title=\" \" onClick={updateTopicsList}>{topicsList.status === \"loading\" ? \"\" : \"\"}</span></div>\r\n        </div>\r\n        {rows}\r\n        <div className=\"tf\">\r\n          <Pages maxPage={10} />\r\n        </div>\r\n      </div>\r\n      <div id=\"F\" className=\"newtopic\" style={{ marginBottom: \"10px\", marginTop: \"5px\", position: 'relative' }}>\r\n        <NewTopic \r\n          onSubmitSuccess={updateTopicsList}\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connector(TopicsList);","import React, { FC, ReactElement } from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux'\r\n\r\nimport { RootState } from 'src/store/store'\r\nimport Login from 'src/components/login'\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst mapState = (state: RootState) => {\r\n  return {\r\n    info: state.topic.info,\r\n    login: state.login\r\n  }  \r\n}\r\nconst connector = connect(mapState);\r\n\r\nconst Header: FC<ConnectedProps<typeof connector>> =  ({ info, login }): ReactElement => {\r\n\r\n  const forums = {\r\n    '1c': '1:',\r\n    'life': ' ',\r\n    'it': ' ',\r\n    'job': ''\r\n  };\r\n\r\n  return (\r\n\r\n    <div className=\"flex-row\">\r\n      <div className=\"header-left\">\r\n        <Login/>\r\n      </div>\r\n      <div className=\"header-right\">\r\n        <span id=\"forum_string\" className=\"bold120\">\r\n          <Link to={`/index.php?forum=${info.forum}`} style={{ textDecoration: \"none\" }}>{forums[info.forum]}</Link>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connector(Header);","import React, { FC, ReactElement } from 'react'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\n\r\nimport { RootState } from 'src/store/store'\r\n\r\nimport { domain, urlTopicInfo, urlTopicMessages } from 'src/api'\r\n\r\nconst mapState = (state: RootState) => {\r\n\r\n  const {\r\n    info\r\n  } = state.topic;\r\n\r\n  return {\r\n    info\r\n  }\r\n}\r\nconst connector = connect(mapState);\r\nconst TopicInfo: FC<ConnectedProps<typeof connector>> = ({ info }): ReactElement => {\r\n\r\n  let yandexUrl = \"https://www.yandex.ru/search/?text=\" + encodeURIComponent(info.title);\r\n\r\n  return (\r\n    <div className=\"topic-row\">\r\n      <div className=\"cell-userinfo\">\r\n        <div className=\"topic-tools\">\r\n          <a title=\"API.info\" href={`${domain}/${urlTopicInfo}?id=${info.id}`} className=\"agh\" style={{ display: \"block\", lineHeight: \"1em\" }}>i</a>\r\n          <a title=\"API.messages\" href={`${domain}/${urlTopicMessages}?id=${info.id}&from=0&to=20`} className=\"agh\" style={{ display: \"block\", lineHeight: \"1em\" }}>m</a>\r\n          {/*<a href=\"add_voting.php?topic_id=815217\" title=\" \">vote</a> &nbsp;&nbsp;*/}\r\n        </div>\r\n      </div>\r\n      <div className=\"cell-message\">\r\n        <div className=\"flex-row\">\r\n          <div style={{ flex: 1, textAlign: \"center\" }}>\r\n            <a href={`${domain}/topic.php?id=${info.id}`}>\r\n              <h1 className=\"topic-title\" dangerouslySetInnerHTML={{ __html: info.title }}></h1>\r\n            </a>\r\n            <div className=\"moder-action\"></div>\r\n          </div>\r\n          <div style={{ flex: \"0 0 20px\", position: \"relative\" }}>\r\n            <div className=\"div-va-middle\">\r\n              <a rel=\"noopener noreferrer\" href={yandexUrl} title=\"  \" target=\"_blank\" className=\"yandex\"></a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default connector(TopicInfo);","import { FC, ReactElement } from 'react'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\n\r\nimport UserInfo from './user_info'\r\nimport MsgText from './msg_text'\r\nimport { RootState } from 'src/store/store'\r\nimport { ITopicMessage } from 'src/store/topic'\r\n\r\ntype IProps = {\r\n  data: ITopicMessage\r\n}\r\n\r\nconst mapState = (state: RootState) => {\r\n\r\n  const {\r\n    info,\r\n    item0,\r\n  } = state.topic || {\r\n    info: {},\r\n    item0: {},\r\n  }\r\n\r\n  return {\r\n    topicId: info.id,\r\n    author: item0 ? item0.user : '',\r\n    login: state.login\r\n  }\r\n}\r\n\r\nconst connector = connect(mapState);\r\nconst Row: FC<ConnectedProps<typeof connector> & IProps> = (props): ReactElement => {\r\n\r\n    const { data, author, topicId, login } = props;\r\n\r\n    if (!data)\r\n      return null;\r\n\r\n    return (\r\n      <div className=\"topic-row\" id={String(data.n)}>\r\n        <div className=\"cell-userinfo\">\r\n          <UserInfo data={data} isAuthor={data.user === author} isYou={data.user === login.userName} />\r\n        </div>\r\n        <div className=\"cell-message\">\r\n          <MsgText data={data} html={data.text} topicId={topicId} n={data.n} vote={data.vote} />\r\n        </div>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default connector(Row);","import React, { FC, ReactElement } from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux'\r\nimport { Button } from 'react-bootstrap'\r\n\r\nimport { defaultInfo, getNewMessagesIfNeeded } from 'src/store/topic'\r\nimport { getMaxPage } from 'src/utils'\r\nimport { RootState, useAppDispatch } from 'src/store/store'\r\n\r\nconst mapState = (state: RootState) => {\r\n\r\n  const {\r\n    status,\r\n    lastUpdated,\r\n    info,\r\n  } = state.topic || {\r\n    isFetching: true,\r\n    info: defaultInfo,\r\n  }\r\n\r\n  return {\r\n    info,\r\n    status,\r\n    lastUpdated\r\n  }\r\n}\r\nconst connector = connect(mapState);\r\ntype IProps = { page?: number | string };\r\n\r\nconst Footer: FC<ConnectedProps<typeof connector> & IProps> = ({ info, status, page }): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const onBookmarkClick = () => {\r\n    //dispatch(addBookmark(info));\r\n  }\r\n\r\n  const onRefreshClick = () => {\r\n    dispatch(getNewMessagesIfNeeded());\r\n  }\r\n\r\n  const maxPage = getMaxPage(info.count);\r\n\r\n  let showUpdateButton = false;\r\n  if (page === 'last20' || page === maxPage)\r\n    showUpdateButton = true;\r\n\r\n  return (\r\n    <div className=\"flex-row\" id=\"F\">\r\n      <div className=\"ta-left va-top\" style={{ width: \"50%\" }}>\r\n        <Button\r\n          onClick={onBookmarkClick}\r\n          disabled={false}\r\n          size=\"sm\"\r\n          className='button'\r\n          variant=\"light\">\r\n          {''}\r\n        </Button>\r\n      </div>\r\n      <div className=\"ta-right va-middle\" style={{ marginLeft: \"auto\" }}>\r\n        {showUpdateButton &&\r\n          <Button\r\n            onClick={onRefreshClick}\r\n            disabled={status === \"loading\"}\r\n            size=\"sm\"\r\n            className='button'\r\n            variant=\"light\">\r\n            {status === \"loading\" ? '' : ' '}\r\n          </Button>\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connector(Footer);","import React, { FC, ReactElement, useState, useCallback } from 'react'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\nimport { FormGroup, Form } from 'react-bootstrap'\r\n\r\nimport TextEditor from 'src/components/common/text_editor'\r\nimport { newMessageText, postNewMessage } from 'src/data/newmessage/actions'\r\nimport { RootState, useAppDispatch } from 'src/store/store'\r\n\r\nimport { PostNewmessageParams } from 'src/data/newmessage/actions'\r\n\r\ntype IProps = {\r\n  onSubmitSuccess?: () => void\r\n}\r\n\r\nconst mapState = (state: RootState) => {\r\n\r\n  return {\r\n    info: state.topic.info,\r\n    newMessage: state.newMessage\r\n  };\r\n\r\n}\r\n\r\nconst connector = connect(mapState);\r\n\r\nconst NewMessage: FC<ConnectedProps<typeof connector> & IProps> = ({ info, newMessage, onSubmitSuccess }): ReactElement => {\r\n\r\n  const [voting, setVoting] = useState<number | undefined>();\r\n  const dispatch = useAppDispatch()\r\n\r\n  const onSubmit = (e: any) => {\r\n\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    let params: PostNewmessageParams = {\r\n      text: newMessage.text,\r\n      topicId: String(info?.id),\r\n      onSuccess: afterSubmit,\r\n      voting_select: undefined\r\n    };\r\n\r\n    if (voting) {\r\n      params.voting_select = voting;\r\n    }\r\n\r\n    dispatch(postNewMessage(params));\r\n  }\r\n\r\n  const afterSubmit = () => {\r\n\r\n    dispatch(newMessageText(''));\r\n\r\n    setVoting(undefined);\r\n\r\n    if (onSubmitSuccess) {\r\n      onSubmitSuccess();\r\n    }\r\n  }\r\n\r\n  const clearVoting = (e: React.MouseEvent<HTMLElement>) => {\r\n\r\n    e.preventDefault();\r\n    setVoting(undefined);\r\n\r\n  }\r\n\r\n  const setVotingOption = (i: number) => {\r\n    setVoting(i);\r\n  }\r\n\r\n  const onTextChange = useCallback((text: string) => {\r\n    //dispatch(newTopicActions.changeText(text));\r\n  }, []);\r\n\r\n  let votingElem: ReactElement;\r\n  if (info?.isVoting && info?.voting) {\r\n\r\n    let votingOptions = [];\r\n    for (let i = 1; i <= info.voting.length; i++) {\r\n\r\n      const item = info.voting[i - 1];\r\n      if (!item.text)\r\n        continue;\r\n\r\n      votingOptions.push(\r\n        <Form.Check\r\n          type=\"radio\"\r\n          key={i}\r\n          name=\"voting\"\r\n          checked={voting === i}\r\n          onChange={() => setVotingOption(i)}\r\n          label={`${i}. ${item.text}`}\r\n        />\r\n      );\r\n    }\r\n\r\n\r\n    votingElem = (\r\n      <FormGroup>\r\n        <legend>\r\n          <small> :\r\n            <span id=\"voting_clear\" style={{ marginLeft: \"5px\", cursor: \"pointer\" }} onClick={clearVoting}></span>\r\n          </small>\r\n        </legend>\r\n        {votingOptions}\r\n          !\r\n      </FormGroup>\r\n    );\r\n\r\n  }\r\n\r\n  return (\r\n    <form style={{ marginTop: \"5px\" }} onSubmit={onSubmit}>\r\n      <div className=\"bold\">   :</div>\r\n      <div className=\"new-message-container\">\r\n        <div className=\"new-message-text\">\r\n          <TextEditor\r\n            isFetching={newMessage.isFetching}\r\n            text={newMessage.text}\r\n            placeholder=\"\"\r\n            onChange={onTextChange}\r\n          />\r\n        </div>\r\n        <div className=\"new-message-voting\">\r\n          {votingElem}\r\n        </div>\r\n      </div>\r\n    </form>\r\n  )\r\n\r\n}\r\n\r\nexport default connector(NewMessage);","import { FC, ReactElement } from 'react'\r\nimport { Form } from 'react-bootstrap'\r\n\r\ntype IProps = {\r\n  name: string,\r\n  label: string,\r\n  value: string,\r\n  values: Array<{ name: string, descr: string }>,\r\n  onChange: any,\r\n  oneLine: boolean\r\n}\r\n\r\nconst RadioOption: FC<IProps> = ({ name, label, value, values, oneLine, onChange }): ReactElement => {\r\n\r\n  const onChangeValue = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    onChange(e, name, e.target.value);\r\n  }\r\n\r\n  return (\r\n    <span>\r\n      <span style={{ marginRight: \"5px\" }}> {label} </span>\r\n      {oneLine && <br/>}\r\n      {values.map((item, i) =>\r\n        <Form.Check key={i}\r\n          type=\"radio\"\r\n          id={item.name}\r\n          label={item.descr}\r\n          name={label}\r\n          checked={item.name === value}\r\n          value={item.name}\r\n          inline={oneLine}\r\n          onChange={onChangeValue}\r\n        >\r\n        </Form.Check>\r\n      )}\r\n    </span>\r\n  );\r\n}\r\n\r\nexport default RadioOption;","import React, { FC, ReactElement } from 'react'\r\n\r\ntype IProps = {\r\n  name: string,\r\n  label: string,\r\n  value: string,\r\n  onChange: any,\r\n  postfix?: string\r\n}\r\n\r\nconst StringOption: FC<IProps> = (props): ReactElement => {\r\n\r\n  const onChange = (e: any) => {\r\n    const { name } = props;\r\n    props.onChange(e, name, e.target.value);\r\n  }\r\n\r\n  const { name, value, label, postfix } = props;\r\n\r\n  return (\r\n    <label htmlFor={name} style={{ marginRight: \"5px\" }}>\r\n      <span style={{ marginRight: \"5px\" }}>{label}</span>\r\n      <input type=\"string\" name={name} value={value} onChange={onChange} className='input' />\r\n      {postfix !== undefined ?\r\n        <span style={{ marginLeft: \"5px\" }}>{postfix}</span>\r\n        : null}\r\n    </label>\r\n  );\r\n}\r\n\r\nexport default StringOption;","export const formTabs = [\r\n  {\r\n    tabName: '',\r\n    rows: [\r\n      ['theme'],\r\n      ['topicsPerPage'],\r\n      ['autoRefreshTopicsList', 'autoRefreshTopicsListInterval'],\r\n      ['autoRefreshTopic', 'autoRefreshTopicInterval'],\r\n    ]\r\n  },\r\n  {\r\n    tabName: '',\r\n    rows: [\r\n      ['showTooltips', 'tooltipDelay'],\r\n      ['showTooltipOnPostLink']\r\n    ]\r\n  },\r\n  {\r\n    tabName: '',\r\n    rows: [\r\n      ['showYoutubeVideoTitle'],\r\n      ['replaceCatalogMista'],\r\n      ['fixBrokenLinks'],\r\n    ]\r\n  }\r\n];\r\n\r\nexport const formParams = {\r\n  'theme': {\r\n    type: 'radio',\r\n    label: ' :',\r\n    oneLine: true,\r\n    values: [\r\n      { name: 'yellow', descr: '' },\r\n      { name: 'lightgray', descr: '' },\r\n      { name: 'dark', descr: '' }\r\n    ]\r\n  },\r\n  'topicsPerPage': {\r\n    type: 'number',\r\n    label: '   (max 99):',\r\n    min: 1,\r\n    max: 99\r\n  },\r\n  'autoRefreshTopicsList': {\r\n    type: 'checkbox',\r\n    label: '  '\r\n  },\r\n  'autoRefreshTopicsListInterval': {\r\n    type: 'number',\r\n    label: '',\r\n    min: 60,\r\n    max: 1000000,\r\n    postfix: ''\r\n  },\r\n  'autoRefreshTopic': {\r\n    type: 'checkbox',\r\n    label: ' '\r\n  },\r\n  'autoRefreshTopicInterval': {\r\n    type: 'number',\r\n    label: '',\r\n    min: 60,\r\n    max: 1000000,\r\n    postfix: ''\r\n  },\r\n  //Tooltips   \r\n  'showTooltips': {\r\n    type: 'checkbox',\r\n    label: ' , ',\r\n    disabled: true\r\n  },\r\n  'tooltipDelay': {\r\n    type: 'number',\r\n    max: 1000000,\r\n    label: '',\r\n    postfix: '',\r\n    disabled: true\r\n  },\r\n  'showTooltipOnPostLink': {\r\n    type: 'checkbox',\r\n    label: '     ',\r\n    disabled: true    \r\n  },\r\n  //links   \r\n  'showYoutubeVideoTitle': {\r\n    type: 'checkbox',\r\n    label: '   youtube'\r\n  },\r\n  'replaceCatalogMista': {\r\n    type: 'checkbox',\r\n    label: '  catalog.mista.ru  infostart.ru'\r\n  },\r\n  'fixBrokenLinks': {\r\n    type: 'checkbox',\r\n    label: '   (  )'\r\n  },\r\n}","import { FC, ReactElement } from \"react\";\r\n\r\ntype IProps = {\r\n  name: string\r\n}\r\n\r\nconst Tab: FC<IProps> = ({ name, children }): ReactElement => {\r\n  return (\r\n    <div>\r\n      <div className=\"tab-header\">\r\n        {name}\r\n      </div>\r\n      <div className=\"tab-content\">\r\n        {children}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Tab;","import { FC, ReactElement, useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\nimport { Form, FormControl, Button } from 'react-bootstrap'\r\n\r\nimport RadioOption from './radio_option'\r\nimport StringOption from './string_option'\r\n\r\nimport { defaultOptionsState, optionsActions } from 'src/store/options'\r\nimport { formTabs, formParams } from './formscheme'\r\nimport Tab from './tab'\r\n\r\nimport './options.css'\r\nimport { RootState, useAppDispatch } from 'src/store/store'\r\n\r\nconst mapState = (state: RootState) => {\r\n  return {\r\n    options: state.options\r\n  };\r\n}\r\n\r\nconst connector = connect(mapState);\r\nconst Options: FC<ConnectedProps<typeof connector>> = (props): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const [state, setState] = useState({\r\n    items: props.options.items\r\n  })\r\n\r\n  const closeForm = () => {\r\n    navigate('/#');\r\n  }\r\n\r\n  const resetOptions = () => {\r\n    setState({\r\n      ...state,\r\n      items: Object.assign({}, defaultOptionsState.items)\r\n    })\r\n  }\r\n\r\n  const applyOptions = () => {\r\n\r\n    dispatch(optionsActions.save(state.items));\r\n    closeForm();\r\n  }\r\n\r\n  const onChange = (e: React.FormEvent<HTMLElement>, name: string, value) => {\r\n\r\n    let items = Object.assign({}, state.items);\r\n    items[name] = value;\r\n    setState({\r\n      ...state,\r\n      items\r\n    })\r\n  }\r\n\r\n  let tabs = [];\r\n  for (let tab of formTabs) {\r\n\r\n    let rows = [];\r\n    for (let i in tab.rows) {\r\n\r\n      const row = tab.rows[i];\r\n      let rowElem = [];\r\n      for (let name of row) {\r\n\r\n        const item = formParams[name];\r\n        if (!item) continue;\r\n\r\n        const value = state.items[name];\r\n\r\n        if (item.type === 'radio') {\r\n          rowElem.push(\r\n            <RadioOption\r\n              key={name}\r\n              name={name}\r\n              label={item.label}\r\n              values={item.values}\r\n              value={value}\r\n              oneLine={item.oneLine}\r\n              onChange={onChange}\r\n            />\r\n          );\r\n        } else if (item.type === 'number') {\r\n\r\n          if (item.label)\r\n            rowElem.push(\r\n              <label\r\n                htmlFor={name}\r\n                key={name + '_label'}\r\n                style={{ fontWeight: \"inherit\" }}>\r\n                {item.label}\r\n              </label>\r\n            );\r\n\r\n          rowElem.push(\r\n            <div className='options-number' key={name}>\r\n              <FormControl\r\n                type=\"number\"\r\n                min={item.min}\r\n                max={item.max}\r\n                value={value}\r\n                disabled={item.disabled}\r\n                onChange={(e) => onChange(e, name, e.target.value)}\r\n                \r\n                className='input'\r\n                size=\"sm\"\r\n              >\r\n              </FormControl>\r\n              {item.postfix &&\r\n                <span key={name + '_postfix'} style={{ marginLeft: \"5px\", flex: \"0 0 auto\", }}>{item.postfix}</span>}\r\n            </div>\r\n          );\r\n\r\n        } else if (item.type === 'string') {\r\n          rowElem.push(\r\n            <StringOption\r\n              key={name}\r\n              name={name}\r\n              label={item.label}\r\n              postfix={item.postfix}\r\n              value={value}\r\n              onChange={onChange}\r\n            />\r\n          );\r\n        } else if (item.type === 'checkbox') {\r\n          rowElem.push(\r\n            <Form.Check\r\n              id={name}\r\n              type=\"checkbox\"\r\n              label={item.label}\r\n              key={name}\r\n              name={name}\r\n              checked={String(value) === 'true'}\r\n              disabled={item.disabled}              \r\n              onChange={(e) => onChange(e, name, e.target.checked)}\r\n              style={{ flex: \"0 0 auto\", margin: \"0px\", maxWidth: \"100%\" }}\r\n            />\r\n          );\r\n        }\r\n      }\r\n\r\n      rows.push(\r\n        <div key={i} className=\"options-row\">\r\n          {rowElem}\r\n        </div>\r\n      );\r\n\r\n    }\r\n\r\n    tabs.push(\r\n      <Tab key={tab.tabName} name={tab.tabName}>\r\n        {rows}\r\n      </Tab>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"options-form\">\r\n      <div className=\"options-header\" style={{ cursor: \"default\" }}>\r\n        <b></b>\r\n      </div>\r\n      {tabs}\r\n      <div className=\"button-row\">\r\n        <Button\r\n          id=\"applyOptions\"\r\n          size=\"sm\"\r\n          variant=\"light\"\r\n          style={{ margin: \"5px\" }}\r\n          className='button'\r\n          onClick={applyOptions}>\r\n          OK\r\n        </Button>\r\n        <Button\r\n          id=\"cancelOptions\"\r\n          size=\"sm\"\r\n          variant=\"light\"\r\n          style={{ margin: \"5px\", float: \"left\" }}\r\n          className='button'\r\n          onClick={closeForm}>\r\n          \r\n        </Button>\r\n        <Button\r\n          id=\"defaultOptions\"\r\n          size=\"sm\"\r\n          variant=\"light\"\r\n          style={{ margin: \"5px\", float: \"right\" }}\r\n          className='button'\r\n          onClick={resetOptions}>\r\n           \r\n        </Button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connector(Options);","import React, { ReactElement } from 'react';\r\nimport { Routes, Route } from 'react-router-dom'\r\nimport { Container } from 'react-bootstrap';\r\n\r\nimport TopicsList from './topics_list'\r\nimport Topic from './topic'\r\nimport Options from './options'\r\n\r\nconst AppRoutes = (): ReactElement => {\r\n\r\n  return (\r\n    <Container>\r\n      <Routes>\r\n        <Route path='/' element={<TopicsList />} />\r\n        <Route path='/index.php' element={<TopicsList />} />\r\n        <Route path='/topic.php' element={<Topic />} />\r\n        <Route path='/options.php' element={<Options />} />\r\n      </Routes>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default AppRoutes;","import React, { ReactElement } from 'react'\r\nimport { domain } from 'src/api'\r\n\r\nconst NavBarFooter = (): ReactElement => {\r\n\r\n    return (\r\n        <footer className=\"flex-row navbar-footer\">\r\n            <a href={`${domain}/rules.php`}></a>\r\n            <span className=\"separator\">|</span>\r\n            <a href={`${domain}/about.php`}></a>\r\n            <span className=\"separator\">|</span>\r\n            <b><a href={`${domain}/ad.php`}>  </a>  </b>\r\n            <span className=\"separator\">|</span>\r\n            <a href={`${domain}/find.php`}></a>\r\n            <span className=\"separator\">|</span>\r\n            <a rel=\"nofollow\" href={`${domain}/sections_list.php`}></a>\r\n            <span className=\"separator\">|</span>\r\n            <a rel=\"nofollow\" href={`${domain}/rating.php`}></a>\r\n            <span className=\"separator\">|</span>\r\n            <a href=\"http://kb.mista.ru\"> </a>\r\n            <span className=\"separator\">|</span>\r\n            <a href=\"http://wiki.mista.ru\">- (2)</a>\r\n            <span className=\"separator\">|</span>\r\n            <a rel=\"nofollow\" href=\"http://m.mista.ru/\"></a>\r\n            <span className=\"separator\">|</span>\r\n            <a href={`${domain}/archive.php`}></a>\r\n            <span className=\"separator\">|</span>\r\n            <a href={`${domain}/moders.php`}></a>\r\n            <span className=\"separator\">|</span>\r\n            <a href={`${domain}/users_gallery.php`}></a>\r\n            <span className=\"separator\">|</span>\r\n            <a href={`${domain}/ban_list.php`}></a>\r\n            <span className=\"separator\">|</span>\r\n            <span>18+</span>\r\n        </footer>\r\n    )\r\n}\r\n\r\nexport default NavBarFooter;","import { FC, ReactElement } from 'react'\r\n\r\ntype IProps = {\r\n  closeWindow?: (e: any) => any\r\n}\r\n\r\nconst TooltipHeader: FC<IProps> = ({ children, closeWindow }): ReactElement => {\r\n  return (\r\n    <div className=\"tooltip-header\">\r\n      {children}\r\n      <div className=\"tooltip-close\" onClick={closeWindow} onTouchEnd={closeWindow}>\r\n        <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i>\r\n        <i className=\"fa fa-angle-left\" aria-hidden=\"true\" style={{ marginLeft: \"-2px\" }}></i>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TooltipHeader;","import React, { FC, ReactElement } from 'react'\r\n\r\ntype IProps = {\r\n  onScroll?: (e: any) => any\r\n}\r\n\r\nconst TooltipBody: FC<IProps> = ({ children, onScroll }): ReactElement => {\r\n\r\n  let startX = 0;\r\n\r\n  const onTouchStart = (e: React.TouchEvent<HTMLElement>) => {\r\n    startX = e.nativeEvent.changedTouches[0].clientX;\r\n  }\r\n\r\n  const onTouchEnd = (e: React.TouchEvent<HTMLElement>) => {\r\n\r\n    if (!onScroll) return;\r\n\r\n    let endX = e.nativeEvent.changedTouches[0].clientX;\r\n    if (Math.abs(endX - startX) > 100)\r\n      onScroll(-endX + startX);\r\n  }\r\n\r\n  return (\r\n    <div className=\"tooltip-text\" onTouchStart={onTouchStart} onTouchEnd={onTouchEnd}>\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TooltipBody;","import React, { FC, ReactElement } from 'react'\r\n\r\nimport Draggable from 'react-draggable';\r\n\r\nimport TooltipHeader from './tooltip_header'\r\nimport TooltipBody from './tooltip_body'\r\n\r\nimport './tooltip.css'\r\n\r\nimport { useAppDispatch } from 'src/store/store';\r\nimport { ITooltipItem, tooltipsActions } from 'src/store/tooltips';\r\n\r\ntype IProps = {\r\n  tooltip: ITooltipItem,\r\n  zIndex?: number,\r\n}\r\n\r\nconst TooltipWindow: FC<IProps> = ({ tooltip, zIndex, children }): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const onCloseClick = () => {\r\n    dispatch(tooltipsActions.close(tooltip.keys));\r\n  }\r\n\r\n  const { coords } = tooltip;\r\n\r\n  let axis: \"both\" | \"x\" | \"y\" | \"none\";;\r\n  let position: {\r\n    top: number,\r\n    left: number\r\n  };\r\n\r\n  if (window.innerWidth <= 768) {\r\n    axis = \"y\";\r\n    position = { top: coords.y, left: 5 };\r\n  } else {\r\n    axis = \"both\";\r\n    position = { top: coords.y, left: Math.min(coords.x, window.innerWidth - 670) }\r\n  }\r\n\r\n  let [header, body] = React.Children.toArray(children);\r\n\r\n  return (\r\n    <Draggable\r\n      axis={axis}\r\n      handle=\".tooltip-header\"\r\n      defaultClassNameDragging=\"dragging\"\r\n      key={zIndex}>\r\n\r\n      <div className=\"tooltip-window\" style={{ ...position }}>\r\n        <TooltipHeader closeWindow={onCloseClick}>\r\n          {(header as ReactElement).props.children}\r\n        </TooltipHeader>\r\n        <TooltipBody>\r\n          {(body as ReactElement).props.children}\r\n        </TooltipBody>\r\n      </div>\r\n    </Draggable>\r\n  )\r\n\r\n}\r\n\r\nexport default TooltipWindow;","import React, { FC, ReactElement, useCallback, useEffect, useState } from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux'\r\n\r\nimport { fetchTopicMessage } from 'src/api/topicMessages';\r\n\r\nimport MsgText from 'src/pages/topic/row/msg_text'\r\nimport UserInfo from 'src/pages/topic/row/user_info';\r\n\r\nimport TooltipWindow from './tooltip_window'\r\nimport TooltipHeader from './tooltip_header'\r\nimport TooltipBody from './tooltip_body'\r\n\r\nimport './tooltip.css'\r\nimport { RootState } from 'src/store/store';\r\nimport { ITopicMessage } from 'src/store/topic';\r\nimport { ITooltipItem } from 'src/store/tooltips';\r\n\r\ntype IProps = {\r\n  tooltip: ITooltipItem,\r\n  info: any,\r\n  items: any,\r\n  item0: any\r\n}\r\n\r\nconst mapState = (state: RootState) => {\r\n\r\n  const {\r\n    info,\r\n    items,\r\n    item0\r\n  } = state.topic;\r\n\r\n  return {\r\n    info,\r\n    items,\r\n    item0\r\n  }\r\n}\r\n\r\nconst connector = connect(mapState);\r\nconst Tooltip: FC<ConnectedProps<typeof connector> & IProps> = (props): ReactElement | null => {\r\n\r\n  const { tooltip, info, items, item0 } = props;\r\n  const { keys } = tooltip;\r\n\r\n  let text = '';\r\n  let data: ITopicMessage | undefined;\r\n  if (keys.topicId === info.id) {\r\n    if (keys.number === 0)\r\n      data = item0;\r\n    else\r\n      data = items.find((item: ITopicMessage) => item.n === keys.number);\r\n\r\n    if (data)\r\n      text = data.text;\r\n  }\r\n\r\n  const [state, setState] = useState({\r\n    data,\r\n    text\r\n  })\r\n\r\n  const fetchData = useCallback(async () => {\r\n\r\n    if (state.data) return;\r\n\r\n    let data: ITopicMessage;\r\n    let text = '';\r\n\r\n    try {\r\n      data = await fetchTopicMessage(keys.topicId, keys.number);\r\n      if (data)\r\n        text = data.text;\r\n      else\r\n        text = `   ${keys.number}`;\r\n\r\n    } catch (e) {\r\n      text = (e as Error).message;\r\n    }\r\n\r\n    setState({ data, text });\r\n  }, [keys.topicId, keys.number, state.data])\r\n\r\n  useEffect(() => {\r\n      fetchData();\r\n  }, [fetchData])\r\n\r\n  if (!state.text)\r\n    return null;\r\n\r\n  let header: ReactElement;\r\n  if (!state.data) {\r\n    header = <b></b>\r\n  } else {\r\n    header = <UserInfo data={state.data} isAuthor={false} isYou={false} isTooltip={true} />\r\n  }\r\n\r\n  return (\r\n    <TooltipWindow tooltip={props.tooltip}>\r\n      <TooltipHeader>\r\n        {header}\r\n      </TooltipHeader>\r\n      <TooltipBody>\r\n        <MsgText\r\n          data={state.data}\r\n          n={state.data?.n}\r\n          vote={state.data?.vote}\r\n          html={state.text}\r\n          topicId={keys.topicId}\r\n          style={{ maxHeight: \"min(550px, 80vh)\", overflowY: \"auto\" }}\r\n        />\r\n      </TooltipBody>\r\n    </TooltipWindow>\r\n  )\r\n\r\n}\r\n\r\nexport default connector(Tooltip);","import { FC, ReactElement, useRef } from 'react'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\nimport { useOnClickOutside } from 'usehooks-ts'\r\n\r\nimport { useAppDispatch, RootState } from 'src/store/store';\r\nimport { tooltipsActions } from 'src/store/tooltips'\r\n\r\nimport Tooltip from './tooltip'\r\n\r\nconst mapState = (state: RootState) => {\r\n\r\n  const {\r\n    items\r\n  } = state.tooltips;\r\n\r\n  return { items }\r\n}\r\n\r\nconst connector = connect(mapState);\r\nconst TooltipsContainer: FC<ConnectedProps<typeof connector>> = ({ items }): ReactElement => {\r\n\r\n  const dispatch = useAppDispatch();\r\n  const ref = useRef(null);\r\n\r\n  const handleClickOutside = () => {\r\n    dispatch(tooltipsActions.closeAll());\r\n  };\r\n\r\n  useOnClickOutside(ref, handleClickOutside);\r\n  \r\n  return (\r\n    <div ref={ref}>\r\n      {items.map((item) => {\r\n        return (\r\n          <Tooltip key={item.hash} tooltip={item}>\r\n          </Tooltip>\r\n        )\r\n      }\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connector(TooltipsContainer);","import { ReactElement, useLayoutEffect } from 'react';\r\nimport { HashRouter } from 'react-router-dom'\r\nimport { useSelector } from 'react-redux'\r\n\r\nimport NavBar from './components/navigation/nav_bar';\r\nimport AppRoutes from './pages/approutes';\r\nimport NavBarFooter from './components/navigation/nav_bar_footer';\r\nimport TooltipsContainer from './components/tooltips/tooltips_container';\r\nimport { RootState } from './store/store';\r\n\r\n\r\nconst App = (): ReactElement => {\r\n\r\n  const theme = useSelector((state: RootState) => state.options.items.theme);\r\n\r\n  useLayoutEffect(() => {\r\n    document.body.setAttribute('theme', theme);\r\n  }, [theme])\r\n\r\n  return (\r\n    <HashRouter>\r\n      <NavBar />\r\n      <AppRoutes />\r\n      <NavBarFooter />\r\n      <TooltipsContainer />\r\n    </HashRouter>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React, { ReactElement } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux'\r\n\r\nimport './index.css';\r\nimport App from './App';\r\nimport store from 'src/store/store'\r\n\r\nconst Root = ({ store }): ReactElement => (\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>\r\n)\r\n\r\nReactDOM.render(<Root store={store} />,\r\n  document.getElementById('root'));","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkreact_mista\"] = self[\"webpackChunkreact_mista\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [216], function() { return __webpack_require__(1384); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_useState","useState","_useState2","_slicedToArray","searchEngine","setSearchEngine","_useState3","_useState4","text","setText","doSearch","url","concat","window","open","_jsxs","InputGroup","size","children","DropdownButton","id","title","style","marginRight","className","variant","onSelect","eventKey","_jsx","Dropdown","Item","FormControl","type","placeholder","paddingRight","onKeyPress","e","key","onChange","target","value","Text","marginLeft","marginTop","marginBottom","cursor","onClick","zIndex","parseJSON","JSON","parse","replace","console","error","message","log","getMaxPage","count","Math","min","ceil","childrenToText","map","displayName","props","number","domain","localStorage","getItem","urlTopicsList","urlTopicInfo","urlTopicMessages","urlLogin","urlLogout","urlCookies","urlSections","urlNewMessage","urlNewTopic","paramsToString","paramsPrefix","params","searchParams","URLSearchParams","Reflect","get","undefined","append","str","toString","length","fetchJsonpAndGetJson","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","options","fullUrl","response","responseJson","json","wrap","_context2","prev","next","fetchJsonp","sent","utils","abrupt","stop","_x2","_x3","_x4","apply","arguments","fetchAndGetJson","_ref3","_callee3","init","_context3","mode","credentials","fetch","_x5","_x6","_x7","convertRequest","request","page","itemsCount","itemsPerPage","topics","String","section_short_name","section","forum","user_id","userId","mytopics","myTopics","convertResponse","sect1","sectionCode","sect2","author","user0","lastUser","user","created","updated","utime","answ","closed","down","pinned","isVoting","is_voting","showPreview","fetchTopicsList","_x","_fetchTopicsList","_callee","list","_context","getTopicsList","createAsyncThunk","_ref","getState","state","items","topicsPerPage","API","slice","getTopicsListIfNeeded","dispatch","topicsList","status","shouldFetch","createSlice","name","initialState","reducers","clear","togglePreview","_ref4","payload","item","find","topicId","previewMsgNumber","msgNumber","extraReducers","builder","addCase","pending","fulfilled","_ref5","rejected","_ref6","topicsListActions","actions","reducer","location","useLocation","useDispatch","search","Navbar","bg","expand","fixed","Brand","as","Link","to","Toggle","Collapse","Nav","link","i","active","href","Form","Search","parseInt","n","time","vote","fetchTopicMessages","_fetchTopicMessages","fetchTopicMessage","_fetchTopicMessage","from","voting","x","select","result","sectionId","authorId","user_name","updated_name","answers_count","deleted","fetchTopicInfo","_fetchTopicInfo","info","defaultInfo","getTopic","item0","rejectWithValue","_item0","_items","first","_first","last","_items2","t0","t1","getNewMessages","topic","getNewMessagesIfNeeded","_state$topic$info","_ref7","_ref8","_ref9","_ref10","topicActions","code","shortn","fulln","fetchSections","getSections","getSectionsIfNeeded","sections","shouldGetSections","tree","getKey","reduce","previous","currentItem","group","push","defaultOptionsState","voteColors","theme","autoRefreshTopicsList","autoRefreshTopicsListInterval","autoRefreshTopic","autoRefreshTopicInterval","showTooltips","tooltipDelay","showTooltipOnPostLink","showYoutubeVideoTitle","replaceCatalogMista","fixBrokenLinks","readOption","defaultValue","readAllOptions","read","save","setItem","optionsActions","fetchLogin","method","body","username","user_password","password","headers","redirect","fetchLogout","session","Number","userName","userHash","user_hash","lastError","last_error","fetchCookies","_fetchCookies","checkLogin","doLogin","doLogout","shouldLogin","login","logged","show","hash","stringify","keys","index","findIndex","coords","close","filter","val","closeAll","tooltipsActions","tooltips","fetchNewTopic","postNewTopic","fetchParams","message_text","topic_text","subject","target_section","target_forum","toLowerCase","action","rnd","round","random","votingItems","changeSubject","changeText","changeSection","showVoting","setError","newTopicActions","newTopic","fetchNewMessage","topic_id","postNewMessageStart","createAction","postNewMessageComplete","newMessageText","addMessageText","newMessage","createReducer","isFetching","store","configureStore","devTools","process","useAppDispatch","CustomToggle","React","ref","preventDefault","float","event","onLogout","Menu","Divider","connect","setUsername","setPassword","flexWrap","flex","maxLength","autoComplete","Button","doLoginIfNeeded","margin","rel","dangerouslySetInnerHTML","__html","elem","useEffect","LoggedUser","LoginForm","_Fragment","ErrorElem","_state$sections","selected","sectionsElem","label","Select","currentTarget","arr","navigate","useNavigate","queryString","Login","Sections","pages","maxPage","data","classes","classNames","sectionHref","substring","overflowWrap","Pages","expanded","connector","formatTime","td","d","Date","getDate","getMonth","getFullYear","today","dateFormat","setTime","updateTime","useCallback","msg","countOnClick","PreviewLink","TopicNameCell","display","color","width","textAlign","last20","pathName","pathname","currentPage","locationParams","set","Pagination","formRef","onShowVotingChange","textAreaRef","useRef","handleShowVotingChange","checked","handleChange","cols","rows","onKeyUp","current","ctrlKey","dispatchEvent","Event","cancelable","bubbles","ButtonGroup","textAreaNode","start","selectionStart","end","selectionEnd","oldText","len","replacement","newText","disabled","Check","_newTopic$section","onSubmitSuccess","currentSection","setSection","Array","fill","votes","setVotes","onVoteTextChange","votesCopy","onSubjectChange","onTextChange","this_onSubmitSuccess","groupsElem","votingOptions","Control","onSubmit","onSuccess","shouldPost","postNewTopicIfNeeded","TextEditor","FormGroup","onFirst","onPrev","onNext","onLast","scrolledToHash","","","","keywords","Set","split","","","","","","","1","","","","","trim","","","","","isKeyword","token","has","1","","","","","","","","","","","charAt","isNaN","_step","_iterator","_createForOfIteratorHelper","s","done","err","f","join","hidden","setHidden","newtext","highlight","prepareText","buttonText","linesCount","buttonShow","preStyle","overflow","height","_state$topic","_Component","_inherits","LinkToPost","_super","_createSuper","_this","_classCallCheck","call","timer","onMouseOver","persist","setTimeout","showToolTip","stopPropagation","clearTimeout","onMouseOut","_this$props","pageX","y","pageY","_this$props2","_createClass","this","setState","_this2","startsWith","then","_this$props3","pageParam","_objectSpread","Component","getVideoId","fullHref","URL","hostname","getVideoParams","videoId","apiKey","apiUrl","hrefName","snippet","setHrefName","setTitle","isMounted","run","_state$options$items","parentText","newHref","query","LinkToUser","Object","isMistaCatalog","class","escapedHref","regExp","RegExp","match","fixBrokenLink","YoutubeLink","total","colors","img","percent","textDecoration","src","maxWwidth","alt","max","_toConsumableArray","VoteItem","html","initialVoteText","voteText","setVoteText","getVoteText","_info","voteChart","showVote","VoteChart","processedHtml","res","txt","substr","processCode1C","processLinksToPosts","processText","componentsMap","Code","a","CustomLink","textComponent","activeHtml","Vote","imgDisplay","setImgDisplay","isAuthor","isYou","isTooltip","dataStr","imgElem","timeElem","userClassNames","innerWidth","onLoad","onError","document","getElementById","scrollTo","offsetTop","loggedUserId","onDataLoaded","setData","getData","_data","UserInfo","MsgText","overflowY","initialMsgNumber","deltaX","setDeltaX","setDispaly","_useState5","_useState6","onClickLast","swipeable","useSwipeable","onSwiping","eventData","abs","onSwiped","dir","delta","onContentLoaded","transform","flexDirection","PreviewButtons","order","PreviewContent","updateTopicsList","Row","TopicPreview","Header","Error","position","top","letterSpacing","NewTopic","yandexUrl","encodeURIComponent","lineHeight","lastUpdated","showUpdateButton","votingElem","setVoting","afterSubmit","_loop","setVotingOption","voting_select","postNewMessage","locationPage","isLastPageRef","updateNewMessages","htmltext","DOMParser","parseFromString","firstChild","innerText","getTopicIfNeeded","setInterval","clearInterval","nodeHash","TopicInfo","Footer","NewMessage","values","oneLine","onChangeValue","descr","inline","postfix","htmlFor","formTabs","tabName","formParams","closeForm","assign","tabs","tab","_step2","row","rowElem","_iterator2","RadioOption","fontWeight","StringOption","maxWidth","Tab","Container","Routes","Route","path","element","TopicsList","Topic","Options","closeWindow","onTouchEnd","onScroll","startX","onTouchStart","nativeEvent","changedTouches","clientX","endX","axis","tooltip","left","_React$Children$toArr","toArray","_React$Children$toArr2","header","Draggable","handle","defaultClassNameDragging","TooltipHeader","TooltipBody","_state$data","_state$data2","fetchData","TooltipWindow","maxHeight","useOnClickOutside","Tooltip","useSelector","useLayoutEffect","setAttribute","HashRouter","NavBar","AppRoutes","NavBarFooter","TooltipsContainer","Root","Provider","App","ReactDOM","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","j","every","splice","r","getter","__esModule","leafPrototypes","getProto","getPrototypeOf","obj","__proto__","t","ns","create","def","indexOf","getOwnPropertyNames","forEach","definition","o","defineProperty","enumerable","g","globalThis","Function","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}